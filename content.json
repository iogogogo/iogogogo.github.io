{"meta":{"title":"ÈòøÁâõÁöÑÂçöÂÆ¢","subtitle":"ÈòøÁâõÁöÑÂçöÂÆ¢","description":null,"author":"ÈòøÁâõ","url":"http://iogogogo.github.io","root":"/"},"pages":[{"title":"ÂàÜÁ±ª","date":"2020-01-01T03:40:32.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"categories/index.html","permalink":"http://iogogogo.github.io/categories/index.html","excerpt":"","text":""},{"title":"ÂÖ≥‰∫é","date":"2020-01-01T03:41:12.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"about/index.html","permalink":"http://iogogogo.github.io/about/index.html","excerpt":"","text":""},{"title":"ÁïôË®ÄÊùø","date":"2020-01-01T03:41:46.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"contact/index.html","permalink":"http://iogogogo.github.io/contact/index.html","excerpt":"","text":""},{"title":"ÂèãÊÉÖÈìæÊé•","date":"2020-01-01T03:41:35.000Z","updated":"2024-07-01T12:30:37.382Z","comments":true,"path":"friends/index.html","permalink":"http://iogogogo.github.io/friends/index.html","excerpt":"","text":""},{"title":"Ê†áÁ≠æ","date":"2020-01-01T03:42:26.000Z","updated":"2024-07-01T12:30:37.458Z","comments":true,"path":"tags/index.html","permalink":"http://iogogogo.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"GitÈÖçÁΩÆÂ§ö‰∏™SSH-Key","slug":"ssh-key-multiple","date":"2023-03-12T07:49:31.000Z","updated":"2024-07-01T12:39:43.061Z","comments":true,"path":"2023/03/12/ssh-key-multiple/","link":"","permalink":"http://iogogogo.github.io/2023/03/12/ssh-key-multiple/","excerpt":"","text":"ËÉåÊôØÂΩìÊúâÂ§ö‰∏™gitË¥¶Âè∑Êó∂ÔºåÊØîÂ¶ÇÔºö ‰∏Ä‰∏™giteeÔºåÁî®‰∫éÂÖ¨Âè∏ÂÜÖÈÉ®ÁöÑÂ∑•‰ΩúÂºÄÂèëÔºõ ‰∏Ä‰∏™githubÔºåÁî®‰∫éËá™Â∑±ËøõË°å‰∏Ä‰∫õÂºÄÂèëÊ¥ªÂä®Ôºõ Ëß£ÂÜ≥ÊñπÊ≥ïÁîüÊàê‰∏Ä‰∏™ÂÖ¨Âè∏Áî®ÁöÑSSH-Key ssh-keygen -t rsa -C 'xxxxx@company.com' -f ~/.ssh/gitee_id_rsa ÁîüÊàê‰∏Ä‰∏™githubÁî®ÁöÑSSH-Key ssh-keygen -t rsa -C 'xxxxx@qq.com' -f ~/.ssh/github_id_rsa Âú® ~/.ssh ÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™configÊñá‰ª∂ÔºåÊ∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπÔºàÂÖ∂‰∏≠HostÂíåHostNameÂ°´ÂÜôgitÊúçÂä°Âô®ÁöÑÂüüÂêçÔºåIdentityFileÊåáÂÆöÁßÅÈí•ÁöÑË∑ØÂæÑÔºâ # gitee Host gitee.com HostName gitee.com PreferredAuthentications publickey IdentityFile ~/.ssh/gitee_id_rsa # github Host github.com HostName github.com PreferredAuthentications publickey IdentityFile ~/.ssh/github_id_rsa Áî®sshÂëΩ‰ª§ÂàÜÂà´ÊµãËØï ssh -T git@gitee.com ssh -T git@github.com ËøôÈáå‰ª•gitee‰∏∫‰æãÔºåÊàêÂäüÁöÑËØù‰ºöËøîÂõû‰ª•‰∏ãÂÜÖÂÆπ ‚ûú ~ ssh -T git@gitee.com Hi xxxx! You've successfully authenticated, but GITEE.COM does not provide shell access. FAQÊâßË°åÊµãËØïÂëΩ‰ª§Êó∂ÔºåÂá∫Áé∞ÈîôËØØÔºöBad owner or permissions on /home/xx/.ssh/config Ëß£ÂÜ≥ÊñπÊ°àÔºöchmod 600 ~/.ssh/config","categories":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/tags/Git/"}]},{"title":"mkdocsÂÆâË£Ö‰∏éÈÖçÁΩÆ","slug":"blog-mkdocs-install-configure","date":"2023-03-12T04:30:02.000Z","updated":"2024-07-01T12:30:37.355Z","comments":true,"path":"2023/03/12/blog-mkdocs-install-configure/","link":"","permalink":"http://iogogogo.github.io/2023/03/12/blog-mkdocs-install-configure/","excerpt":"","text":"‰∏äÁØáÊñáÊ°£‰ªãÁªç‰∫ÜhexoÁöÑÂª∫Á´ô‰∏éÂü∫Á°ÄÈÖçÁΩÆÔºåhexoÈÄÇÂêàÂÅöÂçöÂÆ¢Êó•ÂøóÂπ≥Âè∞Ôºå‰∏çÈÄÇÂêàÂÅöÂ∏ÆÂä©Á≥ªÁªü„ÄÇÊâÄ‰ª•ÊúÄÂêéÂèàÁúã‰∫ÜmkdocsÔºåÊúÄÂêéÁªèËøáËØÑÂÆ°ÈÄâÊã©‰∫Ümkdocs‰Ωú‰∏∫Â∏ÆÂä©Á≥ªÁªüÁöÑÂÜô‰ΩúÂπ≥Âè∞„ÄÇ ‰ªÄ‰πàÊòØMkDocsMkDocs ÊòØ‰∏Ä‰∏™Âü∫‰∫éPythonÊûÑÂª∫ÁöÑÂÜÖÂÆπÁÆ°ÁêÜÂπ≥Âè∞ÔºåÂÆÉÊã•Êúâ‰∏∞ÂØåÁöÑ‰∏ªÈ¢òÔºåÂÜÖÂÆπËá™ÂÆö‰πâÊÄß‰πüÂº∫Â§ßÔºåÈùûÂ∏∏ÈÄÇÂêàÂÅö‰∏Ä‰∏™Â∏ÆÂä©Á≥ªÁªüÁöÑÂª∫Á´ôÂ∑•ÂÖ∑ÔºåÂÖ∂‰∏≠mkdocsÁöÑÂÆòÁΩë‰πüÊòØÂü∫‰∫émkdocsÂéªÂÆûÁé∞ÁöÑ„ÄÇ ‰ΩøÁî®MkDocsÂª∫Á´ô‰ΩøÁî®mkdocsÂª∫Á´ôÔºå‰∏ÄÂÖ±Êúâ‰ª•‰∏ãÂá†‰∏™Ê≠•È™§ ÂÆâË£ÖPythonÁéØÂ¢É ÂÆâË£ÖmkdocsÁõ∏ÂÖ≥‰æùËµñ ÈÖçÁΩÆmkdocsÂü∫Êú¨‰ø°ÊÅØ ÁºñËØëËøêË°å ÂÆâË£ÖPythonÁéØÂ¢ÉmkdocsÊîØÊåÅPython2.6+ÁöÑÁâàÊú¨Ôºå‰∏∫‰∫ÜÊñπ‰æøÁÆ°ÁêÜ‰æùËµñÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®AnacondaËøõË°åÂÆâË£Ö„ÄÇ ÂÖ∑‰ΩìÂÆâË£Ö‰∏çÂú®ËµòËø∞ÔºåÂü∫Êú¨Â∞±ÊòØ‰∏ã‰∏ÄÊ≠•‰∫§‰∫íÂºèÂÆâË£Ö WindowsÔºö‰∏ãËΩΩexeÊñá‰ª∂ÔºåÂèåÂáª‰∏ã‰∏ÄÊ≠•ÂÆâË£Ö macOSÔºö‰∏ãËΩΩpkgÊñá‰ª∂ÔºåÂèåÂáª‰∏ã‰∏ÄÊ≠•ÂÆâË£Ö LinuxÔºöÊâßË°åÂÆâË£ÖËÑöÊú¨ sh Anaconda3-xxxx.xx-Linux-x86_64.sh ‰∏∫‰∫ÜÂä†ÈÄüanacondaÁöÑ‰∏ãËΩΩÔºåÊï¥ÁêÜ‰∫Ü‰ª•‰∏ãÂá†‰∏™anacondaÁöÑÈïúÂÉèÁΩëÁ´ôÔºåÊñπ‰æø‰∏ãËΩΩÂÆâË£Ö Ê∏ÖÂçéÂ§ßÂ≠¶ÂºÄÊ∫êËΩØ‰ª∂ÈïúÂÉèÁ´ôÔºöhttps://mirrors.bfsu.edu.cn/anaconda/archive/ Âåó‰∫¨Â§ñÂõΩËØ≠Â§ßÂ≠¶ÂºÄÊ∫êËΩØ‰ª∂ÈïúÂÉèÁ´ôÔºöhttps://mirrors.bfsu.edu.cn/anaconda/archive/ ÂÆâË£ÖÂ•ΩPythonÂêéÂèØ‰ª•Êü•Áúã‰∏Ä‰∏ãPythonÁöÑÁâàÊú¨‰∏éÂØπÂ∫îÊ≥ïÂèëË°åÊñπ # python ÁâàÊú¨ÊòØ3.9.13 ‚ûú ~ python -V Python 3.9.13 ‚ûú ~ # ÂØπÂ∫îÁöÑÂèëË°åÂïÜÊòØAnaconda ‚ûú ~ python Python 3.9.13 (main, Aug 25 2022, 18:29:29) [Clang 12.0.0 ] :: Anaconda, Inc. on darwin Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> ÂÆâË£ÖmkdocsÁõ∏ÂÖ≥ÂåÖ# ËøôÈáå‰∏∫‰∫ÜÂä†ÈÄü‰∏ãËΩΩÔºå‰ΩøÁî®‰∫ÜË±ÜÁì£ÁöÑpipÊ∫ê pip install --trusted-host pypi.douban.com -i http://pypi.douban.com/simple/ mkdocs ÂÆâË£ÖÂ•Ω‰πãÂêéÂèØ‰ª•È™åËØÅ‰∏Ä‰∏ãÊòØÂê¶ÂÆâË£ÖÊàêÂäüÔºåÊü•Áúã‰∏Ä‰∏ãmkdocsÁöÑÁâàÊú¨ ‚ûú ~ mkdocs -V mkdocs, version 1.4.2 from /opt/app/anaconda3/lib/python3.9/site-packages/mkdocs (Python 3.9) ‰ΩøÁî®mkdocsÊê≠Âª∫Á¨¨‰∏Ä‰∏™ÂÜÖÂÆπÁΩëÁ´ô Âª∫Á´ôÂëΩ‰ª§ mkdocs new mkdocs-blog && cd mkdocs-blog ÂØπÂ∫îÁöÑÊó•ÂøóËæìÂá∫ ‚ûú ~ mkdocs new mkdocs-blog && cd mkdocs-blog INFO - Creating project directory: mkdocs-blog INFO - Writing config file: mkdocs-blog/mkdocs.yml INFO - Writing initial docs: mkdocs-blog/docs/index.md ‚ûú mkdocs-blog ll total 8 drwxr-xr-x 3 tao.zeng staff 96B 3 12 18:16 docs -rw-r--r-- 1 tao.zeng staff 19B 3 12 18:16 mkdocs.yml ËøêË°åmkdocsÁΩëÁ´ô mkdocs serve Âú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄÔºåÂè™Ë¶ÅÁúãÂà∞Ëøô‰∏™È¶ñÈ°µÔºåÂ∞±ËØÅÊòéÊàë‰ª¨ÁöÑmkdocsÂ∑≤ÁªèÊ≠£Â∏∏ËøêË°å„ÄÇ mkdocs‰∏ªÈ¢òÈÖçÁΩÆmkdocsÊúâÊØîËæÉ‰∏∞ÂØåÁöÑ‰∏ªÈ¢òÔºåÊàë‰∏™‰∫∫ÊØîËæÉÂÄæÂêë‰∫éMaterial for MkDocs (squidfunk.github.io)Ôºå‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∏ãËøô‰∏™‰∏ªÈ¢òÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇ material-mkdocsÊòØ‰∏Ä‰∏™Âü∫‰∫éGoogle material designËÆæËÆ°ÁöÑ‰∏ÄÊ¨æ‰∏ªÈ¢òÔºåÈ£éÊ†ºÊØîËæÉÊ∏ÖÊñ∞„ÄÇ ‰ΩøÁî®material-mkdocs‰∏ªÈ¢ò‰πüÂæàÁÆÄÂçïÔºåÈúÄË¶Å‰ΩøÁî®pipËøõË°åÂÆâË£ÖÔºåËøôÈáå‰πü‰ΩøÁî®‰∫ÜË±ÜÁì£Ê∫ê pip install --trusted-host pypi.douban.com -i http://pypi.douban.com/simple/ mkdocs-material ÂÆâË£ÖÂÆåÊàê‰πãÂêéÂú® mkdocs.yml ‰∏≠ÈÖçÁΩÆ‰∏ªÈ¢ò theme: # ÈÖçÁΩÆ‰∏ªÈ¢ò name: material # ÈÖçÁΩÆËØ≠Ë®Ä‰∏∫‰∏≠ÊñáÔºåÊêúÁ¥¢Ê°ÜsearchÂ∞±‰ºöÂèòÊàêÊêúÁ¥¢ language: zh ÈáçÂêØmkdocsÊúçÂä°ÔºåÂç≥ÂèØÁúãÂà∞‰∏ªÈ¢òÂ∑≤ÁªèÂèëÁîüÂèòÂåñ Êõ¥Â§öÂÖ≥‰∫ématerial-mkdocsÁöÑÈÖçÁΩÆ‰∏é‰ªñÊîØÊåÅÁöÑmarkdownËØ≠Ê≥ïÔºåËØ∑Êü•ÁúãÊàëÁöÑÂè¶Â§ñ‰∏Ä‰∏™Âü∫‰∫émkdocsÁöÑÂ∏ÆÂä©ÊñáÊ°£ÔºöMaterial for MkDocs - MarkdownËØ≠Ê≥ïËØ¶Ëß£(Âü∫‰∫émkdocs-material) (iogogogo.github.io) ÂèëÂ∏ÉÂà∞GitHub-PagesGitHub pagesÊòØ‰∏Ä‰∏™githubÁöÑÈùôÊÄÅËµÑÊ∫êÊâòÁÆ°ÊúçÂä°ÔºåÂè™ÈúÄË¶ÅÊääÊàë‰ª¨ÂÜôÂ•ΩÁöÑÁ®ãÂ∫èËøõË°åÊâìÂåÖ‰∏ä‰º†Âà∞githubÔºågithubÂ∞±‰ºöÂ∏ÆÊàë‰ª¨ËøõË°å‰ª£ÁêÜËÆøÈóÆÔºåhttps://{username}.github.io/{repoName} ‰ΩøÁî®mkdocsÂèëÂ∏ÉÂà∞github pagesÂè™ÈúÄË¶ÅÂá†Ê≠•ÁÆÄÂçïÁöÑÈÖçÁΩÆÂç≥ÂèØÂÆåÊàêÔºåÂú® mkdocs.ymlÊ∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπ # Project information site_name: MarkdownËØ≠Ê≥ïËØ¶Ëß£(Âü∫‰∫émkdocs-material) # ÊúÄÁªàËÆøÈóÆÁöÑÂú∞ÂùÄÔºåËøô‰∏™ÂæàÈáçË¶ÅÔºåmkdocs‰ºöËá™Âä®ÂàõÂª∫‰∏Ä‰∏™gh-pagesÁöÑÂàÜÊîØËøõË°å‰ª£Á†ÅÊâòÁÆ°ÔºårepoNmae‰πüÂÖ≥Á≥ªÂà∞Êàë‰ª¨ËÆøÈóÆÁöÑcontextPath site_url: https://iogogogo.github.io/markdown-with-mkdocs-material site_author: ÊõæÊ∂õ site_description: mkdocs-materialÊîØÊåÅÁöÑmarkdownËØ≠Ê≥ïÔºåÂåÖÊã¨‰º†ÁªüËØ≠Ê≥ïÂíåÊâ©Â±ïËØ≠Ê≥ï‰ªãÁªç„ÄÇ # Repository repo_name: iogogogo/markdown-with-mkdocs-material # Ê∫êÁ†ÅgitÂú∞ÂùÄ repo_url: https://github.com/iogogogo/markdown-with-mkdocs-material ÂèëÂ∏ÉÂà∞githubÔºåÁ≠âÂæÖÂá†ÂàÜÈíüÂ∞±ÂèØ‰ª•ÊâìÂºÄÈ°µÈù¢ËøõË°åÊü•Áúã ËøôÈáå‰ª•markdown-with-mkdocs-materialÁ§∫‰æãÔºåËÆøÈóÆÔºöhttps://iogogogo.github.io/markdown-with-mkdocs-material/ mkdocs gh-deploy --clean ÂèëÂ∏ÉÂà∞ÊúçÂä°Âô®mkdocs‰πüÊèê‰æõÈùôÊÄÅËµÑÊ∫êÂåÖÔºåÂèØ‰ª•Â∞ÜÈùôÊÄÅËµÑÊ∫êÂåÖÈÄöËøáÊúçÂä°Âô®ËøõË°å‰ª£ÁêÜËÆøÈóÆÔºåÊØîÂ¶ÇÈÄöËøáNginxËøõË°å‰ª£ÁêÜ ÊâßË°åÊâìÂåÖÂëΩ‰ª§Ôºå‰ºöÁîüÊàê‰∏Ä‰∏™siteÊñá‰ª∂Â§πÔºåËøô‰∏™Êñá‰ª∂Â§πÂ∞±ÊòØÂâçÁ´ØÈùôÊÄÅËµÑÊ∫ê mkdocs build --clean ‰ΩøÁî®NginxËøõË°åÈùôÊÄÅËµÑÊ∫ê‰ª£ÁêÜÔºåNginxÂèÇËÄÉÈÖçÁΩÆ server { # ÂÆ¢Êà∑Á´ØËÆøÈóÆÁ´ØÂè£ listen 8000; # ÂÆ¢Êà∑Á´ØËÆøÈóÆÂüüÂêç server_name 127.0.0.1; # ÈùôÊÄÅËµÑÊ∫êÊ†πÁõÆÂΩï root /Users/xxx/share/opensource/mkdocs-blog/site; gzip_types text/plain application/javascript text/css image/svg+xml; gzip_proxied no-cache no-store private expired auth; gzip_static on; #brotli_static on; gunzip on; location = / { index index.html; } } ÊÄªÁªìmkdocsÊï¥‰ΩìÊù•ËØ¥ÊØîhexoÊõ¥Âä†ÁÆÄÂçïÔºå‰πüÊõ¥Âä†ÈÄÇÂêàÂÅöÂ∏ÆÂä©Á±ªÁΩëÁ´ôÁöÑÂª∫Á´ôÂ∑•ÂÖ∑„ÄÇ ‰∏çËøá‰πüÊúâ‰∏™ÊòéÊòæÁöÑÁº∫ÁÇπÂ∞±ÊòØÁõÆÂΩï‰∏çÊîØÊåÅËá™Âä®ÂàõÂª∫ÔºåÈúÄË¶ÅÊâãÂä®ËøõË°åÁª¥Êä§Ôºå‰ΩÜÊòØÂØπ‰∫é‰∏™‰∫∫Êù•ËØ¥ÔºåËøô‰∏™‰∏çÁÆóÊòØÂ§™‰∏•ÈáçÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫ÂÜôÁöÑÊñáÊ°£ÈúÄË¶ÅÊîæÂú®Êüê‰∏™ÁõÆÂΩï‰∏ãÔºåËá™Â∑±Â∫îËØ•ÊòØÊ∏ÖÊ•öÁöÑÔºåÂè™ÊòØÂÅö‰∫Ü‰∏Ä‰∏™ÈÖçÁΩÆËÄåÂ∑≤„ÄÇ Âú®‰∏ã‰∏ÄÁØáÊñáÁ´†ÊàëÂ∞ÜÊåâÁÖßËá™Â∑±ÁöÑÁêÜËß£ÔºåÊù•ËÆ≤ËÆ≤Â¶ÇÊûúÊòØÂõ¢ÈòüÂÜô‰ΩúÔºå‰ΩøÁî®mkdocsÂ∫îËØ•ÊÄé‰πàËøõË°åÂçè‰ΩúÔºå‰ª•ÂèäÈúÄË¶ÅÊ≥®ÊÑèÁöÑÁÇπÔºåÊï¨ËØ∑ÊúüÂæÖ„ÄÇ","categories":[{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/categories/ÂçöÂÆ¢ÈÄâÂûã/"}],"tags":[{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/tags/ÂçöÂÆ¢ÈÄâÂûã/"}]},{"title":"hexoÂÆâË£Ö‰∏éÈÖçÁΩÆ","slug":"blog-hexo-install-configure","date":"2023-03-11T10:30:19.000Z","updated":"2024-07-01T12:30:37.346Z","comments":true,"path":"2023/03/11/blog-hexo-install-configure/","link":"","permalink":"http://iogogogo.github.io/2023/03/11/blog-hexo-install-configure/","excerpt":"","text":"ÊúÄËøë‰∫ßÂìÅÂú®ÂÅöÂ∏ÆÂä©ÊâãÂÜåÁöÑÁºñÂÜôÔºåÂú®ÊäÄÊúØÈÄâÂûã‰∏äÊúâÂá†‰∏™Â§ßÊ¶ÇÁöÑÊñπÂêëÔºåÂÄæÂêë‰∫éÂºÄÊ∫êÊàñËÄÖËá™Âª∫Êê≠Âª∫‰∏ÄÂ•óÁ±ª‰ººÁöÑÂÜô‰ΩúÂπ≥Âè∞ÔºåÁªèËøá‰∏ÄÂë®Â∑¶Âè≥ÁöÑË∞ÉÁ†îÔºåÊâæ‰∫ÜÂá†‰∏™ÂºÄÊ∫ê‰∫ßÂìÅÂíå‰∫éÂâçÁ´ØÂºÄÂèëÊ≤üÈÄöÔºåÊúÄÁªàÈÄâÊã©‰ΩøÁî®ÂºÄÊ∫êÁöÑÂ∑•ÂÖ∑ËøõË°åÂª∫Á´ôÂÜô‰ΩúÔºåNginx‰ª£ÁêÜÂ∏ÆÂä©ÈùôÊÄÅËµÑÊ∫êÂ±ïÁ§∫„ÄÇ ÂÖ∂‰∏≠Ê†∏ÂøÉÁöÑËØâÊ±ÇÊúâÂá†‰∏™ ÂÜô‰ΩúÁÆÄÂçïÔºåÂÆπÊòì‰∏äÊâã ÂèØ‰ª•ÊîØÊåÅÂçè‰ΩúÔºåÂõ†‰∏∫Êàë‰ª¨ÂÜô‰ΩúÁöÑ‰∫∫ÊØîËæÉÂ§ö ‰∏çË¶ÅÊúâÊï∞ÊçÆÂ∫ìÔºåÂõ†‰∏∫ÊúâÊï∞ÊçÆÂ∫ìÂ∞±ÁâµÊâØÂà∞ÂêéÁ´ØÊúçÂä°ÊØîËæÉÈ∫ªÁÉ¶ ÊúÄÁªàÊâæÁöÑÂºÄÊ∫êÂª∫Á´ôÂ∑•ÂÖ∑‰∏ªË¶ÅÊúâÔºöHexo„ÄÅGitBook„ÄÅMkDocs„ÄÅWordPress„ÄÇ ÊØè‰∏Ä‰∏™Â∑•ÂÖ∑ÈÉΩÂæà‰ºòÁßÄÔºå‰∏ãÈù¢ÂÅö‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÂØπÊØîÔºàÂü∫‰∫é‰∏™‰∫∫ÁêÜËß£Ôºâ Â∑•ÂÖ∑ ÁâπÁÇπ ‰ºòÁÇπ Áº∫ÁÇπ hexo Âü∫‰∫énodejsÔºåÊ∏≤ÊüìMarkdownÊñá‰ª∂Â±ïÁ§∫ ÂÜô‰ΩúÁÆÄÂçïÔºåÁºñËØëÂíåÂìçÂ∫îÈÄüÂ∫¶Âø´ Êó†ÊòéÊòæÁü≠ÊùøÔºåÂèØËÉΩÂ∞±ÊòØnodeÁâàÊú¨ÂùëÊØîËæÉÂ§ö gitbook Âü∫‰∫énodejsÔºåÊ∏≤ÊüìMarkdownÊñá‰ª∂Â±ïÁ§∫ ÂÜô‰ΩúÁÆÄÂçï ÁõÆÂΩïÈúÄË¶ÅËá™Â∑±Áª¥Êä§„ÄÅnodeÁâàÊú¨ÂùëÊØîËæÉÂ§ö„ÄÅÂÆòÁΩë‰∏çÁª¥Êä§ÂÅúÊõ¥ mkdocs Âü∫‰∫éPythonÔºåÊ∏≤ÊüìMarkdownÊñá‰ª∂Â±ïÁ§∫ ÂÜô‰ΩúÁÆÄÂçïÔºåÁºñËØëÂíåÂìçÂ∫îÈÄüÂ∫¶Âø´ ÁõÆÂΩïÈúÄË¶ÅËá™Â∑±Áª¥Êä§ WordPress - - ÈúÄË¶ÅÊï∞ÊçÆÂ∫ì ‰∏ãÈù¢ÂÖà‰ªãÁªç‰∏Ä‰∏ãhexo ‰ªÄ‰πàÊòØhexoÂÆòÁΩëÂú∞ÂùÄÔºöhttps://hexo.io/zh-cn/ Hexo ÊòØ‰∏Ä‰∏™Âø´ÈÄü„ÄÅÁÆÄÊ¥Å‰∏îÈ´òÊïàÁöÑÂçöÂÆ¢Ê°ÜÊû∂„ÄÇHexo ‰ΩøÁî® MarkdownÔºàÊàñÂÖ∂‰ªñÊ∏≤ÊüìÂºïÊìéÔºâËß£ÊûêÊñáÁ´†ÔºåÂú®Âá†ÁßíÂÜÖÔºåÂç≥ÂèØÂà©Áî®Èùì‰∏ΩÁöÑ‰∏ªÈ¢òÁîüÊàêÈùôÊÄÅÁΩëÈ°µ„ÄÇ ÈÄÇÁî®Âú∫ÊôØ hexoÂæà‰ºòÁßÄÔºå‰Ωú‰∏∫‰∏™‰∫∫ÂÜô‰ΩúÂçöÂÆ¢Â∫îËØ•ÁÆóÊòØÊØîËæÉÊñπ‰æøÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÁõÆÂâçÊàëÁöÑÂçöÂÆ¢Â∞±ÊòØÂü∫‰∫éhexoÊê≠Âª∫ÁöÑ ‰ΩÜÊòØhexo‰∏çÂ§™ÈÄÇÂêàÂ∏ÆÂä©Á±ªÊñáÊ°£ÁΩëÁ´ôÁöÑÊûÑÂª∫ ËèúÂçïÁªìÊûÑÂçï‰∏ÄÔºåÂèØÂÆöÂà∂ÊÄß‰∏çÂº∫ Âçè‰Ωú‰∏çÊñπ‰æøÔºåËôΩÁÑ∂ÂèØ‰ª•‰æùËµñgitÔºå‰ΩÜ‰∏çÊòØÊâÄÊúâ‰∫∫ÈÉΩ‰ºö‰ΩøÁî®gitÂ∑•ÂÖ∑ ÂõæÁâáÂ§ÑÁêÜ‰∏çÂèãÂ•ΩÔºåÊúÄÂêéÊâæÂà∞‰∫ÜËß£ÂÜ≥ÂäûÊ≥ïÔºåÊâÄ‰ª•Ëøô‰∏™‰∏çÁÆóÊòØÁº∫ÁÇπ‰∫Ü„ÄÇ ‰ΩøÁî®hexoÂª∫Á´ôhexoÂÆâË£Öhexo‰æùËµñ‰∫énodejsÔºåÊâÄ‰ª•Âú®ÊåâÁÖßhexo‰πãÂâçÈúÄË¶ÅÂÆâË£ÖnodejsÔºå‰ªéNode.js (nodejs.org)ÂÆòÁΩë‰∏ãËΩΩÂØπÂ∫îÁöÑÂÆâË£ÖÂåÖÔºåÂÆâË£ÖÂç≥ÂèØ„ÄÇ MacÔºö‰∏ãËΩΩpkgÊñá‰ª∂ÔºåÂèåÂáª‰∏ã‰∏ÄÊ≠•ÂÆâË£Ö WindowsÔºö‰∏ãËΩΩexeÊñá‰ª∂ÔºåÂèåÂáª‰∏ã‰∏ÄÊ≠•ÂÆâË£Ö LinuxÔºö‰∏ãËΩΩtar.zxÂÆâË£ÖÂåÖÊñá‰ª∂ÔºåËß£ÂéãÂÆâË£ÖÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè # ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè echo 'export NODEJS_HOME=/opt/app/node-v18.14.0-linux-x64' >> /etc/profile echo 'export PATH=$NODEJS_HOME/bin:$PATH' >> /etc/profile source /etc/profile && node -v && npm -v ÂÆâË£ÖÂ•Ωnode‰πãÂêéÔºåÂÆâË£ÖhexoÂè™ÈúÄË¶ÅÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Âç≥ÂèØ ÊñáÊ°£ | Hexo sudo npm install -g hexo-cli ÂÆâË£ÖÂÆåÊàê‰πãÂêéÔºåÊü•ÁúãhexoÁâàÊú¨ÔºåÈ™åËØÅÊòØÂê¶ÂÆâË£ÖÊàêÂäü ‚ûú ~ hexo version hexo-cli: 4.3.0 os: darwin 21.6.0 12.5 node: 13.14.0 v8: 7.9.317.25-node.32 uv: 1.37.0 zlib: 1.2.11 brotli: 1.0.7 ares: 1.16.0 modules: 79 nghttp2: 1.40.0 napi: 6 llhttp: 2.0.4 openssl: 1.1.1g cldr: 36.1 icu: 66.1 tz: 2019c unicode: 13.0 ‚ûú ~ Â¶ÇÊûúnpmÂÆâË£ÖÁºìÊÖ¢ÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏ãÊ∑òÂÆùÁöÑÈïúÂÉèÊ∫ê # ËÆæÁΩÆÊ∑òÂÆùÈïúÂÉèÊ∫ê npm config set registry https://registry.npm.taobao.org # ËøòÂéüÈÖçÁΩÆ npm config set registry https://registry.npmjs.org Ê†°È™ånpmÈïúÂÉèÊ∫êÊòØÂê¶ÈÖçÁΩÆÊàêÂäü # ÈÖçÁΩÆ‰πãÂâç ‚ûú ~ npm config get registry https://registry.npmjs.org/ # ÈÖçÁΩÆ‰πãÂêé ‚ûú ~ npm config set registry https://registry.npm.taobao.org ‚ûú ~ npm config get registry https://registry.npm.taobao.org/ ‚ûú ~ hexoÂª∫Á´ô ÊâßË°å hexo init blogÔºåÂÆÉ‰ºö‰ªégithub‰∏äÊãâÂèñ‰∏Ä‰∏™Ê®°ÊùøÈ°πÁõÆÔºåÊúâÂèØËÉΩÁΩëÁªúÈóÆÈ¢òÂØºËá¥‰∏ãËΩΩÂ§±Ë¥•ÔºåÂèØ‰ª•ËØïËØïÁõ¥Êé•‰∏ãËΩΩÊ®°ÊùøÂéãÁº©ÂåÖÊñá‰ª∂Ëá™Â∑±Ëß£Âéã‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇ Ê®°ÊùøÂéãÁº©ÂåÖÔºöhttps://github.com/hexojs/hexo-starter/archive/refs/heads/master.zip ËøõÂÖ•blogÁõÆÂΩïÔºåÂÆâË£Önpm‰æùËµñÔºåÊâßË°ånpm install ÂÆâË£Ö‰æùËµñÊñá‰ª∂ # ËøõÂÖ•blogÁõÆÂΩïÂπ∂ÂÆâË£Önpm‰æùËµñ cd blog && rm -rf node_modules && npm install --force ËøêË°åhexo sÔºåÂ∞±ÂèØ‰ª•ÊâìÂºÄ http://localhost:8082/ ÁúãÂà∞Êàë‰ª¨ÁöÑÁ¨¨‰∏Ä‰∏™ÂçöÂÆ¢È°πÁõÆ‰∫Ü # -p 8082 ÊåáÂÆöÁ´ØÂè£‰∏∫8082ËøêË°å hexo s -p 8082 hexoÈÖçÁΩÆÂÆâË£ÖÂ•ΩhexoÂêé‰∏ã‰∏ÄÊ≠•Â∞±ÊòØËøõË°åÂü∫Á°ÄÈÖçÁΩÆÂíåÂÜô‰Ωú‰∫ÜÔºå‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∫õÊØîËæÉÂ∏∏Áî®ÁöÑÊèí‰ª∂ÂíåÈÖçÁΩÆ Â∏∏Áî®Êèí‰ª∂ ÂõæÁâáËµÑÊ∫êË∑ØÂæÑËΩ¨Êç¢Ôºönpm install hexo-asset-img --save ÂèØÂÆûÁé∞ Typora Á≠â Markdown ÁºñËæëÂô®È¢ÑËßà ‰∏é Hexo ÂèëÂ∏ÉÈ¢ÑËßà ÂùáËÉΩÊ≠£Â∏∏ÊòæÁ§∫ÂõæÁâá yiyungent/hexo-asset-img: üç∞ Hexo local image plugin. | Hexo Êú¨Âú∞ÂõæÁâáÊèí‰ª∂: ËΩ¨Êç¢ ÂõæÁâáÁõ∏ÂØπË∑ØÂæÑ ‰∏∫ asset_img (github.com) ÂÖ®Â±ÄÊêúÁ¥¢Ôºönpm install hexo-generator-json-content --save Áî®‰∫éÁîüÊàêÈùôÊÄÅÁ´ôÁÇπÊï∞ÊçÆÔºåÊèê‰æõÊêúÁ¥¢ÂäüËÉΩÁöÑÊï∞ÊçÆÊ∫ê„ÄÇ alexbruno/hexo-generator-json-content: Hexo (https://hexo.io/) plugin to generate a JSON file for generic use or consumption with the contents of posts and pages. (github.com) Êõ¥Â§ö‰ªãÁªçÔºöHexoÂçöÂÆ¢Â∏∏Áî®Êèí‰ª∂ÂèäÁî®Ê≥ï | Cofess - Web Developer &amp; Designer Â∏∏Áî®ÈÖçÁΩÆhexo-asset-img Êèí‰ª∂Êê≠ÈÖçtyporaÂÆûÁé∞ÁºñËæë‰∫éÂèëÂ∏ÉÂõæÁâáÂÆûÊó∂Â±ïÁ§∫„ÄÇ ÂèÇËÄÉÊñáÊ°£ Hexo + Typora + ÂºÄÂèëHexoÊèí‰ª∂ Ëß£ÂÜ≥ÂõæÁâáË∑ØÂæÑ‰∏ç‰∏ÄËá¥ - ËÖæËÆØ‰∫ëÂºÄÂèëËÄÖÁ§æÂå∫-ËÖæËÆØ‰∫ë (tencent.com) ËµÑÊ∫êÊñá‰ª∂Â§π | Hexo hexo-renderer-marked 3.1.0 ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÈÄâÈ°πÔºåÂÖ∂ÂÖÅËÆ∏‰Ω†Êó†ÈúÄ‰ΩøÁî® asset_img Ê†áÁ≠æÊèí‰ª∂Â∞±ÂèØ‰ª•Âú® markdown ‰∏≠ÂµåÂÖ•ÂõæÁâá„ÄÇ ÂÆâË£Ö hexo-asset-img Êèí‰ª∂ hexoÈÖçÁΩÆ‰∏≠Â∞Üpost_asset_folderÂºÄÂêØ post_asset_folder: true typoraËøõË°å‰ª•‰∏ãÈÖçÁΩÆÔºö ÈÄöËøá‰ª•‰∏äÈÖçÁΩÆ‰πãÂêéÔºå‰ΩøÁî®typoraËøõË°åÂÜô‰ΩúÊó∂ÔºåÂè™ÈúÄË¶ÅÂ∞ÜÂõæÁâáÂ§çÂà∂ËøõÊñáÁ´†ÔºåtyporaÂèØ‰ª•ËøõË°åÂÆûÊó∂È¢ÑËßàÊü•ÁúãÔºåÂú®ËøêË°åÊó∂‰πü‰∏çÈúÄË¶ÅÂÖ≥Ê≥®ÂõæÁâáËµÑÊ∫êË∑ØÂæÑÔºå‰∏∫ÂÜô‰ΩúÂ∏¶Êù•ÂæàÂ§ßÁöÑ‰æøÂà©ÊÄß„ÄÇ ÂÖ∂‰ªñÈÖçÁΩÆhexoÂ∏∏Áî®ÁöÑÂ∞±ÊòØ‰∏ªÈ¢òÁõ∏ÂÖ≥ÈÖçÁΩÆ‰∫ÜÔºåÂø´ÂéªÊâæ‰∏Ä‰∏™ÈÄÇÂêàËá™Â∑±ÁöÑ‰∏ªÈ¢òÂπ∂ËøõË°åÁæéÂåñÂêß„ÄÇThemes | Hexo ÊÄªÁªìÊú¨Êñá‰∏ªË¶Å‰ªãÁªç‰∫ÜhexoÂª∫Á´ôÂíåÂú®ÂÜô‰ΩúÊó∂ÂõæÁâáÁöÑÂ§ÑÁêÜÊñπÊ°àÔºåhexo‰Ωú‰∏∫ÂçöÂÆ¢Êó•ÂøóÁ±ªÂª∫Á´ôÂ∑•ÂÖ∑ÈùûÂ∏∏ÂêàÈÄÇÔºåÂÖ•Èó®ÁÆÄÂçïÂ≠¶‰π†ÊàêÊú¨‰πü‰Ωé„ÄÇ","categories":[{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/categories/ÂçöÂÆ¢ÈÄâÂûã/"}],"tags":[{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/tags/ÂçöÂÆ¢ÈÄâÂûã/"}]},{"title":"oh-my-zshÂõΩÂÜÖÈïúÂÉèÂÆâË£ÖÂíåÊõ¥Êñ∞ÊñπÊ≥ï","slug":"china-mirrors-oh-my-zsh","date":"2021-07-05T15:43:13.000Z","updated":"2024-07-01T12:30:37.369Z","comments":true,"path":"2021/07/05/china-mirrors-oh-my-zsh/","link":"","permalink":"http://iogogogo.github.io/2021/07/05/china-mirrors-oh-my-zsh/","excerpt":"","text":"ÂÆâË£Ö‰æùËµñ git zsh ÂÆâË£ÖgitCentOS ÂçáÁ∫ßÂÆâË£ÖÊúÄÊñ∞Áâàgit ‰∏ãËΩΩÁ†Å‰∫ëÂÆâË£ÖÂåÖwget https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh ÁºñËæëinstall.shÊâæÂà∞‰ª•‰∏ãÈÉ®ÂàÜ # Default settings ZSH=${ZSH:-~/.oh-my-zsh} REPO=${REPO:-ohmyzsh/ohmyzsh} REMOTE=${REMOTE:-https://github.com/${REPO}.git} BRANCH=${BRANCH:-master} Êää REPO=${REPO:-ohmyzsh/ohmyzsh} REMOTE=${REMOTE:-https://github.com/${REPO}.git} ÊõøÊç¢‰∏∫ REPO=${REPO:-mirrors/oh-my-zsh} REMOTE=${REMOTE:-https://gitee.com/${REPO}.git} ÁºñËæëÂêé‰øùÂ≠ò, ËøêË°åÂÆâË£ÖÂç≥ÂèØ. (ËøêË°åÂâçÂÖàÁªôinstall.shÊùÉÈôê) ‰øÆÊîπ‰ªìÂ∫ìÂú∞ÂùÄcd ~/.oh-my-zsh git remote set-url origin https://gitee.com/mirrors/oh-my-zsh.git git pull oh-my-zshÂçáÁ∫ßomz update # Êé®Ëçê‰ΩøÁî® # ÊàñËÄÖ upgrade_oh_my_zsh # ÂÆòÊñπ‰∏çÊé®Ëçê‰ΩøÁî® ÂéüÊñáÂú∞ÂùÄ: https://touka.dev/tech/oh-my-zsh-china-mirror/","categories":[{"name":"zsh","slug":"zsh","permalink":"http://iogogogo.github.io/categories/zsh/"}],"tags":[{"name":"zsh","slug":"zsh","permalink":"http://iogogogo.github.io/tags/zsh/"}]},{"title":"Spring Boot 2.x‰ΩøÁî®mybatis","slug":"spring-boot-mybatis","date":"2021-07-05T07:49:31.000Z","updated":"2024-07-01T12:41:05.759Z","comments":true,"path":"2021/07/05/spring-boot-mybatis/","link":"","permalink":"http://iogogogo.github.io/2021/07/05/spring-boot-mybatis/","excerpt":"","text":"ormÊ°ÜÊû∂ÁöÑÊú¨Ë¥®ÊòØÁÆÄÂåñÁºñÁ®ã‰∏≠Êìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÁºñÁ†ÅÔºåÁé∞Âú®ÊàëÁî®ÁöÑÊØîËæÉÂ§öÁöÑÊúâ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØÂÆ£Áß∞ÂèØ‰ª•‰∏çÁî®ÂÜô‰∏ÄÂè•SQLÁöÑhibernateÔºå‰∏Ä‰∏™ÊòØÂèØ‰ª•ÁÅµÊ¥ªË∞ÉËØïÂä®ÊÄÅsqlÁöÑmybatis,‰∏§ËÄÖÂêÑÊúâÁâπÁÇπÔºåÂú®‰ºÅ‰∏öÁ∫ßÁ≥ªÁªüÂºÄÂèë‰∏≠ÂèØ‰ª•Ê†πÊçÆÈúÄÊ±ÇÁÅµÊ¥ª‰ΩøÁî®„ÄÇ ‰ΩøÁî®Ê≥®Ëß£Áâàpom‰æùËµñËøôÈáå‰ΩøÁî®ÊúÄÊñ∞Áâàspring boot„Äê2.0.4.RELEASE„Äë &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"> &lt;modelVersion>4.0.0&lt;/modelVersion> &lt;groupId>com.zz&lt;/groupId> &lt;artifactId>spring-boot-sample-mybatis&lt;/artifactId> &lt;version>0.0.1-SNAPSHOT&lt;/version> &lt;modules> &lt;module>mybatis-xml&lt;/module> &lt;module>mybatis-annotation&lt;/module> &lt;/modules> &lt;packaging>pom&lt;/packaging> &lt;name>spring-boot-sample-mybatis&lt;/name> &lt;description>spring-boot-sample-mybatis project for Spring Boot&lt;/description> &lt;parent> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-parent&lt;/artifactId> &lt;version>2.0.4.RELEASE&lt;/version> &lt;relativePath/> &lt;!-- lookup parent from repository --> &lt;/parent> &lt;properties> &lt;project.build.sourceEncoding>UTF-8&lt;/project.build.sourceEncoding> &lt;project.reporting.outputEncoding>UTF-8&lt;/project.reporting.outputEncoding> &lt;java.version>1.8&lt;/java.version> &lt;mybatis-spring.version>1.3.2&lt;/mybatis-spring.version> &lt;logback.version>1.2.3&lt;/logback.version> &lt;/properties> &lt;dependencies> &lt;!-- webÁªÑ‰ª∂ --> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;!-- mybatis-spring-boot-starter --> &lt;dependency> &lt;groupId>org.mybatis.spring.boot&lt;/groupId> &lt;artifactId>mybatis-spring-boot-starter&lt;/artifactId> &lt;version>${mybatis-spring.version}&lt;/version> &lt;/dependency> &lt;!-- MySQL È©±Âä®--> &lt;dependency> &lt;groupId>mysql&lt;/groupId> &lt;artifactId>mysql-connector-java&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-test&lt;/artifactId> &lt;/dependency> &lt;/dependencies> &lt;build> &lt;plugins> &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;/plugin> &lt;/plugins> &lt;/build> &lt;/project> application.ymlÊñá‰ª∂spring: application: name: life-spring-sample-mybatis datasource: url: jdbc:mysql://localhost:10100/life-mybatis?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false driver-class-name: com.mysql.jdbc.Driver username: root password: root mybatis: type-aliases-package: com.zz.entity server: port: 8080 ÂÆû‰ΩìÂØπË±°ËøôÈáå‰∏∫‰∫ÜÊñπ‰æøÔºå‰ΩøÁî®‰∫ÜlombokÔºå‰∏ç‰∫ÜËß£ÁöÑÂêåÂ≠¶ÂèØ‰ª•Ëá™Â∑±GoogleÁúã‰∏Ä‰∏ã @Data @NoArgsConstructor @AllArgsConstructor public class Employee implements Serializable { private long id; private String name; private int age; private Date birthday; private int deptId; } mapper@Repository public interface EmployeeMapper { /** * ‰ΩøÁî®@ResultsÊ≥®Ëß£ÂÅöÂ≠óÊÆµÊò†Â∞Ñ * * @return */ @Select(\"select * from employee\") @Results({ @Result(property = \"deptId\", column = \"dept_id\") }) List&lt;Employee> findAll(); @Select(\"select * from employee where id=#{id}\") Employee findById(long id); @Update(\"update employee set name=#{name},birthday=#{birthday},age=#{age},dept_id=#{deptId} where id=#{id}\") int updateById(Employee employee); @Delete(\"delete from employee where id=#{id}\") int deleteById(long id); @Insert(\"insert into employee(name,birthday,age,dept_id) values(#{name},#{birthday},#{age},#{deptId})\") int save(Employee employee); } controllerÈÄöËøáÂâçÁ´ØÂÆåÊàêÂ¢ûÂà†ÊîπÊü•@Slf4j @RestController @RequestMapping(\"/api/emp\") public class EmployeeController { @Autowired private EmployeeMapper employeeMapper; @RequestMapping(\"/\") public List&lt;Employee> findAll() { List&lt;Employee> list = employeeMapper.findAll(); list.forEach(item -> log.info(\"emp:{}\", item)); return list; } @RequestMapping(\"/{id}\") public Employee findById(@PathVariable(\"id\") long id) { Employee employee = employeeMapper.findById(id); log.info(\"emp:{}\", employee); return employee; } @RequestMapping(value = \"/\", method = RequestMethod.POST) public int save(@RequestBody Employee employee) { return employeeMapper.save(employee); } @RequestMapping(value = \"/{id}\", method = RequestMethod.DELETE) public int deleteById(@PathVariable(\"id\") long id) { return employeeMapper.deleteById(id); } @RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) public int updateById(@PathVariable(\"id\") long id, @RequestBody Employee employee) { employee.setId(id); return employeeMapper.updateById(employee); } } ËøêË°åÈ°πÁõÆ‰ª•ÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®postmanÂ∑•ÂÖ∑ËøõË°åÊé•Âè£ËØ∑Ê±ÇÊµãËØïÔºåÂØπÂ∫îÁöÑ‰ΩøÁî®post„ÄÅget„ÄÅputÁ≠âËØ∑Ê±ÇÔºåÂèØ‰ª•Ëá™Ë°åÊµãËØï localhost:8080/api/emp/ response [ { \"id\": 1, \"name\": \"‰∫å‰∏´\", \"age\": 16, \"birthday\": \"2000-01-01T00:00:00.000+0000\", \"deptId\": 1 }, { \"id\": 2, \"name\": \"Â∞èÂº∫ \", \"age\": 1, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 2 }, { \"id\": 3, \"name\": \"Âè≤Â°îÂÖã \", \"age\": 11, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 3 }, { \"id\": 5, \"name\": \"Âêõ‰∏¥Âüé \", \"age\": 8, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 4 }, { \"id\": 6, \"name\": \"‰πåÈ∏¶ \", \"age\": 8, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 1 }, { \"id\": 7, \"name\": \"ÈæôÊØç \", \"age\": 4, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 4 }, { \"id\": 8, \"name\": \"ÊèêÂà©ÊòÇ \", \"age\": 21, \"birthday\": \"2018-06-01T08:33:52.000+0000\", \"deptId\": 5 }, { \"id\": 9, \"name\": \"Â∞èËä±\", \"age\": 18, \"birthday\": \"2000-01-01T00:00:00.000+0000\", \"deptId\": 0 } ] ‰ΩøÁî®xmlÁâàÂâçÈù¢Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºå‰ΩøÁî®Ê≥®Ëß£ÁâàÁöÑmybatisÂèØ‰ª•‰∏ÄË°åxmlÊñá‰ª∂ÈÉΩ‰∏çÂÜôÔºå‰ΩÜÊòØËøô‰∏™ÊâÄÊúâÁöÑsqlÈÉΩÁ°¨ÁºñÁ†ÅÂú®mapperÊñá‰ª∂‰∏≠ÔºåÂØπÂêéÊúüÁöÑÁª¥Êä§ÂíåÂ§çÁî®‰∏çÊòØÁâπÂà´Êñπ‰æøÔºåÊâÄÊúâÊé•‰∏ãÊù•Êàë‰ª¨ÁúãÁúã‰ΩøÁî®xmlÂÆåÊàêÂ¢ûÂà†ÊîπÊü• application.ymlÊñá‰ª∂ËøôÈáåÂíå‰ΩøÁî®Ê≥®Ëß£ÁöÑÂå∫Âà´Â∞±ÊòØÈúÄË¶ÅÊåáÂÆömapperÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºå‰∏∫‰∫ÜÊñπ‰æøÊàë‰ª¨ËøòÊúâ‰∏ÄÂº†deptË°®ÔºåËøôÊ¨°‰ΩøÁî®deptË°®Êù•ËøõË°åÊºîÁ§∫ spring: application: name: life-spring-sample-mybatis datasource: url: jdbc:mysql://localhost:10100/life-mybatis?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false driver-class-name: com.mysql.jdbc.Driver username: root password: root mybatis: # ËÆæÁΩÆÂÆû‰ΩìÂØπË±°ÁöÑ‰ΩçÁΩÆ type-aliases-package: com.zz.entity # ËÆæÁΩÆmapperÊñá‰ª∂Â≠òÊîæÁöÑ‰ΩçÁΩÆÔºåËøôÈáåÂú®classpathÁõÆÂΩï‰∏ãÁöÑmybatisÊñá‰ª∂Â§π‰∏≠ mapper-locations: classpath:mybatis/*.xml server: port: 8082 deptÂÆû‰ΩìÂØπË±°@Data @NoArgsConstructor @AllArgsConstructor public class Dept implements Serializable { private long id; private String name; } deptMapperÂØπË±°ÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨ËøôÈáåÂè™ÊúâmapperÊé•Âè£‰∏≠ÁöÑÊñπÊ≥ïÂ£∞ÊòéÔºåÊ≤°ÊúâÂú®‰∏äÈù¢ËøõË°åÊ≥®Ëß£Êìç‰ΩúÔºåÈÇ£‰πàÊé•‰∏ãÊù•Êàë‰ª¨Â∞±ÈúÄË¶ÅÁºñÂÜômapper.xmlÊñá‰ª∂ËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåÂú®resources/mybatisÊñá‰ª∂Â§π‰∏ãÊñ∞Âª∫DeptMapper.xmlÊñá‰ª∂ @Repository public interface DeptMapper { int save(Dept dept); int deleteById(long id); int updateById(Dept dept); List&lt;Dept> findAll(); Dept findById(long id); } mapper.xmlÊñá‰ª∂&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?> &lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" > &lt;mapper namespace=\"com.zz.mapper.DeptMapper\"> &lt;sql id=\"base_column\"> &lt;/sql> &lt;insert id=\"save\"> insert into dept(name) values (#name) &lt;/insert> &lt;update id=\"updateById\"> update dept set name=#{name} where id=#{id} &lt;/update> &lt;delete id=\"deleteById\"> delete from dept where id=#{id} &lt;/delete> &lt;select id=\"findAll\" resultType=\"com.zz.entity.Dept\"> select * from dept &lt;/select> &lt;select id=\"findById\" resultType=\"com.zz.entity.Dept\"> select * from dept where id=#{id} &lt;/select> &lt;/mapper> ÊéßÂà∂Âô®ÂØπË±°ËøôÈáåÂè™ÊòØ‰∏∫‰∫ÜÊºîÁ§∫‰ΩøÁî®xmlÊìç‰ΩúÔºåcontroller‰∏≠Â∞±‰∏ç‰∏Ä‰∏ÄÂÜôÂá∫ÊâÄÊúâÁöÑÊé•Âè£ÔºåÂÖ∂ÂÆûÂíå‰ΩøÁî®Ê≥®Ëß£ÂÆåÂÖ®ÊòØ‰∏ÄÊ†∑ÁöÑ @RestController @RequestMapping(\"/api/dept\") public class DeptController { @Autowired private DeptMapper deptMapper; @GetMapping(\"/\") public List&lt;Dept> findAll() { return deptMapper.findAll(); } } ËøôÈáå‰ΩøÁî®postmanÂ∑•ÂÖ∑ËøõË°åÁÆÄÂçïÁöÑÊµãËØïÔºåÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâÁöÑÈÉ®Èó®Êï∞ÊçÆÂÖ®ÈÉ®Ë¢´Êü•Âá∫Êù•‰∫Ü localhost:8082/api/dept/ response [ { \"id\": 1, \"name\": \"‰ø°ÊÅØÊäÄÊúØÈÉ®\" }, { \"id\": 2, \"name\": \"‰∫∫‰∫ãÈÉ®\" }, { \"id\": 3, \"name\": \"PCB‰∫ã‰∏öÈÉ®\" }, { \"id\": 4, \"name\": \"Êó†Á∫øÁªàÁ´ØÈÉ®\" }, { \"id\": 5, \"name\": \"ÊµãËØïÈÉ®\" }, { \"id\": 6, \"name\": \"ÂêéÂã§‰øùÈöúÈÉ®\" }, { \"id\": 7, \"name\": \"È∏°Áä¨‰∏çÂÆÅÈÉ®\" } ] ÊÄªÁªì ÂÖ∂ÂÆû‰ΩøÁî®spring boot-1.xÁâàÊú¨Âíå2.xÁâàÊú¨Êìç‰ΩúÂü∫Êú¨ÊòØ‰∏ÄËá¥ÁöÑ Ê≥®Ëß£Êñπ‰æøÂçïË°®ÁöÑÊìç‰ΩúÔºåxmlÈÄÇÁî®‰∫éÂ§çÊùÇÁöÑÊìç‰ΩúÔºåÂêÑÊúâ‰ºòÁÇπÔºåÊ≤°ÊúâÊúÄÂ•ΩÁöÑÔºåÂè™ÊúâÊúÄÂêàÈÄÇÁöÑ ÂÆåÊï¥‰ª£Á†ÅÈìæÊé•github ÂèÇËÄÉmybatis","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"MySQLÊó∂Èó¥Êà≥ÂíåÊó∂Èó¥ÁöÑËé∑Âèñ/Áõ∏‰∫íËΩ¨Êç¢/Ê†ºÂºèÂåñ","slug":"mysql-datetime-func","date":"2021-06-23T15:39:37.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2021/06/23/mysql-datetime-func/","link":"","permalink":"http://iogogogo.github.io/2021/06/23/mysql-datetime-func/","excerpt":"","text":"MySQLÊó∂Èó¥Êà≥ÂíåÊó∂Èó¥ÁöÑËé∑Âèñ/Áõ∏‰∫íËΩ¨Êç¢/Ê†ºÂºèÂåñËé∑ÂèñÂΩìÂâçÊó∂Èó¥Êà≥mysql> select unix_timestamp(now()); +-----------------------+ | unix_timestamp(now()) | +-----------------------+ | 1584524789 | +-----------------------+ 1 row in set (0.00 sec) mysql> select unix_timestamp(); +------------------+ | unix_timestamp() | +------------------+ | 1584524524 | +------------------+ 1 row in set (0.00 sec) Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥mysql> select now(); +---------------------+ | now() | +---------------------+ | 2020-03-18 17:39:13 | +---------------------+ 1 row in set (0.00 sec) mysql> select date(now()); +-------------+ | date(now()) | +-------------+ | 2020-03-18 | +-------------+ 1 row in set (0.00 sec) Ëé∑Âèñ‰∏âÂ§©ÂâçÁöÑÊó∂Èó¥mysql> SELECT NOW() - interval 72 hour; +--------------------------+ | NOW() - interval 72 hour | +--------------------------+ | 2020-03-15 17:39:44 | +--------------------------+ 1 row in set (0.00 sec) Êó∂Èó¥ËΩ¨Êó∂Èó¥Êà≥mysql> select unix_timestamp('2018-01-15 09:45:16'); +---------------------------------------+ | unix_timestamp('2018-01-15 09:45:16') | +---------------------------------------+ | 1515980716 | +---------------------------------------+ 1 row in set (0.00 sec) Êó∂Èó¥Êà≥ËΩ¨Êó∂Èó¥mysql> select from_unixtime(1515980716); +---------------------------+ | from_unixtime(1515980716) | +---------------------------+ | 2018-01-15 09:45:16 | +---------------------------+ 1 row in set (0.02 sec) Êó∂Èó¥Êà≥Ê†ºÂºèÂåñmysql> SELECT from_unixtime(1515980716, '%Y-%m-%d %H:%i:%S'); +------------------------------------------------+ | from_unixtime(1515980716, '%Y-%m-%d %H:%i:%S') | +------------------------------------------------+ | 2018-01-15 09:45:16 | +------------------------------------------------+ 1 row in set (0.00 sec) Êó∂Èó¥Ê†ºÂºèÂåñmysql> select date_format(now(), '%Y-%m-%d'); +--------------------------------+ | date_format(now(), '%Y-%m-%d') | +--------------------------------+ | 2020-03-18 | +--------------------------------+ 1 row in set (0.00 sec) mysql> select date_format('2018-01-15 09:45:16', '%Y-%m-%d'); +------------------------------------------------+ | date_format('2018-01-15 09:45:16', '%Y-%m-%d') | +------------------------------------------------+ | 2018-01-15 | +------------------------------------------------+ 1 row in set (0.00 sec) ÂáΩÊï∞ËØ¥ÊòéFROM_UNIXTIME‰ΩúÁî®ÔºöÂ∞ÜMySQL‰∏≠‰ª•INT(11)Â≠òÂÇ®ÁöÑÊó∂Èó¥‰ª•‚ÄùYYYY-MM-DD‚ÄùÊ†ºÂºèÊù•ÊòæÁ§∫„ÄÇ ËØ≠Ê≥ïÔºöFROM_UNIXTIME(unix_timestamp,format) ËøîÂõûË°®Á§∫ Unix Êó∂Èó¥Ê†áËÆ∞ÁöÑ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊ†πÊçÆformatÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñ„ÄÇformatÂèØ‰ª•ÂåÖÂê´‰∏éDATE_FORMAT()ÂáΩÊï∞ÂàóÂá∫ÁöÑÊù°ÁõÆÂêåÊ†∑ÁöÑ‰øÆÈ•∞Á¨¶„ÄÇ date_format‰ΩúÁî®ÔºöÂ∞ÜMySQL‰∏≠ÁöÑÊó•ÊúüÊ†ºÂºèËΩ¨Êç¢Êàê‚ÄùYYYY-MM-DD‚ÄùÊ†ºÂºèÊù•ÊòæÁ§∫„ÄÇ ËØ≠Ê≥ïÔºödate_format(now(), ‚Äò%Y-%m-%d‚Äô); Ê†πÊçÆformatÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñdateÂÄºÔºå‰∏ãÂàó‰øÆÈ•∞Á¨¶ÂèØ‰ª•Ë¢´Áî®Âú®formatÂ≠óÁ¨¶‰∏≤‰∏≠ Ë°®ËææÂºè Âê´‰πâ %M ÊúàÂêçÂ≠ó(January‚Ä¶‚Ä¶December) %W ÊòüÊúüÂêçÂ≠ó(Sunday‚Ä¶‚Ä¶Saturday) %D ÊúâËã±ËØ≠ÂâçÁºÄÁöÑÊúà‰ªΩÁöÑÊó•Êúü(1st, 2nd, 3rd, Á≠âÁ≠â„ÄÇÔºâ %Y Âπ¥, Êï∞Â≠ó, 4 ‰Ωç %y Âπ¥, Êï∞Â≠ó, 2 ‰Ωç %a Áº©ÂÜôÁöÑÊòüÊúüÂêçÂ≠ó(Sun‚Ä¶‚Ä¶Sat) %d Êúà‰ªΩ‰∏≠ÁöÑÂ§©Êï∞, Êï∞Â≠ó(00‚Ä¶‚Ä¶31) %e Êúà‰ªΩ‰∏≠ÁöÑÂ§©Êï∞, Êï∞Â≠ó(0‚Ä¶‚Ä¶31) %m Êúà, Êï∞Â≠ó(01‚Ä¶‚Ä¶12) %c Êúà, Êï∞Â≠ó(1‚Ä¶‚Ä¶12) %b Áº©ÂÜôÁöÑÊúà‰ªΩÂêçÂ≠ó(Jan‚Ä¶‚Ä¶Dec) %j ‰∏ÄÂπ¥‰∏≠ÁöÑÂ§©Êï∞(001‚Ä¶‚Ä¶366) %H Â∞èÊó∂(00‚Ä¶‚Ä¶23) %k Â∞èÊó∂(0‚Ä¶‚Ä¶23) %h Â∞èÊó∂(01‚Ä¶‚Ä¶12) %I Â∞èÊó∂(01‚Ä¶‚Ä¶12) %l Â∞èÊó∂(1‚Ä¶‚Ä¶12) %i ÂàÜÈíü, Êï∞Â≠ó(00‚Ä¶‚Ä¶59) %r Êó∂Èó¥,12 Â∞èÊó∂(hh:mm:ss [AP]M) %T Êó∂Èó¥,24 Â∞èÊó∂(hh:mm:ss) %S Áßí(00‚Ä¶‚Ä¶59) %s Áßí(00‚Ä¶‚Ä¶59) %p AMÊàñPM %w ‰∏Ä‰∏™ÊòüÊúü‰∏≠ÁöÑÂ§©Êï∞(0=Sunday ‚Ä¶‚Ä¶6=Saturday Ôºâ %U ÊòüÊúü(0‚Ä¶‚Ä¶52), ËøôÈáåÊòüÊúüÂ§©ÊòØÊòüÊúüÁöÑÁ¨¨‰∏ÄÂ§© %u ÊòüÊúü(0‚Ä¶‚Ä¶52), ËøôÈáåÊòüÊúü‰∏ÄÊòØÊòüÊúüÁöÑÁ¨¨‰∏ÄÂ§© %% ‰∏Ä‰∏™ÊñáÂ≠ó","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"Java8 listÂàÜÈ°µ","slug":"java8-list-partition","date":"2021-04-11T07:57:20.000Z","updated":"2024-07-01T12:30:37.373Z","comments":true,"path":"2021/04/11/java8-list-partition/","link":"","permalink":"http://iogogogo.github.io/2021/04/11/java8-list-partition/","excerpt":"","text":"Êó•Â∏∏ÂºÄÂèë‰∏≠ÁªèÂ∏∏ÈÅáÂà∞listÂàÜÈ°µÁöÑÈúÄÊ±ÇÔºåÂú®Java8‰πãÂâçÈÉΩÊòØ‰ΩøÁî®subListËøõË°åÊà™ÂèñÔºåÂú®Java8‰ª•ÂêéÔºåÊúâ‰∫ÜÊñ∞ÁöÑÈÄâÊã©ÔºåÈÇ£Â∞±ÊòØ‰ΩøÁî®streamÔºåÂéüÁêÜÂæàÁÆÄÂçïÔºåÂ∞±ÊòØ‰ΩøÁî®streamÊèê‰æõÁöÑskipÂíålimitÊñπÊ≥ï„ÄÇ ËøôÈáåÁöÑListUtilsÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂú®Java8‰πãÂâçÊé•Âè£‰∏çËÉΩÊúâÊñπÊ≥ïÂÆûÁé∞ÔºåÂú®Java8‰ª•ÂêéÔºåÊé•Âè£‰∏≠ÂèØ‰ª•Â≠òÂú®staticÊñπÊ≥ïÂπ∂‰∏îÂÆåÊàêÊñπÊ≥ïÂÆûÁé∞ÔºåÂè¶Â§ñ‰πüÂèØ‰ª•‰ΩøÁî®defaultÂÖ≥ÈîÆÂ≠óÊù•ÂÆåÊàê‰∏Ä‰∏™ÊñπÊ≥ïÂÆûÁé∞ÔºåÂèØ‰ª•ÁúÅÁï•Êàë‰ª¨ÂÜôpublic staticÂÖ≥ÈîÆÂ≠óÔºàÁõÆÂâçÊ≤°ÂèëÁé∞ÂÖ∂‰ªñÂ•ΩÂ§ÑüòÇÔºâ Â∞ÅË£ÖÂ∑•ÂÖ∑Á±ªpackage com.iogogogo.util; import lombok.Data; import java.io.Serializable; import java.util.Collections; import java.util.List; import java.util.stream.Collectors; /** * Created by tao.zeng on 2021/4/8. */ public interface ListUtils { static &lt;T> PageWrapper&lt;T> partition(int pageNo, int pageSize, List&lt;T> records) { if (pageNo &lt;= 0) pageNo = 1; // ËÆ°ÁÆóÂÅèÁßªÈáè int offset = (pageNo - 1) * pageSize; // ÊÄªÁÆóÊÄªËÆ∞ÂΩïÊï∞ int totalSize = records.size(); if (offset > totalSize) return new PageWrapper&lt;>(pageNo, pageSize, totalSize, Collections.emptyList()); // ÂàÜÈ°µÁªìÊûúÊï∞ÊçÆ List&lt;T> collect = records.stream().skip(offset).limit(pageSize).collect(Collectors.toList()); return new PageWrapper&lt;>(pageNo, pageSize, totalSize, collect); } /** * The type Page wrapper. * * @param &lt;T> the type parameter */ /* *public static void main(String[] args) { int totalSize = 11;//Êï∞ÊçÆÊÄªÈáè int pageSize = 3;//‰∏ÄÈ°µÊòæÁ§∫Êù°Êï∞ int totalPage;//ÊÄªÈ°µÊï∞ // Âá†ÁßçÈ°µÊï∞ËÆ°ÁÆóÊñπÊ≥ï totalPage = totalSize / pageSize; if (totalSize % pageSize != 0) { totalPage++; } System.out.println(totalPage);//Ê≠§ÊñπÊ≥ïÂÆπÊòìÁêÜËß£ System.out.println((totalSize - 1) / pageSize + 1);//Ê≠§ÊñπÊ≥ï‰ΩøÁî®ËæÉÂ§ö System.out.println((totalSize + pageSize - 1) / pageSize); } */ @Data class PageWrapper&lt;T> implements Serializable { /** * ÂΩìÂâçÈ°µÔºåÊØèÈ°µÊòæÁ§∫size */ private int pageNo, pageSize; /** * ÊÄªËÆ∞ÂΩïÊï∞ÔºåÊÄªÈ°µÊï∞ */ private long totalSize, totalPage; /** * ÂàÜÈ°µÁªìÊûúÊï∞ÊçÆ */ private List&lt;T> records; /** * Instantiates a new Page wrapper. * * @param pageNo the page no * @param pageSize the page size * @param totalSize the total size * @param records the records */ public PageWrapper(int pageNo, int pageSize, long totalSize, List&lt;T> records) { this.setPageNo(pageNo); this.pageSize = pageSize; this.records = records; this.totalSize = totalSize; this.totalPage = (totalSize - 1) / pageSize + 1; } /** * Sets page no. * * @param pageNo the page no */ public void setPageNo(int pageNo) { if (pageNo &lt;= 0) this.pageNo = 1; this.pageNo = pageNo; } } } ÂçïÂÖÉÊµãËØïpackage com.iogogogo.util; import org.junit.jupiter.api.Assertions; import org.junit.jupiter.api.Test; import java.util.ArrayList; import java.util.List; import java.util.UUID; /** * Created by tao.zeng on 2021/4/11. */ class ListUtilsTest { @Test public void test() { List&lt;String> list = new ArrayList&lt;>(); for (int i = 0; i &lt; 20; i++) { list.add(UUID.randomUUID().toString()); } ListUtils.PageWrapper&lt;String> wrapper = ListUtils.partition(0, 5, list); Assertions.assertEquals(wrapper.getPageNo(), 1); Assertions.assertEquals(wrapper.getPageSize(), 5); Assertions.assertEquals(wrapper.getTotalPage(), 4); Assertions.assertEquals(wrapper.getRecords().size(), 5); wrapper = ListUtils.partition(30, 20, list); Assertions.assertEquals(wrapper.getPageNo(), 30); Assertions.assertEquals(wrapper.getPageSize(), 20); Assertions.assertEquals(wrapper.getTotalPage(), 1); Assertions.assertEquals(wrapper.getRecords().size(), 0); } }","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"‰ΩøÁî®Java8ÂÆûÁé∞Â∏∏Áî®Êó•ÊúüËß£ÊûêÂ∞ÅË£Ö","slug":"java8-date-parser","date":"2021-04-02T13:06:32.000Z","updated":"2024-07-01T12:30:37.373Z","comments":true,"path":"2021/04/02/java8-date-parser/","link":"","permalink":"http://iogogogo.github.io/2021/04/02/java8-date-parser/","excerpt":"","text":"È°πÁõÆ‰∏äÂÅöELTÊï∞ÊçÆÊ∏ÖÊ¥óÁöÑÊó∂ÂÄôÔºåÁªèÂ∏∏‰ºöÈÅáÂà∞ÂêÑÁßçÂêÑÊ†∑ÁöÑÊó•ÊúüÊ†ºÂºèÔºå‰ΩøÁî®logstashËß£ÊûêÊó•ÊúüÊòØÂèØ‰ª•ÊåáÂÆöÂ§ö‰∏™patternÔºålogstash‰ºöÊåâÁÖßÈ°∫Â∫èÊåâ‰∏™ÂéªÂåπÈÖçÔºåÁõ¥Âà∞ÂåπÈÖç‰∏äÂàôËøîÂõûÔºåËá™Â∑±ÂÜôÊï∞ÊçÆÂ§ÑÁêÜÁöÑÊó∂ÂÄôÔºå‰πüÊúâÁ±ª‰ººÁöÑÈúÄÊ±ÇÔºåÁúã‰∫Ü‰∏ãlogstashÂÖ≥‰∫éÊó•ÊúüËß£ÊûêÂ§ÑÁêÜÁöÑÊ∫êÁ†ÅÔºå‰∏ªË¶ÅÊòØ‰ΩøÁî®joda-timeËøô‰∏™Â∫ìÂÆåÊàêÁöÑÔºåÂú®Java8‰ª•ÂêéÔºå‰πüÊúâÁ±ª‰ººÁöÑÊó•ÊúüÂ§ÑÁêÜapiÔºå‰∏ãÈù¢‰ΩøÁî®Java8Ëá™Â∏¶ÁöÑapiÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂ∞ÅË£ÖÔºåÊï¥‰ΩìÊÄùË∑ØÂíålogstashÂ§ÑÁêÜÊó•ÊúüÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈÄöËøáÂ∑•ÂéÇÁ±ªÔºåÂàõÂª∫Âá∫‰∏çÂêåÁöÑËß£ÊûêÂô®ÔºåÈÄöËøáÂÖ∑‰ΩìÁöÑËß£ÊûêÂô®ÈíàÂØπpatternËøõË°åÂåπÈÖç„ÄÇ Ê≤°Êúâ‰ªÄ‰πàÂ§™Â§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÔºåÁõ¥Êé•Áúã‰ª£Á†ÅÔºå‰ª£Á†ÅÊ≥®Èáä‰πüÊØîËæÉÂÖ®Èù¢„ÄÇ ‰ª£Á†ÅÂú∞ÂùÄÂÖ•Âè£ÔºöJava8DateTimeUtils Java8DateTimeUtilspackage com.github.iogogogo.common.util; import com.github.iogogogo.common.util.parser.TimestampParser; import com.github.iogogogo.common.util.parser.TimestampParserFactory; import com.github.iogogogo.common.util.parser.impl.UnixEpochParser; import com.github.iogogogo.common.util.parser.impl.UnixMillisEpochParser; import io.vavr.Tuple; import io.vavr.Tuple2; import lombok.extern.slf4j.Slf4j; import org.apache.commons.collections4.CollectionUtils; import org.apache.commons.lang3.StringUtils; import java.time.Instant; import java.time.LocalDate; import java.time.LocalDateTime; import java.time.ZoneId; import java.time.format.DateTimeFormatter; import java.util.Date; import java.util.List; import java.util.Locale; import java.util.concurrent.TimeUnit; import java.util.stream.Collectors; import java.util.stream.Stream; /** * The type Java 8 date time utils. */ @Slf4j public class Java8DateTimeUtils { /** * Now date time local date time. * * @return the local date time */ public static LocalDateTime nowDateTime() { return LocalDateTime.now(); } /** * Now date local date. * * @return the local date */ public static LocalDate nowDate() { return LocalDate.now(); } /** * Try parse local date time. * * @param value the value * @param locale the locale * @param pattern the pattern * @return the local date time */ public static LocalDateTime tryParse(String value, Locale locale, List&lt;String> pattern) { if (StringUtils.isEmpty(value)) throw new NullPointerException(\"value is not null.\"); TimestampParser timestampParser = TimestampParserFactory.makeParser(value); if (timestampParser instanceof UnixEpochParser || timestampParser instanceof UnixMillisEpochParser) { return timestampParser.parse(null); } else { boolean flag; List&lt;String> patterns = pattern.stream().filter(StringUtils::isNotEmpty).collect(Collectors.toList()); List&lt;String> collect = (flag = CollectionUtils.isNotEmpty(patterns)) ? patterns : TimestampParser.PATTERN_LIST; List&lt;DateTimeFormatter> timeFormatters = collect.stream() .peek(x -> { if (log.isDebugEnabled()) log.debug(\"init {} parser ofPattern: {}\", flag ? \"customer\" : \"system\", x); }).map(x -> DateTimeFormatter.ofPattern(x, locale)).collect(Collectors.toList()); return timestampParser.parse(timeFormatters); } } /** * Try parse local date time. * * @param value the value * @param locale the locale * @param pattern the pattern * @return the local date time */ public static LocalDateTime tryParse(String value, Locale locale, String... pattern) { return tryParse(value, locale, Stream.of(pattern).collect(Collectors.toList())); } /** * Try parse local date time. * * @param value the value * @param pattern the pattern * @return the local date time */ public static LocalDateTime tryParse(String value, List&lt;String> pattern) { return tryParse(value, Locale.CHINA, pattern); } /** * Try parse local date time. * * @param value the value * @param pattern the pattern * @return the local date time */ public static LocalDateTime tryParse(String value, String... pattern) { return tryParse(value, Stream.of(pattern).collect(Collectors.toList())); } /** * To instant instant. * * @param localDateTime the local date time * @return the instant */ public static Instant toInstant(LocalDateTime localDateTime) { ZoneId zone = ZoneId.systemDefault(); return localDateTime.atZone(zone).toInstant(); } /** * To epoch milli long. * * @param localDateTime the local date time * @return the long */ public static long toEpochMilli(LocalDateTime localDateTime) { return toInstant(localDateTime).toEpochMilli(); } /** * To epoch second long. * * @param localDateTime the local date time * @return the long */ public static long toEpochSecond(LocalDateTime localDateTime) { return toInstant(localDateTime).toEpochMilli() / 1000; } /** * Of epoch milli instant. * * @param millis the millis * @return the instant */ public static Instant ofEpochMilli(long millis) { return Instant.ofEpochMilli(millis); } /** * Of epoch second instant. * * @param second the second * @return the instant */ public static Instant ofEpochSecond(long second) { return Instant.ofEpochSecond(second); } /** * To java 8 millis local date time. * * @param timestamp the timestamp * @return the local date time */ public static LocalDateTime toJava8Millis(long timestamp) { return toJava8(ofEpochMilli(timestamp)); } /** * To java 8 second local date time. * * @param timestamp the timestamp * @return the local date time */ public static LocalDateTime toJava8Second(long timestamp) { return toJava8(ofEpochSecond(timestamp * 1000)); } /** * To java 8 local date time. * * @param instant the instant * @return the local date time */ public static LocalDateTime toJava8(Instant instant) { ZoneId zone = ZoneId.systemDefault(); return LocalDateTime.ofInstant(instant, zone); } /** * To java 8 local date time. * * @param date the date * @return the local date time */ public static LocalDateTime toJava8(Date date) { return toJava8(date.toInstant()); } /** * Millis convert tuple 2. * * @param value the value * @param unit the unit * @return the tuple 2 */ public static Tuple2&lt;Long, String> millisConvert(long value, String unit) { return convert(value, unit, \"MS\"); } /** * Convert tuple 2. * * @param value the value * @param srcUnit the src unit * @param targetUnit the target unit * @return the tuple 2 */ public static Tuple2&lt;Long, String> convert(long value, String srcUnit, String targetUnit) { long result; TimeUnit timeUnit = getUnit(targetUnit); switch (srcUnit.toUpperCase()) { case \"SECONDS\": result = TimeUnit.SECONDS.convert(value, timeUnit); return Tuple.of(result, String.format(\"%d%s\", result, \"Áßí\")); case \"MINUTES\": result = TimeUnit.MINUTES.convert(value, timeUnit); return Tuple.of(result, String.format(\"%d%s\", result, \"ÂàÜÈíü\")); case \"HOURS\": result = TimeUnit.HOURS.convert(value, timeUnit); return Tuple.of(result, String.format(\"%d%s\", result, \"Â∞èÊó∂\")); case \"DAYS\": result = TimeUnit.DAYS.convert(value, timeUnit); return Tuple.of(result, String.format(\"%d%s\", result, \"Â§©\")); case \"MS\": case \"MILLIS\": case \"MILLISECONDS\": default: result = value; return Tuple.of(result, String.format(\"%d%s\", result, \"ÊØ´Áßí\")); } } /** * To millis long. * * @param value the value * @param unit the unit * @return the long */ public static Long toMillis(long value, String unit) { switch (unit.toUpperCase()) { case \"SECONDS\": return TimeUnit.SECONDS.toMillis(value); case \"MINUTES\": return TimeUnit.MINUTES.toMillis(value); case \"HOURS\": return TimeUnit.HOURS.toMillis(value); case \"DAYS\": return TimeUnit.DAYS.toMillis(value); case \"MS\": case \"MILLIS\": case \"MILLISECONDS\": default: return value; } } /** * Gets unit. * * @param unit the unit * @return the unit */ public static TimeUnit getUnit(String unit) { switch (unit.toUpperCase()) { case \"SECONDS\": return TimeUnit.SECONDS; case \"MINUTES\": return TimeUnit.MINUTES; case \"HOURS\": return TimeUnit.HOURS; case \"DAYS\": return TimeUnit.DAYS; case \"MS\": case \"MILLIS\": case \"MILLISECONDS\": default: return TimeUnit.MILLISECONDS; } } } TimestampParserFactorypackage com.github.iogogogo.common.util.parser; import com.github.iogogogo.common.util.parser.impl.LocalDateTimeParser; import com.github.iogogogo.common.util.parser.impl.UnixEpochParser; import com.github.iogogogo.common.util.parser.impl.UnixMillisEpochParser; import org.apache.commons.lang3.math.NumberUtils; /** * Created by tao.zeng on 2021/3/26. */ public class TimestampParserFactory { private final static int UNIX_LENGTH = 10, UNIX_MS_LENGTH = 13; /** * Make parser timestamp parser. * * @param value the value * @return the timestamp parser */ public static TimestampParser makeParser(String value) { if (NumberUtils.isCreatable(value)) { long longValue = NumberUtils.createNumber(value).longValue(); int length = Long.toString(longValue).length(); if (length == UNIX_LENGTH) { return new UnixEpochParser(longValue); } else if (length == UNIX_MS_LENGTH) { return new UnixMillisEpochParser(longValue); } } return new LocalDateTimeParser(value); } } TimestampParserpackage com.github.iogogogo.common.util.parser; import com.fasterxml.jackson.core.type.TypeReference; import com.google.common.collect.Lists; import com.github.iogogogo.common.util.JsonParse; import org.apache.commons.lang3.StringUtils; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.List; /** * Created by tao.zeng on 2021/3/26. */ public interface TimestampParser { /** * The constant PATTERN_LIST. */ List&lt;String> PATTERN_LIST = StringUtils.isNotEmpty(System.getProperty(\"iogogogo.ts.parse.pattern\", \"\")) ? JsonParse.tryParse(System.getProperty(\"iogogogo.ts.parse.pattern\", \"\"), new TypeReference&lt;List&lt;String>>() { }) : defaultPattern(); /** * Default pattern list. * * @return the list */ static List&lt;String> defaultPattern() { return Lists.newArrayList( \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", // 2020-08-13T08:59:59.904Z \"yyyy-MM-dd HH:mm:ss:SSSSSS\", // 2020-08-13 08:59:59:904001 \"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\", // 2020-08-13T08:59:59.904+08:00 \"yyyy-MM-dd HH:mm:ss:SSSSSS\", // 2020-08-13 08:59:59:904001 \"yyyy-MM-dd HH:mm:ss\", // 2020-08-13 08:59:59 \"yyyy-MM-dd HH:mm:ss.SSSZ\", \"yyyy-MM-dd HH:mm:ss.SSS\", \"yyyy-MM-dd HH:mm:ss,SSSZ\", \"yyyy-MM-dd HH:mm:ss,SSS\" ); } /** * Parse local date time. * * @param pattern the pattern * @return the local date time */ LocalDateTime parse(List&lt;DateTimeFormatter> pattern); } LocalDateTimeParserpackage com.github.iogogogo.common.util.parser.impl; import com.github.iogogogo.common.util.parser.TimestampParser; import lombok.extern.slf4j.Slf4j; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.time.format.DateTimeParseException; import java.util.List; import java.util.Objects; /** * Created by tao.zeng on 2021/3/29. */ @Slf4j public class LocalDateTimeParser implements TimestampParser { private final String value; public LocalDateTimeParser(String value) { this.value = value; } @Override public LocalDateTime parse(List&lt;DateTimeFormatter> pattern) { DateTimeParseException lastException = null; LocalDateTime dateTime = null; try { dateTime = LocalDateTime.parse(value); } catch (DateTimeParseException e) { lastException = e; for (DateTimeFormatter formatter : pattern) { try { dateTime = LocalDateTime.parse(value, formatter); log.info(\"match formatter:{}\", formatter); break; } catch (DateTimeParseException ex) { ex.addSuppressed(e); lastException = ex; } } } if (Objects.nonNull(dateTime)) return dateTime; throw lastException; } } UnixEpochParser package com.github.iogogogo.common.util.parser.impl; import com.github.iogogogo.common.util.Java8DateTimeUtils; import com.github.iogogogo.common.util.parser.TimestampParser; import java.time.Instant; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.List; /** * Created by tao.zeng on 2021/3/29. */ public class UnixEpochParser implements TimestampParser { private final static long MAX_EPOCH_SECONDS = Integer.MAX_VALUE; private final long value; public UnixEpochParser(long value) { this.value = value; } @Override public LocalDateTime parse(List&lt;DateTimeFormatter> pattern) { if (value > MAX_EPOCH_SECONDS) { throw new IllegalArgumentException(\"Cannot parse date for value larger than UNIX epoch maximum seconds\"); } Instant instant = Java8DateTimeUtils.ofEpochSecond(value); return Java8DateTimeUtils.toJava8(instant); } } UnixMillisEpochParser package com.github.iogogogo.common.util.parser.impl; import com.github.iogogogo.common.util.Java8DateTimeUtils; import com.github.iogogogo.common.util.parser.TimestampParser; import java.time.Instant; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.List; /** * Created by tao.zeng on 2021/3/29. */ public class UnixMillisEpochParser implements TimestampParser { private final static long MAX_EPOCH_MILLISECONDS = (long) Integer.MAX_VALUE * 1000; private final long value; public UnixMillisEpochParser(long value) { this.value = value; } @Override public LocalDateTime parse(List&lt;DateTimeFormatter> pattern) { if (value > MAX_EPOCH_MILLISECONDS) { throw new IllegalArgumentException(\"Cannot parse date for value larger than UNIX epoch maximum seconds\"); } Instant instant = Java8DateTimeUtils.ofEpochMilli(value); return Java8DateTimeUtils.toJava8(instant); } } ÂçïÂÖÉÊµãËØïpackage com.github.iogogogo; import com.github.iogogogo.common.util.Java8DateTimeUtils; import org.junit.Assert; import org.junit.Test; import java.time.LocalDateTime; import java.util.Date; import java.util.concurrent.TimeUnit; /** * Created by tao.zeng on 2021/4/2. */ public class DateTimeTests { @Test public void test() { String date = \"2020-08-13T08:59:59.904Z\"; LocalDateTime dateTime = Java8DateTimeUtils.tryParse(date); Assert.assertEquals(\"2020-08-13T08:59:59.904\", dateTime.toString()); date = \"2020-08-13 08:59:59:904001\"; dateTime = Java8DateTimeUtils.tryParse(date); Assert.assertEquals(\"2020-08-13T08:59:59.904001\", dateTime.toString()); date = \"2020-08-13T08:59:59.904+08:00\"; dateTime = Java8DateTimeUtils.tryParse(date); Assert.assertEquals(\"2020-08-13T08:59:59.904\", dateTime.toString()); date = \"2020-08-13 08:59:59\"; dateTime = Java8DateTimeUtils.tryParse(date); Assert.assertEquals(\"2020-08-13T08:59:59\", dateTime.toString()); dateTime = LocalDateTime.of(2020, 8, 13, 0, 0); long milli = Java8DateTimeUtils.toEpochMilli(dateTime); Assert.assertEquals(Java8DateTimeUtils.toJava8(new Date(milli)), dateTime); dateTime = Java8DateTimeUtils.tryParse(String.valueOf(milli)); Assert.assertEquals(\"2020-08-13T00:00\", dateTime.toString()); /* ********** Ëá™ÂÆö‰πâpatternËß£Êûê********** */ date = \"2021/08/13 08:59:59\"; dateTime = Java8DateTimeUtils.tryParse(date, \"yyyy/MM/dd HH:mm:ss\"); Assert.assertEquals(\"2021-08-13T08:59:59\", dateTime.toString()); date = \"2021/08/13 08-59-59\"; dateTime = Java8DateTimeUtils.tryParse(date, \"yyyy/MM/dd HH:mm:ss\", \"yyyy/MM/dd HH-mm-ss\"); Assert.assertEquals(\"2021-08-13T08:59:59\", dateTime.toString()); date = \"2021/08/13 08.59.59\"; dateTime = Java8DateTimeUtils.tryParse(date, \"yyyy/MM/dd HH:mm:ss\", \"yyyy/MM/dd HH-mm-ss\", \"yyyy/MM/dd HH.mm.ss\"); Assert.assertEquals(\"2021-08-13T08:59:59\", dateTime.toString()); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"\"), TimeUnit.MILLISECONDS); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"MS\"), TimeUnit.MILLISECONDS); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"MILLIS\"), TimeUnit.MILLISECONDS); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"MILLISECONDS\"), TimeUnit.MILLISECONDS); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"MINUTES\"), TimeUnit.MINUTES); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"HOURS\"), TimeUnit.HOURS); Assert.assertEquals(Java8DateTimeUtils.getUnit(\"DAYS\"), TimeUnit.DAYS); long i = 2 * 60 * 1000L; Assert.assertEquals(120000L, (long) Java8DateTimeUtils.millisConvert(i, TimeUnit.MILLISECONDS.name())._1); Assert.assertEquals(120, (long) Java8DateTimeUtils.millisConvert(i, TimeUnit.SECONDS.name())._1); Assert.assertEquals(2, (long) Java8DateTimeUtils.millisConvert(i, TimeUnit.MINUTES.name())._1); Assert.assertEquals(0, (long) Java8DateTimeUtils.millisConvert(i, TimeUnit.DAYS.name())._1); i = 2; Assert.assertEquals(2, (long) Java8DateTimeUtils.toMillis(i, TimeUnit.MILLISECONDS.name())); Assert.assertEquals(2000, (long) Java8DateTimeUtils.toMillis(i, TimeUnit.SECONDS.name())); Assert.assertEquals(120000, (long) Java8DateTimeUtils.toMillis(i, TimeUnit.MINUTES.name())); Assert.assertEquals(172800000, (long) Java8DateTimeUtils.toMillis(i, TimeUnit.DAYS.name())); } }","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"Gitee PagesÊúçÂä°Ëá™Âä®Êõ¥Êñ∞","slug":"giee-hexo-auto-update","date":"2021-04-02T01:46:26.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2021/04/02/giee-hexo-auto-update/","link":"","permalink":"http://iogogogo.github.io/2021/04/02/giee-hexo-auto-update/","excerpt":"","text":"ÂèÇËÄÉÂú∞ÂùÄ1Ôºö„ÄêHexo„ÄëGitee PagesÊúçÂä°Ëá™Âä®Êõ¥Êñ∞ ÂèÇËÄÉÂú∞ÂùÄ2ÔºöËß£ÂÜ≥ gitee page Êó†Ê≥ïËá™Âä®Êõ¥Êñ∞","categories":[],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://iogogogo.github.io/tags/hexo/"}]},{"title":"‰ΩøÁî®JavaËÆ°ÁÆócronÊúÄËøëÊâßË°åÂë®Êúü","slug":"java-cron-calc-cycle","date":"2021-04-02T01:32:27.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2021/04/02/java-cron-calc-cycle/","link":"","permalink":"http://iogogogo.github.io/2021/04/02/java-cron-calc-cycle/","excerpt":"","text":"È°πÁõÆ‰∏≠‰ΩøÁî®cronË°®ËææÂºèÊù•‰Ωú‰∏∫ÂÆöÊó∂Ë∞ÉÂ∫¶ÁöÑÂèÇÊï∞ÔºåÂèàÈúÄË¶ÅÊ†πÊçÆÊâßË°åÁöÑÂë®ÊúüÊù•ËÆ°ÁÆó‰∏Ä‰∫õÂπ≥ÂùáÊï∞ÊçÆÔºåÊâÄ‰ª•ÈúÄË¶ÅÊ†πÊçÆcronË°®ËææÂºèËé∑ÂèñÊâßË°åÂë®Êúü„ÄÇ quartz ÂèØ‰ª•ÂÆûÁé∞Ëé∑ÂèñÊúÄËøëÂá†Ê¨°ÊâßË°åÂë®ÊúüÔºå‰ΩÜÊòØÂ¶ÇÊûúÊ≤°Êúâquartz‰æùËµñÂèàÈúÄË¶ÅÂºïÂÖ•‰∏çÂøÖË¶Å‰æùËµñ„ÄÇ spring 5.3 ‰ª•‰∏äÊèê‰æõ‰∫Ü CronExpressionÔºåÂèØ‰ª•Áî®Êù•ÂÆûÁé∞ËØ•ÈúÄÊ±Ç„ÄÇ ‰ΩøÁî®quartzËé∑ÂèñÊúÄËøëÊâßË°åÁöÑÊó∂Èó¥ /** * &lt;dependency> * &lt;groupId>org.quartz-scheduler&lt;/groupId> * &lt;artifactId>quartz&lt;/artifactId> * &lt;/dependency> * */ import org.quartz.TriggerUtils; import org.quartz.impl.triggers.CronTriggerImpl; import org.quartz.spi.OperableTrigger; /** * Latest list. * &lt;p> * String cron = \"0 0/2 * * * ?\"; * * @param cron the cron * @param count the count * @return the list * @throws ParseException the parse exception */ public static List&lt;LocalDateTime> latest(String cron, int count) throws ParseException { CronTriggerImpl cronTriggerImpl = new CronTriggerImpl(); // ËÆæÁΩÆcronË°®ËææÂºè cronTriggerImpl.setCronExpression(cron); // Ê†πÊçÆcountËé∑ÂèñÊúÄËøëÊâßË°åÊó∂Èó¥ List&lt;Date> dateList = TriggerUtils.computeFireTimes(cronTriggerImpl, null, count); return dateList.stream().map(Java8DateTimeUtils::toJava8).collect(Collectors.toList()); } ‰ΩøÁî®spring-contextËé∑ÂèñÊúÄËøëÊâßË°åÊó∂Èó¥Ëé∑ÂèñcronÂΩìÂâçÊ¨°ÊâßË°åÊó∂Èó¥ÂíåÂâçÂêéÊ¨°ÊâßË°åÊó∂Èó¥import org.springframework.scheduling.support.CronExpression; import java.time.Duration; import java.time.LocalDateTime; /** * Nearby local date time. * &lt;p> * Ëé∑ÂèñcronÂΩìÂâçÊ¨°ÊâßË°åÊó∂Èó¥ÂíåÂâçÂêéÊ¨°ÊâßË°åÊó∂Èó¥ * &lt;p> * String cron = \"0 0/2 * * * ?\"; * * @param cron the cron * @return local date time */ public static Tuple3&lt;LocalDateTime, LocalDateTime, LocalDateTime> nearby(String cron) { // ËΩ¨Êç¢ÊàêcronË°®ËææÂºè CronExpression cronExpression = CronExpression.parse(cron); // ‰∏ã‰∏ÄÊ¨°ÊâßË°åÊó∂Èó¥ LocalDateTime next = cronExpression.next(LocalDateTime.now()); Objects.requireNonNull(next); // ‰∏§Ê¨°Èó¥ÈöîÊó∂Èó¥ long between = Duration.between(next, cronExpression.next(next)).getSeconds(); // ÂΩìÂâçÊ¨°ÊâßË°åÊó∂Èó¥ LocalDateTime current = next.minusSeconds(between); // ‰∏ä‰∏ÄÊ¨°ÊâßË°åÊó∂Èó¥ LocalDateTime previous = current.minusSeconds(between); log.info(\"now:{} previous:{} current:{} next:{}\", Java8DateTimeUtils.nowDateTime(), previous, current, next); return Tuple.of(previous, current, next); } Ëé∑ÂèñÊúÄËøëÂá†Ê¨°ÁöÑÊâßË°åÊó∂Èó¥ /** * Nearby list. * &lt;p> * ÊåâÁÖßcountËé∑ÂèñÊúÄËøëÂá†Ê¨°ÊâßË°åÊó∂Èó¥ * * @param cron the cron * @param isAfter the is after * @param count the count * @return the list */ public static List&lt;LocalDateTime> nearby(String cron, boolean isAfter, int count) { // ËΩ¨Êç¢ÊàêcronË°®ËææÂºè CronExpression cronExpression = CronExpression.parse(cron); // ‰∏ã‰∏ÄÊ¨°È¢ÑËÆ°ÊâßË°åÊó∂Èó¥ LocalDateTime nextFirst = cronExpression.next(LocalDateTime.now()); Objects.requireNonNull(nextFirst); // ‰∏ã‰∏ãÊ¨°È¢ÑËÆ°ÊâßË°åÊó∂Èó¥ LocalDateTime nextSecond = cronExpression.next(nextFirst); // ‰∏§Ê¨°ÊâßË°åÈó¥Èöî long between = ChronoUnit.SECONDS.between(nextFirst, nextSecond); List&lt;LocalDateTime> dateTimes = Lists.newArrayList(); int i = 0; while (i++ &lt; count) { Objects.requireNonNull(nextSecond); nextFirst = isAfter ? nextFirst.plusSeconds(between) : nextFirst.minusSeconds(between); dateTimes.add(nextFirst); } return dateTimes; } „ÄêÂèÇËÄÉ„ÄëjavaÈÄöËøácronË°®ËææÂºèÊù•Ëé∑ÂèñÊâßË°åÁöÑÂë®ÊúüÂéüÊñáÈìæÊé•Ôºöhttps://www.codeleading.com/article/42705195442/#_17 1„ÄÅËÆ°ÁÆóÂõ∫ÂÆöÁöÑÂë®ÊúüÈÄöËøá‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥Âíå‰∏ã‰∏ãÊ¨°ÊâßË°åÊó∂Èó¥‰πãÂ∑ÆËÆ°ÁÆó /** * Ê†πÊçÆcronË°®ËææÂºèËé∑ÂèñÊâßË°åÂë®Êúü */ @Test public void getPeriodByCron() { //30sÊâßË°å‰∏ÄÊ¨° String cron = \"0/30 * * * * ?\"; //spring @since 5.3 CronExpression cronExpression = CronExpression.parse(cron); //‰∏ãÊ¨°È¢ÑËÆ°ÁöÑÊâßË°åÊó∂Èó¥ LocalDateTime nextFirst = cronExpression.next(LocalDateTime.now()); //‰∏ã‰∏ãÊ¨°È¢ÑËÆ°ÁöÑÊâßË°åÊó∂Èó¥ LocalDateTime nextSecond = cronExpression.next(nextFirst); //ËÆ°ÁÆóÂë®Êúü1 long between1 = ChronoUnit.SECONDS.between(nextFirst, nextSecond); Assert.assertEquals(between1, 30); //ËÆ°ÁÆóÂë®Êúü2 long between2 = Duration.between(nextFirst, nextSecond).getSeconds(); Assert.assertEquals(between2, 30); } 2„ÄÅËÆ°ÁÆóÂ§ö‰∏™Âë®Êúü‰∏çÂõ∫ÂÆöÁöÑÂë®ÊúüÔºåËé∑ÂèñÊúÄËøëÂá†Ê¨°ÁöÑÈ¢ÑÂÆöÊâßË°åÊó∂Èó¥ @Test public void getEveryPeriodByCron() { List&lt;Long> periods = Lists.newArrayList(); //ÊØèÂ∞èÊó∂ÁöÑÂâç5ÂàÜÈíüÊØèÂàÜÈíüÊâßË°å‰∏ÄÊ¨°ÔºåËøôÁßçÂë®Êúü‰∏çÊòØÂõ∫ÂÆöÁöÑ String cron = \"0 0,1,2,3,4,5 * * * ? \"; //spring @since 5.3 CronExpression cronExpression = CronExpression.parse(cron); //‰∏ãÊ¨°È¢ÑËÆ°ÁöÑÊâßË°åÊó∂Èó¥ LocalDateTime prevTime = cronExpression.next(LocalDateTime.now()); int i = 0; while (i++ &lt; 10) { Objects.requireNonNull(prevTime); LocalDateTime nextTime = cronExpression.next(prevTime); long between = ChronoUnit.SECONDS.between(prevTime, nextTime); prevTime = nextTime; periods.add(between); } System.out.println(ArrayUtils.toString(periods)); }","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"cron","slug":"cron","permalink":"http://iogogogo.github.io/tags/cron/"}]},{"title":"logstash‰øÆÊîπÈªòËÆ§Êó∂Âå∫‰∏∫‰∏úÂÖ´Âå∫","slug":"logstash-compile-md","date":"2020-12-19T02:46:41.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2020/12/19/logstash-compile-md/","link":"","permalink":"http://iogogogo.github.io/2020/12/19/logstash-compile-md/","excerpt":"","text":"‰∏ä‰∏ÄÁØáÊñáÁ´†Êàë‰ª¨ËÆ≤‰∫Ülogstash-filter-dateÊèí‰ª∂ÊÄé‰πàÊîØÊåÅÁ∫≥ÁßíÂπ∂‰∏îËøõË°åÁºñËØëÔºåÊúÄÂêéÊèêÂà∞‰∫Ü‰∏Ä‰∏™Êó∂Âå∫ÈóÆÈ¢òÔºåÊàë‰ª¨ËØ¥ËØ¥logstashÈªòËÆ§ÁöÑÊó∂Âå∫ÈóÆÈ¢òÔºåËøôÈáå‰∏ªË¶ÅÊ∂âÂèä‰∏§‰∏™Á±ª org.logstash.StringInterpolation org.logstash.Timestamp Êï¥‰ΩìÁöÑÊÄùË∑ØÂíåÁºñËØëlogstash-filter-dateÊèí‰ª∂Á±ª‰ººÔºå‰∏ªË¶ÅÂ∞±ÊòØ‰øÆÊîπ‰ª•‰∏ä‰∏§‰∏™Á±ªÁöÑÊó∂Âå∫ÔºåÁÑ∂ÂêéÂú®ÁºñËØëÂç≥ÂèØ„ÄÇ ‰æùËµñÂÆâË£Ö ‰∏ãËΩΩÊ∫ê‰ª£Á†Å ‰øÆÊîπÊ∫êÁ†Å ÁΩëÁªúÈóÆÈ¢òÈÄ†Êàê‰∏ãËΩΩÂ§±Ë¥•ÊàñËÄÖÁºìÊÖ¢Ëß£ÂÜ≥ÊñπÊ°à ÊûÑÂª∫snapshot package ‰ΩøÁî®snapshot packageÊµãËØïÊó∂Âå∫ÈóÆÈ¢ò ‰æùËµñÂÆâË£Ö gradle Ê†πÊçÆÈ°πÁõÆgradle/wrapper/gradle-wrapper.properties‰∏ãËΩΩgradle-x.x.x-bin.zipÔºåÊîæÂú®~/.gradle/wrapper/dists/gradle-6.5.1-bin/1m5048aptkfynhbvolwgr4ej9/ https://services.gradle.org/distributions/ ruby jruby rvm rbenv https://rubygems.org/ ‰∏ãËΩΩÊ∫ê‰ª£Á†Åcd ~/share/tmp # Â¶ÇÊûúÂ´åÂºÉ‰∏ãËΩΩÁöÑÊÖ¢ÔºåÂèØ‰ª•‰ΩøÁî®giteeËøõË°åÂØºÂÖ•ÔºåÁÑ∂ÂêéÊ†πÊçÆgiteeÁöÑÂú∞ÂùÄ‰∏ãËΩΩ git clone https://github.com/elastic/logstash # Ê†πÊçÆtagÂàáÊç¢Âà∞7.9.3ÂàÜÊîØ git checkout -b v7.9.3 v7.9.3 ÁΩëÁªúÈóÆÈ¢òÈÄ†Êàê‰∏ãËΩΩÂ§±Ë¥•ÊàñËÄÖÁºìÊÖ¢Ëß£ÂÜ≥ÊñπÊ°àjruby-complete-9.2.13.0.jarËøô‰∏™ÂåÖ‰∏ãËΩΩ‰ºöÊØîËæÉÊÖ¢ÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãËΩΩÂ∑•ÂÖ∑‰∏ãËΩΩÔºåËÆ©Â∞Üjruby-complete-9.2.13.0.jarÊîæÂú®~/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.13.0/xxxÁõÆÂΩï‰∏ã„ÄÇ cd ~/share/tmp wget https://repo.maven.apache.org/maven2/org/jruby/jruby-complete/9.2.13.0/jruby-complete-9.2.13.0.jar jruby-dist-9.2.13.0-bin.tar.gzËøô‰∏™ÂåÖÊØèÊ¨°ÁºñËØëÊó∂‰ºöÁî®Âà∞Ôºå‰∏ãËΩΩ‰πüÊØîËæÉÊÖ¢ÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãËΩΩÂ∑•ÂÖ∑ÊèêÂâç‰∏ãËΩΩÂ•ΩÔºåÁÑ∂ÂêéÊîæÂú®$LOGSTASH_HOME/vendor/_/‰∏ã cd ~/share/tmp wget https://repo1.maven.org/maven2/org/jruby/jruby-dist/9.2.13.0/jruby-dist-9.2.13.0-bin.tar.gz # Ê†πÊçÆÂÆûÈôÖË∑ØÂæÑËá™Ë°åÊõøÊç¢ cp ~/share/tmp/jruby-dist-9.2.13.0-bin.tar.gz vendor/_ ‰øÆÊîπÊ∫êÁ†Åorg.logstash.StringInterpolationËØ•Á±ªÈúÄË¶Å‰øÆÊîπorg.logstash.StringInterpolation#evaluate(Event, String)ÊñπÊ≥ï // ‰øÆÊîπÂâç builder.append(t != null ? event.getTimestamp().getTime().toString( DateTimeFormat.forPattern(template.substring(open + 3, close)) .withZone(DateTimeZone.UTC)) : \"\" ); // ‰øÆÊîπÂêéÔºåÂ∞ÜUTCÊó∂Âå∫Êîπ‰∏∫‰∏úÂÖ´Âå∫ builder.append(t != null ? event.getTimestamp().getTime().toString( DateTimeFormat.forPattern(template.substring(open + 3, close)) .withZone(DateTimeZone.forID(\"+08:00\"))) : \"\" ); org.logstash.TimestampËØ•Á±ªÈúÄË¶Å‰øÆÊîπ‰∏Ä‰∏™Â∏∏ÈáèÔºå‰πüÊòØÂ∞ÜUTCÊó∂Âå∫Êîπ‰∏∫‰∏úÂÖ´Âå∫ // ‰øÆÊîπÂâç private static final Chronology UTC_CHRONOLOGY = ISOChronology.getInstance(DateTimeZone.UTC); // ‰øÆÊîπÂêé private static final Chronology UTC_CHRONOLOGY = ISOChronology.getInstance(DateTimeZone.forID(\"+08:00\")); ÊûÑÂª∫snapshot packageBuilding Logstashrake bootstrap Building Artifacts# cd $LOGSTASH_HOME ./gradlew assembleTarDistribution ÁºñËØëÊó•Âøó‚ûú logstash git:(v7.9.3) ‚úó ./gradlew assembleTarDistribution To honour the JVM settings for this build a new JVM will be forked. Please consider using the daemon: https://docs.gradle.org/6.5.1/userguide/gradle_daemon.html. Daemon will be stopped at the end of the build stopping after processing > Task :downloadJRuby UP-TO-DATE Download https://repo1.maven.org/maven2/org/jruby/jruby-dist/9.2.13.0/jruby-dist-9.2.13.0-bin.tar.gz > Task :logstash-core:compileJava Ê≥®: Processing Log4j annotations Ê≥®: Annotations processed Ê≥®: Processing Log4j annotations Ê≥®: No elements to process > Task :installBundler Fetching bundler-1.17.3.gem Successfully installed bundler-1.17.3 1 gem installed > Task :assembleTarDistribution Invoking bundler install... Using rake 12.3.3 Using public_suffix 3.1.1 Using addressable 2.7.0 Using cabin 0.9.0 Using arr-pm 0.0.10 Using atomic 1.1.101 (java) Using backports 3.18.2 Using builder 3.2.4 Using bundler 1.17.3 Using ffi 1.13.1 (java) Using childprocess 0.9.0 Using numerizer 0.1.1 Using chronic_duration 0.10.6 Using clamp 0.6.5 Using coderay 1.1.3 Using concurrent-ruby 1.1.7 Using dotenv 2.7.6 Using multi_json 1.15.0 Using elasticsearch-api 5.0.5 Using multipart-post 2.1.1 Using faraday 0.15.4 Using elasticsearch-transport 5.0.5 Using elasticsearch 5.0.5 Using filesize 0.2.0 Using json 1.8.6 (java) Using fpm 1.3.3 Using gems 1.2.0 Using i18n 1.8.5 Using insist 1.0.0 Using jrjackson 0.4.12 (java) Using jruby-openssl 0.10.4 (java) Using openssl_pkcs8_pure 0.0.0.2 Using manticore 0.7.0 (java) Using minitar 0.9 Using mustermann 1.0.3 Using method_source 1.0.0 Using spoon 0.0.6 Using pry 0.13.1 (java) Using nio4r 2.5.4 (java) Using puma 4.3.6 (java) Using rack 2.2.3 Using rubyzip 1.3.0 Using rack-protection 2.1.0 Using tilt 2.0.10 Using sinatra 2.1.0 Using stud 0.0.23 Using thread_safe 0.3.6 (java) Using polyglot 0.3.5 Using treetop 1.6.11 Using logstash-core 7.9.3 (java) from source at `logstash-core` Using logstash-core-plugin-api 2.1.16 (java) from source at `logstash-core-plugin-api` Using logstash-mixin-ecs_compatibility_support 1.0.0 (java) Using logstash-output-elasticsearch 10.6.2 (java) Using mustache 0.99.8 Using sawyer 0.8.2 Using octokit 4.18.0 Using paquet 0.2.1 Using pleaserun 0.0.31 Using ruby-progressbar 1.10.1 Bundle complete! 25 Gemfile dependencies, 59 gems now installed. Gems in the group development were not installed. Bundled gems are installed into `./vendor/bundle` [plugin:install-default] Installing default plugins Installing logstash-codec-avro, logstash-codec-cef, logstash-codec-collectd, logstash-codec-dots, logstash-codec-edn, logstash-codec-edn_lines, logstash-codec-es_bulk, logstash-codec-fluent, logstash-codec-graphite, logstash-codec-json, logstash-codec-json_lines, logstash-codec-line, logstash-codec-msgpack, logstash-codec-multiline, logstash-codec-netflow, logstash-codec-plain, logstash-codec-rubydebug, logstash-filter-aggregate, logstash-filter-anonymize, logstash-filter-cidr, logstash-filter-clone, logstash-filter-csv, logstash-filter-date, logstash-filter-de_dot, logstash-filter-dissect, logstash-filter-dns, logstash-filter-drop, logstash-filter-elasticsearch, logstash-filter-fingerprint, logstash-filter-geoip, logstash-filter-grok, logstash-filter-http, logstash-filter-json, logstash-filter-kv, logstash-filter-memcached, logstash-filter-metrics, logstash-filter-mutate, logstash-filter-prune, logstash-filter-ruby, logstash-filter-sleep, logstash-filter-split, logstash-filter-syslog_pri, logstash-filter-throttle, logstash-filter-translate, logstash-filter-truncate, logstash-filter-urldecode, logstash-filter-useragent, logstash-filter-uuid, logstash-filter-xml, logstash-input-azure_event_hubs, logstash-input-beats, logstash-input-couchdb_changes, logstash-input-dead_letter_queue, logstash-input-elasticsearch, logstash-input-exec, logstash-input-file, logstash-input-ganglia, logstash-input-gelf, logstash-input-generator, logstash-input-graphite, logstash-input-heartbeat, logstash-input-http, logstash-input-http_poller, logstash-input-imap, logstash-input-jms, logstash-input-pipe, logstash-input-redis, logstash-input-s3, logstash-input-snmp, logstash-input-snmptrap, logstash-input-sqs, logstash-input-stdin, logstash-input-syslog, logstash-input-tcp, logstash-input-twitter, logstash-input-udp, logstash-input-unix, logstash-integration-jdbc, logstash-integration-kafka, logstash-integration-rabbitmq, logstash-output-cloudwatch, logstash-output-csv, logstash-output-elastic_app_search, logstash-output-elasticsearch, logstash-output-email, logstash-output-file, logstash-output-graphite, logstash-output-http, logstash-output-lumberjack, logstash-output-nagios, logstash-output-null, logstash-output-pipe, logstash-output-redis, logstash-output-s3, logstash-output-sns, logstash-output-sqs, logstash-output-stdout, logstash-output-tcp, logstash-output-udp, logstash-output-webhdfs 98% EXECUTING [9m 27s] > :assembleTarDistribution ÁºñËØëÂÆåÊàêÁõÆÂΩïÁªìÊûÑ Â∏∏ËßÅÈóÆÈ¢ò ÊâìÂåÖÊä•Èîô Could not find tools.jar. Please check that /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home contains a valid JDK installation. Ëß£ÂÜ≥ÊñπÊ°àÔºöhttps://www.cnblogs.com/johnjackson/p/14040958.html In Gemfile: logstash-filter-geoipError Bundler::InstallError, retrying 8/10Bundler::GemspecError: Could not read gem at /Users/tao.zeng/share/workspaces/opensource/logstash/vendor/bundle/jruby/2.5.0/cache/logstash-filter-geoip-6.0.3-java.gem. It may be corrupted.An error occurred while installing logstash-filter-geoip (6.0.3), and Bundler cannot continue.Make sure that gem install logstash-filter-geoip -v &#39;6.0.3&#39; --source &#39;https://rubygems.org/&#39; succeeds before bundling. ËØ•ÈóÆÈ¢òÊòØlogstash-filter-geoipÊ≤°ÊúâÊåâÁÖßÔºåÈúÄË¶ÅÊâãÂä®ÊâßË°åÂÆâË£ÖÔºå‰ΩÜÊòØÁî±‰∫égemÁöÑÊ∫êÁâπÂà´ÊÖ¢ÔºåÂèØ‰ª•‰ΩøÁî®ÂõΩÂÜÖÁöÑÊ∫ê„ÄÇ ÂèÇËÄÉÂú∞ÂùÄÔºöRuby Gems ÈïúÂÉè ÊâßË°åÂÆâË£ÖÂëΩ‰ª§ÔºåÂêéÈù¢ÁöÑsourceÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÂÖ®Â±Ä‰ª£ÁêÜÔºåÂàôÂèØ‰ª•ÁúÅÁï• gem install logstash-filter-geoip -v '6.0.3' --source https://mirrors.aliyun.com/rubygems/ ‰ΩøÁî®snapshot packageÊµãËØïÊó∂Âå∫ÈóÆÈ¢ò‚ûú logstash-7.9.3 ./lsboot conf/test.conf test bin/logstash -f conf/test.conf -l logs/test --path.data data/test -n test Sending Logstash logs to logs/test which is now configured via log4j2.properties [2020-12-29T19:12:34,823][INFO ][logstash.runner ] Starting Logstash {\"logstash.version\"=>\"7.9.3\", \"jruby.version\"=>\"jruby 9.2.13.0 (2.5.7) 2020-08-03 9a89c94bcc Java HotSpot(TM) 64-Bit Server VM 25.201-b09 on 1.8.0_201-b09 +indy +jit [darwin-x86_64]\"} [2020-12-29T19:12:35,003][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=>\"path.queue\", :path=>\"data/test/queue\"} [2020-12-29T19:12:35,007][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=>\"path.dead_letter_queue\", :path=>\"data/test/dead_letter_queue\"} [2020-12-29T19:12:35,101][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified [2020-12-29T19:12:35,139][INFO ][logstash.agent ] No persistent UUID file found. Generating new UUID {:uuid=>\"ea54c753-bafe-4a0c-b064-5409e9fe1114\", :path=>\"data/test/uuid\"} [2020-12-29T19:12:37,276][INFO ][org.reflections.Reflections] Reflections took 44 ms to scan 1 urls, producing 22 keys and 45 values [2020-12-29T19:12:38,937][INFO ][logstash.javapipeline ][main] Starting pipeline {:pipeline_id=>\"main\", \"pipeline.workers\"=>8, \"pipeline.batch.size\"=>125, \"pipeline.batch.delay\"=>50, \"pipeline.max_inflight\"=>1000, \"pipeline.sources\"=>[\"/Users/tao.zeng/share/software/logstash-7.9.3/conf/test.conf\"], :thread=>\"#\"} [2020-12-29T19:12:39,895][INFO ][logstash.javapipeline ][main] Pipeline Java execution initialization time {\"seconds\"=>0.95} [2020-12-29T19:12:39,952][INFO ][logstash.inputs.stdin ][main] Automatically switching from json to json_lines codec {:plugin=>\"stdin\"} [2020-12-29T19:12:39,999][INFO ][logstash.javapipeline ][main] Pipeline started {\"pipeline.id\"=>\"main\"} The stdin plugin is now waiting for input: [2020-12-29T19:12:40,062][INFO ][logstash.agent ] Pipelines running {:count=>1, :running_pipelines=>[:main], :non_running_pipelines=>[]} [2020-12-29T19:12:40,310][INFO ][logstash.agent ] Successfully started Logstash API endpoint {:port=>9600} [ { \"type\":\"test\", \"parent\": \"TOTAL\", \"children\": [ \"TRANSCODE\", \"HOSTNAME\", \"MICROAPP\" ] } ] { \"children\" => [ [0] \"TRANSCODE\", [1] \"HOSTNAME\", [2] \"MICROAPP\" ], \"type\" => \"test\", \"parent\" => \"TOTAL\", \"unix_ts\" => 1609240365076, \"host\" => \"TaoZeng.MBP\", \"@timestamp\" => 2020-12-29T19:12:45.076+08:00, # ÈªòËÆ§Êó∂Âå∫Â∑≤ÁªèÊîπ‰∏∫‰∏úÂÖ´Âå∫ÁöÑÊó∂Èó¥ \"name\" => \"ÂìàÂìàÂìà\", \"@version\" => \"1\" }","categories":[],"tags":[{"name":"logstash","slug":"logstash","permalink":"http://iogogogo.github.io/tags/logstash/"}]},{"title":"logstashÊó•ÊúüÊèí‰ª∂ÊîØÊåÅÁ∫≥Áßí","slug":"logstash-filter-date-compile","date":"2020-12-18T08:01:58.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2020/12/18/logstash-filter-date-compile/","link":"","permalink":"http://iogogogo.github.io/2020/12/18/logstash-filter-date-compile/","excerpt":"","text":"ÊúÄËøëÈ°πÁõÆ‰∏äÈÅáÂà∞Êó∂Èó¥‰∏∫Á∫≥ÁßíÁöÑÊÉÖÂÜµÔºåÁî®Âà∞logstashËß£ÊûêÊó∂ÊòØ‰∏çÊîØÊåÅÁ∫≥ÁßíÁöÑÔºåËøôÈáåÊèê‰æõ‰∏Ä‰∏™ÊÄùË∑ØÂ∞±ÊòØËá™Â∑±‰øÆÊîπlogstashÁöÑÊó•ÊúüÊèí‰ª∂ÔºåËÆ©‰ªñÊîØÊåÅÁ∫≥ÁßíÔºåÂÖ∑‰ΩìÊ∂âÂèäÁöÑÊèí‰ª∂ÊòØlogstash-filter-date ÂâçÊúüÂáÜÂ§á ‰∏ãËΩΩÊ∫ê‰ª£Á†Å ‰∏ãËΩΩlogstash ÂÆâË£ÖÂøÖË¶ÅÁºñËØëÁªÑ‰ª∂ ‰øÆÊîπÊ∫ê‰ª£Á†Å ÊâìÂåÖÁºñËØë ÊõøÊç¢ÈªòËÆ§ÁöÑlogstash-filter-date-${version}.jar ÊµãËØïÁ∫≥ÁßíËß£Êûê ‰∏ãËΩΩÊ∫êÁ†Åcd ~/share/tmp # Â¶ÇÊûú‰∏ãËΩΩÂ§™ÊÖ¢ÔºåÂèØ‰ª•ÂÖàÁî®giteeÂêåÊ≠•ËØ•‰ªìÂ∫ìÔºåÁÑ∂ÂêéÂú®‰ΩøÁî®giteeÂú∞ÂùÄ‰∏ãËΩΩ git clone https://github.com/logstash-plugins/logstash-filter-date.git # giteeÂú∞ÂùÄ git clone https://gitee.com/iogogogo/logstash-filter-date.git # ÂàáÊç¢Âà∞ÊúÄÊñ∞ÁöÑtagÂàÜÊîØÔºåÁõÆÂâçÊòØv3.1.9 git checkout -b v3.1.9 v3.1.9 ‰∏ãËΩΩlogstashÂõ†‰∏∫ÊàëÁî®Âà∞ÁöÑlogstashÁâàÊú¨‰∏∫7.9.3ÔºåÊâÄ‰ª•‰∏ãËΩΩÁöÑlogstash‰πüÊòØ7.9.3ÔºåÁêÜËÆ∫‰∏äÁºñËØëÂá∫Êù•ÁöÑlogstash-filter-dateÊòØÈÄöÁî®ÁöÑ cd ~/share/tmp wget https://artifacts.elastic.co/downloads/logstash/logstash-7.9.3.tar.gz ÂÆâË£ÖÁºñËØëÁªÑ‰ª∂ ÂÆâË£Öjruby https://www.ruby-lang.org/zh_cn/downloads/ ÂÆâË£Örvm https://rvm.io/ ÂÆâË£Örbenv https://ruby-china.org/wiki/rbenv-guide ‰øÆÊîπÊ∫ê‰ª£Á†ÅÂ∞ÜÊ∫ê‰ª£Á†ÅÂØºÂÖ•ideaÊ∫êÁ†ÅÂØºÂÖ•idea‰ºö‰∏ãËΩΩgradleÁªÑ‰ª∂ÂíåÂØπÂ∫îÁöÑ‰æùËµñÔºåËøôÈáåÈúÄË¶Å‰øùËØÅÁΩëÁªúÁïÖÈÄö„ÄÇ Ê∑ªÂä†Á∫≥ÁßíËß£ÊûêÊâæÂà∞src/main/java/org/logstash/filters/parserÂåÖ‰ΩçÁΩÆÔºåÊñ∞Âª∫‰∏Ä‰∏™Á∫≥ÁßíËß£ÊûêÁ±ª /* * Licensed to Elasticsearch under one or more contributor * license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright * ownership. Elasticsearch licenses this file to you under * the Apache License, Version 2.0 (the \"License\"); you may * not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, * software distributed under the License is distributed on an * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY * KIND, either express or implied. See the License for the * specific language governing permissions and limitations * under the License. */ package org.logstash.filters.parser; import org.joda.time.Instant; import java.math.BigDecimal; /** * Created by tao.zeng on 2020/12/12. */ public class UnixNanosecondParser implements TimestampParser { private static long MAX_EPOCH_NANOSECOND = (long) Integer.MAX_VALUE * 1000 * 1000; @Override public Instant parse(String value) { return parse(Long.parseLong(value)); } @Override public Instant parse(Long value) { return new Instant(value / 1000); } @Override public Instant parse(Double value) { // XXX: Should we accept a double? return parse(value.longValue()); } @Override public Instant parseWithTimeZone(String value, String timezone) { return parse(value); } @Override public Instant parse(BigDecimal value) { long lv = value.longValue(); if (lv > MAX_EPOCH_NANOSECOND) { throw new IllegalArgumentException(\"Cannot parse date for value larger than UNIX NS maximum seconds\"); } return new Instant(lv / 1000); } } Âú®Ëß£ÊûêÂ∑•ÂéÇÁ±ªÊ∑ªÂä†Á∫≥ÁßíËß£Êûêorg.logstash.filters.parser.TimestampParserFactory /* * Licensed to Elasticsearch under one or more contributor * license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright * ownership. Elasticsearch licenses this file to you under * the Apache License, Version 2.0 (the \"License\"); you may * not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, * software distributed under the License is distributed on an * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY * KIND, either express or implied. See the License for the * specific language governing permissions and limitations * under the License. */ package org.logstash.filters.parser; import org.joda.time.DateTimeZone; import java.util.Locale; public class TimestampParserFactory { private DateTimeZone timezone; private static final String ISO8601 = \"ISO8601\"; private static final String UNIX = \"UNIX\"; private static final String UNIX_MS = \"UNIX_MS\"; /** * Êñ∞Â¢ûÁ∫≥Áßí */ private static final String UNIX_NS = \"UNIX_NS\"; private static final String TAI64N = \"TAI64N\"; /* * zone is a String because it can be dynamic and come from the event while we parse it. */ public static TimestampParser makeParser(String pattern, Locale locale, String zone) { if (locale == null) { locale = Locale.getDefault(); } String tz = zone; if (tz == null) { tz = DateTimeZone.getDefault().getID(); } else if (zone.contains(\"%{\")) { tz = null; } switch (pattern) { case ISO8601: // Short-hand for a few ISO8601-ish formats return new CasualISO8601Parser(tz); case UNIX: // Unix epoch in seconds return new UnixEpochParser(); case TAI64N: // TAI64N format return new TAI64NParser(); case UNIX_MS: // Unix epoch in milliseconds return new UnixMillisEpochParser(); case UNIX_NS: // Unix epoch in nanoseconds // Á∫≥ÁßíËß£ÊûêÁ±ª return new UnixNanosecondParser(); default: return new JodaParser(pattern, locale, tz); } } public static TimestampParser makeParser(String pattern) { return makeParser(pattern, (Locale) null, null); } public static TimestampParser makeParser(String pattern, String locale, String zone) { return makeParser(pattern, locale == null ? null : Locale.forLanguageTag(locale), zone); } } Ê≥®Èáä‰∏Ä‰∏™ÂçïÂÖÉÊµãËØïÂõ†‰∏∫ËØ•Á±ª‰ºöÂõ†‰∏∫Êâæ‰∏çÂà∞ÊñπÊ≥ïËÄåÂØºËá¥ÁºñËØëÊä•ÈîôÔºåÂèØ‰ª•Ê≥®ÈáäÂøΩÁï•org.logstash.filters.DateFilterTest#commonAssertions private void commonAssertions(Event event, ParseExecutionResult code, String expected) { /*Assert.assertSame(ParseExecutionResult.SUCCESS, code); String actual = ((Timestamp) event.getField(\"[result_ts]\")).toIso8601(); Assert.assertTrue(String.format(\"Unequal - expected: %s, actual: %s\", expected, actual), expected.equals(actual));*/ } ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂build.gradle‰øÆÊîπbuild.gradleÊñá‰ª∂‰∏≠63„ÄÅ66‰∏§Ë°åÁöÑlogstash-coreÈÖçÁΩÆÔºåÊîπ‰∏∫‰∏ãËΩΩÁöÑÊ†áÂáÜlogstash/logstash-coreÁõÆÂΩï // ÈªòËÆ§ÈÖçÁΩÆ testCompile fileTree(dir: logstashCoreGemPath, include: '**/*.jar') compileOnly fileTree(dir: logstashCoreGemPath, include: '**/*.jar') // ‰øÆÊîπ‰∏∫‰∏ãËΩΩÁöÑlogstash/logstash-coreÁöÑÁªùÂØπË∑ØÂæÑ testCompile fileTree(dir: '/Users/tao.zeng/share/software/logstash-7.9.3/logstash-core', include: '**/*.jar') compileOnly fileTree(dir: '/Users/tao.zeng/share/software/logstash-7.9.3/logstash-core', include: '**/*.jar') Rakefile‰øÆÊîπRakefileÊñá‰ª∂ÁöÑlsc_pathÈÖçÁΩÆ‰∏∫logstash/logstash-coreÁõÆÂΩï // ÈªòËÆ§ÈÖçÁΩÆ lsc_path = `bundle show logstash-core` // ‰øÆÊîπ‰∏∫‰∏ãËΩΩÁöÑlogstash/logstash-coreÁöÑÁªùÂØπË∑ØÂæÑ lsc_path = `/Users/tao.zeng/share/software/logstash-7.9.3/logstash-core` ÊâìÂåÖÁºñËØëÊâßË°ågradleÁöÑbuild‰ªªÂä°ÔºåÁîüÊàêÊñ∞ÁöÑlogstash-date-filter-{version}.jarÔºåÊñ∞ÁîüÊàêÊñá‰ª∂ÁõÆÂΩïÂ¶Ç‰∏ãÔºö # Êúâ‰∏™Â•ΩÂ•áÁöÑÊòØÊòéÊòéÊòØ3.1.9ÁöÑtagÂåÖÔºå‰ΩÜÊòØÂú®Ê∫êÁ†ÅÈáåÈù¢Á°ÆÂÆû3.1.6ÁöÑÁâàÊú¨ÔºåÊâÄ‰ª•ÊâìÂåÖÂá∫Êù•‰πüÊòØ3.1.6ÁöÑÁâàÊú¨Âè∑ÔºåËß£ÂéãlogstashÂèëÁé∞‰πüÊòØËØ•ÁâàÊú¨Âè∑ÔºåÊâÄ‰ª•‰∏çÁî®Âú®ÊÑèÁâàÊú¨Âè∑ build/libs/logstash-filter-date-3.1.6.jar 19:38:39: Executing task 'build'... :buildSrc:compileJava UP-TO-DATE :buildSrc:compileGroovy UP-TO-DATE :buildSrc:processResources UP-TO-DATE :buildSrc:classes UP-TO-DATE :buildSrc:jar UP-TO-DATE :buildSrc:assemble UP-TO-DATE :buildSrc:compileTestJava UP-TO-DATE :buildSrc:compileTestGroovy UP-TO-DATE :buildSrc:processTestResources UP-TO-DATE :buildSrc:testClasses UP-TO-DATE :buildSrc:test UP-TO-DATE :buildSrc:check UP-TO-DATE :buildSrc:build UP-TO-DATE :distTar UP-TO-DATE :distZip UP-TO-DATE :compileJava :processResources UP-TO-DATE :classes :jar :assemble :compileTestJava :processTestResources UP-TO-DATE :testClasses :test :check :build BUILD SUCCESSFUL Total time: 7.276 secs 19:38:47: Task execution finished 'build'. ÊõøÊç¢logstash‰∏≠ÈªòËÆ§ÁöÑjarËß£Âéãlogstash-7.9.3.tar.gzcd ~/share/tmp # Ëß£Âéã tar -zxvf logstash-7.9.3.tar.gz Êü•Êâælogstash-filter-date-3.1.6.jarcd logstash-7.9.3 && find . -name 'logstash-filter-date*' # Êó•Âøó ‚ûú logstash-7.9.3 find . -name 'logstash-filter-date*' ./vendor/bundle/jruby/2.5.0/specifications/logstash-filter-date-3.1.9.gemspec ./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9 ./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9/logstash-filter-date.gemspec ./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9/lib/logstash-filter-date_jars.rb ./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9/vendor/jar-dependencies/org/logstash/filters/logstash-filter-date ./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9/vendor/jar-dependencies/org/logstash/filters/logstash-filter-date/3.1.6/logstash-filter-date-3.1.6.jar ÂèØ‰ª•ÁúãÂà∞ÂéüÂÖàÁöÑjarÂú®./vendor/bundle/jruby/2.5.0/gems/logstash-filter-date-3.1.9/vendor/jar-dependencies/org/logstash/filters/logstash-filter-date/3.1.6/Ëøô‰∏™ÁõÆÂΩï‰∏ãÈù¢ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÁî®‰øÆÊîπËøáÁöÑjarÊõøÊç¢ÊéâÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÊµãËØïÁ∫≥ÁßíËß£Êûê‰∏∫‰∫ÜÊñπ‰æøÊµãËØïÔºåÊàë‰ª¨Â∞Ü‰∏ä‰∏ÄÁØáÊñáÁ´†ÁöÑÂêØÂä®ËÑöÊú¨Â§çÂà∂ËøáÊù•ÔºåÂπ∂‰∏îÊñ∞Âª∫‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂conf/test.conf ‚ûú logstash-7.9.3 ll total 1280 -rw-r--r-- 1 tao.zeng staff 2.2K 10 16 20:23 CONTRIBUTORS -rw-r--r-- 1 tao.zeng staff 3.9K 10 16 20:24 Gemfile -rw-r--r-- 1 tao.zeng staff 22K 10 16 20:25 Gemfile.lock -rw-r--r-- 1 tao.zeng staff 13K 10 16 20:23 LICENSE.txt -rw-r--r-- 1 tao.zeng staff 587K 10 16 20:23 NOTICE.TXT drwxr-xr-x 22 tao.zeng staff 704B 10 16 21:35 bin drwxr-xr-x 3 tao.zeng staff 96B 12 18 20:00 conf drwxr-xr-x 8 tao.zeng staff 256B 10 16 21:35 config drwxr-xr-x 2 tao.zeng staff 64B 10 16 20:23 data drwxr-xr-x 6 tao.zeng staff 192B 10 16 21:35 lib drwxr-xr-x 6 tao.zeng staff 192B 10 16 21:35 logstash-core drwxr-xr-x 5 tao.zeng staff 160B 10 16 21:35 logstash-core-plugin-api -rwxr-xr-x@ 1 tao.zeng staff 1.3K 12 18 20:00 lsboot drwxr-xr-x 5 tao.zeng staff 160B 10 16 21:35 modules drwxr-xr-x 3 tao.zeng staff 96B 10 16 21:35 tools drwxr-xr-x 4 tao.zeng staff 128B 10 16 21:35 vendor drwxr-xr-x 14 tao.zeng staff 448B 10 16 21:35 x-pack ÁºñÂÜôÊµãËØïÈÖçÁΩÆconf/test.confinput { stdin { codec => \"json\" } } filter { mutate { add_field => { \"name\" => \"ÂìàÂìàÂìà\" } } # https://zerlong.com/886.html ruby { code => 'event.set(\"unix_ts\",(event.get(\"@timestamp\").to_f.round(3)*1000).to_i)' } date { # Ê≥®ÊÑèËøôÈáåÁöÑUNIX_NSÂ∞±ÊòØÊàë‰ª¨Âú®TimestampParserFactoryÊñ∞Âª∫ÁöÑÁ∫≥ÁßíËß£ÊûêÂô®ÔºåÂÆòÊñπÁâàÊú¨ÊòØ‰∏çÊîØÊåÅÁöÑ match => [\"unix_ns\", \"UNIX_NS\"] target => \"date_ns\" } } output { stdout {} } ÊµãËØïÊï∞ÊçÆ{ \"unix_ns\": 1607206093000000, \"tags\": \"test\" } ÂêØÂä®ÊµãËØï‚ûú logstash-7.9.3 ./lsboot conf/test.conf test bin/logstash -f conf/test.conf -l logs/test --path.data data/test -n test Sending Logstash logs to logs/test which is now configured via log4j2.properties [2020-12-18T20:13:19,801][INFO ][logstash.runner ] Starting Logstash {\"logstash.version\"=>\"7.9.3\", \"jruby.version\"=>\"jruby 9.2.13.0 (2.5.7) 2020-08-03 9a89c94bcc Java HotSpot(TM) 64-Bit Server VM 25.201-b09 on 1.8.0_201-b09 +indy +jit [darwin-x86_64]\"} [2020-12-18T20:13:19,932][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=>\"path.queue\", :path=>\"data/test/queue\"} [2020-12-18T20:13:19,935][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=>\"path.dead_letter_queue\", :path=>\"data/test/dead_letter_queue\"} [2020-12-18T20:13:20,029][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified [2020-12-18T20:13:20,061][INFO ][logstash.agent ] No persistent UUID file found. Generating new UUID {:uuid=>\"e4188c10-0621-4967-a957-8aa14f1a2945\", :path=>\"data/test/uuid\"} [2020-12-18T20:13:21,802][INFO ][org.reflections.Reflections] Reflections took 33 ms to scan 1 urls, producing 22 keys and 45 values [2020-12-18T20:13:23,160][INFO ][logstash.javapipeline ][main] Starting pipeline {:pipeline_id=>\"main\", \"pipeline.workers\"=>8, \"pipeline.batch.size\"=>125, \"pipeline.batch.delay\"=>50, \"pipeline.max_inflight\"=>1000, \"pipeline.sources\"=>[\"/Users/tao.zeng/share/tmp/logstash-7.9.3/conf/test.conf\"], :thread=>\"#\"} [2020-12-18T20:13:23,871][INFO ][logstash.javapipeline ][main] Pipeline Java execution initialization time {\"seconds\"=>0.7} [2020-12-18T20:13:23,922][INFO ][logstash.inputs.stdin ][main] Automatically switching from json to json_lines codec {:plugin=>\"stdin\"} [2020-12-18T20:13:23,962][INFO ][logstash.javapipeline ][main] Pipeline started {\"pipeline.id\"=>\"main\"} The stdin plugin is now waiting for input: [2020-12-18T20:13:24,041][INFO ][logstash.agent ] Pipelines running {:count=>1, :running_pipelines=>[:main], :non_running_pipelines=>[]} [2020-12-18T20:13:24,244][INFO ][logstash.agent ] Successfully started Logstash API endpoint {:port=>9600} { \"unix_ns\": 1607206093000000, \"tags\": \"test\" } { \"unix_ts\" => 1608293606313, \"date_ns\" => 2020-12-05T22:08:13.000Z, \"@timestamp\" => 2020-12-18T12:13:26.313Z, \"tags\" => \"test\", \"unix_ns\" => 1607206093000000, \"host\" => \"TaoZeng.MBP\", \"@version\" => \"1\", \"name\" => \"ÂìàÂìàÂìà\" } ‰ª•‰∏äÔºå1607206093000000Á∫≥ÁßíÊó∂Èó¥Êà≥Â∑≤ÁªèÊîØÊåÅËΩ¨Êç¢ÊàêdateÁ±ªÂûãÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØËΩ¨Êç¢ÁöÑÁªìÊûúÂç¥ËøòÊúâÊó∂Âå∫ÊòæÁ§∫ÁöÑÈóÆÈ¢òÔºåËøôÈáåÊúâ‰∏§‰∏™ÊñπÊ°à Á¨¨‰∏ÄÊòØÂú®targetÁöÑÊó∂ÂÄôÊåáÂÆöÊó∂Âå∫Ôºõ Á¨¨‰∫åÊòØ‰øÆÊîπlogstashÊ∫êÁ†ÅÔºåÊääÊó∂Âå∫ÈªòËÆ§‰øÆÊîπ‰∏∫‰∏úÂÖ´Âå∫ÔºåËøô‰∏™Êàë‰ª¨‰∏ã‰∏ÄÊ¨°ËØ¥ÊÄé‰πà‰øÆÊîπ„ÄÇ logstash Êó∂Èó¥Êà≥Êó∂Âå∫ÈóÆÈ¢ò ‰ª•‰∏äÔºåÂ∞±ÊòØlogstash-filter-dateÊèí‰ª∂Ê∑ªÂä†Á∫≥ÁßíÊîØÊåÅÂπ∂‰∏îÊõøÊç¢ÔºåÁºñËØëÂ•ΩÁöÑlogstash-filter-date-3.1.6.jar","categories":[],"tags":[{"name":"logstash","slug":"logstash","permalink":"http://iogogogo.github.io/tags/logstash/"}]},{"title":"logstash ÂêØÂä®ËÑöÊú¨","slug":"lsboot","date":"2020-12-09T06:42:09.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2020/12/09/lsboot/","link":"","permalink":"http://iogogogo.github.io/2020/12/09/lsboot/","excerpt":"","text":"logstash ÈÄöÁî®ÂêØÂä®ËÑöÊú¨ #!/bin/bash # FileName: lsboot # Description: ÂêØÂä®logstashÂÆû‰æã # Dispatcher: # Description: Usage: lsboot xxx.conf # CreateDate: 2020-12-06 if [ $# -lt 1 ];then echo -e \" \\e[033m Usage: $0 [FileName: e.g.: xxx.conf OR path/xxx.conf] \\e[0m\" exit 1 fi #config file OR path conFile=$1 conFilePath=$(cd `dirname $conFile`;pwd) appName=$(basename ${conFile} | sed s/.conf.*//) currPath=$(cd `dirname $0`;pwd) LS_HOME=${LS_HOME:-$currPath} cd $LS_HOME check_pid(){ pids=`ps -ef | grep -v grep | grep -w \"\\-f ${conFile}\" | awk '{print $2}'` #echo \"PID : ${pids}\" } [[ $2 == \"test\" ]] &amp;&amp; appName=test &amp;&amp; rm -rf data/test &amp;&amp; rm -rf logs/test #./stop.sh #sleep 1 check_pid cmd=\"bin/logstash -f ${conFile} -l logs/${appName} --path.data data/${appName} -n ${appName}\" if [ $pids ];then echo \" APP $appName was running on :\" echo -e \" \\e[032m „Äê `pwdx $pids` „Äë\\e[0m\" echo \" If restart, kill $pids first.\" exit 0 else cd $LS_HOME echo \"$cmd\" if [ ${appName} == \"test\" ];then $cmd else eval $cmd &amp; sleep 1 check_pid [[ -n \"${pids}\" ]] &amp;&amp; echo -e \"\\e[032m success \\e[0m: $appName boot on: $pids\" || echo -e \" \\e[31m [ $appName : $conFile ] Boot Failed. \\e[0m \" fi fi #sleep 1 #ps -ef | grep -v grep | grep -w \"${conFile}\" | awk '{print $2\"\\t\"$NF}' exit 0 logstashÂ∞ÜÊó∂Èó¥ËΩ¨Êç¢ÊàêunixÊó∂Èó¥Êà≥ # https://zerlong.com/886.html ruby { code => 'event.set(\"unix_ts\",(event.get(\"@timestamp\").to_f.round(3)*1000).to_i)' }","categories":[],"tags":[{"name":"Logstash","slug":"Logstash","permalink":"http://iogogogo.github.io/tags/Logstash/"}]},{"title":"CentOS ÂçáÁ∫ßÂÆâË£ÖÊúÄÊñ∞Áâàgit","slug":"soft-install-git","date":"2020-09-01T08:27:13.000Z","updated":"2024-07-01T12:30:37.377Z","comments":true,"path":"2020/09/01/soft-install-git/","link":"","permalink":"http://iogogogo.github.io/2020/09/01/soft-install-git/","excerpt":"","text":"ÂáÜÂ§áÂÆâË£ÖÂøÖË¶Å‰æùËµñ yum install -y curl-devel expat-devel gettext-devel openssl-devel zlib-devel asciidoc yum install -y gcc perl-ExtUtils-MakeMaker Âç∏ËΩΩÊóßÁâàÊú¨GitÂ¶ÇÊûúÊóßÁâàÊú¨‰∏çÂ≠òÂú®ÔºåÊ≠§Ê≠•ÂèØÂøΩÁï• yum remove -y git ‰∏ãËΩΩÊúÄÊñ∞ÁâàGit ÂàáÊç¢ÁõÆÂΩï cd /usr/local/src git releaseÁâàÊú¨Âú∞ÂùÄ https://mirrors.edge.kernel.org/pub/software/scm/git/ ‰∏ãËΩΩÂπ∂Ëß£Âéã wget --no-check-certificate https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz tar -xvf git-2.9.5.tar.gz cd /usr/local/src/git-2.9.5 ÁºñËØëÂÆâË£ÖGitmake prefix=/usr/local/git all make prefix=/usr/local/git install ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèecho \"export PATH=$PATH:/usr/local/git/bin\" >> /etc/profile source /etc/profile","categories":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/tags/Git/"}]},{"title":"maven.test.skipÂíåskipTestsÁöÑÂå∫Âà´","slug":"maven-skip-test","date":"2020-08-20T14:15:07.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/08/20/maven-skip-test/","link":"","permalink":"http://iogogogo.github.io/2020/08/20/maven-skip-test/","excerpt":"","text":"-DskipTests‰∏çÊâßË°åÊµãËØïÁî®‰æãÔºå‰ΩÜÁºñËØëÊµãËØïÁî®‰æãÁ±ªÁîüÊàêÁõ∏Â∫îÁöÑclassÊñá‰ª∂Ëá≥target/test-classes‰∏ã„ÄÇ pom‰∏≠ÈÖçÁΩÆË∑≥Ëøá &lt;plugin> &lt;groupId>org.apache.maven.plugins&lt;/groupId> &lt;artifactId>maven-surefire-plugin&lt;/artifactId> &lt;version>2.5&lt;/version> &lt;configuration> &lt;skipTests>true&lt;/skipTests> &lt;/configuration> &lt;/plugin> -Dmaven.test.skip=true‰∏çÊâßË°åÊµãËØïÁî®‰æãÔºå‰πü‰∏çÁºñËØëÊµãËØïÁî®‰æãÁ±ªÔºå‰∏ç‰ΩÜË∑≥ËøáÂçïÂÖÉÊµãËØïÁöÑËøêË°åÔºå‰πüË∑≥ËøáÊµãËØï‰ª£Á†ÅÁöÑÁºñËØë„ÄÇ pom‰∏≠ÈÖçÁΩÆË∑≥Ëøá &lt;plugin> &lt;groupId>org.apache.maven.plugin&lt;/groupId> &lt;artifactId>maven-compiler-plugin&lt;/artifactId> &lt;version>2.1&lt;/version> &lt;configuration> &lt;skip>true&lt;/skip> &lt;/configuration> &lt;/plugin> &lt;plugin> &lt;groupId>org.apache.maven.plugins&lt;/groupId> &lt;artifactId>maven-surefire-plugin&lt;/artifactId> &lt;version>2.5&lt;/version> &lt;configuration> &lt;skip>true&lt;/skip> &lt;/configuration> &lt;/plugin>","categories":[{"name":"Maven","slug":"Maven","permalink":"http://iogogogo.github.io/categories/Maven/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"http://iogogogo.github.io/tags/Maven/"}]},{"title":"„ÄêËΩ¨„ÄëSpring Kafka Á¨îËÆ∞","slug":"spring-kafka-note","date":"2020-08-17T14:41:29.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2020/08/17/spring-kafka-note/","link":"","permalink":"http://iogogogo.github.io/2020/08/17/spring-kafka-note/","excerpt":"","text":"Spring-KafkaÂè≤‰∏äÊúÄÂº∫ÂÖ•Èó®ÊïôÁ®ã","categories":[{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/categories/Kafka/"},{"name":"Spring","slug":"Kafka/Spring","permalink":"http://iogogogo.github.io/categories/Kafka/Spring/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/tags/Kafka/"}]},{"title":"HadoopÂ∏∏Áî®ËøêÁª¥ÂëΩ‰ª§","slug":"hadoop-ops-command","date":"2020-08-03T09:44:57.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2020/08/03/hadoop-ops-command/","link":"","permalink":"http://iogogogo.github.io/2020/08/03/hadoop-ops-command/","excerpt":"","text":"‰∏Ä„ÄÅHADOOPÈõÜÁæ§ÂêØÂä®1. Ê†ºÂºèÂåñzkÂú®zkÁöÑleaderËäÇÁÇπÊúçÂä°Âô®‰∏äÔºåHadoopÁöÑbinÁõÆÂΩï‰∏≠ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÔºöÊîπ‰∏∫Âú® nnÁöÑactiveËäÇÁÇπ‰∏ä sh hdfs zkfc -formatZK 2. ÂêØÂä®journalnodeÈõÜÁæ§hadoop‰ªªÊÑèËäÇÁÇπÊúçÂä°Âô®ÊâßË°å hadoop-daemons.sh start journalnode 3. Ê†ºÂºèÂåñnamenodeÂú®nnËäÇÁÇπÊâßË°å hadoop namenode -format 4. ÂêØÂä®NameNodeÂú®hdaoop01ËäÇÁÇπ‰∏äÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÔºåÂêØÂä®NameNodeËäÇÁÇπÔºö hadoop-daemon.sh start namenode È¶ñÂÖàÊäähdaoop02ÊúçÂä°Âô®ÁöÑ namenodeËäÇÁÇπÂèò‰∏∫standby namenodeËäÇÁÇπ„ÄÇÊâßË°åÂëΩ‰ª§Â¶Ç‰∏ãÔºö hdfs namenode -bootstrapStandby ÂêØÂä®hadoop02ÊúçÂä°Âô®ÁöÑnamenodeËäÇÁÇπÔºåÊâßË°åÂëΩ‰ª§Â¶Ç‰∏ãÔºö hadoop-daemon.sh start namenode 5. ÂêØÂä®DataNodeÂú®hadoop01,hadoop02,hadoop03ÊúçÂä°Âô®‰∏äÂàÜÂà´ÂêØÂä®datanodeËäÇÁÇπÔºåÂú®Ëøô‰∏âÂè∞ÊúçÂä°Âô®‰∏äÂàÜÂà´ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö hadoop-daemon.sh start datanode 6. ÂêØÂä®zkfcFalioverControllerActiveÊòØÂ§±Ë¥•ÊÅ¢Â§çÁ∫øÁ®ã„ÄÇËøô‰∏™Á∫øÁ®ãÈúÄË¶ÅÂú®NameNodeËäÇÁÇπÊâÄÂú®ÁöÑÊúçÂä°Âô®‰∏äÂêØÂä®ÔºåÂú®hadoop01,hadoop02ÊúçÂä°Âô®‰∏äÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö hadoop-daemon.sh start zkfc 7. ÂêØÂä®ResourcemanagerÂú®hdaoop01ÊúçÂä°Âô®‰∏äÂêØÂä®‰∏ªResourcemanagerËäÇÁÇπÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÔºöÂêØÂä®ÊàêÂäüÂêéÔºåhadoop01,hadoop02,hadoop03ÊúçÂä°Âô®‰∏äÁöÑnodemanager ‰πü‰ºöË∑üÈöèÂêØÂä® start-yarn.sh Âú®hadoop02ÊúçÂä°Âô®‰∏äÂêØÂä®ÂâØ ResoucemanagerËäÇÁÇπÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö yarn-daemon.sh start resourcemanager ‰∫å„ÄÅYARNËøêÁª¥ÂëΩ‰ª§1. yarn application1„ÄÅ-list ÂàóÂá∫ÊâÄÊúâ application ‰ø°ÊÅØ yarn application -list 2„ÄÅ-appStates Ë∑ü-list‰∏ÄËµ∑‰ΩøÁî®ÔºåÁî®Êù•Á≠õÈÄâ‰∏çÂêåÁä∂ÊÄÅÁöÑapplicationÔºåÂ§ö‰∏™Áî®‚Äù,‚ÄùÂàÜÈöîÔºõÊâÄÊúâÁä∂ÊÄÅALL,NEW,NEW_SAVING,SUBMITTED,ACCEPTED,RUNNING,FINISHED,FAILED,KILLED yarn application -list -appStates RUNNING 3„ÄÅ-appTypes Ë∑ü-list‰∏ÄËµ∑‰ΩøÁî®ÔºåÁî®Êù•Á≠õÈÄâ‰∏çÂêåÁ±ªÂûãÁöÑapplicationÔºåÂ§ö‰∏™Áî®‚Äù,‚ÄùÂàÜÈöîÔºõÂ¶Ç MAPREDUCE yarn application -list -appTypes MAPREDUCE 4„ÄÅ-kill ÊùÄÊ≠ª‰∏Ä‰∏™applicationÔºåÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™Application ID yarn application -kill application_1526100291229_206393 5„ÄÅ-status ÂàóÂá∫ Êüê‰∏™application ÁöÑÁä∂ÊÄÅ yarn application -status application_1526100291229_206393 6„ÄÅ-movetoqueue ÁßªÂä®applicationÂà∞ÂÖ∂‰ªñÁöÑqueueÔºå‰∏çËÉΩÂçïÁã¨‰ΩøÁî®7„ÄÅ-queue ‰∏é movetoqueueÂëΩ‰ª§‰∏ÄËµ∑‰ΩøÁî®ÔºåÊåáÂÆöÁßªÂä®Âà∞Âì™‰∏™queue yarn application -movetoqueue application_1526100291229_206393 -queue other 2. yarn nodeÊü•ÁúãÂêÑ‰∏™node‰∏äÁöÑ‰ªªÂä°Êï∞ yarn node --list 3. yarn logsyarn logs -applicationId application_1583405966138_0013","categories":[{"name":"Hadoop","slug":"Hadoop","permalink":"http://iogogogo.github.io/categories/Hadoop/"}],"tags":[{"name":"Hadoop","slug":"Hadoop","permalink":"http://iogogogo.github.io/tags/Hadoop/"}]},{"title":"RedisÊü•ÁúãÈõÜÁæ§‰ø°ÊÅØ‰ª•ÂèäkeyÂàÜÂ∏ÉÈùûslot","slug":"redis-cluster-info","date":"2020-07-29T08:08:34.000Z","updated":"2024-07-01T12:30:37.377Z","comments":true,"path":"2020/07/29/redis-cluster-info/","link":"","permalink":"http://iogogogo.github.io/2020/07/29/redis-cluster-info/","excerpt":"","text":"ËøõÂÖ•redisÈõÜÁæ§redis-cli -h ip -p port -c Êü•ÁúãÈõÜÁæ§ËäÇÁÇπcluster nodes Êü•ÁúãkeyÂØπÂ∫îÁöÑslotcluster keyslot key Êü•ÁúãslotÂíåËäÇÁÇπÁöÑÂØπÂ∫îÂÖ≥Á≥ªcluster slots","categories":[{"name":"Redis","slug":"Redis","permalink":"http://iogogogo.github.io/categories/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://iogogogo.github.io/tags/Redis/"}]},{"title":"Guava‰∏≠ÁöÑCaseFormat","slug":"guava-case-format","date":"2020-07-25T05:47:19.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2020/07/25/guava-case-format/","link":"","permalink":"http://iogogogo.github.io/2020/07/25/guava-case-format/","excerpt":"","text":"Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊåâÁÖßÈòøÈáåÂ∑¥Â∑¥javaÂºÄÂèëÊâãÂÜåÔºåÊï∞ÊçÆÂ∫ìÂ≠óÊÆµÂÖ®ÈÉ®Â∞èÂÜôÂπ∂‰∏îÊåâÁÖß_ËøõË°åÂçïËØç‰πãÈó¥ÁöÑÂàÜÂâ≤Ôºå‰ΩÜÊòØÊàë‰ª¨Java‰∏≠ÁöÑÂëΩÂêçÈ£éÊ†ºÂèàÊòØÊåâÁÖßÈ©ºÂ≥∞ÊñπÂºèÔºå‰∏ÄËà¨ËøîÂõûÁªôÂâçÁ´ØÁöÑDTOÂØπË±°‰πüÊåâÁÖßÈ©ºÂ≥∞ÊñπÂºèÔºåÂâçÁ´ØÂêåÂ≠¶Âú®ÂØπÊâÄÊúâÂàóËøõË°åÊéíÂ∫èÊó∂Ôºå‰ºöÊåâÁÖßÊàë‰ª¨ËøîÂõûÁªô‰ªñÁöÑpropsÂèëÈÄÅÁªôÂêéÁ´ØÔºåËøôÊó∂ÂÄôÂêéÁ´ØÊî∂Âà∞ÁöÑÂ∞±ÊòØÈ©ºÂ≥∞ÊñπÂºèÁöÑpropsÔºå‰ΩÜÊòØÊãøÂà∞Êï∞ÊçÆÂ∫ìÊü•ËØ¢ËøôËÇØÂÆöÊòØ‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂ≠óÊÆµÔºåÈÇ£‰πàÊúâ‰ªÄ‰πàÂ•ΩÁöÑÊñπÂºèÂéªËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü ËøôÊó∂ÂÄôÂèëÁé∞‰∫Üguava‰∏≠ÁöÑCaseFormatÂ∑•ÂÖ∑Á±ª„ÄÇ com.google.common.base.CaseFormatÊòØ‰∏ÄÁßçÂÆûÁî®Â∑•ÂÖ∑Á±ªÔºå‰ª•Êèê‰æõ‰∏çÂêåÁöÑASCIIÂ≠óÁ¨¶Ê†ºÂºè‰πãÈó¥ÁöÑËΩ¨Êç¢„ÄÇ Á±ªÂ£∞Êòé@GwtCompatible public enum CaseFormat extends Enum&lt;CaseFormat> Êûö‰∏æÂ∏∏Èáè Êûö‰∏æÂ∏∏Èáè ËØ¥Êòé LOWER_CAMEL JavaÂèòÈáèÁöÑÂëΩÂêçËßÑÂàôÔºåÂ¶Ç lowerCamel LOWER_HYPHEN ËøûÂ≠óÁ¨¶ËøûÊé•ÂèòÈáèÁöÑÂëΩÂêçËßÑÂàôÔºåÂ¶Ç lower-hyphen LOWER_UNDERSCORE C ++ÂèòÈáèÂëΩÂêçËßÑÂàôÔºåÂ¶Ç lower_underscore UPPER_CAMEL JavaÂíåC++Á±ªÁöÑÂëΩÂêçËßÑÂàôÔºåÂ¶Ç UpperCamel UPPER_UNDERSCORE JavaÂíåC++Â∏∏ÈáèÁöÑÂëΩÂêçËßÑÂàôÔºåÂ¶Ç UPPER_UNDERSCORE ÊñπÊ≥ï ÊñπÊ≥ï ËØ¥Êòé Converter&lt;String,String&gt; converterTo(CaseFormat targetFormat) ËøîÂõû‰∏Ä‰∏™ËΩ¨Êç¢Ôºå‰ªéËøô‰∏™Ê†ºÂºèËΩ¨Êç¢targetFormatÂ≠óÁ¨¶‰∏≤„ÄÇ String to(CaseFormat format, String str) ‰ªéËøô‰∏ÄÊ†ºÂºèÊåáÂÆöÊ†ºÂºèÁöÑÊåáÂÆöÂ≠óÁ¨¶‰∏≤ str ËΩ¨Êç¢„ÄÇ static CaseFormat valueOf(String name) ËøîÂõûÊ≠§Á±ªÂûãÂÖ∑ÊúâÊåáÂÆöÂêçÁß∞ÁöÑÊûö‰∏æÂ∏∏Èáè„ÄÇ static CaseFormat[] values() ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ËØ•Êûö‰∏æÁ±ªÂûãÁöÑÂ∏∏ÈáèÊï∞ÁªÑ‰∏≠ÁöÑÈ°∫Â∫èË¢´Â£∞Êòé„ÄÇ ÊµãËØï@Test public void test() { String appCiNum = CaseFormat.LOWER_CAMEL.to(CaseFormat.LOWER_UNDERSCORE, \"appCiNum\"); System.out.println(appCiNum); Assert.assertEquals(appCiNum, \"app_ci_num\"); appCiNum = CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, \"app_ci_num\"); System.out.println(appCiNum); Assert.assertEquals(appCiNum, \"appCiNum\"); } Âè™Ë¶ÅÊàë‰ª¨Ëá™Â∑±ÂÆöÁöÑDTOÊòØÊ†áÂáÜÁöÑÔºåÈÇ£‰πàÊéíÂ∫èÊòØÂâçÁ´ØÂêåÂ≠¶Â∞±ÊåâÁÖßÊàë‰ª¨ËøîÂõûÁªô‰ªñÁöÑÂ≠óÊÆµÂú®‰º†ÂõûÊù•ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÁî®CaseFormatËøõË°åËΩ¨Êç¢Âç≥ÂèØÔºå‰∏çÁÑ∂ËøòÂæó‰æùÊ¨°ËøõË°åmatchÂåπÈÖç","categories":[{"name":"Guava","slug":"Guava","permalink":"http://iogogogo.github.io/categories/Guava/"}],"tags":[{"name":"Guava","slug":"Guava","permalink":"http://iogogogo.github.io/tags/Guava/"}]},{"title":"MapÂØπkeyÊàñËÄÖvalueËøõË°åÊéíÂ∫è","slug":"map-sort","date":"2020-07-25T04:21:58.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2020/07/25/map-sort/","link":"","permalink":"http://iogogogo.github.io/2020/07/25/map-sort/","excerpt":"","text":"ÂºÄÂèë‰∏≠ÂÅ∂Â∞î‰ºöÈÅáÂà∞‰∏Ä‰∫õÊØîËæÉÁâπÊÆäÁöÑÈúÄÊ±ÇÔºåÊØîÂ¶ÇÂØπ‰∏Ä‰∏™mapËøõË°åÊéíÂ∫èÔºåÂπ∂‰∏îÊòØÂØπkeyÊàñËÄÖvalueËøõË°åÊéíÂ∫èÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•Áî®Java8‰∏≠Êèê‰æõÁöÑstreamÊù•ËøõË°åÂÆûÁé∞ ÊéíÂ∫èÂ∑•ÂÖ∑Á±ªÂ∞ÅË£ÖÊéíÂ∫èÂ∑•ÂÖ∑Á±ª package com.iogogogo.common.util; import com.google.common.collect.Lists; import com.google.common.collect.Maps; import java.lang.reflect.Field; import java.util.Iterator; import java.util.LinkedList; import java.util.Map; /** * Created by tao.zeng on 2020/5/25. */ public class MapSortUtils { /** * Sort by key map. * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the map */ public static &lt;K extends Comparable&lt;? super K>, V> Map&lt;K, V> sortByKey(Map&lt;K, V> map) { // ËøôÈáå‰ΩøÁî®‰∫ÜguavaÁÆÄÂåñ‰∫ÜmapÂØπË±°ÁöÑÂàõÂª∫ÔºåÊ≤°ÊúâguavaÁõ¥Êé•‰ΩøÁî® new LinkedHashMap&lt;>(); Map&lt;K, V> result = Maps.newLinkedHashMap(); map.entrySet().stream() .sorted(Map.Entry.comparingByKey()).forEachOrdered(e -> result.put(e.getKey(), e.getValue())); return result; } /** * Sort reversed by key map. * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the map */ public static &lt;K extends Comparable&lt;? super K>, V> Map&lt;K, V> sortReversedByKey(Map&lt;K, V> map) { Map&lt;K, V> result = Maps.newLinkedHashMap(); map.entrySet().stream() .sorted(Map.Entry.&lt;K, V>comparingByKey() .reversed()).forEachOrdered(e -> result.put(e.getKey(), e.getValue())); return result; } /** * Sort by value map. * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the map */ public static &lt;K, V extends Comparable&lt;? super V>> Map&lt;K, V> sortByValue(Map&lt;K, V> map) { Map&lt;K, V> result = Maps.newLinkedHashMap(); map.entrySet().stream() .sorted(Map.Entry.comparingByValue()).forEachOrdered(e -> result.put(e.getKey(), e.getValue())); return result; } /** * Sort reversed by value map. * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the map */ public static &lt;K, V extends Comparable&lt;? super V>> Map&lt;K, V> sortReversedByValue(Map&lt;K, V> map) { Map&lt;K, V> result = Maps.newLinkedHashMap(); map.entrySet().stream() .sorted(Map.Entry.&lt;K, V>comparingByValue() .reversed()).forEachOrdered(e -> result.put(e.getKey(), e.getValue())); return result; } /** * Gets first key. * * @param &lt;K> the type parameter * @param map the map * @return the first key */ public static &lt;K> K getFirstKey(Map&lt;K, ?> map) { return map.keySet().iterator().next(); } /** * Gets last key. * * @param &lt;K> the type parameter * @param map the map * @return the last key */ public static &lt;K> K getLastKey(Map&lt;K, ?> map) { Iterator&lt;K> iterator = map.keySet().iterator(); LinkedList&lt;K> list = Lists.newLinkedList(); while (iterator.hasNext()) { list.add(iterator.next()); } return list.getLast(); } /** * Gets first. * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the first */ public static &lt;K, V> Map.Entry&lt;K, V> getFirst(Map&lt;K, V> map) { return map.entrySet().iterator().next(); } /** * Gets last. * &lt;p> * ÈÄöËøáÂèçÂ∞ÑËé∑ÂèñLinkedHashMap‰∏≠ÁöÑÊú´Â∞æÂÖÉÁ¥†Ôºö * &lt;p> * Êó∂Èó¥Â§çÊùÇÂ∫¶O(1)ÔºåËÆøÈóÆtailÂ±ûÊÄß * * @param &lt;K> the type parameter * @param &lt;V> the type parameter * @param map the map * @return the last * @throws IllegalAccessException the illegal access exception * @throws NoSuchFieldException the no such field exception */ @SuppressWarnings(\"unchecked\") public static &lt;K, V> Map.Entry&lt;K, V> getLast(Map&lt;K, V> map) throws IllegalAccessException, NoSuchFieldException { Field tail = map.getClass().getDeclaredField(\"tail\"); tail.setAccessible(true); return (Map.Entry&lt;K, V>) tail.get(map); } } ÊµãËØïÁªìÊûúpackage com.iogogogo.common.tests; import com.iogogogo.common.util.MapSortUtils; import com.google.common.collect.Maps; import org.junit.Assert; import org.junit.Before; import org.junit.Test; import java.util.Map; /** * Created by tao.zeng on 2020/7/25. */ public class MapSortTest { private final static Map&lt;String, Integer> DEF_DATA = Maps.newHashMap(); @Before public void before() { DEF_DATA.put(\"c\", 20); DEF_DATA.put(\"a\", 54); DEF_DATA.put(\"z\", 23); DEF_DATA.put(\"d\", 55); } @Test public void testKeySort() { // ÊåâÁÖßkeyËøõË°åÊ≠£Â∫èÊéíÂ∫è Map&lt;String, Integer> sortByKey = MapSortUtils.sortByKey(DEF_DATA); // Ëé∑Âèñmap‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™key String firstKey = MapSortUtils.getFirstKey(sortByKey); // Ëé∑Âèñmap‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™key String lastKey = MapSortUtils.getLastKey(sortByKey); Assert.assertEquals(firstKey, \"a\"); Assert.assertEquals(lastKey, \"z\"); // ÊåâÁÖßkeyÂØπmapËøõË°åÂÄíÂ∫èÊéíÂ∫è Map&lt;String, Integer> reversedByKey = MapSortUtils.sortReversedByKey(DEF_DATA); firstKey = MapSortUtils.getFirstKey(reversedByKey); lastKey = MapSortUtils.getLastKey(reversedByKey); Assert.assertEquals(firstKey, \"z\"); Assert.assertEquals(lastKey, \"a\"); } @Test public void testValue() throws NoSuchFieldException, IllegalAccessException { // ÊåâÁÖßvalueËøõË°åÊ≠£Â∫èÊéíÂ∫è Map&lt;String, Integer> sortByValue = MapSortUtils.sortByValue(DEF_DATA); Map.Entry&lt;String, Integer> first = MapSortUtils.getFirst(sortByValue); Map.Entry&lt;String, Integer> last = MapSortUtils.getLast(sortByValue); Assert.assertEquals(first.getKey(), \"c\"); Assert.assertEquals(20, (int) first.getValue()); Assert.assertEquals(last.getKey(), \"d\"); Assert.assertEquals(55, (int) last.getValue()); // ÊåâÁÖßvalueËøõË°åÂÄíÂ∫èÊéíÂ∫è Map&lt;String, Integer> reversedByValue = MapSortUtils.sortReversedByValue(DEF_DATA); // Ëé∑ÂèñÊéíÂ∫è‰ª•ÂêéÁöÑÁ¨¨‰∏Ä‰∏™‰∏™ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† first = MapSortUtils.getFirst(reversedByValue); last = MapSortUtils.getLast(reversedByValue); Assert.assertEquals(first.getKey(), \"d\"); Assert.assertEquals(55, (int) first.getValue()); Assert.assertEquals(last.getKey(), \"c\"); Assert.assertEquals(20, (int) last.getValue()); } }","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"map","slug":"map","permalink":"http://iogogogo.github.io/tags/map/"}]},{"title":"MyBatisÂØπË±°‰∏≠Â±ûÊÄß ÂåÖÂê´List<String>‰∏ÄÂØπÂ§öÊò†Â∞ÑÂ§ÑÁêÜÊñπÂºè","slug":"mybatis-one-collection-basic-type","date":"2020-07-19T14:37:38.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/07/19/mybatis-one-collection-basic-type/","link":"","permalink":"http://iogogogo.github.io/2020/07/19/mybatis-one-collection-basic-type/","excerpt":"","text":"Âú®‰ΩøÁî®MyBatisÊü•ËØ¢Êï∞ÊçÆÂ∫ìÊó∂ÔºåÁªèÂ∏∏‰ºöÊúâ‰∏ÄÂØπÂ§öÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÂú®‰∏ÄÂØπÂ§öÁöÑÊÉÖÂÜµÊó∂ÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Collection&lt;String&gt;ÊàñËÄÖCollection&lt;Integer&gt; Á±ªÂûãÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑResultMapËØ•Â¶Ç‰ΩïÂÆö‰πâÔºü ÊñπÊ≥ïÂæàÁÆÄÂçïÔºåËøôÊó∂ÂÄôÊàë‰ª¨Â∞±ÈúÄË¶Å‰ΩøÁî®Âà∞ÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•‰∫ÜÔºåÈÄöËøáIntegerÂíåStringÁöÑÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•ÔºåÂÖ∑‰ΩìÁöÑÂ≠óÊÆµÂêçÁß∞Ëá™Â∑±ÂØπÂ•ΩÂÖ•Â∫ßÂç≥ÂèØ„ÄÇ &lt;resultMap type=\"User\" id=\"user_map\"> &lt;id property=\"id\" column=\"\"/> &lt;result property=\"username\" column=\"username\"/> &lt;collection property=\"age\" ofType=\"int\"> &lt;constructor> &lt;arg column=\"age\"/> &lt;!-- ÂØπÂè∑ÂÖ•Â∫ßÊï∞ÊçÆÂ∫ìcolumnÂêçÁß∞Âç≥ÂèØ --> &lt;/constructor> &lt;/collection> &lt;collection property=\"authorities\" ofType=\"java.lang.String\"> &lt;constructor> &lt;arg column=\"permission\"/> &lt;!-- ÂØπÂè∑ÂÖ•Â∫ßÊï∞ÊçÆÂ∫ìcolumnÂêçÁß∞Âç≥ÂèØ --> &lt;/constructor> &lt;/collection> &lt;/resultMap>","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://iogogogo.github.io/categories/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://iogogogo.github.io/tags/MyBatis/"}]},{"title":"MySQLÊü•ÁúãÊâÄÊúâËøûÊé•ÁöÑÂÆ¢Êà∑Á´Øip","slug":"mysql-show-client-connection","date":"2020-06-29T05:54:14.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/06/29/mysql-show-client-connection/","link":"","permalink":"http://iogogogo.github.io/2020/06/29/mysql-show-client-connection/","excerpt":"","text":"ÊúâÊó∂ÂÄôÊàë‰ª¨ÈúÄË¶ÅÊü•ÁúãÂΩìÂâçÁöÑmysqlÊï∞ÊçÆÂ∫ì‰∏≠Ôºå ÊúâÂì™‰∫õÂÆ¢Êà∑Á´Ø‰øùÊåÅ‰∫ÜËøûÊé•Ôºå ÊØè‰∏™ÂÆ¢Êà∑Á´ØÂàÜÂà´‰øùÊåÅ‰∫ÜÂ§öÂ∞ëËøûÊé•ÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑËØ≠Âè•Êü•ËØ¢ÁªìÊûúÔºåÂèØ‰ª•Áõ¥ËßÇÁöÑÁúãÂà∞ËøûÊé•Êï∞„ÄÇ SELECT substring_index(host, ':',1) AS hostname,state,count(*) FROM information_schema.processlist GROUP BY state,hostname; ËæìÂá∫ÁªìÊûúÔºö mysql> SELECT substring_index(host, ':',1) AS hostname,state,count(*) FROM information_schema.processlist GROUP BY state,hostname; +----------------+-----------------------+----------+ | hostname | state | count(*) | +----------------+-----------------------+----------+ | 10.2.1.12 | | 2 | | 192.168.21.125 | | 2 | | vm21122 | | 52 | | localhost | executing | 1 | | 192.168.21.125 | Receiving from client | 1 | +----------------+-----------------------+----------+ 5 rows in set (0.00 sec) mysql> ‰ºöÂàóÂá∫ÊØè‰∏™ipÂΩìÂâçÁöÑÁä∂ÊÄÅÔºå‰ª•ÂèäÂΩìÂâçÁöÑËøûÊé•Êï∞ „ÄÇËøô‰∏™Âú®Â§ÑÁêÜÁ±ª‰ººÁ¢∞Âà∞Êï∞ÊçÆÂ∫ì Too Many Connections Á≠âÁöÑÈîôËØØÁöÑÊó∂ÂÄôÊØîËæÉÊúâÁî®„ÄÇ","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"„ÄêËΩ¨„ÄëHow can I prevent gson from converting integers to doubles","slug":"gson-how-can-i-prevent-gson-from-converting-integers-to-doubles","date":"2020-06-28T02:17:53.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2020/06/28/gson-how-can-i-prevent-gson-from-converting-integers-to-doubles/","link":"","permalink":"http://iogogogo.github.io/2020/06/28/gson-how-can-i-prevent-gson-from-converting-integers-to-doubles/","excerpt":"","text":"Â§ÑÁêÜGson‰∏≠ÔºåjsonËΩ¨Êç¢mapÈÄ†ÊàêÁöÑintÂèòdoubleÁöÑÈóÆÈ¢ò„ÄÇ ÂéüÊñáÈìæÊé• MapDeserializerDoubleAsIntFix.java /** *ÊúÄËøëÂú®Á†îÁ©∂ÁΩëÁªúËØ∑Ê±ÇÊï∞ÊçÆËß£ÊûêÁöÑÈóÆÈ¢òÔºåÂèëÁé∞jsonÊï∞ÊçÆË¢´Âº∫Âà∂ËΩ¨Êç¢‰∏∫mapÁªìÊûÑÁöÑÊó∂ÂÄôÔºå‰ºöÂá∫Áé∞intÂèòÊàêdoubleÁöÑÈóÆÈ¢ò *Âú®stackoverflow‰∏äÁúãÂà∞‰∫Ü‰∏Ä‰∏™Ëøô‰∏™How can I prevent gson from converting integers to doubles ÁöÑÈóÆÈ¢òÔºåÈááÁî®‰∫ÜËøô‰∏™Á≠îÊ°à *https://stackoverflow.com/a/36529534/5279354Á≠îÊ°à */ import com.google.gson.JsonArray; import com.google.gson.JsonDeserializationContext; import com.google.gson.JsonDeserializer; import com.google.gson.JsonElement; import com.google.gson.JsonObject; import com.google.gson.JsonParseException; import com.google.gson.JsonPrimitive; import com.google.gson.internal.LinkedTreeMap; import java.lang.reflect.Type; import java.util.ArrayList; import java.util.List; import java.util.Map; import java.util.Set; public class MapDeserializerDoubleAsIntFix implements JsonDeserializer&lt;Map&lt;String, Object>> { @Override public Map&lt;String, Object> deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext) throws JsonParseException { return (Map&lt;String, Object>) read(jsonElement); } public Object read(JsonElement in) { if(in.isJsonArray()){ List&lt;Object> list = new ArrayList&lt;>(); JsonArray arr = in.getAsJsonArray(); for (JsonElement anArr : arr) { list.add(read(anArr)); } return list; }else if(in.isJsonObject()){ Map&lt;String, Object> map = new LinkedTreeMap&lt;String, Object>(); JsonObject obj = in.getAsJsonObject(); Set&lt;Map.Entry&lt;String, JsonElement>> entitySet = obj.entrySet(); for(Map.Entry&lt;String, JsonElement> entry: entitySet){ map.put(entry.getKey(), read(entry.getValue())); } return map; }else if( in.isJsonPrimitive()){ JsonPrimitive prim = in.getAsJsonPrimitive(); if(prim.isBoolean()){ return prim.getAsBoolean(); }else if(prim.isString()){ return prim.getAsString(); }else if(prim.isNumber()){ Number num = prim.getAsNumber(); // here you can handle double int/long values // and return any type you want // this solution will transform 3.0 float to long values if(Math.ceil(num.doubleValue()) == num.longValue()) return num.longValue(); else{ return num.doubleValue(); } } } return null; } @Test public void test2() { String json = \"{\\\"data\\\":[{\\\"id\\\":1,\\\"quantity\\\":2,\\\"name\\\":\\\"apple\\\"}, {\\\"id\\\":3,\\\"quantity\\\":4,\\\"name\\\":\\\"orange\\\"}]}\"; System.out.println(\"json == \" + json); // Map&lt;String, Object> map = new LinkedTreeMap&lt;>(); // map = new Gson().fromJson(json, map.getClass()); // System.out.println(map); GsonBuilder gsonBuilder = new GsonBuilder(); gsonBuilder.registerTypeAdapter(new TypeToken&lt;Map &lt;String, Object>>(){}.getType(), new MapDeserializerDoubleAsIntFix()); Gson gson = gsonBuilder.create(); Map&lt;String, Object> map = gson.fromJson(json, new TypeToken&lt;Map&lt;String, Object>>(){}.getType()); System.out.println(map); } } ÂèÇËÄÉÊñáÁ´† https://gist.github.com/xingstarx/5ddc14ff6ca68ba4097815c90d1c47cc https://blog.csdn.net/ligeforrent/article/details/93759524","categories":[{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/categories/Gson/"}],"tags":[{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/tags/Gson/"}]},{"title":"ÂΩìGsonÈÅá‰∏äJava8‰∏≠ÁöÑÊó•ÊúüAPI","slug":"gson-java8-datetime","date":"2020-06-23T13:45:00.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2020/06/23/gson-java8-datetime/","link":"","permalink":"http://iogogogo.github.io/2020/06/23/gson-java8-datetime/","excerpt":"","text":"&emsp;Java8ÂºÄÂßãÔºåJDK‰∏≠Êèê‰æõ‰∫Ü‰∏ÄÁªÑÊñ∞ÁöÑÊó•ÊúüAPIÔºåÂΩìÊàë‰ª¨ÈúÄË¶ÅÂ∫èÂàóÂåñÊï∞ÊçÆÊàêjsonÊó∂ÔºåÁªèÂ∏∏‰ºöÁî®Âà∞Gson„ÄÇÂΩìJava8‰∏≠ÁöÑÊó•ÊúüAPIÈÅá‰∏äGsonÊó∂ÔºåËÉΩÂê¶ÊåâÁÖßÈ¢ÑÊúüÁöÑÊÉ≥Ê≥ïÊ≠£Â∏∏ÁöÑÂ§ÑÁêÜÊàë‰ª¨ÁöÑÊï∞ÊçÆÂë¢Ôºü ‰ΩøÁî®GsonÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ@Test public void test() { LocalDateTime dateTime = LocalDateTime.now(); LocalDate date = LocalDate.now(); Gson gson = new Gson(); String json = gson.toJson(dateTime); log.info(\"dateTime Serialization:{}\", json); log.info(\"dateTime Deserialization:{}\", gson.fromJson(json, LocalDateTime.class)); System.out.println(); json = gson.toJson(date); log.info(\"date Serialization:{}\", json); log.info(\"date Deserialization:{}\", gson.fromJson(json, LocalDate.class)); } LocalDateTime Â∫èÂàóÂåñÁöÑÁªìÊûú dateTime Serialization:{\"date\":{\"year\":2020,\"month\":6,\"day\":23},\"time\":{\"hour\":21,\"minute\":58,\"second\":20,\"nano\":987000000}} ÂèçÂ∫èÂàóÂåñÁªìÊûú dateTime Deserialization:2020-06-23T21:58:20.987 LocalDate Â∫èÂàóÂåñÁöÑÁªìÊûú date Serialization:{\"year\":2020,\"month\":6,\"day\":23} ÂèçÂ∫èÂàóÂåñÁªìÊûú date Deserialization:2020-06-23 Êàë‰ª¨‰ºöÂèëÁé∞ÔºåÂ∫èÂàóÂåñÁöÑÁªìÊûú‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÔºåÊ≠£Â∏∏Â∫îËØ•ÊòØ‰∏Ä‰∏™ISOÊ†ºÂºèÁöÑÊó∂Èó¥ÊâçÂØπÔºå‰ΩÜÊòØÂç¥Êàê‰∫Ü‰∏Ä‰∏™JsonObject„ÄÇÂæàÊòæÁÑ∂ËøôÊòØ‰∏çÊª°Ë∂≥Êàë‰ª¨ÈúÄÊ±ÇÁöÑ„ÄÇ ÂàÜÊûêÂ∫èÂàóÂåñÁªìÊûú‰∏çÊòØISOÊ†ºÂºèÁöÑÂéüÂõ†ÈÄöËøáÊ∫êÁ†ÅÂàÜÊûêÔºåLocalDateTime‰∏≠ÂºïÁî®‰∫ÜLocalDate /** * The date part. */ private final LocalDate date; /** * The time part. */ private final LocalTime time; ÂÖ∂‰∏≠LocalDateÂíåLocalTimeÁöÑÈÉ®ÂàÜÊ∫êÁ†ÅÂ¶Ç‰∏ã LocalDate /** * The year. */ private final int year; /** * The month-of-year. */ private final short month; /** * The day-of-month. */ private final short day; LocalTime /** * The hour. */ private final byte hour; /** * The minute. */ private final byte minute; /** * The second. */ private final byte second; /** * The nanosecond. */ private final int nano; &emsp;ÂèØ‰ª•ÁúãÂà∞ÔºåLocalDateÂíåLocalTimeÔºåÊàë‰ª¨Â∫èÂàóÂåñJava8‰∏≠ÁöÑÊó•ÊúüAPIÔºåÂÆûÈôÖ‰∏äÊòØÊääÊàêÂëòÂèòÈáèÂ∫èÂàóÂåñÔºåÊòØÊ≠£Â∏∏ÁöÑ‰∏Ä‰∏™Â∫èÂàóÂåñÂØπË±°ÁöÑÈÄªËæë„ÄÇ‰ΩÜÊòØÊàë‰ª¨ËÇØÂÆöÊòØ‰∏çÂ∏åÊúõËøôÊ†∑ÁöÑÁªìÊûúÔºåÂØπÊàë‰ª¨Êù•ËØ¥Âπ∂‰∏çÊòØÁâπÂà´ÂèãÂ•Ω„ÄÇÈÇ£‰πàÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü Ëá™ÂÆö‰πâGsonÁöÑAdapterËß£ÂÜ≥ËØ•ÈóÆÈ¢òGsonÊú¨Ë∫´ÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÂêÑÁßçÂêÑÊ†∑ÁöÑÈÖçÁΩÆÔºåÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™Â∞±ÊòØÂèØ‰ª•Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÊàñËÄÖÂèçÂ∫èÂàóÂåñÁöÑAdapterÔºåÈÇ£‰πàÊó¢ÁÑ∂Áé∞Âú®Êàë‰ª¨Â∫èÂàóÂåñ‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÁªìÊûúÔºåÂ∞±ÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâAdapterÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂ∫üËØù‰∏çËØ¥ÔºåÁõ¥Êé•‰∏ä‰ª£Á†ÅÊºîÁ§∫„ÄÇ Ëá™ÂÆö‰πâLocalDateAdapter/** * Created by tao.zeng on 2020/6/23. * &lt;p> * Â§ÑÁêÜLocalDateÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ public final static class LocalDateAdapter implements JsonSerializer&lt;LocalDate>, JsonDeserializer&lt;LocalDate> { @Override public JsonElement serialize(LocalDate date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE)); } @Override public LocalDate deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDate.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE); } } Ëá™ÂÆö‰πâLocalDateTimeAdapter/** * Created by tao.zeng on 2020/6/23. * &lt;p> * Â§ÑÁêÜLocalDateTimeÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ public final static class LocalDateTimeAdapter implements JsonSerializer&lt;LocalDateTime>, JsonDeserializer&lt;LocalDateTime> { @Override public JsonElement serialize(LocalDateTime date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME)); } @Override public LocalDateTime deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDateTime.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE_TIME); } } ‰ΩøÁî®Ëá™ÂÆö‰πâAdapterÊó¢ÁÑ∂Êàë‰ª¨Áé∞Âú®Ëá™ÂÆö‰πâ‰∫ÜAdapterÔºåÈÇ£‰πàÂú®‰ΩøÁî®Êó∂Â∞±ÈúÄË¶ÅÂ∞ÜÂÆÉÊ≥®ÂÜåÂà∞gsonÂØπË±°‰∏≠Âéª„ÄÇÂú®ÂàõÂª∫gsonÂØπË±°Êó∂Â∞±‰∏çËÉΩÁõ¥Êé•‰ΩøÁî®Gson gson = new Gson()ÔºåËÄåÊòØË¶Å‰ΩøÁî®GsonBuilderÂéªËøõË°åÊûÑÂª∫„ÄÇ // ÂÆû‰æãÂåñgsonÂØπË±°Êó∂Ê≥®ÂÜåAdapter Gson gson = new GsonBuilder() .registerTypeAdapter(LocalDate.class, new JsonParse.LocalDateAdapter()) .registerTypeAdapter(LocalDateTime.class, new JsonParse.LocalDateTimeAdapter()) .create(); ‰∏äÈù¢Êàë‰ª¨ÁöÑ‰ª£Á†ÅÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÊó∂Â∞±‰ΩøÁî®Ê≥®ÂÜå‰∫ÜAdapterÁöÑgsonÂØπË±°Âç≥ÂèØ @Test public void test() { LocalDateTime dateTime = LocalDateTime.now(); LocalDate date = LocalDate.now(); Gson gson = new GsonBuilder() .registerTypeAdapter(LocalDate.class, JsonParse.LocalDateAdapter.class) .registerTypeAdapter(LocalDateTime.class, JsonParse.LocalDateTimeAdapter.class) .create(); String json = gson.toJson(dateTime); log.info(\"dateTime Serialization:{}\", json); log.info(\"dateTime Deserialization:{}\", gson.fromJson(json, LocalDateTime.class)); System.out.println(); json = gson.toJson(date); log.info(\"date Serialization:{}\", json); log.info(\"date Deserialization:{}\", gson.fromJson(json, LocalDate.class)); } LocalDateTimedateTime Serialization:\"2020-06-23T22:22:10.816\" dateTime Deserialization:2020-06-23T22:22:10.816 LocalDatedate Serialization:\"2020-06-23\" date Deserialization:2020-06-23 ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Ëá™ÂÆö‰πâAdapter‰ª•ÂêéÔºåÂ∫èÂàóÂåñÁöÑÁªìÊûúÂ∞±ÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑISOÁ±ªÂûãÔºåÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÂ∞ÜÊó•ÊúüÊ†ºÂºèÂ∫èÂàóËØùÊàêËá™Â∑±ÊÉ≥Ë¶ÅÁöÑ‰ªªÊÑèÊ†ºÂºè„ÄÇ JsonÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÂ∑•ÂÖ∑Á±ªÂàÜ‰∫´‰∏Ä‰∏™Êó•Â∏∏‰ΩøÁî®Â∑•ÂÖ∑Á±ªÔºåÈô§‰∫Ü‰∏äÊñáËØ¥Âà∞ÁöÑÂÖ≥‰∫éÊó•ÊúüÂ§ÑÁêÜÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåËøòÊúâÂè¶Â§ñ‰∏Ä‰∏™ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇËøô‰∏™ÁïôÁùÄ‰∏ã‰∏ÄÁØáÊñáÁ´†ËÆ≤„ÄÇ package com.iogogogo.util; import com.google.gson.*; import com.google.gson.internal.LinkedTreeMap; import com.google.gson.reflect.TypeToken; import lombok.extern.slf4j.Slf4j; import java.lang.reflect.Type; import java.nio.charset.StandardCharsets; import java.time.LocalDate; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.ArrayList; import java.util.List; import java.util.Map; import java.util.Set; /** * Created by tao.zeng on 2020/6/23. */ @Slf4j public class JsonParse { public static Type MAP_STR_OBJ_TYPE = new TypeToken&lt;Map&lt;String, Object>>() { }.getType(); public static Gson GSON = new GsonBuilder() .registerTypeAdapter(MAP_STR_OBJ_TYPE, new MapDeserializerDoubleAsIntFix()) .registerTypeAdapter(LocalDate.class, new LocalDateAdapter()) .registerTypeAdapter(LocalDateTime.class, new LocalDateTimeAdapter()) .create(); /** * To json string. * * @param bean the bean * @return the string */ public static String toJson(Object bean) { return GSON.toJson(bean); } /** * To json string. * * @param builder the builder * @param bean the bean * @return the string */ public static String toJson(GsonBuilder builder, Object bean) { return builder.create().toJson(bean); } /** * Parse t. * * @param &lt;T> the type parameter * @param json the json * @param clz the clz * @return the t */ public static &lt;T> T parse(String json, Class&lt;T> clz) { return GSON.fromJson(json, clz); } /** * Parse t. * * @param &lt;T> the type parameter * @param builder the builder * @param json the json * @param clz the clz * @return the t */ public static &lt;T> T parse(GsonBuilder builder, String json, Class&lt;T> clz) { return builder.create().fromJson(json, clz); } /** * Parse t. * * @param &lt;T> the type parameter * @param json the json * @param type the type * @return the t */ public static &lt;T> T parse(String json, Type type) { return GSON.fromJson(json, type); } /** * Parse t. * * @param &lt;T> the type parameter * @param builder the builder * @param json the json * @param type the type * @return the t */ public static &lt;T> T parse(GsonBuilder builder, String json, Type type) { return builder.create().fromJson(json, type); } /** * To json bytes byte [ ]. * * @param value the value * @return the byte [ ] */ public static byte[] toJsonBytes(Object value) { return toJson(value).getBytes(StandardCharsets.UTF_8); } /** * Created by tao.zeng on 2020/6/4. * &lt;p> * Â§ÑÁêÜLocalDateÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ public final static class LocalDateAdapter implements JsonSerializer&lt;LocalDate>, JsonDeserializer&lt;LocalDate> { @Override public JsonElement serialize(LocalDate date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE)); } @Override public LocalDate deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDate.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE); } } /** * Created by tao.zeng on 2020/6/4. * &lt;p> * Â§ÑÁêÜLocalDateTimeÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ public final static class LocalDateTimeAdapter implements JsonSerializer&lt;LocalDateTime>, JsonDeserializer&lt;LocalDateTime> { @Override public JsonElement serialize(LocalDateTime date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME)); } @Override public LocalDateTime deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDateTime.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE_TIME); } } /** * Created by tao.zeng on 2020/6/4. * &lt;p> * https://gist.github.com/xingstarx/5ddc14ff6ca68ba4097815c90d1c47cc * &lt;p> * https://stackoverflow.com/questions/36508323/how-can-i-prevent-gson-from-converting-integers-to-doubles/36529534#36529534 * &lt;p> * &lt;p> * Ëß£ÂÜ≥jsonÊï∞ÊçÆËΩ¨Êç¢‰∏∫mapÁªìÊûÑÁöÑÊó∂ÂÄôÔºå‰ºöÂá∫Áé∞intÂèòÊàêdoubleÁöÑÈóÆÈ¢ò */ public final static class MapDeserializerDoubleAsIntFix implements JsonDeserializer&lt;Map&lt;String, Object>> { @SuppressWarnings(\"unchecked\") @Override public Map&lt;String, Object> deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { return (Map&lt;String, Object>) read(element); } private Object read(JsonElement in) { if (in.isJsonArray()) { List&lt;Object> list = new ArrayList&lt;>(); JsonArray arr = in.getAsJsonArray(); for (JsonElement anArr : arr) { list.add(read(anArr)); } return list; } else if (in.isJsonObject()) { Map&lt;String, Object> map = new LinkedTreeMap&lt;>(); JsonObject obj = in.getAsJsonObject(); Set&lt;Map.Entry&lt;String, JsonElement>> entitySet = obj.entrySet(); for (Map.Entry&lt;String, JsonElement> entry : entitySet) { map.put(entry.getKey(), read(entry.getValue())); } return map; } else if (in.isJsonPrimitive()) { JsonPrimitive prim = in.getAsJsonPrimitive(); if (prim.isBoolean()) { return prim.getAsBoolean(); } else if (prim.isString()) { return prim.getAsString(); } else if (prim.isNumber()) { Number num = prim.getAsNumber(); // here you can handle double int/long values // and return any type you want // this solution will transform 3.0 float to long values if (Math.ceil(num.doubleValue()) == num.longValue()) return num.longValue(); else { return num.doubleValue(); } } } return null; } } }","categories":[{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/categories/Gson/"}],"tags":[{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/tags/Gson/"},{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"NginxÂºÄÂêØgzipÂéãÁº©","slug":"nginx-enable-gzip","date":"2020-06-18T11:54:43.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/06/18/nginx-enable-gzip/","link":"","permalink":"http://iogogogo.github.io/2020/06/18/nginx-enable-gzip/","excerpt":"","text":"Âú®serverËäÇÁÇπ‰∏ãÊñ∞Â¢ûÂ¶Ç‰∏ãÂÜÖÂÆπÔºåÂºÄÂêØgzipÂéãÁº©„ÄÇÊ≥®ÊÑèÂêéÁ´ØÈúÄË¶Å‰øùËØÅËøîÂõûÁöÑ Content-Type: application/json;charset=UTF-8 gzip on; gzip_min_length 1k; gzip_comp_level 6; gzip_proxied expired no-cache no-store private auth; gzip_types text/plain application/x-javascript text/css application/xml application/javascript application/json; ÊàêÂäü‰ª•ÂêéÂèØ‰ª•ÁúãÂà∞ Content-Encoding: gzip","categories":[],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"http://iogogogo.github.io/tags/Nginx/"}]},{"title":"Ê≠£ÂàôË°®ËææÂºè","slug":"tools-regex","date":"2020-03-18T14:20:22.000Z","updated":"2024-07-01T12:30:37.380Z","comments":true,"path":"2020/03/18/tools-regex/","link":"","permalink":"http://iogogogo.github.io/2020/03/18/tools-regex/","excerpt":"","text":"Ê≠£ÂàôË°®ËææÂºèÂÖÉÂ≠óÁ¨¶ ÂÖÉÂ≠óÁ¨¶ ËØ¥Êòé . ÂåπÈÖçÈô§‰∫ÜÊç¢Ë°åÁ¨¶‰ª•Â§ñÁöÑ‰ªªÊÑèÂ≠óÁ¨¶ * ÊåáÂÆö*ÂâçËæπÁöÑÂÜÖÂÆπÂèØ‰ª•ËøûÁª≠ÈáçÂ§ç‰ΩøÁî®‰ªªÊÑèÊ¨°‰ª•‰ΩøÊï¥‰∏™Ë°®ËææÂºèÂæóÂà∞ÂåπÈÖç .* ‰ªªÊÑèÊï∞ÈáèÁöÑ‰∏çÂåÖÂê´Êç¢Ë°åÁöÑÂ≠óÁ¨¶ \\b ÂçïËØçÁöÑÂºÄÂ§¥ÊàñÁªìÂ∞æÔºå‰πüÂ∞±ÊòØÂçïËØçÁöÑÂàÜÁïåÂ§Ñ \\w ÂåπÈÖçÂ≠óÊØç„ÄÅÊï∞Â≠ó„ÄÅ‰∏ãÂàíÁ∫ø„ÄÅÊ±âÂ≠ó \\s ÂåπÈÖç‰ªªÊÑèÁ©∫ÁôΩÂ≠óÁ¨¶ \\d ÂåπÈÖçÊï∞Â≠ó ^ ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÂºÄÂßã $ ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁªìÊùü Âèç‰πâ ÂÖÉÂ≠óÁ¨¶ ËØ¥Êòé \\W ÂåπÈÖçÈùûÂ≠óÊØç„ÄÅ‰∏ãÂàíÁ∫ø„ÄÅÊï∞Â≠ó„ÄÅÊ±âÂ≠ó \\S ÂåπÈÖç‰∏çÊòØÁ©∫ÁôΩÂ≠óÁ¨¶‰∏≤ \\D ÂåπÈÖç‰ªªÊÑèÈùûÊï∞Â≠óÁöÑÂ≠óÁ¨¶ \\B ÂåπÈÖç‰∏çÊòØÂçïËØçÂºÄÂßãÊàñËÄÖÁªìÊùüÁöÑ‰ΩçÁΩÆ [^x] ÂåπÈÖçÈô§‰∫Üx‰ª•Â§ñÁöÑ‰ªªÊÑèÂ≠óÁ¨¶","categories":[{"name":"Ê≠£ÂàôË°®ËææÂºè","slug":"Ê≠£ÂàôË°®ËææÂºè","permalink":"http://iogogogo.github.io/categories/Ê≠£ÂàôË°®ËææÂºè/"}],"tags":[]},{"title":"verticaÂºÄÂêØROS","slug":"vertica-enable-ros","date":"2020-03-12T07:07:01.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"2020/03/12/vertica-enable-ros/","link":"","permalink":"http://iogogogo.github.io/2020/03/12/vertica-enable-ros/","excerpt":"","text":"verticaÈªòËÆ§ÊâπÈáèÊèíÂÖ•ÊòØÂÖ≥Èó≠ÁöÑÔºåÈúÄË¶ÅÊâãÂä®ËÆæÁΩÆDataSourcePropertiesÂºÄÂêØÔºåËØ¶ÁªÜÂèÇËÄÉJDBC Connection PropertiesÔºåÊñáÊ°£‰∏≠ËØ•ÂèÇÊï∞‰ªãÁªçÂ¶Ç‰∏ãÔºö DirectBatchInsert Determines whether a batch insert stored data directly into ROS (true) or using AUTO;) mode (false). When you load data using AUTO mode, Vertica inserts the data first into the WOS. If the WOS is full, Vertica inserts the data directly into ROS. For details about load options, see Choosing a Load Method. Set After Connection:VerticaConnection.setProperty() Default Value: false Âú®jdbcÊñπÂºèÂíåspring‰∏≠ÈõÜÊàêÊï∞ÊçÆÊ∫êÊñπÂºèÁï•Êúâ‰∏çÂêåÔºå‰∏ãÈù¢ÂàÜÂºÄ‰ªãÁªç JDBCÊñπÂºèjdbcÊñπÂºèÈÖçÁΩÆÊØîËæÉÁÅµÊ¥ªÔºåÂèØ‰ª•Âú®DriverManager.getConnectionËé∑ÂèñËøûÊé•ËÆæÁΩÆÂ±ûÊÄß ‰πüÂèØ‰ª•Ëé∑ÂèñÂà∞connection‰ª•ÂêéËÆæÁΩÆ Ëé∑ÂèñËøûÊé•Êó∂ Properties myProp = new Properties(); myProp.put(\"user\", \"ExampleUser\"); myProp.put(\"password\", \"password123\"); // Enable directBatchInsert for this connection myProp.put(\"DirectBatchInsert\", \"true\"); Connection conn; try { conn = DriverManager.getConnection( \"jdbc:vertica://VerticaHost:5433/ExampleDB\", myProp); . . . Ëé∑ÂèñËøûÊé•Âêé ((VerticaConnection)conn).setProperty(\"DirectBatchInsert\", true); ‰ΩøÁî®HikariDataSourceËøûÊé•Ê±†ÂΩìÊàë‰ª¨‰ΩøÁî®springÊ°ÜÊû∂ÂºÄÂèëÊó∂Ôºå‰∏ÄËà¨‰ºö‰ΩøÁî®Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÂØπË±°Ôºåspring boot‰∏≠ÈªòËÆ§ÁöÑËøûÊé•Ê±†ÊòØHikariCPÔºå‰∏ãÈù¢‰ªãÁªçHikariCP`Â¶Ç‰ΩïÈÖçÁΩÆËØ•ÂèÇÊï∞ÔºåÊÄùË∑ØÂèØ‰ª•ÂèÇËÄÉ‰ΩøÁî®jdbcÊó∂Ëé∑ÂèñËøûÊé•‰ª•ÂêéÁöÑÊñπÂºè„ÄÇ ‰ΩÜÊòØÂèàÂõ†‰∏∫spring‰∏≠ÁöÑbeanÊòØÂü∫‰∫éproxyËøõË°åÂàõÂª∫ÁöÑÔºåÊâÄÊúâÊàë‰ª¨Ëé∑ÂèñÂà∞ÁöÑËøûÊé•ÂØπË±°‰∏çÂÜçÊòØVerticaConnectionÔºåËÄåÊòØHikariProxyConnectionÔºå‰ΩÜÊòØËØ•ÂØπË±°Âπ∂Ê≤°ÊúâsetProperty()ÊñπÊ≥ïÔºåÊâÄ‰ª•‰∏çËÉΩ‰ΩøÁî®Âº∫Âà∂Á±ªÂûãËΩ¨Êç¢Âπ∂‰∏îËÆæÁΩÆËØ•Â±ûÊÄß„ÄÇ Connection connection = dataSource.getConnection(); boolean flag1 = connection instanceof com.vertica.jdbc.VerticaConnection; // false boolean flag2 = connection instanceof com.zaxxer.hikari.pool.HikariProxyConnection; //true Ê≠£Á°ÆÂÅöÊ≥ïÂ¶Ç‰∏ãÔºö Ëé∑ÂèñÂà∞ÂΩìÂâçËøûÊé•ÁöÑHikariDataSourceÂØπË±°ÔºåÁÑ∂ÂêéÁªôËØ•ÂØπË±°ËÆæÁΩÆDataSourcePropertiesÂç≥ÂèØÂºÄÂêØROSÔºåÂπ∂‰∏îÂèØ‰ª•‰ΩøÁî®ËøûÊé•Ê±†ÁÆ°ÁêÜjdbcËøûÊé• public DataSource config(DataSource dataSource, HikariConfig config, boolean isVertica) { HikariDataSource hikariDataSource = null; if (dataSource instanceof HikariDataSource) { // ËøûÊé•Ê±†ÈÖçÁΩÆ hikariDataSource = (HikariDataSource) dataSource; if (isVertica) { Properties properties = new Properties(); // Loading Batches Directly into ROS Enable directBatchInsert for this connection properties.put(\"DirectBatchInsert\", \"true\"); hikariDataSource.setDataSourceProperties(properties); } hikariDataSource.setPoolName(config.getPoolName()); hikariDataSource.setAutoCommit(config.isAutoCommit()); hikariDataSource.setConnectionTestQuery(config.getConnectionTestQuery()); hikariDataSource.setIdleTimeout(config.getIdleTimeout()); hikariDataSource.setConnectionTimeout(config.getConnectionTimeout()); hikariDataSource.setMaximumPoolSize(config.getMaximumPoolSize()); hikariDataSource.setMaxLifetime(config.getMaxLifetime()); hikariDataSource.setMinimumIdle(config.getMinimumIdle()); } return hikariDataSource == null ? dataSource : hikariDataSource; }","categories":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/categories/Vertica/"}],"tags":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/tags/Vertica/"}]},{"title":"MavenÂä†ËΩΩÊú¨Âú∞jarÊñá‰ª∂","slug":"maven-install-local-jar","date":"2020-02-28T02:40:52.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/02/28/maven-install-local-jar/","link":"","permalink":"http://iogogogo.github.io/2020/02/28/maven-install-local-jar/","excerpt":"","text":"Êó•Â∏∏ÂºÄÂèë‰∏≠ÈÉΩÊòØmavenÂä†ËΩΩÂú®ËøúÁ®ã‰ªìÂ∫ìÁöÑjarÊñá‰ª∂ÔºåÂ¶ÇÊûúËøúÁ®ã‰ªìÂ∫ìÊ≤°ÊúâÁõ∏Â∫îÁöÑjarÊñá‰ª∂Ôºå‰∏ÄËà¨ÂÅöÊ≥ïÂ∞±ÊòØËá™Â∑±‰º†Âà∞‰∏Ä‰∏™ÁâπÂÆöÁöÑnexusÊúçÂä°Âô®‰∏äÔºå‰ΩÜÊòØÊú¨Âú∞ÂºÄÂèëÊµãËØïÁöÑÊó∂ÂÄôÂèØËÉΩnexusÊúçÂä°Âô®‰∏çÂ§™Êñπ‰æøÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®mavenÂä†ËΩΩÊú¨Âú∞ÁöÑjarÊñá‰ª∂ mvn install:install-file -Dfile=vertica-jdbc-9.2.0.jar -DgroupId=com.vertica -DartifactId=vertica-jdbc -Dversion=9.2.0 -Dpackaging=jar ÂèÇÊï∞ËØ¥Êòé -Dfile ÊåáÂÆöÊú¨Âú∞jarÊñá‰ª∂ÁöÑË∑ØÂæÑ -DgroupId ÊåáÂÆöÊú¨Âú∞jarÁöÑgroupId -DartifactId ÊåáÂÆöÊú¨Âú∞jarÁöÑartifactId -Dversion ÊåáÂÆöÊú¨Âú∞jarÁöÑversion -Dpackaging ÊåáÂÆöÊú¨Âú∞jarÁöÑpackagingÔºåËøôÈáå‰ΩøÁî®ÁöÑÊòØjarÔºåË°®Á§∫ÊòØ‰∏Ä‰∏™jarÊñá‰ª∂ pom‰∏≠‰ΩøÁî®&lt;dependency> &lt;groupId>com.vertica&lt;/groupId> &lt;artifactId>vertica-jdbc&lt;/artifactId> &lt;version>9.2.0&lt;/version> &lt;/dependency>","categories":[{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/categories/maven/"}],"tags":[{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/tags/maven/"}]},{"title":"IntelliJ IDEA 2019 ÂàõÂª∫maven webÈ°πÁõÆ","slug":"idea-web-project","date":"2020-02-26T14:51:03.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2020/02/26/idea-web-project/","link":"","permalink":"http://iogogogo.github.io/2020/02/26/idea-web-project/","excerpt":"","text":"IntelliJ IDEA 2019 ÂàõÂª∫maven webÈ°πÁõÆÊú¨Êñá‰ªãÁªç‰ΩøÁî®IDEAÂàõÂª∫‰∏ç‰ΩøÁî®Ê®°ÊùøÁöÑwebÈ°πÁõÆ„ÄÇ Êñ∞Âª∫È°πÁõÆ ÈÖçÁΩÆÈ°πÁõÆ‰øÆÊîπÈ°πÁõÆÁªìÊûÑËÆæÁΩÆ Ê∑ªÂä†web moduleProjectÈÇ£ËæπÊ≤°Êúâ‰ªÄ‰πàÈúÄË¶Å‰øÆÊîπÈÖçÁΩÆÁöÑÂú∞ÊñπÔºå‰∏çËøáÈúÄË¶ÅÁöÑËØùÂèØ‰ª•‰øÆÊîπProject compiler outputÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®ÈªòËÆ§Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ Ê≠§È°πÁõÆÊó†‰ªª‰ΩïÈÄÇÈÖçÊúçÂä°ÁªÑ‰ª∂ÔºàÂõ†‰∏∫ÊòØÊâãÂ∑•ÂàõÂª∫MavenÔºåÊ≤°ÊúâÈÄâÊã©‰ªª‰ΩïMavenÊ®°ÊùøÔºâÔºåÂõ†Ê≠§ÈúÄË¶ÅÊàë‰ª¨ËøõË°åÊ∑ªÂä†„ÄÇ ËøôÈáåÈÄâÊã©‰∏Ä‰∏™WebÁªÑ‰ª∂Â∞±Ë°®Á§∫ËøôÊòØ‰∏Ä‰∏™web project‰∫Ü ÈÖçÁΩÆWeb Resource DirectoriesËøôÈáåË¶ÅÈÄâÊã©scr/mainÁõÆÂΩïÔºåÂπ∂‰∏îÂú®ÂêéÈù¢ÊâãÂä®Ê∑ªÂä†‰∏Ä‰∏™webappÁõÆÂΩï„ÄÇ ÁÇπOKÔºåWebÁöÑËµÑÊ∫êÁõÆÂΩï‰æøËÆæÁΩÆÂ•Ω‰∫Ü„ÄÇ ÈÖçÁΩÆDeployment DescriptionËøô‰∏ÄÊ≠•ÊòØÈÖçÁΩÆweb.xmlÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÊàë‰ª¨ÈúÄË¶ÅÊîæÂú®‰∏ä‰∏ÄÊ≠•webapp‰∏ãÈù¢Âéª„ÄÇ ‰øÆÊîπÂÆåÊàêÁöÑÁªìÊûú Âà∞ËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Â∫ïÈÉ®Êúâ‰∏Ä‰∏™Ë≠¶ÂëäÔºåÊòØÊàë‰ª¨ËøòÊ≤°ÊúâÂºïÂÖ•aftifactÔºåÊé•‰∏ãÊù•ÈÖçÁΩÆAftifacts„ÄÇ AftifactsÈÖçÁΩÆËøô‰∏™AftifactsÊèèËø∞‰∫ÜÂΩìÂâçÈ°πÁõÆÂèëÂ∏ÉÁöÑ‰ø°ÊÅØ„ÄÇÁé∞Âú®ËøõË°åÊ∑ªÂä†Ôºå‰ªéModeles‰∏≠ÈÄâÊã©„ÄÇ ÈÄâÊã©Modules ÂºπÂá∫Á™óÁõ¥Êé•ÈÄâÊã©Êàë‰ª¨ÁöÑËøô‰∏™moduleÔºåÁÑ∂ÂêéÁÇπÂáªokÂ∞±ÂèØ‰ª•‰∫Ü ÈÖçÁΩÆÂÆåÊàê‰ª•ÂêéÁöÑÁªìÊûú ÂÜçÂõûËøáÂ§¥ÂéªÁúãModulesËèúÂçï‰∏ãÁöÑË≠¶Âëä‰πüÊ≤°Êúâ‰∫Ü„ÄÇ È°πÁõÆÁªìÊûÑËøôÈáåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨webÈ°πÁõÆÂøÖÈ°ªË¶ÅÊúâÁöÑweb.xmlÊñá‰ª∂ÔºåÂπ∂‰∏îÊàë‰ª¨Âú®ÈáåÈù¢Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™welcome-fileÔºåÂΩìÈ°πÁõÆÂêØÂä®Êó∂ÊâìÂºÄÊàëÊàë‰ª¨ÁöÑindex.htmlÊñá‰ª∂„ÄÇ ÈÖçÁΩÆTomcat‰∏ãËΩΩTomcatÈ¶ñÂÖàËøõÂÖ•TomcatÂÆòÁΩëÔºåËøôÈáåÊàë‰ª¨ÈÄâÊã©‰∫Ü‰∏Ä‰∏™Tomcat-9.0.3ÁöÑÁâàÊú¨ËøõË°å‰∏ãËΩΩ„ÄÇ ÈÖçÁΩÆTomcat Server ÈÖçÁΩÆDeployment ÈÖçÁΩÆServer ËøêË°åwebÈ°πÁõÆÂú®webappÁõÆÂΩï‰∏ãÈù¢Êñ∞Âª∫index.htmlÊñá‰ª∂ÔºåÈ°πÁõÆÁªìÊûÑÂ¶Ç‰∏ã„ÄÇ Êé•‰∏ãÊù•ÂêØÂä®È°πÁõÆ ÁÑ∂ÂêéÊàë‰ª¨ËÆøÈóÆhttp://localhost:8080/ÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞ÊòæÁ§∫‰∫ÜÊàë‰ª¨`index.html`ÁöÑÂÜÖÂÆπ‰∫Ü„ÄÇ Êñ∞Âª∫Servletpackage com.iogogogo.servlet; import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.nio.charset.StandardCharsets; /** * Created by tao.zeng on 2020/2/26. */ @WebServlet(\"/index\") public class IndexServlet extends HttpServlet { @Override protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doPost(request, response); } @Override protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // Ëß£ÂÜ≥‰π±Á†Å request.setCharacterEncoding(StandardCharsets.UTF_8.displayName()); response.setCharacterEncoding(StandardCharsets.UTF_8.name()); String name = request.getParameter(\"name\"); request.setAttribute(\"name\", name); System.out.println(name); response.getWriter().println(name); } } ÁÑ∂ÂêéÈáçÂêØÈ°πÁõÆÊàë‰ª¨Âú®Âú∞ÂùÄÊ†èËæìÂÖ•http://localhost:8080/index?name=ÂìàÂìàÂìàÂ∞±ÂèØ‰ª•ÁúãÂà∞È°µÈù¢ËæìÂá∫‰∫ÜÂìàÂìàÂìà Â∏∏ËßÅÈóÆÈ¢ò Êó†Ê≥ï‰ΩøÁî®servletÂåÖ‰∏ãÈù¢ÁöÑÁ±ª Ëß£ÂÜ≥ÊñπÊ°àÔºöÂú®ModulesÂä†ÂÖ•Tomcat‰æùËµñ","categories":[{"name":"Â∑•ÂÖ∑‰ΩøÁî®","slug":"Â∑•ÂÖ∑‰ΩøÁî®","permalink":"http://iogogogo.github.io/categories/Â∑•ÂÖ∑‰ΩøÁî®/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"http://iogogogo.github.io/tags/Maven/"},{"name":"IDEA","slug":"IDEA","permalink":"http://iogogogo.github.io/tags/IDEA/"}]},{"title":"Spring‰∫ãÂä°ÁÆ°ÁêÜ","slug":"spring-transaction","date":"2020-02-16T06:42:08.000Z","updated":"2024-07-01T12:30:37.380Z","comments":true,"path":"2020/02/16/spring-transaction/","link":"","permalink":"http://iogogogo.github.io/2020/02/16/spring-transaction/","excerpt":"","text":"‰ªÄ‰πàÊòØ‰∫ãÂä°‰∫ãÂä°ÊòØÈÄªËæë‰∏äÁöÑ‰∏ÄÁªÑÊìç‰ΩúÔºåË¶Å‰πàÈÉΩÊâßË°åÔºåË¶Å‰πàÈÉΩ‰∏çÊâßË°å„ÄÇ ÂéüÂ≠êÊÄß ‰∫ãÂä°ÊòØÊúÄÂ∞èÁöÑÊâßË°åÂçï‰ΩçÔºå‰∏çÂÖÅËÆ∏ÂàÜÂâ≤„ÄÇ‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄßÁ°Æ‰øùÂä®‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÂÆåÊàêÔºåË¶Å‰πàÂÆåÂÖ®‰∏çËµ∑‰ΩúÁî®Ôºõ ‰∏ÄËá¥ÊÄß ÊâßË°å‰∫ãÂä°ÂâçÂêéÔºåÊï∞ÊçÆ‰øùÊåÅ‰∏ÄËá¥Ôºõ ÊåÅ‰πÖÊÄß ‰∏Ä‰∏™‰∫ãÂä°Ë¢´Êèê‰∫§‰πãÂêé„ÄÇÂÆÉÂØπÊï∞ÊçÆÂ∫ì‰∏≠Êï∞ÊçÆÁöÑÊîπÂèòÊòØÊåÅ‰πÖÁöÑÔºåÂç≥‰ΩøÊï∞ÊçÆÂ∫ìÂèëÁîüÊïÖÈöú‰πü‰∏çÂ∫îËØ•ÂØπÂÖ∂Êúâ‰ªª‰ΩïÂΩ±Âìç„ÄÇ ÈöîÁ¶ªÊÄß Âπ∂ÂèëËÆøÈóÆÊï∞ÊçÆÂ∫ìÊó∂Ôºå‰∏Ä‰∏™Áî®Êà∑ÁöÑ‰∫ãÁâ©‰∏çË¢´ÂÖ∂‰ªñ‰∫ãÁâ©ÊâÄÂπ≤Êâ∞ÔºåÂêÑÂπ∂Âèë‰∫ãÂä°‰πãÈó¥Êï∞ÊçÆÂ∫ìÊòØÁã¨Á´ãÁöÑÔºõ Spring ‰∫ãÂä°Êé•Âè£‰ªãÁªç PlatformTransactionManager ‰∫ãÂä°ÁÆ°ÁêÜÂô® TransactionDefinition ‰∫ãÂä°ÂÆö‰πâÂΩ¢Ë±°ÔºàÈöîÁ¶ª„ÄÅ‰º†Êí≠„ÄÅË∂ÖÊó∂„ÄÅÂè™ËØªÔºâ TransactionStatus ‰∫ãÂä°ÂÖ∑‰ΩìÁöÑËøêË°åÁä∂ÊÄÅ PlatformTransactionManagerSpringÂπ∂‰∏çÁõ¥Êé•ÁÆ°ÁêÜ‰∫ãÂä°ÔºåËÄåÊòØÊèê‰æõ‰∫ÜÂ§öÁßç‰∫ãÂä°ÁÆ°ÁêÜÂô® Ôºå‰ªñ‰ª¨Â∞Ü‰∫ãÂä°ÁÆ°ÁêÜÁöÑËÅåË¥£ÂßîÊâòÁªôHibernateÊàñËÄÖJTAÁ≠âÊåÅ‰πÖÂåñÊú∫Âà∂ÊâÄÊèê‰æõÁöÑÁõ∏ÂÖ≥Âπ≥Âè∞Ê°ÜÊû∂ÁöÑ‰∫ãÂä°Êù•ÂÆûÁé∞„ÄÇ Spring‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑÊé•Âè£ÊòØÔºö org.springframework.transaction.PlatformTransactionManager ÔºåÈÄöËøáËøô‰∏™Êé•Âè£ÔºåSpring‰∏∫ÂêÑ‰∏™Âπ≥Âè∞Â¶ÇJDBC„ÄÅHibernateÁ≠âÈÉΩÊèê‰æõ‰∫ÜÂØπÂ∫îÁöÑ‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºå‰ΩÜÊòØÂÖ∑‰ΩìÁöÑÂÆûÁé∞Â∞±ÊòØÂêÑ‰∏™Âπ≥Âè∞Ëá™Â∑±ÁöÑ‰∫ãÊÉÖ‰∫Ü„ÄÇ ‰∫ãÂä° ËØ¥Êòé org.springframework.jdbc.datasource.DataSourceTransactionManager ‰ΩøÁî®Spring JdbcÊàñËÄÖMyBatisËøõË°åÊåÅ‰πÖÂåñÊï∞ÊçÆÊó∂‰ΩøÁî® org.springframework.orm.hibernate5.HibernateTransactionManager ‰ΩøÁî®Hibernate5.0ÁâàÊú¨ËøõË°åÊåÅ‰πÖÂåñÊï∞ÊçÆ‰ΩøÁî® org.springframework.orm.jpa.JpaTransactionManager ‰ΩøÁî®JpaÊåÅ‰πÖÂåñ‰ΩøÁî® org.springframework.kafka.transaction.KafkaTransactionManager ‰ΩøÁî®Kafka‰∫ãÂä°Êó∂‰ΩøÁî® TransactionDefinition‰∫ãÂä°ÁÆ°ÁêÜÂô®Êé•Âè£ PlatformTransactionManager ÈÄöËøá getTransaction(TransactionDefinition definition) ÊñπÊ≥ïÊù•ÂæóÂà∞‰∏Ä‰∏™‰∫ãÂä°ÔºåËøô‰∏™ÊñπÊ≥ïÈáåÈù¢ÁöÑÂèÇÊï∞ÊòØ TransactionDefinitionÁ±ª ÔºåËøô‰∏™Á±ªÂ∞±ÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂü∫Êú¨ÁöÑ‰∫ãÂä°Â±ûÊÄß„ÄÇ ÈöîÁ¶ªÁ∫ßÂà´Âú®‰∏çËÄÉËôëÈöîÁ¶ªÊÄßÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºöÂºïÂèëÂ¶Ç‰∏ãÈóÆÈ¢ò ËÑèÂ∫¶ ‰∏Ä‰∏™‰∫ãÂä°ËØªÂèñ‰∫ÜÂè¶‰∏Ä‰∏™‰∫ãÂä°ÊîπÂÜô‰ΩÜ‰∏∫Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúËøô‰∫õÊï∞ÊçÆË¢´ÂõûÊªöÔºåÂàôÁã¨Âà∞ÁöÑÊï∞ÊçÆÊó∂Êó†ÊïàÁöÑ ‰∏çÂèØÈáçÂ§çÂ∫¶ Âú®Âêå‰∏Ä‰∫ãÂä°‰∏≠ÔºåÂ§öÊ¨°ËØªÂèñÂêå‰∏ÄÊï∞ÊçÆËøîÂõûÁöÑÁªìÊûú‰∏ç‰∏ÄËá¥ ÂπªËØª ‰∏Ä‰∏™‰∫ãÂä°ËØªÂèñ‰∫ÜÂá†Ë°åËÆ∞ÂΩïÂêéÔºåÂè¶‰∏Ä‰∏™‰∫ãÂä°ÊèíÂÖ•‰∏Ä‰∫õËÆ∞ÂΩïÔºåÂπªËØªÂ∞±ÂèëÁîü‰∫Ü Âú®ÂêéÊù•ÁöÑÊü•ËØ¢‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™‰∫ãÂä°Â∞±‰ºöÂèëÁé∞Êúâ‰∫õÂéüÊù•Ê≤°ÊúâÁöÑËÆ∞ÂΩï ÈöîÁ¶ªÁ∫ßÂà´ ÂØºËá¥ÁöÑÈóÆÈ¢ò ISOLATION_DEFAULT ‰ΩøÁî®Êï∞ÊçÆÂ∫ìÈªòËÆ§ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºàspringÈªòËÆ§Ôºâ ISOLATION_READ_UNCOMMITTED ÂÖÅËÆ∏ËØªÂèñËøòÊú™Êèê‰∫§ÁöÑÊîπÂèò‰∫ÜÁöÑÊï∞ÊçÆÔºåÂèØËÉΩÂØºËá¥ËÑè„ÄÅÂπª„ÄÅ‰∏çÂèØÈáçÂ§çËØª ISOLATION_READ_COMMITTED ÂÖÅËÆ∏Âú®Âπ∂Âèë‰∫ãÂä°Â∑≤ÁªèÊèê‰∫§ÂêéËØªÂèñ„ÄÇÂèØÈò≤Ê≠¢ËÑèËØªÔºå‰ΩÜÂπª„ÄÅ‰∏çÂèØÈáçÂ§çËØª‰ªªÂèØÂèëÁîü ISOLATION_REPEATABLE_READ ÂØπÁõ∏ÂêåÂ≠óÊÆµÁöÑÂ§öÊ¨°ËØªÂèñÊòØ‰∏ÄËá¥ÁöÑÔºåÈô§ÈùûÊï∞ÊçÆË¢´‰∫ãÂä°Êú¨Ë∫´ÊîπÂèò„ÄÇÂèØÈò≤Ê≠¢ËÑè„ÄÅ‰∏çÂèØÈáçÂ§çËØªÔºå‰ΩÜÂπªËØª‰ªçÂèØËÉΩÂèëÁîü ISOLATION_SERIALIZABLE ÂÆåÂÖ®Êúç‰ªéACIDÁöÑÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∫ãÂä°Âè™ËÉΩ‰∏Ä‰∏™‰∏Ä‰∏™ÊâßË°åÔºåÈÅøÂÖç‰∫ÜËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÇÊâßË°åÊïàÁéáÊÖ¢Ôºå‰ΩøÁî®Êó∂ÊÖéÈáç Ê≥®ÔºöMySQL‰ΩøÁî®ÁöÑÊòØREPEATABLE_READÔºõOracle‰ΩøÁî®ÁöÑÊòØREAD_COMMITTED ‰º†Êí≠Ë°å‰∏∫Ëß£ÂÜ≥‰∏öÂä°Â±ÇÊñπÊ≥ï‰πãÈó¥ÁöÑÁõ∏‰∫íË∞ÉÁî®ÁöÑÈóÆÈ¢òÔºå‰∫ãÂä°‰º†ÈÄíÊñπÂºè„ÄÇ Â∏∏ÈáèÂêçÁß∞ Â∏∏ÈáèËß£Èáä PROPAGATION_REQUIRED ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±Êñ∞Âª∫‰∏Ä‰∏™‰∫ãÂä°„ÄÇËøôÊòØÊúÄÂ∏∏ËßÅÁöÑÈÄâÊã©Ôºå‰πüÊòØ Spring ÈªòËÆ§ÁöÑ‰∫ãÂä°ÁöÑ‰º†Êí≠„ÄÇ PROPAGATION_SUPPORTS ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°å„ÄÇ PROPAGATION_MANDATORY ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ PROPAGATION_REQUIRES_NEW Â¶ÇÊûú‰∫ãÂä°Â≠òÂú®ÔºåÊåÇËµ∑ÂΩìÂâç‰∫ãÂä°ÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ‰∫ãÂä° PROPAGATION_NOT_SUPPORTED ‰ª•Èùû‰∫ãÂä°ÊñπÂºèËøêË°åÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±ÊääÂΩìÂâç‰∫ãÂä°ÊåÇËµ∑„ÄÇ PROPAGATION_NEVER ‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°åÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏„ÄÇ PROPAGATION_NESTED Â¶ÇÊûú‰∏Ä‰∏™Ê¥ªÂä®ÁöÑ‰∫ãÂä°Â≠òÂú®ÔºåÂàôËøêË°åÂú®‰∏Ä‰∏™ÂµåÂ•óÁöÑ‰∫ãÂä°‰∏≠„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊ¥ªÂä®‰∫ãÂä°ÔºåÂàôÊåâREQUIREDÂ±ûÊÄßÊâßË°å„ÄÇÂÆÉ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑ‰∫ãÂä°ÔºåËøô‰∏™‰∫ãÂä°Êã•ÊúâÂ§ö‰∏™ÂèØ‰ª•ÂõûÊªöÁöÑ‰øùÂ≠òÁÇπ„ÄÇÂÜÖÈÉ®‰∫ãÂä°ÁöÑÂõûÊªö‰∏ç‰ºöÂØπÂ§ñÈÉ®‰∫ãÂä°ÈÄ†ÊàêÂΩ±Âìç„ÄÇÂÆÉÂè™ÂØπDataSourceTransactionManager‰∫ãÂä°ÁÆ°ÁêÜÂô®Ëµ∑Êïà„ÄÇ TransactionStatusTransactionStatusÊé•Âè£Áî®Êù•ËÆ∞ÂΩï‰∫ãÂä°ÁöÑÁä∂ÊÄÅ ËØ•Êé•Âè£ÂÆö‰πâ‰∫Ü‰∏ÄÁªÑÊñπÊ≥ï,Áî®Êù•Ëé∑ÂèñÊàñÂà§Êñ≠‰∫ãÂä°ÁöÑÁõ∏Â∫îÁä∂ÊÄÅ‰ø°ÊÅØ. PlatformTransactionManager.getTransaction(‚Ä¶)ÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™ TransactionStatus ÂØπË±°„ÄÇËøîÂõûÁöÑTransactionStatus ÂØπË±°ÂèØËÉΩ‰ª£Ë°®‰∏Ä‰∏™Êñ∞ÁöÑÊàñÂ∑≤ÁªèÂ≠òÂú®ÁöÑ‰∫ãÂä°ÔºàÂ¶ÇÊûúÂú®ÂΩìÂâçË∞ÉÁî®Â†ÜÊ†àÊúâ‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑ‰∫ãÂä°Ôºâ„ÄÇ Spring‰∏≠ÁöÑ‰∫ãÂä°ÁÆ°ÁêÜÁºñÁ®ãÂºèÁöÑ‰∫ãÂä°ÁÆ°ÁêÜ‰ΩøÁî®TransactionTemplateÊâãÂä®ÁÆ°ÁêÜ‰∫ãÂä°ÔºåÈúÄË¶Å‰øÆÊîπ‰ª£Á†ÅÔºå‰æµÂÖ•ÊÄßÁõ∏ÂØπËæÉÂ§ßÔºå‰∏ÄËà¨‰∏ç‰ΩøÁî® Â£∞ÊòéÂºèÁöÑ‰∫ãÂä°ÁÆ°ÁêÜTransactionProxyFactoryBeanÈúÄË¶Å‰∏∫ÊØè‰∏™ËøõË°å‰∫ãÂä°ÁÆ°ÁêÜÁöÑÁ±ªÔºåÈÖçÁΩÆ‰∏Ä‰∏™TransactionProxyFactoryBeanËøõË°åÂ¢ûÂº∫Â§ÑÁêÜ Âü∫‰∫éAspectJÁöÑAOPÊñπÂºèÔºàxmlÔºâÊó©ÊúüÁ∫ØÁ≤πÁöÑspring mvcÈÖçÁΩÆÂΩ¢ÂºèÔºå‰∏ÄÊó¶ÈÖçÁΩÆÂ•Ω‰ª•Âêé‰∏çÈúÄË¶Å‰øÆÊîπ‰ªª‰Ωï‰ª£Á†Å Âü∫‰∫é@TransactionalÊ≥®Ëß£ÊñπÂºèÁé∞Âú®spring bootÂ∏∏Áî®ÊñπÂºèÔºåÂè™ÈúÄË¶ÅÂú®ÈúÄË¶Å‰∫ãÂä°Â§ÑÁêÜÁöÑÁ±ªÊàñËÄÖÊñπÊ≥ïÊ∑ªÂä†@Transactional„ÄÇ‰∏ãÈù¢‰ΩøÁî®Ê≥®Ëß£ÊñπÂºèÁÆÄÂçïÂÅö‰∏Ä‰∏™ËΩ¨Ë¥¶ÁöÑ‰∫ãÂä°Ê®°Êãü„ÄÇ ‰ΩøÁî®ËΩ¨Ë¥¶Ê®°Êãü‰∫ãÂä°ÁÆ°ÁêÜ‰ΩøÁî®ËΩ¨Ë¥¶Ê®°Êãü‰∏Ä‰∏ã‰∫ãÂä°Â§ÑÁêÜÔºåËøôÈáåÊºîÁ§∫‰∏§ÁßçÊìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÊñπÂºèÔºåÁî®‰∫éÂØπÊØîÊü•Áúã È°πÁõÆÁªìÊûÑ‚ûú example-transaction git:(master) ‚úó tree . ‚îú‚îÄ‚îÄ example-transaction.iml ‚îú‚îÄ‚îÄ pom.xml ‚îî‚îÄ‚îÄ src ‚îú‚îÄ‚îÄ main ‚îÇ ‚îú‚îÄ‚îÄ java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iogogogo ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ transfer ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TransferApplication.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ entity ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TransferAccount.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ jpa ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TransferRepository.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ mapper ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TransferMapper.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ service ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TransferService.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ impl ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TransferServiceImpl.java ‚îÇ ‚îî‚îÄ‚îÄ resources ‚îÇ ‚îú‚îÄ‚îÄ application.yml ‚îÇ ‚îî‚îÄ‚îÄ transfer.sql ‚îî‚îÄ‚îÄ test ‚îî‚îÄ‚îÄ java ‚îî‚îÄ‚îÄ com ‚îî‚îÄ‚îÄ iogogogo ‚îî‚îÄ‚îÄ transfer ‚îî‚îÄ‚îÄ TransferApplicationTests.java Êñ∞Âª∫Êï∞ÊçÆÂ∫ìË°®drop table if exists transfer_account; create table transfer_account ( id int primary key auto_increment, name varchar(255) unique not null, money float default null ); insert into transfer_account (id, name, money) values (1, 'jack.zhang', 1000); insert into transfer_account (id, name, money) values (2, 'kevin.yu', 1000); select * from transfer_account; pomÈÖçÁΩÆ&lt;dependencies> &lt;dependency> &lt;groupId>mysql&lt;/groupId> &lt;artifactId>mysql-connector-java&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-jpa&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>com.baomidou&lt;/groupId> &lt;artifactId>mybatis-plus-boot-starter&lt;/artifactId> &lt;version>3.3.1.tmp&lt;/version> &lt;/dependency> &lt;/dependencies> application.ymlserver: port: 8084 spring: datasource: url: jdbc:mysql://localhost:3306/transfer?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true username: root password: MySQL@123 driver-class-name: com.mysql.cj.jdbc.Driver hikari: # http://blog.didispace.com/Springboot-2-0-HikariCP-default-reason/ minimum-idle: 5 maximum-pool-size: 20 auto-commit: true idle-timeout: 30000 pool-name: TransferHikariCP max-lifetime: 1800000 connection-timeout: 30000 connection-test-query: SELECT 1 jpa: database-platform: org.hibernate.dialect.MySQL57Dialect open-in-view: false show-sql: true hibernate: ddl-auto: update properties: hibernate: use_sql_comments: true format_sql: true logging: level: com.iogogogo.transfer.mapper: debug JpaÊìç‰ΩúÊï∞ÊçÆÂ∫ìpackage com.iogogogo.transfer.jpa; import com.iogogogo.transfer.entity.TransferAccount; import org.springframework.data.jpa.repository.JpaRepository; import org.springframework.data.jpa.repository.Modifying; import org.springframework.data.jpa.repository.Query; import org.springframework.data.repository.query.Param; import org.springframework.stereotype.Repository; /** * Created by tao.zeng on 2020/2/16. */ @Repository public interface TransferRepository extends JpaRepository&lt;TransferAccount, Long> { /** * @param in ËΩ¨ÂÖ•‰∫∫ * @param money ÈáëÈ¢ù */ @Modifying @Query(value = \"update transfer_account set money = money + ?2 where name = ?1\", nativeQuery = true) void inMoney(String in, float money); /** * @param out ËΩ¨Âá∫‰∫∫ * @param money ÈáëÈ¢ù */ @Modifying @Query(value = \"update transfer_account set money = money - :money where name = :name\", nativeQuery = true) void outMoney(@Param(\"name\") String out, @Param(\"money\") float money); } ‰∏öÂä°Â±ÇÊ®°Êãü‰∏Ä‰∏™ËΩ¨Ë¥¶Êìç‰Ωúpackage com.iogogogo.transfer.service.impl; import com.iogogogo.transfer.jpa.TransferRepository; import com.iogogogo.transfer.mapper.TransferMapper; import com.iogogogo.transfer.service.TransferService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Service; import org.springframework.transaction.support.TransactionTemplate; /** * Created by tao.zeng on 2020/2/16. */ @Service public class TransferServiceImpl implements TransferService { @Autowired private TransferRepository transferRepository; @Autowired private TransferMapper transferMapper; @Autowired private TransactionTemplate transactionTemplate; @Override public void transfer(String in, String out, float money) { // ËøôÈáå‰ΩøÁî®ÁöÑÊòØjpaÊìç‰ΩúÊï∞ÊçÆÂ∫ì transferRepository.outMoney(out, money); transferRepository.inMoney(in, money); } } Êñ∞Âª∫ÊµãËØïÁ±ªpackage com.iogogogo.transfer; import com.iogogogo.transfer.service.TransferService; import lombok.extern.slf4j.Slf4j; import org.junit.Ignore; import org.junit.Test; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.test.context.junit4.SpringRunner; /** * Created by tao.zeng on 2020/2/16. */ @Slf4j @Ignore @org.junit.runner.RunWith(SpringRunner.class) @org.springframework.boot.test.context.SpringBootTest(classes = TransferApplication.class) public class TransferApplicationTests { @Autowired private TransferService transferService; @Test public void test1() { transferService.transfer(\"jack.zhang\", \"kevin.yu\", 200); } } ‰ΩÜÊàë‰ª¨ËøêË°åÊó∂Ôºå‰ºöÊäõÂá∫Â¶Ç‰∏ãÂºÇÂ∏∏Ôºö org.springframework.dao.InvalidDataAccessApiUsageException: Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:403) at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:257) at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:528) at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242) at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:153) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:149) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) at com.sun.proxy.$Proxy99.outMoney(Unknown Source) at com.iogogogo.transfer.service.impl.TransferServiceImpl.transfer(TransferServiceImpl.java:28) at com.iogogogo.transfer.TransferApplicationTests.test1(TransferApplicationTests.java:24) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74) at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84) at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190) at org.junit.runner.JUnitCore.run(JUnitCore.java:137) at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68) at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33) at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230) at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58) Caused by: javax.persistence.TransactionRequiredException: Executing an update/delete query at org.hibernate.internal.AbstractSharedSessionContract.checkTransactionNeededForUpdateOperation(AbstractSharedSessionContract.java:409) at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1601) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:409) at com.sun.proxy.$Proxy115.executeUpdate(Unknown Source) at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:238) at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88) at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:154) at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:142) at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:618) at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:605) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:99) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ... 39 more ÈÇ£ÊòØÂõ†‰∏∫‰ΩøÁî®jpaÁöÑÊó∂ÂÄôÔºåÊ∂âÂèäÂà∞@ModifyingÂ∞±Ë°®Á§∫ÊòØÂ¢ûÂà†ÊîπÊìç‰ΩúÔºåÈÇ£‰πàÂ∞±ÂøÖÈ°ªÊ∑ªÂä†@TransactionalÔºåÂΩìÁÑ∂Â¶ÇÊûúÊòØÂçïÁ∫ØÁöÑÊü•ËØ¢Â∞±‰∏çÈúÄË¶Å‰∫ÜÔºàspringËÄÉËôëÁöÑÊå∫ÂÖ®Èù¢Ôºâ„ÄÇÂΩìÂä†‰∏ä@TransactionalÂ∞±ÂèØ‰ª•Ê≠£Â∏∏ËøêË°å‰∫Ü„ÄÇ Êàë‰ª¨ÂèØ‰ª•Âú®‰ª£Á†Å‰∏äÊâãÂä®Áªô‰ªñÊ∑ªÂä†‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÂÜçÊù•ÁúãÁªìÊûú„ÄÇËøôÈáåÊàë‰ª¨Âä†‰∫Ü‰∏Ä‰∏™int i = 1 / 0;‰ºö‰∫ßÁîü‰∏Ä‰∏™Èô§‰ª•0ÁöÑÂºÇÂ∏∏ÔºåÂõ†‰∏∫Êúâ@TransactionalÁöÑÂ≠òÂú®ÔºåÊï¥‰∏™ÊâßË°åÊòØ‰∏çËÉΩÊàêÂäüÁöÑ„ÄÇ @Override @Transactional public void transfer(String in, String out, float money) { // ËøôÈáå‰ΩøÁî®ÁöÑÊòØjpaÊìç‰ΩúÊï∞ÊçÆÂ∫ì transferRepository.outMoney(out, money); int i = 1 / 0; transferRepository.inMoney(in, money); } MyBatis-PlusÊìç‰ΩúÊï∞ÊçÆÂ∫ìpackage com.iogogogo.transfer.mapper; import com.baomidou.mybatisplus.core.mapper.BaseMapper; import com.iogogogo.transfer.entity.TransferAccount; import org.apache.ibatis.annotations.Param; import org.apache.ibatis.annotations.Update; import org.springframework.stereotype.Repository; /** * Created by tao.zeng on 2020/2/16. */ @Repository public interface TransferMapper extends BaseMapper&lt;TransferAccount> { /** * @param in ËΩ¨ÂÖ•‰∫∫ * @param money ÈáëÈ¢ù */ @Update(\"update transfer_account set money = money + #{money} where name = #{name}\") void inMoney(@Param(\"name\") String in, @Param(\"money\") float money); /** * @param out ËΩ¨Âá∫‰∫∫ * @param money ÈáëÈ¢ù */ @Update(\"update transfer_account set money = money - #{money} where name = #{name}\") void outMoney(@Param(\"name\") String out, @Param(\"money\") float money); } ‰∏öÂä°Â±ÇÊ®°Êãü‰∏Ä‰∏™ËΩ¨Ë¥¶Êìç‰Ωúpackage com.iogogogo.transfer.service.impl; import com.iogogogo.transfer.jpa.TransferRepository; import com.iogogogo.transfer.mapper.TransferMapper; import com.iogogogo.transfer.service.TransferService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Service; import org.springframework.transaction.annotation.Transactional; import org.springframework.transaction.support.TransactionTemplate; /** * Created by tao.zeng on 2020/2/16. */ @Service public class TransferServiceImpl implements TransferService { @Autowired private TransferRepository transferRepository; @Autowired private TransferMapper transferMapper; @Autowired private TransactionTemplate transactionTemplate; @Override public void transfer(String in, String out, float money) { // ËøôÈáå‰ΩøÁî®ÁöÑÊòØMyBatis-PlusÊìç‰ΩúÊï∞ÊçÆÂ∫ì transferMapper.outMoney(out, money); // int i = 1 / 0; transferMapper.inMoney(in, money); } } Âú®Ê≤°ÊúâÂºÇÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ∞±ÁÆó‰∏çÂä†@TransactionalÊòØÂèØ‰ª•Áõ¥Êé•Êìç‰ΩúÊàêÂäüÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûú int i = 1 / 0;Â≠òÂú®ÔºåoutMoneyÊñπÊ≥ïËøòÊòØÂèØ‰ª•Ê≠£Â∏∏ÊâßË°åÁöÑÔºåËøôÊ†∑Â∞±‰ºöÈÄ†ÊàêÈí±Ë¢´Êâ£‰∫Ü‰ΩÜÊòØÂØπÊñπÂç¥Ê≤°ÊúâÊî∂Âà∞ÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•ËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÊ∑ªÂä†@TransactionalËÆ©‰ªñËøõË°å‰∫ãÂä°Â§ÑÁêÜÔºåËøôÈáåmybatisÂ∞±Ê≤°ÊúâjpaÂ§ÑÁêÜÁöÑÂ•Ω‰∫Ü„ÄÇ @Transactional ‰ªãÁªç ÂèÇÊï∞ ÊèèËø∞ readOnly ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆÂΩìÂâç‰∫ãÂä°ÊòØÂê¶‰∏∫Âè™ËØª‰∫ãÂä°ÔºåËÆæÁΩÆ‰∏∫trueË°®Á§∫Âè™ËØªÔºåfalseÂàôË°®Á§∫ÂèØËØªÂÜôÔºåÈªòËÆ§ÂÄº‰∏∫false„ÄÇ‰æãÂ¶ÇÔºö@Transactional(readOnly=true) rollbackFor ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆÈúÄË¶ÅËøõË°åÂõûÊªöÁöÑÂºÇÂ∏∏Á±ªÊï∞ÁªÑÔºåÂΩìÊñπÊ≥ï‰∏≠ÊäõÂá∫ÊåáÂÆöÂºÇÂ∏∏Êï∞ÁªÑ‰∏≠ÁöÑÂºÇÂ∏∏Êó∂ÔºåÂàôËøõË°å‰∫ãÂä°ÂõûÊªö„ÄÇ‰æãÂ¶ÇÔºöÊåáÂÆöÂçï‰∏ÄÂºÇÂ∏∏Á±ªÔºö@Transactional(rollbackFor=RuntimeException.class)ÊåáÂÆöÂ§ö‰∏™ÂºÇÂ∏∏Á±ªÔºö@Transactional(rollbackFor={RuntimeException.class, Exception.class}) rollbackForClassName ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆÈúÄË¶ÅËøõË°åÂõûÊªöÁöÑÂºÇÂ∏∏Á±ªÂêçÁß∞Êï∞ÁªÑÔºåÂΩìÊñπÊ≥ï‰∏≠ÊäõÂá∫ÊåáÂÆöÂºÇÂ∏∏ÂêçÁß∞Êï∞ÁªÑ‰∏≠ÁöÑÂºÇÂ∏∏Êó∂ÔºåÂàôËøõË°å‰∫ãÂä°ÂõûÊªö„ÄÇ‰æãÂ¶ÇÔºöÊåáÂÆöÂçï‰∏ÄÂºÇÂ∏∏Á±ªÂêçÁß∞Ôºö@Transactional(rollbackForClassName=‚ÄùRuntimeException‚Äù)ÊåáÂÆöÂ§ö‰∏™ÂºÇÂ∏∏Á±ªÂêçÁß∞Ôºö@Transactional(rollbackForClassName={‚ÄúRuntimeException‚Äù,‚ÄùException‚Äù}) noRollbackFor ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆ‰∏çÈúÄË¶ÅËøõË°åÂõûÊªöÁöÑÂºÇÂ∏∏Á±ªÊï∞ÁªÑÔºåÂΩìÊñπÊ≥ï‰∏≠ÊäõÂá∫ÊåáÂÆöÂºÇÂ∏∏Êï∞ÁªÑ‰∏≠ÁöÑÂºÇÂ∏∏Êó∂Ôºå‰∏çËøõË°å‰∫ãÂä°ÂõûÊªö„ÄÇ‰æãÂ¶ÇÔºöÊåáÂÆöÂçï‰∏ÄÂºÇÂ∏∏Á±ªÔºö@Transactional(noRollbackFor=RuntimeException.class)ÊåáÂÆöÂ§ö‰∏™ÂºÇÂ∏∏Á±ªÔºö@Transactional(noRollbackFor={RuntimeException.class, Exception.class}) noRollbackForClassName ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆ‰∏çÈúÄË¶ÅËøõË°åÂõûÊªöÁöÑÂºÇÂ∏∏Á±ªÂêçÁß∞Êï∞ÁªÑÔºåÂΩìÊñπÊ≥ï‰∏≠ÊäõÂá∫ÊåáÂÆöÂºÇÂ∏∏ÂêçÁß∞Êï∞ÁªÑ‰∏≠ÁöÑÂºÇÂ∏∏Êó∂Ôºå‰∏çËøõË°å‰∫ãÂä°ÂõûÊªö„ÄÇ‰æãÂ¶ÇÔºöÊåáÂÆöÂçï‰∏ÄÂºÇÂ∏∏Á±ªÂêçÁß∞Ôºö@Transactional(noRollbackForClassName=‚ÄùRuntimeException‚Äù)ÊåáÂÆöÂ§ö‰∏™ÂºÇÂ∏∏Á±ªÂêçÁß∞Ôºö@Transactional(noRollbackForClassName={‚ÄúRuntimeException‚Äù,‚ÄùException‚Äù}) propagation ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆ‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫ÔºåÂÖ∑‰ΩìÂèñÂÄºÂèØÂèÇËÄÉË°®6-7„ÄÇ‰æãÂ¶ÇÔºö@Transactional(propagation=Propagation.NOT_SUPPORTED,readOnly=true) isolation ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆÂ∫ïÂ±ÇÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´Áî®‰∫éÂ§ÑÁêÜÂ§ö‰∫ãÂä°Âπ∂ÂèëÁöÑÊÉÖÂÜµÔºåÈÄöÂ∏∏‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´Âç≥ÂèØÔºåÂü∫Êú¨‰∏çÈúÄË¶ÅËøõË°åËÆæÁΩÆ timeout ËØ•Â±ûÊÄßÁî®‰∫éËÆæÁΩÆ‰∫ãÂä°ÁöÑË∂ÖÊó∂ÁßíÊï∞ÔºåÈªòËÆ§ÂÄº‰∏∫-1Ë°®Á§∫Ê∞∏‰∏çË∂ÖÊó∂ ‰ª•‰∏äÂèÇËÄÉÔºöspring‰∫ãÂä°Ê≥®Ëß£ ÊÄªÁªì‰ª•‰∏ä‰ªãÁªç‰∫Ü‰∏Ä‰∏ãspring‰∏≠ÁöÑ‰∫ãÂä°Êé•Âè£Âíå‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫‰ª•ÂèäÈöîÁ¶ªÁ∫ßÂà´Ôºå‰πüÈÄöËøáËΩ¨Ë¥¶ÁöÑ‰æãÂ≠êÊºîÁ§∫‰∫ÜÊúâ‰∫ãÂä°ÂíåÊ≤°Êúâ‰∫ãÂä°ÁöÑÂå∫Âà´ÔºåÂÜçÊúâ‰∫Üspring boot‰ª•ÂêéÔºåÂü∫Êú¨ÈÉΩÊòØ‰ΩøÁî®Ê≥®Ëß£ÁöÑÂΩ¢ÂºèËøõË°å‰∫ãÂä°Â§ÑÁêÜ„ÄÇ Ê∫êÁ†ÅÂú∞ÂùÄÔºöhttps://github.com/iogogogo/life-example/tree/master/example-transaction","categories":[{"name":"Spring","slug":"Spring","permalink":"http://iogogogo.github.io/categories/Spring/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://iogogogo.github.io/tags/spring/"},{"name":"transaction","slug":"transaction","permalink":"http://iogogogo.github.io/tags/transaction/"}]},{"title":"Spring Aop AspectJ ÊëòÂΩïÁ¨îËÆ∞","slug":"spring-aop","date":"2020-02-16T04:41:18.000Z","updated":"2024-07-01T12:30:37.377Z","comments":true,"path":"2020/02/16/spring-aop/","link":"","permalink":"http://iogogogo.github.io/2020/02/16/spring-aop/","excerpt":"","text":"ÂéüÊñáÈìæÊé•Ôºöhttps://juejin.im/post/5a55af9e518825734d14813f @AspectJAspectJÊòØ‰∏Ä‰∏™AOPÊ°ÜÊû∂ÔºåÂÆÉËÉΩÂ§üÂØπjava‰ª£Á†ÅËøõË°åAOPÁºñËØëÔºà‰∏ÄËà¨Âú®ÁºñËØëÊúüËøõË°åÔºâÔºåËÆ©java‰ª£Á†ÅÂÖ∑ÊúâAspectJÁöÑAOPÂäüËÉΩÔºàÂΩìÁÑ∂ÈúÄË¶ÅÁâπÊÆäÁöÑÁºñËØëÂô®ÔºâÔºåÂèØ‰ª•ËøôÊ†∑ËØ¥AspectJÊòØÁõÆÂâçÂÆûÁé∞AOPÊ°ÜÊû∂‰∏≠ÊúÄÊàêÁÜüÔºåÂäüËÉΩÊúÄ‰∏∞ÂØåÁöÑËØ≠Ë®ÄÔºåÊõ¥Âπ∏ËøêÁöÑÊòØÔºåAspectJ‰∏éjavaÁ®ãÂ∫èÂÆåÂÖ®ÂÖºÂÆπÔºåÂá†‰πéÊòØÊó†ÁºùÂÖ≥ËÅîÔºåÂõ†Ê≠§ÂØπ‰∫éÊúâjavaÁºñÁ®ãÂü∫Á°ÄÁöÑÂ∑•Á®ãÂ∏àÔºå‰∏äÊâãÂíå‰ΩøÁî®ÈÉΩÈùûÂ∏∏ÂÆπÊòì. ÂÖ∂ÂÆûAspectJÂçïÁã¨Â∞±ÊòØ‰∏ÄÈó®ËØ≠Ë®ÄÔºåÂÆÉÈúÄË¶Å‰∏ìÈó®ÁöÑÁºñËØëÂô®(ajcÁºñËØëÂô®). Spring AOP ‰∏éApectJÁöÑÁõÆÁöÑ‰∏ÄËá¥ÔºåÈÉΩÊòØ‰∏∫‰∫ÜÁªü‰∏ÄÂ§ÑÁêÜÊ®™Âàá‰∏öÂä°Ôºå‰ΩÜ‰∏éAspectJ‰∏çÂêåÁöÑÊòØÔºåSpring AOPÂπ∂‰∏çÂ∞ùËØïÊèê‰æõÂÆåÊï¥ÁöÑAOPÂäüËÉΩ(Âç≥‰ΩøÂÆÉÂÆåÂÖ®ÂèØ‰ª•ÂÆûÁé∞)ÔºåSpring AOP Êõ¥Ê≥®ÈáçÁöÑÊòØ‰∏éSpring IOCÂÆπÂô®ÁöÑÁªìÂêàÔºåÂπ∂ÁªìÂêàËØ•‰ºòÂäøÊù•Ëß£ÂÜ≥Ê®™Âàá‰∏öÂä°ÁöÑÈóÆÈ¢òÔºåÂõ†Ê≠§Âú®AOPÁöÑÂäüËÉΩÂÆåÂñÑÊñπÈù¢ÔºåÁõ∏ÂØπÊù•ËØ¥AspectJÂÖ∑ÊúâÊõ¥Â§ßÁöÑ‰ºòÂäøÔºåÂêåÊó∂,SpringÊ≥®ÊÑèÂà∞AspectJÂú®AOPÁöÑÂÆûÁé∞ÊñπÂºè‰∏ä‰æùËµñ‰∫éÁâπÊÆäÁºñËØëÂô®(ajcÁºñËØëÂô®)ÔºåÂõ†Ê≠§SpringÂæàÊú∫Êô∫ÂõûÈÅø‰∫ÜËøôÁÇπÔºåËΩ¨ÂêëÈááÁî®Âä®ÊÄÅ‰ª£ÁêÜÊäÄÊúØÁöÑÂÆûÁé∞ÂéüÁêÜÊù•ÊûÑÂª∫Spring AOPÁöÑÂÜÖÈÉ®Êú∫Âà∂ÔºàÂä®ÊÄÅÁªáÂÖ•ÔºâÔºåËøôÊòØ‰∏éAspectJÔºàÈùôÊÄÅÁªáÂÖ•ÔºâÊúÄÊ†πÊú¨ÁöÑÂå∫Âà´„ÄÇÂú®AspectJ 1.5ÂêéÔºåÂºïÂÖ•@AspectÂΩ¢ÂºèÁöÑÊ≥®Ëß£È£éÊ†ºÁöÑÂºÄÂèëÔºåSpring‰πüÈùûÂ∏∏Âø´Âú∞Ë∑üËøõ‰∫ÜËøôÁßçÊñπÂºèÔºåÂõ†Ê≠§Spring 2.0Âêé‰æø‰ΩøÁî®‰∫Ü‰∏éAspectJ‰∏ÄÊ†∑ÁöÑÊ≥®Ëß£„ÄÇËØ∑Ê≥®ÊÑèÔºåSpring Âè™ÊòØ‰ΩøÁî®‰∫Ü‰∏é AspectJ 5 ‰∏ÄÊ†∑ÁöÑÊ≥®Ëß£Ôºå‰ΩÜ‰ªçÁÑ∂Ê≤°Êúâ‰ΩøÁî® AspectJ ÁöÑÁºñËØëÂô®ÔºåÂ∫ïÂ±Ç‰æùÊòØÂä®ÊÄÅ‰ª£ÁêÜÊäÄÊúØÁöÑÂÆûÁé∞ÔºåÂõ†Ê≠§Âπ∂‰∏ç‰æùËµñ‰∫é AspectJ ÁöÑÁºñËØëÂô®„ÄÇ ÊâÄ‰ª•ÔºåSpring AOPËôΩÁÑ∂ÊòØ‰ΩøÁî®‰∫ÜÈÇ£‰∏ÄÂ•óÊ≥®Ëß£ÔºåÂÖ∂ÂÆûÂÆûÁé∞AOPÁöÑÂ∫ïÂ±ÇÊòØ‰ΩøÁî®‰∫ÜÂä®ÊÄÅ‰ª£ÁêÜ(JDKÊàñËÄÖCGLib)Êù•Âä®ÊÄÅÊ§çÂÖ•„ÄÇ ÂàáÁÇπ:ÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÊñπÊ≥ïÁöÑ‰∏Ä‰∏™Ë°®ËææÂºè ÂàáÈù¢: ÂàáÁÇπ+Âª∫Ë®Ä Âª∫Ë®Ä(Â¢ûÂº∫):ÂÆö‰ΩçÂà∞ÊñπÊ≥ïÂêéÂπ≤‰ªÄ‰πà‰∫ã ÂâçÁΩÆÈÄöÁü• @BeforeÂâçÁΩÆÈÄöÁü•ÈÄöËøá@BeforeÊ≥®Ëß£ËøõË°åÊ†áÊ≥®ÔºåÂπ∂ÂèØÁõ¥Êé•‰º†ÂÖ•ÂàáÁÇπË°®ËææÂºèÁöÑÂÄºÔºåËØ•ÈÄöÁü•Âú®ÁõÆÊ†áÂáΩÊï∞ÊâßË°åÂâçÊâßË°åÔºåÊ≥®ÊÑèJoinPointÔºåÊòØSpringÊèê‰æõÁöÑÈùôÊÄÅÂèòÈáèÔºåÈÄöËøájoinPoint ÂèÇÊï∞ÔºåÂèØ‰ª•Ëé∑ÂèñÁõÆÊ†áÂØπË±°ÁöÑ‰ø°ÊÅØ,Â¶ÇÁ±ªÂêçÁß∞,ÊñπÊ≥ïÂèÇÊï∞,ÊñπÊ≥ïÂêçÁß∞Á≠âÔºåËØ•ÂèÇÊï∞ÊòØÂèØÈÄâÁöÑ„ÄÇ @Before(\"execution(* com.iogogogo.aop.service.*.*(..))\") public void before(JoinPoint joinPoint) { log.info(\"ÂâçÁΩÆÈÄöÁü• CLASS_METHOD : {}\", joinPoint.getSignature().getDeclaringTypeName() + \".\" + joinPoint.getSignature().getName()); log.info(\"ÂâçÁΩÆÈÄöÁü• ARGS : {}\", Arrays.toString(joinPoint.getArgs())); } ÂêéÁΩÆÈÄöÁü• @AfterReturningÈÄöËøá@AfterReturningÊ≥®Ëß£ËøõË°åÊ†áÊ≥®ÔºåËØ•ÂáΩÊï∞Âú®ÁõÆÊ†áÂáΩÊï∞ÊâßË°åÂÆåÊàêÂêéÊâßË°åÔºåÂπ∂ÂèØ‰ª•Ëé∑ÂèñÂà∞ÁõÆÊ†áÂáΩÊï∞ÊúÄÁªàÁöÑËøîÂõûÂÄºreturnValÔºåÂΩìÁõÆÊ†áÂáΩÊï∞Ê≤°ÊúâËøîÂõûÂÄºÊó∂ÔºåreturnValÂ∞ÜËøîÂõûnullÔºåÂøÖÈ°ªÈÄöËøáreturning = ‚ÄúreturnVal‚ÄùÊ≥®ÊòéÂèÇÊï∞ÁöÑÂêçÁß∞ËÄå‰∏îÂøÖÈ°ª‰∏éÈÄöÁü•ÂáΩÊï∞ÁöÑÂèÇÊï∞ÂêçÁß∞Áõ∏Âêå„ÄÇËØ∑Ê≥®ÊÑèÔºåÂú®‰ªª‰ΩïÈÄöÁü•‰∏≠Ëøô‰∫õÂèÇÊï∞ÈÉΩÊòØÂèØÈÄâÁöÑÔºåÈúÄË¶Å‰ΩøÁî®Êó∂Áõ¥Êé•Â°´ÂÜôÂç≥ÂèØÔºå‰∏çÈúÄË¶Å‰ΩøÁî®Êó∂ÔºåÂèØ‰ª•ÂÆåÊàê‰∏çÁî®Â£∞ÊòéÂá∫Êù•„ÄÇÂΩìÂá∫Áé∞ÂºÇÂ∏∏Âàô‰∏çÊâßË°å„ÄÇ @AfterReturning(value = \"execution(* com.iogogogo.aop.service.*.*(..))\", returning = \"returnVal\") public void AfterReturning(JoinPoint joinPoint, Object returnVal) { log.info(\"ÂêéÁΩÆÈÄöÁü• CLASS_METHOD : {}\", joinPoint.getSignature().getDeclaringTypeName() + \".\" + joinPoint.getSignature().getName()); log.info(\"ÂêéÁΩÆÈÄöÁü• ARGS : {}\", Arrays.toString(joinPoint.getArgs())); log.info(\"ÂêéÁΩÆÈÄöÁü• returnVal {} \", returnVal); } ÂºÇÂ∏∏ÈÄöÁü• @AfterThrowingËØ•ÈÄöÁü•Âè™ÊúâÂú®ÂºÇÂ∏∏Êó∂Êâç‰ºöË¢´Ëß¶ÂèëÔºåÂπ∂Áî±throwingÊù•Â£∞Êòé‰∏Ä‰∏™Êé•Êî∂ÂºÇÂ∏∏‰ø°ÊÅØÁöÑÂèòÈáèÔºåÂêåÊ†∑ÂºÇÂ∏∏ÈÄöÁü•‰πüÁî®‰∫éJoinpointÂèÇÊï∞ÔºåÈúÄË¶ÅÊó∂Âä†‰∏äÂç≥ÂèØ„ÄÇ @AfterThrowing(value = \"execution(* com.iogogogo.aop.service.*.*(..))\", throwing = \"e\") public void afterThrowable(Throwable e) { log.error(\"ÂºÇÂ∏∏: \", e); } ÊúÄÁªàÈÄöÁü• @AfterËØ•ÈÄöÁü•ÊúâÁÇπÁ±ª‰ºº‰∫éfinally‰ª£Á†ÅÂùóÔºåÂè™Ë¶ÅÂ∫îÁî®‰∫ÜÊó†ËÆ∫‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈÉΩ‰ºöÊâßË°å„ÄÇ @After(\"execution(* com.iogogogo.aop.service.*.*(..))\") public void after(JoinPoint joinPoint) { log.info(\"ÊúÄÁªàÈÄöÁü• CLASS_METHOD : {}\", joinPoint.getSignature().getDeclaringTypeName() + \".\" + joinPoint.getSignature().getName()); log.info(\"ÊúÄÁªàÈÄöÁü• ARGS : {}\", Arrays.toString(joinPoint.getArgs())); } ÁéØÁªïÈÄöÁü• @AroundÁéØÁªïÈÄöÁü•Êó¢ÂèØ‰ª•Âú®ÁõÆÊ†áÊñπÊ≥ïÂâçÊâßË°å‰πüÂèØÂú®ÁõÆÊ†áÊñπÊ≥ï‰πãÂêéÊâßË°åÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÁéØÁªïÈÄöÁü•ÂèØ‰ª•ÊéßÂà∂ÁõÆÊ†áÊñπÊ≥ïÊòØÂê¶ÊåáÂêëÊâßË°åÔºå‰ΩÜÂç≥‰ΩøÂ¶ÇÊ≠§ÔºåÊàë‰ª¨Â∫îËØ•Â∞ΩÈáè‰ª•ÊúÄÁÆÄÂçïÁöÑÊñπÂºèÊª°Ë∂≥ÈúÄÊ±ÇÔºåÂú®‰ªÖÈúÄÂú®ÁõÆÊ†áÊñπÊ≥ïÂâçÊâßË°åÊó∂ÔºåÂ∫îËØ•ÈááÁî®ÂâçÁΩÆÈÄöÁü•ËÄåÈùûÁéØÁªïÈÄöÁü•„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØProceedingJoinPointÔºåÈÄöËøáËØ•ÂØπË±°ÁöÑproceed()ÊñπÊ≥ïÊù•ÊâßË°åÁõÆÊ†áÂáΩÊï∞Ôºåproceed()ÁöÑËøîÂõûÂÄºÂ∞±ÊòØÁéØÁªïÈÄöÁü•ÁöÑËøîÂõûÂÄº„ÄÇÂêåÊ†∑ÁöÑÔºåProceedingJoinPointÂØπË±°‰πüÊòØÂèØ‰ª•Ëé∑ÂèñÁõÆÊ†áÂØπË±°ÁöÑ‰ø°ÊÅØ„ÄÅÂ¶ÇÁ±ªÂêçÁß∞„ÄÅÊñπÊ≥ïÂèÇÊï∞„ÄÅÊñπÊ≥ïÂêçÁß∞Á≠âÁ≠â„ÄÇ @Around(\"execution(* com.iogogogo.aop.service.*.*(..))\") public Object around(ProceedingJoinPoint joinPoint) throws Throwable { log.info(\"ÁéØÁªïÈÄöÁü•Ââç....\"); // ÊâßË°åÁõÆÊ†áÂáΩÊï∞ Object obj = joinPoint.proceed(); log.info(\"ÁéØÁªïÈÄöÁü•Âêé....{}\", obj); return obj; } execution ËØ≠Ê≥ï// scope ÔºöÊñπÊ≥ï‰ΩúÁî®ÂüüÔºåÂ¶Çpublic,private,protect // returnt-typeÔºöÊñπÊ≥ïËøîÂõûÂÄºÁ±ªÂûã // fully-qualified-class-nameÔºöÊñπÊ≥ïÊâÄÂú®Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÁß∞ // parameters ÊñπÊ≥ïÂèÇÊï∞ execution(&lt;scope> &lt;return-type> &lt;fully-qualified-class-name>.*(parameters)) execution(* com.iogogogo.*.*(..)) com.iogogogoÂåÖ‰∏ãÊâÄÊúâÁ±ªÁöÑÊâÄÊúâÊñπÊ≥ï execution(* com.iogogogo.Dog.*(..)) DogÁ±ª‰∏ãÁöÑÊâÄÊúâÊñπ execution(* com.iogogogo.Dog*.*(..)) DogÂºÄÂ§¥ÁöÑÁ±ª‰∏ãÁöÑÊâÄÊúâÊñπÊ≥ï ÂàáÁÇπ @PointcutÂú®‰ΩøÁî®ÂàáÂÖ•ÁÇπÊó∂ÔºåËøòÂèØ‰ª•ÊäΩÂá∫Êù•‰∏Ä‰∏™@PointcutÊù•‰æõ‰ΩøÁî®ÔºåÂèØ‰ª•ÈÅøÂÖçÈáçÂ§çÁöÑexecutionÂú®‰∏çÂêåÁöÑÊ≥®Ëß£ÈáåÂÜôÂæàÂ§öÈÅç„ÄÇ @Pointcut(\"execution(public * com.iogogogo.aop.service.*.*(..))\") public void pointcut() { } ‰ΩøÁî® @Before(value = \"pointcut()\") public void before() { log.info(\"‰ΩøÁî®@Pointcut ÁöÑÂâçÁΩÆÈÄöÁü•\"); } AOPÂàáÈù¢ÁöÑ‰ºòÂÖàÁ∫ßÊúâÊó∂ÂÄôÔºåÊàë‰ª¨ÂØπ‰∏Ä‰∏™ÊñπÊ≥ï‰ºöÊúâÂ§ö‰∏™ÂàáÈù¢ÁöÑÈóÆÈ¢òÔºåËøô‰∏™Êó∂ÂÄôËøò‰ºöÊ∂âÂèäÂà∞ÂàáÈù¢ÁöÑÊâßË°åÈ°∫Â∫èÁöÑÈóÆÈ¢ò„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÂÆö‰πâÊØè‰∏™ÂàáÈù¢ÁöÑ‰ºòÂÖàÁ∫ßÔºå Spring ‰∏≠Êèê‰æõÊ≥®Ëß£ @Order(i) ÔºåÂΩì i ÁöÑÂÄºË∂äÂ∞èÔºå‰ºòÂÖàÁ∫ßË∂äÈ´ò„ÄÇ ÁéØÁªïÂíåÂâçÂêéÁΩÆÈÄöÁü•ÁöÑÂå∫Âà´ÂØπ‰∫éÊúâÂèòÈáèÁºìÂ≠òÈúÄÊ±ÇÔºåÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÂâçÂêéÁΩÆÈÄöÁü•ÂÆûÁé∞ÊØîËæÉÂõ∞ÈöæÔºåËÄåÁéØÁªïÈÄöÁü•ÂÆûÁé∞Â∞±ÈùûÂ∏∏ÂÆπÊòìÔºõ https://www.cnblogs.com/yaphetsfang/articles/11378821.html","categories":[{"name":"Spring","slug":"Spring","permalink":"http://iogogogo.github.io/categories/Spring/"}],"tags":[{"name":"AspectJ","slug":"AspectJ","permalink":"http://iogogogo.github.io/tags/AspectJ/"},{"name":"Aop","slug":"Aop","permalink":"http://iogogogo.github.io/tags/Aop/"}]},{"title":"‰ΩøÁî®wgetÊàñËÄÖcurl‰∏ãËΩΩgithub releaseÊñá‰ª∂","slug":"cmd-download-file","date":"2020-02-14T04:22:38.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2020/02/14/cmd-download-file/","link":"","permalink":"http://iogogogo.github.io/2020/02/14/cmd-download-file/","excerpt":"","text":"ÊúâÊó∂ÂÄôÈúÄË¶ÅÂú®ÊúçÂä°Âô®‰∏ãËΩΩGitHub‰∏äÁöÑreleaseËµÑÊ∫êÔºåËøôÊó∂ÂÄôÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®wgetÊàñËÄÖcurlËøõË°åÂ§ÑÁêÜÔºåËøôÈáåÊãøÊê∫Á®ãÂºÄÊ∫êÁöÑÈÖçÁΩÆ‰∏≠ÂøÉApollo‰∏∫‰æãÔºå‰∏ãËΩΩ‰ªñÁöÑreleaseÁâàÊú¨ wgetwget --no-check-certificate --content-disposition https://github.com/ctripcorp/apollo/releases/download/v1.5.1/apollo-adminservice-1.5.1-github.zip curlcurl -LJO https://github.com/ctripcorp/apollo/releases/download/v1.5.1/apollo-adminservice-1.5.1-github.zip","categories":[{"name":"tools","slug":"tools","permalink":"http://iogogogo.github.io/categories/tools/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://iogogogo.github.io/tags/linux/"}]},{"title":"Spring Boot 2.x RedisÂ§öÊï∞ÊçÆÊ∫êÈÖçÁΩÆ","slug":"spring-boot-redis-multi-instance","date":"2020-01-10T13:53:42.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2020/01/10/spring-boot-redis-multi-instance/","link":"","permalink":"http://iogogogo.github.io/2020/01/10/spring-boot-redis-multi-instance/","excerpt":"","text":"Spring Boot 2.xÁâàÊú¨ÂçáÁ∫ß‰ª•ÂêéÔºåRedisËøûÊé•Â∫ìÁî±ÂéüÊù•ÁöÑJedisÊç¢Êàê‰∫ÜLettuceÔºå‰ΩÜÊòØÊèê‰æõÁªô‰∏äÂ±Ç‰ΩøÁî®ÁöÑapiÊ≤°ÊúâÂèòÂåñÔºåÂú®Êó•Â∏∏‰ΩøÁî®ËøáÁ®ã‰∏≠ÈöæÂÖç‰ºöÊúâÈúÄË¶Å‰ΩøÁî®Â§ö‰∏™Â∫ìÁöÑÊÉÖÂÜµÔºåÊàñËÄÖ‰ΩøÁî®Â§ö‰∏™RedisÂÆû‰æãÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÁª¥Êä§‰∏§‰∏™RedisËøûÊé•Ê±†ÊàñËÄÖËØ¥‰∏§‰∏™RedisTemplate„ÄÇ ÂÆûÁé∞ÊÄùË∑Ø Â§öÊï∞ÊçÆÊ∫êÊúÄÁªàË°®Áé∞ÂÖ∂ÂÆûÂ∞±ÊòØ RedisConnectionFactory ‰∏çÂêå Spring Boot ÈÄöËøáRedisStandaloneConfigurationÁª¥Êä§‰∫Ü‰∏ÄÂ•óÈªòËÆ§ÁöÑRedisConnectionFactoryÔºåË¶ÅÂÆûÁé∞Â§ö‰∏™ÂÆû‰æãÊàñËÄÖ‰ΩøÁî®Â§ö‰∏™dbÔºåÁêÜËÆ∫‰∏äÂè™ÈúÄË¶ÅËá™Â∑±Âú®Áª¥Êä§‰∏ÄÂ•óRedisConnectionFactoryÂç≥ÂèØ„ÄÇ ‰∏çÁÆ°ÊòØJedisÊàñÊòØLettuceÔºåÈÉΩÊòØÈÄöÁî®ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Â∞Ü‰∏§‰∏™ÁöÑÂÆûÁé∞ÊñπÂºèÈÉΩÊï¥ÁêÜÂá∫Êù•ÔºåÂå∫Âà´Â¶Ç‰∏ãÔºö Lettuce‰ΩøÁî®ÁöÑÊòØLettuceConnectionFactory Jedis‰ΩøÁî®ÁöÑÊòØJedisConnectionFactory ÂàõÂª∫RedisÊúçÂä°‰∏∫‰∫ÜÊñπ‰æøÊµãËØïÔºåÁõ¥Êé•‰ΩøÁî®dockerÂàõÂª∫‰∏Ä‰∏™RedisÊúçÂä°Ôºå‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂêØÂä®ËÑöÊú¨ --restart=alwaysËÆæÁΩÆ‰∫ÜRedisÊúçÂä°ÈöèÁùÄdockerËøõÁ®ãÁöÑÂêØÂä®ËÄåÂêØÂä® -p 6379:6379 Â∞ÜdockerÂêØÂä®ÁöÑÊúçÂä°Á´ØÂè£Êò†Â∞ÑÂà∞ÂÆø‰∏ªÊú∫ÔºåËøôÈáåÊòØÂøÖÈ°ªÁöÑÔºåÂê¶ÂàôÂÆø‰∏ªÊú∫ÂíåredisÁöÑÁ´ØÂè£ÊòØ‰∏çËÉΩÈÄö‰ø°ÁöÑ --requirepass &quot;redis&quot; ËÆæÁΩÆÂØÜÁ†Å‰∏∫redis --appendonly yes‰øùÂ≠òaofÊåÅ‰πÖÂåñÊñá‰ª∂ -v ~/share/docker/data/redis:/data \\ Â∞ÜdockerÂêØÂä®ÁöÑredisÁöÑÊï∞ÊçÆÊò†Â∞ÑÂà∞ÂÆø‰∏ªÊú∫ÁõÆÂΩï mkdir -p ~/share/docker/data/redis chmod 755 -R ~/share/docker/data/redis docker run -dit --restart=always --name redis \\ -v ~/share/docker/data/redis:/data \\ -p 6379:6379 \\ redis:latest redis-server --requirepass \"redis\" --appendonly yes Â¶ÇÊûúËßâÂæó‰∏çÈúÄË¶ÅËÆæÁΩÆËøô‰πàÂ§öÔºåÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÊúÄÁÆÄÂçïÁöÑËÑöÊú¨Ôºå‰ªÖ‰ªÖÂ∞ÜÁ´ØÂè£ÂÅö‰∫ÜÊò†Â∞ÑÔºåÂÖ∂‰ªñÁöÑÈÉΩÊòØÊúÄÁÆÄÂçïÁöÑÈÖçÁΩÆ docker run -dit --name redis -p 6379:6379 redis:latest ÂÖ≥‰∫édockerÁöÑ‰∏Ä‰∫õÊñáÁ´†ÔºåËØ¶ÁªÜËØ∑ÂèÇËÄÉdockerÂÆòÁΩëÔºåËøôÈáå‰∏çÂÅöËøáÂ§öËµòËø∞ È°πÁõÆpomÈÖçÁΩÆ‰ΩøÁî®Spring BootÈõÜÊàêRedisÔºåÂè™ÈúÄË¶ÅÂ∞Üspring-boot-starter-data-redisÂíåcommons-pool2Âä†Âà∞‰æùËµñÂç≥ÂèØ &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-redis&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.apache.commons&lt;/groupId> &lt;artifactId>commons-pool2&lt;/artifactId> &lt;/dependency> Ëá™ÂÆö‰πâRedisConfigureËøôÈáåËøô‰∏ÄÊ≠•ÊòØÊúÄÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫Spring BootÈªòËÆ§Â∏ÆÊàë‰ª¨Áª¥Êä§‰∫Ü‰∏Ä‰∏™RedisConnectionFactoryÔºåÂâçÈù¢ËØ¥‰∫ÜË¶Å‰ΩøÁî®‰∏çÂêåÁöÑRedisÂÆû‰æãÂ∞±ÈúÄË¶ÅËá™Â∑±Âú®Áª¥Êä§‰∏Ä‰∏™RedisConnectionFactoryÔºåËøôÈáåÂ∞±‰ª•‰ΩøÁî®‰∏§‰∏™redisÁöÑdatabase‰∏∫‰æã ÈÖçÁΩÆÊñá‰ª∂spring.redisÂºÄÂ§¥ÁöÑÈÉΩÊòØSpring BootËá™Âä®Ê≥®ÂÖ•ÈúÄË¶ÅÂä†ËΩΩÁöÑÈÖçÁΩÆÔºåÊàë‰ª¨‰∏∫‰∫ÜÂú®‰ΩøÁî®‰∏Ä‰∏™db2ÔºåËøôÈáåÂä†‰∫Ü‰∏Ä‰∏™spring.redis-db-2ÂºÄÂ§¥ÁöÑÈÖçÁΩÆ spring: redis: database: 0 host: localhost port: 6379 password: timeout: 60000 lettuce: pool: max-active: 8 # ËøûÊé•Ê±†ÊúÄÂ§ßËøûÊé•Êï∞Ôºà‰ΩøÁî®Ë¥üÂÄºË°®Á§∫Ê≤°ÊúâÈôêÂà∂Ôºâ ÈªòËÆ§ 8 max-wait: -1 # ËøûÊé•Ê±†ÊúÄÂ§ßÈòªÂ°ûÁ≠âÂæÖÊó∂Èó¥Ôºà‰ΩøÁî®Ë¥üÂÄºË°®Á§∫Ê≤°ÊúâÈôêÂà∂Ôºâ ÈªòËÆ§ -1 max-idle: 8 # ËøûÊé•Ê±†‰∏≠ÁöÑÊúÄÂ§ßÁ©∫Èó≤ËøûÊé• ÈªòËÆ§ 8 min-idle: 0 # ËøûÊé•Ê±†‰∏≠ÁöÑÊúÄÂ∞èÁ©∫Èó≤ËøûÊé• ÈªòËÆ§ 0 redis-db-2: database: 2 host: 127.0.0.1 port: 6379 password: timeout: 60000 lettuce: pool: max-active: 8 max-wait: 8 max-idle: 8 min-idle: 0 RedisConfigurepackage com.iogogogo.redis.configure; import com.fasterxml.jackson.annotation.JsonAutoDetect; import com.fasterxml.jackson.annotation.PropertyAccessor; import com.fasterxml.jackson.databind.ObjectMapper; import io.vavr.Tuple; import io.vavr.Tuple6; import org.apache.commons.lang3.StringUtils; import org.apache.commons.pool2.impl.GenericObjectPoolConfig; import org.springframework.beans.factory.annotation.Value; import org.springframework.cache.annotation.EnableCaching; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.data.redis.connection.RedisConnectionFactory; import org.springframework.data.redis.connection.RedisPassword; import org.springframework.data.redis.connection.RedisStandaloneConfiguration; import org.springframework.data.redis.connection.jedis.JedisClientConfiguration; import org.springframework.data.redis.connection.jedis.JedisConnectionFactory; import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory; import org.springframework.data.redis.connection.lettuce.LettucePoolingClientConfiguration; import org.springframework.data.redis.core.RedisTemplate; import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer; import org.springframework.data.redis.serializer.StringRedisSerializer; import java.time.Duration; /** * Created by tao.zeng on 2020-01-10. * * @Value(\"${spring.redis-db-2.database}\") int database, * @Value(\"${spring.redis-db-2.host}\") String host, * @Value(\"${spring.redis-db-2.port}\") int port, * @Value(\"${spring.redis-db-2.password}\") String password, * @Value(\"${spring.redis-db-2.timeout}\") long timeout, * @Value(\"${spring.redis-db-2.lettuce.pool.max-active}\") int maxActive, * @Value(\"${spring.redis-db-2.lettuce.pool.max-wait}\") int maxWait, * @Value(\"${spring.redis-db-2.lettuce.pool.max-idle}\") int maxIdle, * @Value(\"${spring.redis-db-2.lettuce.pool.min-idle}\") int minIdle */ @EnableCaching @Configuration public class RedisConfigure { @Bean public RedisTemplate redisTemplateDB_2(Tuple6&lt;RedisStandaloneConfiguration, Long, Integer, Integer, Integer, Integer> redisConfigurationDB_2) { Long timeout = redisConfigurationDB_2._2(); int maxActive = redisConfigurationDB_2._3(), maxWait = redisConfigurationDB_2._4(), maxIdle = redisConfigurationDB_2._5(), minIdle = redisConfigurationDB_2._6(); /* ========= Âü∫Êú¨ÈÖçÁΩÆ ========= */ RedisStandaloneConfiguration standaloneConfiguration = redisConfigurationDB_2._1(); /* ========= ËøûÊé•Ê±†ÈÄöÁî®ÈÖçÁΩÆ ========= */ GenericObjectPoolConfig genericObjectPoolConfig = new GenericObjectPoolConfig(); genericObjectPoolConfig.setMaxTotal(maxActive); genericObjectPoolConfig.setMaxWaitMillis(maxWait); genericObjectPoolConfig.setMaxIdle(maxIdle); genericObjectPoolConfig.setMinIdle(minIdle); /* ========= jedis pool ========= */ // jedisConnectionFactory(standaloneConfiguration, genericObjectPoolConfig, timeout); /* ========= lettuce pool ========= */ LettuceConnectionFactory connectionFactory = lettuceConnectionFactory(standaloneConfiguration, genericObjectPoolConfig, timeout); // ËøûÊé•Ê±†ÂàùÂßãÂåñ connectionFactory.afterPropertiesSet(); // ÂàõÂª∫ RedisTemplate return createRedisTemplate(connectionFactory); } /** * lettuceConnectionFactory * * @param standaloneConfiguration RedisÊ†áÂáÜÈÖçÁΩÆ * @param genericObjectPoolConfig RedisÈÄöÁî®ÈÖçÁΩÆ * @param timeout Ë∂ÖÊó∂Êó∂Èó¥ * @return */ private LettuceConnectionFactory lettuceConnectionFactory(RedisStandaloneConfiguration standaloneConfiguration, GenericObjectPoolConfig genericObjectPoolConfig, long timeout) { LettucePoolingClientConfiguration.LettucePoolingClientConfigurationBuilder builder = LettucePoolingClientConfiguration.builder(); builder.poolConfig(genericObjectPoolConfig); builder.commandTimeout(Duration.ofSeconds(timeout)); return new LettuceConnectionFactory(standaloneConfiguration, builder.build()); } /** * jedisConnectionFactory * * @param standaloneConfiguration RedisÊ†áÂáÜÈÖçÁΩÆ * @param genericObjectPoolConfig RedisÈÄöÁî®ÈÖçÁΩÆ * @param timeout Ë∂ÖÊó∂Êó∂Èó¥ * @return */ private JedisConnectionFactory jedisConnectionFactory(RedisStandaloneConfiguration standaloneConfiguration, GenericObjectPoolConfig genericObjectPoolConfig, long timeout) { JedisClientConfiguration.DefaultJedisClientConfigurationBuilder builder = (JedisClientConfiguration.DefaultJedisClientConfigurationBuilder) JedisClientConfiguration .builder(); builder.connectTimeout(Duration.ofSeconds(timeout)); builder.usePooling(); builder.poolConfig(genericObjectPoolConfig); return new JedisConnectionFactory(standaloneConfiguration, builder.build()); } /** * @param redisConnectionFactory * @return */ @Bean public RedisTemplate redisTemplate(RedisConnectionFactory redisConnectionFactory) { return createRedisTemplate(redisConnectionFactory); } /** * json ÂÆûÁé∞ redisTemplate * &lt;p> * ËØ•ÊñπÊ≥ï‰∏çËÉΩÂä† @Bean Âê¶Âàô‰∏çÁÆ°Â¶Ç‰ΩïË∞ÉÁî®ÔºåRedisConnectionFactory ÈÉΩ‰ºöÊòØÈªòËÆ§ÈÖçÁΩÆ * * @param redisConnectionFactory * @return */ private RedisTemplate createRedisTemplate(RedisConnectionFactory redisConnectionFactory) { RedisTemplate&lt;String, Object> redisTemplate = new RedisTemplate&lt;>(); redisTemplate.setConnectionFactory(redisConnectionFactory); Jackson2JsonRedisSerializer&lt;Object> jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;>(Object.class); ObjectMapper objectMapper = new ObjectMapper(); objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(objectMapper); StringRedisSerializer stringRedisSerializer = new StringRedisSerializer(); redisTemplate.setValueSerializer(jackson2JsonRedisSerializer); redisTemplate.setKeySerializer(stringRedisSerializer); redisTemplate.afterPropertiesSet(); return redisTemplate; } /** * Ëá™ÂÆö‰πâRedisÁöÑÈÖçÁΩÆÂä†ËΩΩ * * @param database * @param password * @param host * @param port * @param timeout * @param maxActive * @param maxWait * @param maxIdle * @param minIdle * @return */ @Bean public Tuple6&lt;RedisStandaloneConfiguration, Long, Integer, Integer, Integer, Integer> redisConfigurationDB_2(@Value(\"${spring.redis-db-2.database}\") int database, @Value(\"${spring.redis-db-2.password}\") String password, @Value(\"${spring.redis-db-2.host}\") String host, @Value(\"${spring.redis-db-2.port}\") int port, @Value(\"${spring.redis-db-2.timeout}\") long timeout, @Value(\"${spring.redis-db-2.lettuce.pool.max-active}\") int maxActive, @Value(\"${spring.redis-db-2.lettuce.pool.max-wait}\") int maxWait, @Value(\"${spring.redis-db-2.lettuce.pool.max-idle}\") int maxIdle, @Value(\"${spring.redis-db-2.lettuce.pool.min-idle}\") int minIdle) { RedisStandaloneConfiguration standaloneConfiguration = new RedisStandaloneConfiguration(); standaloneConfiguration.setDatabase(database); standaloneConfiguration.setHostName(host); standaloneConfiguration.setPort(port); if (StringUtils.isNotEmpty(password)) { RedisPassword redisPassword = RedisPassword.of(password); standaloneConfiguration.setPassword(redisPassword); } return Tuple.of(standaloneConfiguration, timeout, maxActive, maxWait, maxIdle, minIdle); } } Ëøô‰∏™ÈÖçÁΩÆÊúâÁÇπÈïøÔºå‰ΩÜÊòØÈÉΩÊúâÊ≥®ÈáäÔºåËÄå‰∏îËøôÈáå‰πüÁî®Âà∞‰∫Ü‰∏äÁØáÊñáÁ´†‰∏≠ËÆ≤Âà∞ÁöÑtupleÔºàÂú®ÊñπÊ≥ïÊúâÂ§ö‰∏™ËøîÂõûÂÄºÊó∂ÔºåÂÖÉÁªÑÁúüÈ¶ôÔºâ,ÂÖ∂ÂÆûÂ∞±Â∑≤ÁªèÂèØ‰ª•‰ΩøÁî®‰∏§‰∏™‰∏çÂêåÁöÑRedisTemplate‰∫ÜÔºåËøôÊó∂ÂÄôÊàë‰ª¨Âú®ÂêØÂä®È°πÁõÆÊó∂ÂàÜÂà´Ê≥®ÂÖ•redisTemplateÂíåredisTemplateDB_2ÔºåÂà´ÈóÆÊàë‰∏∫Âï•ÂêçÂ≠óÊòØËøô‰∏§Ë¥ß„ÄÇ ÈÄöËøádebugÊü•ÁúãÈÖçÁΩÆÊòØÂê¶ÊàêÂäüÂêØÂä®Á±ªÊàë‰ª¨ÂÆûÁé∞CommandLineRunnerÔºåÁÑ∂ÂêéÈÄöËøádebugÊü•ÁúãredisTemplateÂíåredisTemplateDB2ÁöÑRedisConnectionFactory Âπ∂‰∏îÊàë‰ª¨Âú®database=0Â≠òÂÇ®‰∫Ü‰∏Ä‰∏™stringÊï∞ÊçÆÔºåÂú®database=2Â≠òÂÇ®‰∫Ü‰∏Ä‰∏™hashÊï∞ÊçÆ package com.iogogogo.redis; import lombok.extern.slf4j.Slf4j; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.data.redis.core.RedisTemplate; /** * Created by tao.zeng on 2020-01-10. */ @Slf4j @SpringBootApplication public class RedisApplication implements CommandLineRunner { @Autowired private RedisTemplate redisTemplate; @Autowired private RedisTemplate redisTemplateDB_2; public static void main(String[] args) { SpringApplication.run(RedisApplication.class, args); } @Override public void run(String... args) { log.info(\"redisTemplate:{}\", redisTemplate); redisTemplate.opsForValue().set(\"iogogogo\", \"redisTemplate save value\"); log.info(\"redisTemplateDB_2:{}\", redisTemplateDB2); redisTemplateDB2.opsForHash().put(\"iogogogo\", \"iogogogo-hash\", \"redisTemplateDB_2 save value\"); } } redisTemplate redisTemplateDB_2 ÁôªÂΩïredisÊü•Áúã‰∏§‰∏™TemplateÂ≠òÂÇ®ÁöÑstringÂíåhashÊï∞ÊçÆ ‰ΩøÁî®RedisDesktopManagerËøûÊé•Âà∞Êàë‰ª¨Êñ∞Âª∫ÁöÑredisÊúçÂä°ÔºåÂπ∂‰∏îÊü•ÁúãÊï∞ÊçÆ ‰ΩøÁî®redis-cliÊü•Áúã Âõ†‰∏∫Êàë‰ª¨ÁöÑredisÊúçÂä°ÊòØdockerÂêØÂä®ÁöÑÔºåÊâÄ‰ª•Ë¶Å‰ΩøÁî®redis-cliÊü•ÁúãÂ∞±ÈúÄË¶ÅËøõÂÖ•dockerÂÆπÂô®ÂÜÖËøõË°åÊü•ÁúãÔºåËøõÂÖ•ÂÆπÂô®‰πüÂæàÁÆÄÂçïÔºå‰ΩøÁî®docker exec -it fd3da052e6f1 bashÔºåËøôÈáåÁöÑfd3da052e6f1ÊòØdockerÂêØÂä®ÁöÑcontainerIdÔºåÂèØ‰ª•‰ΩøÁî®docker psÊü•Áúã root@fd3da052e6f1:/data# redis-cli 127.0.0.1:6379> 127.0.0.1:6379> keys * 1) \"iogogogo\" 127.0.0.1:6379> get iogogogo \"\\\"redisTemplate save value\\\"\" 127.0.0.1:6379> 127.0.0.1:6379> 127.0.0.1:6379> select 2 # ÈÄâÊã©2Ëøô‰∏™Êï∞ÊçÆÂ∫ì OK 127.0.0.1:6379[2]> 127.0.0.1:6379[2]> 127.0.0.1:6379[2]> keys * 1) \"iogogogo\" 127.0.0.1:6379[2]> HVALS iogogogo 1) \"\\xac\\xed\\x00\\x05t\\x00\\x1bredisTemplateDB2 save value\" 127.0.0.1:6379[2]> 127.0.0.1:6379[2]> ÈÄöËøá‰ª•‰∏äÊó•ÂøóÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÂàÜÂà´Âú®‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèÂ≠òÂÇ®‰∫Ü‰∏çÂêåÁöÑÊï∞ÊçÆÔºåÂà∞ËøôÈáåÊàë‰ª¨redisÈÖçÁΩÆÂ§öÂÆû‰æãÂ∞±Â∑≤ÁªèÂÆåÊàê„ÄÇ‰ΩÜÊòØÊàë‰ª¨ÊØèÊ¨°Ê≥®ÂÖ•ÁöÑÊó∂ÂÄôÈÉΩË¶ÅËÆ∞ÂæóËá™Â∑±ÂàõÂª∫ÁöÑBeanÁöÑÂêçÂ≠óÔºåËøôÊ†∑ÂØπÂÖ∂‰ªñ‰∫∫‰∏çÂ§™ÂèãÂ•ΩÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•Â∞ÅË£Ö‰∏Ä‰∏ãÔºåËá™ÂÆö‰πâ‰∏Ä‰∏™handlerËøõË°åËé∑ÂèñRedisTemplateÔºåËøôÊ†∑‰ºö‰∏ç‰ºöÊõ¥‰æøÊç∑Âë¢Ôºü Ëá™ÂÆö‰πâRedisHandlerÂíåRedisOperations ÂÅöËøô‰∏ÄÊ≠•‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂ∞Ü‰∏ãÂ±ÇÁöÑRedisTemplateËøõË°åÁªü‰∏ÄÁöÑÂ∞ÅË£ÖÔºåÂØπÂ§ñÂè™ÊòØ‰∏Ä‰∏™RedisHandlerÂíåRedisOperationsÔºåRedisHandlerÊèê‰æõËé∑ÂèñRedisOperationsÁöÑÊñπÊ≥ïÔºåRedisOperationsÈáåÈù¢ÂèØ‰ª•Â∞ÅË£Ö‰∏Ä‰∫õÂ∏∏Áî®ÁöÑredisÊìç‰ΩúÔºåËøôÊ†∑Â∞±Âè™ÈúÄË¶ÅÂíåRedisOperationsËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖçÂêåÊó∂Êìç‰ΩúÂ§ö‰∏™RedisTemplate È°πÁõÆÁªìÊûÑ ‚ûú example-redis git:(master) ‚úó tree ./ ./ ‚îú‚îÄ‚îÄ example-redis.iml ‚îú‚îÄ‚îÄ pom.xml ‚îî‚îÄ‚îÄ src ‚îú‚îÄ‚îÄ main ‚îÇ ‚îú‚îÄ‚îÄ java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iogogogo ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ redis ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ RedisApplication.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ configure ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ RedisConfigure.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ handler ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ RedisHandler.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ util ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ RedisOperations.java ‚îÇ ‚îî‚îÄ‚îÄ resources ‚îÇ ‚îî‚îÄ‚îÄ application.yml ‚îî‚îÄ‚îÄ test ‚îî‚îÄ‚îÄ java RedisOperations ËØ•Á±ªÂèØ‰ª•‰Ωú‰∏∫redisÁöÑÂ∑•ÂÖ∑Á±ª‰ΩøÁî®ÔºåËá™Â∑±Ê∑ªÂä†‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÊñπÊ≥ï package com.iogogogo.redis.configure.util; import lombok.extern.slf4j.Slf4j; import org.springframework.data.redis.core.RedisTemplate; /** * Created by tao.zeng on 2020-01-10. */ @Slf4j public class RedisOperations { private RedisTemplate redisTemplate; private RedisOperations() { } public RedisOperations(RedisTemplate redisTemplate) { this.redisTemplate = redisTemplate; } public RedisTemplate redisTemplate() { return redisTemplate; } } RedisHandler RedisHandlerÊèê‰æõ‰∫ÜÁªü‰∏ÄÊìç‰ΩúRedisTemplateÁöÑÂÖ•Âè£ÔºåÂØπÁî®Êà∑Êù•ËØ¥‰∏ãÂ±ÇÁöÑRedisTemplateÊòØË∞ÅÂ∞±‰∏çÈúÄË¶ÅÂÖ≥ÂøÉ‰∫Ü package com.iogogogo.redis.configure.handler; import com.iogogogo.redis.configure.util.RedisOperations; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.data.redis.core.RedisTemplate; import org.springframework.stereotype.Component; /** * Created by tao.zeng on 2020-01-10. */ @Component public class RedisHandler { @Autowired private RedisTemplate redisTemplate; @Autowired private RedisTemplate redisTemplateDB_2; private RedisOperations redisOperations, redisDB2Operations; public RedisOperations redisOperations() { if (redisOperations == null) { redisOperations = new RedisOperations(redisTemplate); } return redisOperations; } public RedisOperations redisDB2Operations() { if (redisDB2Operations == null) { redisDB2Operations = new RedisOperations(redisTemplateDB_2); } return redisDB2Operations; } } ÊúÄÁªàÁªìÊûúÊàë‰ª¨Âú®ÂêØÂä®Êó∂Áúã‰∏Ä‰∏ãÁªèËøáRedisHandler‰øùËØÅÁöÑRedisTemplateÊòØÂê¶ÂíåÊàë‰ª¨ÊÉ≥ÁöÑ‰∏ÄËá¥Ôºå‰øÆÊîπ‰ª•ÂêéÁöÑÂêØÂä®Á±ª package com.iogogogo.redis; import com.iogogogo.redis.configure.handler.RedisHandler; import com.iogogogo.redis.configure.util.RedisOperations; import lombok.extern.slf4j.Slf4j; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.data.redis.core.RedisTemplate; /** * Created by tao.zeng on 2020-01-10. */ @Slf4j @SpringBootApplication public class RedisApplication implements CommandLineRunner { @Autowired private RedisTemplate redisTemplate; @Autowired private RedisTemplate redisTemplateDB_2; @Autowired private RedisHandler redisHandler; public static void main(String[] args) { SpringApplication.run(RedisApplication.class, args); } @Override public void run(String... args) { log.info(\"redisTemplate:{}\", redisTemplate); redisTemplate.opsForValue().set(\"iogogogo\", \"redisTemplate save value\"); log.info(\"redisTemplateDB_2:{}\", redisTemplateDB_2); redisTemplateDB_2.opsForHash().put(\"iogogogo\", \"iogogogo-hash\", \"redisTemplateDB_2 save value\"); // ÈÄöËøáÁªü‰∏ÄÁöÑRedisOperationsÂØπRedisËøõË°åÊìç‰Ωú // ËøôÈáåÂèØ‰ª•Ëá™Â∑±Â∞ÅË£Ö‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÊñπÊ≥ïÔºåËøôÊ†∑Â∞±ËÉΩÊää‰∏ãÂ±ÇÁöÑRedisTemplateËøõË°åÂ∞ÅË£ÖÔºåÂØπÂ§ñ‰ªÖ‰ªÖÂè™ÊòØ‰∏Ä‰∏™RedisOperationsËÄåÂ∑≤ // ÂΩìÁÑ∂ËøôÈáå‰πüÊèê‰æõÂØπÂ∫îÁöÑÊñπÊ≥ïËé∑Âèñ‰∏çÂêåRedisTemplateÂØπË±°ÊúÄÂêéÁöÑÂ∞ÅË£ÖÂÆû‰æã RedisOperations redisOperations = redisHandler.redisOperations(); RedisOperations redisDB2Operations = redisHandler.redisDB2Operations(); log.info(\"redisOperations redisTemplate:{}\", redisOperations.redisTemplate()); log.info(\"redisDB2Operations redisTemplate:{}\", redisDB2Operations.redisTemplate()); } } ÂêØÂä®Êó•Âøó 2020-01-10 23:54:39.579 INFO 66673 --- [ main] com.iogogogo.redis.RedisApplication : Started RedisApplication in 8.672 seconds (JVM running for 10.951) 2020-01-10 23:54:39.580 INFO 66673 --- [ main] com.iogogogo.redis.RedisApplication : redisTemplate:org.springframework.data.redis.core.RedisTemplate@44924587 2020-01-10 23:54:39.679 INFO 66673 --- [ main] io.lettuce.core.EpollProvider : Starting without optional epoll library 2020-01-10 23:54:39.682 INFO 66673 --- [ main] io.lettuce.core.KqueueProvider : Starting without optional kqueue library 2020-01-10 23:54:39.910 INFO 66673 --- [ main] com.iogogogo.redis.RedisApplication : redisTemplateDB2:org.springframework.data.redis.core.RedisTemplate@7fb66650 2020-01-10 23:54:39.927 INFO 66673 --- [ main] com.iogogogo.redis.RedisApplication : redisOperations redisTemplate:org.springframework.data.redis.core.RedisTemplate@44924587 2020-01-10 23:54:39.929 INFO 66673 --- [ main] com.iogogogo.redis.RedisApplication : redisDB2Operations redisTemplate:org.springframework.data.redis.core.RedisTemplate@7fb66650 ÈÄöËøáÊó•ÂøóÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ redisTemplateÂíåredisOperations redisTemplateÊòØÂêå‰∏Ä‰∏™ÂØπË±° redisTemplateDB2 ÂíåredisDB2Operations redisTemplate‰πüÊòØÂêå‰∏Ä‰∏™ÂØπË±° ÊÄªÁªìÈÄöËøáÊú¨ÊñáÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™È°πÁõÆÂ¶ÇÊûúÈúÄË¶Å‰ΩøÁî®‰ΩøÁî®Â§ö‰∏™redisËøûÊé•Ëé∑Âèñ‰ΩøÁî®‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÔºåÂÆåÂÖ®ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâRedisConnectionFactoryÊù•ÂÆåÊàêÔºåÁ¨¨‰∫åÁÇπÂ∞±ÊòØÂ¶ÇÊûúÂÆö‰πâÁöÑRedisTemplateËøáÂ§öÔºåÊàë‰ª¨ÂèØ‰ª•Âú®‰∏äÈù¢ÂÆö‰πâ‰∏Ä‰∏™RedisHandlerÊù•ËøõË°åÂ∞ÅË£Ö‰∏ãÂ±ÇÁöÑAPIÊìç‰ΩúÔºåÊö¥Èú≤‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂÖ•Âè£ËøõË°åÁÆÄÂåñÂ§ÑÁêÜ„ÄÇ ÂèÇËÄÉÈìæÊé•Ôºöhttps://www.bbsmax.com/A/lk5aAmO251/ Á§∫‰æã‰ª£Á†ÅÔºöhttps://github.com/iogogogo/life-example/tree/master/example-redis","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://iogogogo.github.io/tags/Redis/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Java‰∏≠‰ΩøÁî®ÂÖÉÁªÑ","slug":"java-tuple","date":"2020-01-09T04:26:39.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2020/01/09/java-tuple/","link":"","permalink":"http://iogogogo.github.io/2020/01/09/java-tuple/","excerpt":"","text":"ÂÖÉÁªÑÔºàTupleÔºâÊòØÂõ∫ÂÆöÊï∞ÈáèÁöÑ‰∏çÂêåÁ±ªÂûãÁöÑÂÖÉÁ¥†ÁöÑÁªÑÂêà„ÄÇÂÖÉÁªÑ‰∏éÈõÜÂêàÁöÑ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºåÂÖÉÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Á±ªÂûãÂèØ‰ª•ÊòØ‰∏çÂêåÁöÑÔºåËÄå‰∏îÊï∞ÈáèÂõ∫ÂÆö„ÄÇÂÖÉÁªÑÁöÑÂ•ΩÂ§ÑÂú®‰∫éÂèØ‰ª•ÊääÂ§ö‰∏™ÂÖÉÁ¥†‰Ωú‰∏∫‰∏Ä‰∏™ÂçïÂÖÉ‰º†ÈÄí„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÊñπÊ≥ïÈúÄË¶ÅËøîÂõûÂ§ö‰∏™ÂÄºÔºåÂèØ‰ª•ÊääËøôÂ§ö‰∏™ÂÄº‰Ωú‰∏∫ÂÖÉÁªÑËøîÂõûÔºåËÄå‰∏çÈúÄË¶ÅÂàõÂª∫È¢ùÂ§ñÁöÑÁ±ªÊù•Ë°®Á§∫„ÄÇÊ†πÊçÆÂÖÉÁ¥†Êï∞ÈáèÁöÑ‰∏çÂêåÔºåVavr ÊÄªÂÖ±Êèê‰æõ‰∫Ü Tuple0„ÄÅTuple1 Âà∞ Tuple8 Á≠â 9 ‰∏™Á±ª„ÄÇÊØè‰∏™ÂÖÉÁªÑÁ±ªÈÉΩÈúÄË¶ÅÂ£∞ÊòéÂÖ∂ÂÖÉÁ¥†Á±ªÂûã„ÄÇÂ¶Ç Tuple2&lt;String, Integer&gt;Ë°®Á§∫ÁöÑÊòØ‰∏§‰∏™ÂÖÉÁ¥†ÁöÑÂÖÉÁªÑÔºåÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÁ±ªÂûã‰∏∫ StringÔºåÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†ÁöÑÁ±ªÂûã‰∏∫ Integer„ÄÇÂØπ‰∫éÂÖÉÁªÑÂØπË±°ÔºåÂèØ‰ª•‰ΩøÁî® _1„ÄÅ_2 Âà∞ _8 Êù•ËÆøÈóÆÂÖ∂‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇÊâÄÊúâÂÖÉÁªÑÂØπË±°ÈÉΩÊòØ‰∏çÂèØÂèòÁöÑÔºåÂú®ÂàõÂª∫‰πãÂêé‰∏çËÉΩÊõ¥Êîπ„ÄÇ ÂÖÉÁªÑÈÄöËøáÊé•Âè£ Tuple ÁöÑÈùôÊÄÅÊñπÊ≥ï of Êù•ÂàõÂª∫„ÄÇÂÖÉÁªÑÁ±ª‰πüÊèê‰æõ‰∫Ü‰∏Ä‰∫õÊñπÊ≥ïÂØπÂÆÉ‰ª¨ËøõË°åÊìç‰Ωú„ÄÇÁî±‰∫éÂÖÉÁªÑÊòØ‰∏çÂèØÂèòÁöÑÔºåÊâÄÊúâÁõ∏ÂÖ≥ÁöÑÊìç‰ΩúÈÉΩËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂÖÉÁªÑÂØπË±°„ÄÇÂú® Ê∏ÖÂçï 1 ‰∏≠Ôºå‰ΩøÁî® Tuple.of ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ Tuple2 ÂØπË±°„ÄÇTuple2 ÁöÑ map ÊñπÊ≥ïÁî®Êù•ËΩ¨Êç¢ÂÖÉÁªÑ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÔºåËøîÂõûÊñ∞ÁöÑÂÖÉÁªÑÂØπË±°„ÄÇËÄå apply ÊñπÊ≥ïÂàôÊääÂÖÉÁªÑËΩ¨Êç¢ÊàêÂçï‰∏™ÂÄº„ÄÇÂÖ∂‰ªñÂÖÉÁªÑÁ±ª‰πüÊúâÁ±ª‰ººÁöÑÊñπÊ≥ï„ÄÇÈô§‰∫Ü map ÊñπÊ≥ï‰πãÂ§ñÔºåËøòÊúâ map1„ÄÅmap2„ÄÅmap3 Á≠âÊñπÊ≥ïÊù•ËΩ¨Êç¢Á¨¨ N ‰∏™ÂÖÉÁ¥†Ôºõupdate1„ÄÅupdate2 Âíå update3 Á≠âÊñπÊ≥ïÁî®Êù•Êõ¥Êñ∞Âçï‰∏™ÂÖÉÁ¥†„ÄÇ PythonÂíåScalaËØ≠Ë®Ä‰∏≠ÊúâËá™Â∏¶ÂÖÉÁªÑÔºåJdk‰∏≠ÊòØÊ≤°ÊúâËøô‰∏™Êï∞ÊçÆÁ±ªÂûãÁöÑÔºåËôΩÁÑ∂‰ΩøÁî®Êï∞ÁªÑÊàñËÄÖmap‰πüËÉΩËææÂà∞ÊÉ≥Ë¶ÅÁöÑÊïàÊûúÔºå‰ΩÜÊÄªÂΩíÊòØÊ≤°ÊúâÂÖÉÁªÑÊñπ‰æø„ÄÇ ÊØîÂ¶ÇËØ¥‰∏Ä‰∏™ÊñπÊ≥ïÊúâÂ§ö‰∏™ËøîÂõûÂÄºÊó∂ÔºåËôΩÁÑ∂ÂèØ‰ª•Áî®Object[]ÊàñËÄÖMapËøõË°åÂ∞ÅË£ÖÔºå‰ΩÜÊòØÂú®ÊãÜÁÆ±ÁöÑÊó∂ÂÄôÁ±ªÂûã‰ºöÁº∫Â§±ÔºåÊâÄ‰ª•ËøòÊòØ‰∏çÂ§™Êñπ‰æø„ÄÇJava‰∏≠ÊúâÂæàÂ§öÂÖÉÁªÑÂ∫ìÔºåËøôÈáåÊé®Ëçê‰∏Ä‰∏™ÊàëÁªèÂ∏∏‰ΩøÁî®ÁöÑvavrÔºåÂΩìÁÑ∂TupleÂè™ÊòØËøô‰∏™Â∫ì‰∏≠ÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÔºåËØ•Â∫ìÊèê‰æõ‰∫ÜÂº∫Â§ßÁöÑÂáΩÊï∞ÂºèÁºñÁ®ãÁöÑËÉΩÂäõÔºåÂèØ‰ª•ÂÉèÂÜôScala‰∏ÄÊ†∑ÂÜôJava ÂºïÂÖ•pom‰æùËµñÁõÆÂâçÊúÄÊñ∞ÁöÑÁ®≥ÂÆöÁâàÊòØ0.10.2 &lt;!-- https://mvnrepository.com/artifact/io.vavr/vavr --> &lt;dependency> &lt;groupId>io.vavr&lt;/groupId> &lt;artifactId>vavr&lt;/artifactId> &lt;version>0.10.2&lt;/version> &lt;/dependency> Â∏∏Áî®ÊñπÊ≥ï‰ΩøÁî®ÂàõÂª∫ÂÖÉÁªÑÂØπË±°@Test public void test1() { Tuple3&lt;String, LocalDateTime, Long> tuple3 = Tuple.of(\"TupleTests\", LocalDateTime.now(), Long.MAX_VALUE); System.out.println(tuple3); } ÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÈÄöËøáTuple.ofÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êúâ‰∏â‰∏™ÂÖÉÁ¥†ÁöÑÂÖÉÁªÑÂØπË±°ÔºåËæìÂá∫ÁªìÊûú (TupleTests, 2020-01-09T20:40:26.137, 9223372036854775807) Êõ¥Êñ∞ÂÖÉÁªÑÂÜÖÂÆπ@Test public void test1() { Tuple3&lt;String, LocalDateTime, Long> tuple3 = Tuple.of(\"TupleTests\", LocalDateTime.now(), Long.MAX_VALUE); System.out.println(tuple3); tuple3 = tuple3.update1(\"ÂìàÂìàÂìàÂìà\"); System.out.println(tuple3); } ÈÄöËøáupdate1-nÊñπÊ≥ïÔºåÂèØ‰ª•ÂÆûÁé∞ÂÖÉÁªÑÂÜÖÂÆπÁöÑÊõ¥Êñ∞ÔºåÊõ¥Êñ∞ÁªìÊûú (TupleTests, 2020-01-09T20:42:27.623, 9223372036854775807) (ÂìàÂìàÂìàÂìà, 2020-01-09T20:42:27.623, 9223372036854775807) ÊñπÊ≥ïÂ§ö‰∏™ËøîÂõûÂÄº‰ΩøÁî®ÂÖÉÁªÑÊé•Êî∂Ëøô‰∏™ÈúÄÊ±ÇÂÖ∂ÂÆû‰πãÂâçÂú®Java8 Â§ÑÁêÜÂ∏∏ËßÅÁöÑÊó•ÊúüÂë®ÊúüËøôÁØáÊñáÁ´†Â∑≤ÁªèÁî®Ëøá‰∫ÜÔºåÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶ÅËé∑Âèñ‰∏Ä‰∏™Âë®ÊúüÊï∞ÊçÆÔºåÊúâÂºÄÂßãÂíåÁªìÊùüÔºåÈÇ£‰πàÂÖÉÁªÑÊó†ÁñëÊòØÊúÄÂ•ΩÁöÑÈÄâÊã©„ÄÇÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶ÅÂ∞ÅË£Ö‰∏Ä‰∏™ÊñπÊ≥ïËé∑Âèñ‰ªäÂ§©ÁöÑÊúÄÂ∞èÊó∂Èó¥ÂíåÊúÄÂ§ßÊó∂Èó¥ÔºåÈÇ£‰πàËøôÈáåÂ∞±ÈúÄË¶Å‰∏§‰∏™ËøîÂõûÂÄºÔºåËôΩÁÑ∂Êàë‰ª¨ÂèØ‰ª•Áî®Object[]ÊàñËÄÖMap‰πãÁ±ªÁöÑÂÆπÂô®ËææÂà∞Êàë‰ª¨ÁöÑÊïàÊûúÔºå‰ΩÜÊòØÂ¶ÇÊûúÊàëËøîÂõûÂÄºÂæóÁ±ªÂûãÈÉΩ‰∏çÂ∞ΩÊÉ≥ÂêåÔºåÈÇ£‰πàÂú®Ëé∑ÂèñÁöÑÊó∂ÂÄôÂ∞±Ë¶ÅËøõË°åÁ±ªÂûãËΩ¨Êç¢ÔºåÂä†Âà∞‰∫ÜËΩ¨Êç¢Âá∫ÈîôÁöÑÊ¶ÇÁéáÔºå‰ΩÜÊòØ‰ΩøÁî®ÂÖÉÁªÑÂ∞±‰∏ç‰ºöÊúâËøô‰∏™ÈóÆÈ¢ò„ÄÇ Ëé∑Âèñ‰∏ÄÂ§©ÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥ public Tuple2&lt;LocalDateTime, LocalDateTime> getNowRange() { LocalDate now = LocalDate.now(); // ‰∏ÄÂ§©‰∏≠‰ªéÈõ∂Êó∂ÂºÄÂßã LocalDateTime startTime = now.atTime(LocalTime.MIN); // ‰∏ÄÂ§©Âà∞23:59:59ÁßíÁªìÊùü LocalDateTime endTime = now.atTime(LocalTime.MAX); return Tuple.of(startTime, endTime); } Ëé∑ÂèñËøîÂõûÂÄº @Test public void test2() { Tuple2&lt;LocalDateTime, LocalDateTime> tuple2 = getNowRange(); // ËøôÈáåÈÄöËøá _n ÊàñËÄÖ _n() Ëé∑ÂèñÊØè‰∏Ä‰∏™ÂÖÉÁªÑ‰∏≠ÁöÑ‰∏ÄÂàóÊï∞ÊçÆ System.out.println(\"ÂºÄÂßãÊó∂Èó¥:\" + tuple2._1()); System.out.println(\"ÁªìÊùüÊó∂Èó¥:\" + tuple2._2); } Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞getNowRangeÂêåÊó∂Êúâ‰∏§‰∏™ÊîæÂõûÂÄºÔºåÈÄöËøáTuple2ËøõË°å‰øùÂ≠òÔºåËøá _n ÊàñËÄÖ _n() Ëé∑ÂèñÊØè‰∏Ä‰∏™ÂÖÉÁªÑ‰∏≠ÁöÑ‰∏ÄÂàóÊï∞ÊçÆ„ÄÇÊúÄÂêéËé∑ÂèñÁöÑÁªìÊûú‰∏∫ ÂºÄÂßãÊó∂Èó¥:2020-01-09T00:00 ÁªìÊùüÊó∂Èó¥:2020-01-09T23:59:59.999999999 ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØÂÖÉÁªÑÊúÄÂ∏∏Áî®ÁöÑ‰∏Ä‰∫õÊñπÊ≥ïÔºåÂÖ∂ÂÆûÊàëÁêÜËß£ÁöÑÂÖÉÁªÑÂ∞±ÊòØ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂÆπÂô®ÔºåÂíåÊàë‰ª¨Âπ≥Êó∂Áî®ÁöÑCollectionÊé•Âè£‰∏ãÁöÑ‰∏Ä‰∫õListÔºåSet‰∏çÂêåÔºå‰ªñ‰ª¨ÈÉΩÊòØ‰ª•Ë°åÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÔºåÊúâ‰∫ÜTuple‰ª•ÂêéÔºåÂú®Êó•Â∏∏ÂºÄÂèë‰∏≠‰πüÂ§ö‰∫Ü‰∏ÄÁßçÊï∞ÊçÆÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®ÁöÑÈÄâÊã©„ÄÇ ÂΩìÁÑ∂ÂÖÉÁªÑÂè™ÊòØvavrÂ∫ì‰∏≠ÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÔºåÊõ¥Â§ö‰ΩøÁî®ÊñπÊ≥ïËøòÊòØË¶ÅÁúãÂÆòÊñπÊñáÊ°£ ÂèÇËÄÉÊñáÁ´†Ôºö‰ΩøÁî® Vavr ËøõË°åÂáΩÊï∞ÂºèÁºñÁ®ã","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"CentOS7 ÂÆâË£Ö MySQL5.7.X","slug":"software-install-mysql5-7-x-centos7","date":"2020-01-08T11:31:55.000Z","updated":"2024-07-01T12:30:37.377Z","comments":true,"path":"2020/01/08/software-install-mysql5-7-x-centos7/","link":"","permalink":"http://iogogogo.github.io/2020/01/08/software-install-mysql5-7-x-centos7/","excerpt":"","text":"ÂÆâË£ÖÂâçÂáÜÂ§áMySQLÂÆâË£ÖÈúÄË¶ÅÂáÜÂ§árootË¥¶Êà∑ Âç∏ËΩΩMariaDBÁõ∏ÂÖ≥ÁªÑ‰ª∂ Áî±‰∫éMariaDB‰∏éMySQLÁ±ª‰ººÔºåÂú®ÂÆâË£ÖÊó∂ÂÄô‰ºöÊèêÁ§∫‰∏éÂ∑≤ÁªèÂÆâË£ÖÁöÑRPMÂåÖÊúâÂÜ≤Á™ÅÔºåÂõ†Ê≠§ÈúÄË¶ÅÂç∏ËΩΩ‰∏Ä‰∫õÂåÖÂê´ÊúâMariaDBÂÖ≥ÈîÆÂ≠óÁöÑRPMÂåÖ„ÄÇ ÊâßË°årpm -qa | grep mysqlÊ£ÄÊü•ÈúÄË¶ÅÂç∏ËΩΩÁöÑÂåÖ ÊâßË°årpm -qa | grep mariadbÊ£ÄÊü•ÈúÄË¶ÅÂç∏ËΩΩÁöÑÂåÖ Â¶ÇÂèëÁé∞Â≠òÂú®mariadb‰∏émysqlÂàô‰ΩøÁî®rpm -e --nodeps xxxËøõË°åÂç∏ËΩΩ [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -qa | grep mariadb # Ê£ÄÊü•mariadb mariadb-libs-5.5.64-1.el7.x86_64 # Â¶ÇÊúâÂ∞±ËøõË°åÂç∏ËΩΩ [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -e --nodeps mariadb-libs-5.5.64-1.el7.x86_64 ‰∏ãËΩΩÂÆâË£ÖÊñá‰ª∂ËøôÈáåÊàëÁõ¥Êé•Âú®ÂÆòÁΩëÊãøÂà∞‰∫ÜMySQL5.7.28ÁöÑ‰∏ãËΩΩÂú∞ÂùÄÔºåÈÄöËøáwgetËøõË°å‰∏ãËΩΩ wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar Ëß£ÂéãÂÆâË£ÖÊñá‰ª∂ËøôÈáåËß£ÂéãÊñá‰ª∂‰ª•ÂêéÔºåÁõ¥Êé•ÊîæÂà∞Êñ∞Êñá‰ª∂Â§πmysql-5.7.28-1.el7.x86_64‰∫ÜÔºåÂèØ‰ª•ÁúãÂà∞ÁõÆÂΩï‰∏ãÈù¢ÊúâÂæàÂ§örpmÂåÖ tar xvf mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar -C mysql-5.7.28-1.el7.x86_64 [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# ll ÊÄªÁî®Èáè 595272 -rw-r--r-- 1 7155 31415 45109364 9Êúà 30 16:04 mysql-community-client-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 318768 9Êúà 30 16:04 mysql-community-common-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 7037096 9Êúà 30 16:04 mysql-community-devel-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 49329100 9Êúà 30 16:04 mysql-community-embedded-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 23354908 9Êúà 30 16:04 mysql-community-embedded-compat-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 136837816 9Êúà 30 16:04 mysql-community-embedded-devel-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 4374364 9Êúà 30 16:04 mysql-community-libs-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 1353312 9Êúà 30 16:04 mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 208694824 9Êúà 30 16:05 mysql-community-server-5.7.28-1.el7.x86_64.rpm -rw-r--r-- 1 7155 31415 133129992 9Êúà 30 16:05 mysql-community-test-5.7.28-1.el7.x86_64.rpm ÂºÄÂßãÂÆâË£ÖÊ£ÄÊü•3306Á´ØÂè£MySQLÈªòËÆ§‰ΩøÁî®3306Á´ØÂè£ÔºåÂÆâË£ÖÂâçÊü•ÁúãÁ´ØÂè£ÊòØÂê¶Ë¢´Âç†Áî® netstat -anp|grep 3306 ÂÆâË£ÖÁõ∏Â∫îÁöÑrpmÂåÖ mysql-community-common-5.7.28-1.el7.x86_64.rpm mysql-community-libs-5.7.28-1.el7.x86_64.rpm mysql-community-client-5.7.28-1.el7.x86_64.rpm mysql-community-server-5.7.28-1.el7.x86_64.rpm ‰ª•‰∏äÂõõ‰∏™Êñá‰ª∂ÊåâÁÖßÈ°∫Â∫è‰æùÊ¨°ÂÆâË£ÖÔºåÈ°∫Â∫è‰∏çËÉΩÈîô‰π± rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm ‰ª•‰∏ã‰∏∫ÂÆâË£ÖÊó•ÂøóÔºåÂè™Ë¶Å‰πãÂâçÁöÑmariadbÂíåmysqlÂç∏ËΩΩÂπ≤ÂáÄ‰∫ÜÔºå‰∏ÄËà¨‰∏ç‰ºöÊúâÈóÆÈ¢ò [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm Ë≠¶ÂëäÔºömysql-community-common-5.7.28-1.el7.x86_64.rpm: Â§¥V3 DSA/SHA1 Signature, ÂØÜÈí• ID 5072e1f5: NOKEY ÂáÜÂ§á‰∏≠... ################################# [100%] Ê≠£Âú®ÂçáÁ∫ß/ÂÆâË£Ö... 1:mysql-community-common-5.7.28-1.e################################# [100%] [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm Ë≠¶ÂëäÔºömysql-community-libs-5.7.28-1.el7.x86_64.rpm: Â§¥V3 DSA/SHA1 Signature, ÂØÜÈí• ID 5072e1f5: NOKEY ÂáÜÂ§á‰∏≠... ################################# [100%] Ê≠£Âú®ÂçáÁ∫ß/ÂÆâË£Ö... 1:mysql-community-libs-5.7.28-1.el7################################# [100%] [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm Ë≠¶ÂëäÔºömysql-community-client-5.7.28-1.el7.x86_64.rpm: Â§¥V3 DSA/SHA1 Signature, ÂØÜÈí• ID 5072e1f5: NOKEY ÂáÜÂ§á‰∏≠... ################################# [100%] Ê≠£Âú®ÂçáÁ∫ß/ÂÆâË£Ö... 1:mysql-community-client-5.7.28-1.e################################# [100%] [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm Ë≠¶ÂëäÔºömysql-community-server-5.7.28-1.el7.x86_64.rpm: Â§¥V3 DSA/SHA1 Signature, ÂØÜÈí• ID 5072e1f5: NOKEY ÂáÜÂ§á‰∏≠... ################################# [100%] Ê≠£Âú®ÂçáÁ∫ß/ÂÆâË£Ö... 1:mysql-community-server-5.7.28-1.e################################# [100%] ÂêéÁª≠Â∑•‰ΩúÂêØÂä®MySQLÊúçÂä°systemctl start mysqld Êü•ÁúãMySQLÊúçÂä°Áä∂ÊÄÅsystemctl status mysqld ËæìÂá∫Êó•Âøó [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# systemctl status mysqld ‚óè mysqld.service - MySQL Server Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since ‰∏â 2020-01-08 21:02:06 CST; 6s ago Docs: man:mysqld(8) http://dev.mysql.com/doc/refman/en/using-systemd.html Process: 22483 ExecStart=/usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS) Process: 22450 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS) Main PID: 22486 (mysqld) Tasks: 27 Memory: 193.8M CGroup: /system.slice/mysqld.service ‚îî‚îÄ22486 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.468981Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.469015Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.470439Z 0 [Warning] CA certificate ca.pem is self signed. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.470543Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.471329Z 0 [Note] Server hostname (bind-address): '*'; port: 3306 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.471412Z 0 [Note] IPv6 is available. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.471436Z 0 [Note] - '::' resolves to '::'; 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.471467Z 0 [Note] Server socket created on IP: '::'. 1Êúà 08 21:02:06 vm31_123 mysqld[22483]: 2020-01-08T13:02:06.485478Z 0 [Note] Event Scheduler: Loaded 0 events 1Êúà 08 21:02:06 vm31_123 systemd[1]: Started MySQL Server. ‰øÆÊîπÈªòËÆ§ÂØÜÁ†ÅÊü•ÁúãMySQLÂÆâË£ÖÊàêÂäü‰ª•ÂêéÁîüÊàêÁöÑÈõ∂Êó∂ÂØÜÁ†Åsudo cat /var/log/mysqld.log |grep 'temporary password' ËæìÂá∫ÁªìÊûúÔºåÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÁöÑmysqlÈõ∂Êó∂ÂØÜÁ†ÅÊòØ;2o1:2h%!ruT [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# sudo cat /var/log/mysqld.log |grep 'temporary password' 2020-01-08T12:21:09.914526Z 1 [Note] A temporary password is generated for root@localhost: ;2o1:2h%!ruT ‰ΩøÁî®Èõ∂Êó∂ÂØÜÁ†ÅÁôªÂΩï‰øÆÊîπËæìÂÖ•mysql -uroot -p‰ª•Âêé‰ºöÊèêÁ§∫Êàë‰ª¨ËæìÂÖ•ÂØÜÁ†ÅÔºåËøôÊó∂ÂÄôËæìÂÖ•ÂàöÂàöÁîüÊàêÁöÑÈõ∂Êó∂ÂØÜÁ†Å;2o1:2h%!ruTÂç≥ÂèØÁôªÂΩï Êé•‰∏ãÊù•Â∞±ÂèØ‰ª•‰ΩøÁî®ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;MySQL@123&#39;;ÔºàÊ≠§Â§ÑMySQL@123‰∏∫Êï∞ÊçÆÂ∫ìÂØÜÁ†ÅÔºåÊ†πÊçÆÈúÄÊ±ÇËá™Ë°åËÆæÁΩÆÊõ¥ÊîπÔºâ [root@vm31_123 mysql-5.7.28-1.el7.x86_64]# mysql -uroot -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 2 Server version: 5.7.28 Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'MySQL@123'; Query OK, 0 rows affected (0.00 sec) mysql> ËÆæÁΩÆÂ§ñÈÉ®IPËÆøÈóÆMySQL‰∏∫‰∫ÜËÉΩÂ§üËÆ©Â§ñÈÉ®ËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºåÈúÄË¶ÅÂ∞ÜrootÁöÑHostÂÄºÊîπ‰∏∫‚Äô%‚ÄôÔºåÂÖ∑‰ΩìÊ≠•È™§Â¶Ç‰∏ãÔºö Êü•ÁúãÂÖÅËÆ∏ËøûÊé•Âà∞Êú¨Êï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØÔºåÊâßË°åÂëΩ‰ª§select host,user from mysql.user; ÈªòËÆ§rootÂè™ËÉΩÈÄöËøálocalhostËøûÊé•Ôºå‰∏çËÉΩËøúÁ®ãËÆøÈóÆ„ÄÇ ÈÄâÊã©Êï∞ÊçÆÂ∫ìÔºöuse mysql; ÂÖàÊâßË°åÔºöupdate user set Host=&#39;%&#39; where User=&#39;root&#39;; ÂÜçÊâßË°å:flush privileges; # Âà∑Êñ∞ÊùÉÈôê mysql> use mysql; Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed mysql> update user set Host='%' where User='root'; Query OK, 1 row affected (0.00 sec) Rows matched: 1 Changed: 1 Warnings: 0 mysql> flush privileges; Query OK, 0 rows affected (0.00 sec) mysql> ÂΩìËÆæÁΩÆÂÆåhost=%‰ª•ÂêéÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®Êàë‰ª¨ÁÜüÊÇânavicatÊàñËÄÖsequelËøõË°åËøûÊé•‰∫Ü ‰øÆÊîπMySQLÈªòËÆ§ÁºñÁ†Å‰∏∫utf8ÂΩìÊàë‰ª¨MySQLÂÆâË£ÖÂÆåÊàê‰ª•ÂêéÔºåÈªòËÆ§ÁºñÁ†Å‰∏ç‰∏ÄÂÆöÊòØutf8ÔºåËôΩÁÑ∂Âú®Âª∫Â∫ìÂª∫Ë°®ÁöÑÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆöÔºå‰ΩÜÊòØÂßãÁªà‰∏çÊñπ‰æøÔºåÈÇ£‰πàÊé•‰∏ãÊù•Êàë‰ª¨Â∞ÜMySQLÈªòËÆ§ÁºñÁ†ÅËÆæÁΩÆ‰∏∫utf8 Êü•ÁúãMySQLÈªòËÆ§ÁºñÁ†Å‰ΩøÁî®show variables like &#39;character_set_%&#39;; mysql> show variables like 'character_set_%'; +--------------------------+----------------------------+ | Variable_name | Value | +--------------------------+----------------------------+ | character_set_client | utf8 | | character_set_connection | utf8 | | character_set_database | latin1 | | character_set_filesystem | binary | | character_set_results | utf8 | | character_set_server | latin1 | | character_set_system | utf8 | | character_sets_dir | /usr/share/mysql/charsets/ | +--------------------------+----------------------------+ 8 rows in set (0.00 sec) ÂèØ‰ª•ÁúãÂà∞character_set_serverËøôÈáåÊòØlatin1ÔºåÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑutf8ÔºåËøôÊó∂ÂÄôÊàë‰ª¨Â∞±ÈúÄË¶ÅÁºñËæë/etc/my.cnfÊñá‰ª∂ËøõË°åËÆæÁΩÆ ÁºñËæëmy.cnfÊñá‰ª∂sudo vim /etc/my.cnfËøõË°åÁºñËæëÔºåÂä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºåÁÑ∂Âêé‰øùÂ≠òÈáçÂêØMySQLÊúçÂä°systemctl restart mysqld Ê≥®ÊÑèÔºömy.cnf‰∏≠ÈªòËÆ§ÂåÖÂê´[mysqld]Ôºå‰øÆÊîπÁöÑÊó∂ÂÄôÂ∞±Âú®ÂéüÊù•ÁöÑÂü∫Á°Ä‰∏äÊîπÂ∞±Â•Ω‰∫ÜÔºå‰∏çË¶ÅÈáçÂ§ç‰∫Ü [client] default-character-set=utf8 [mysqld] collation-server = utf8_unicode_ci init-connect='SET NAMES utf8' character-set-server = utf8 [mysql] default-character-set=utf8 ÂÜçÊ¨°Êü•Áúã‰øÆÊîπ‰ª•ÂêéÁöÑÁºñÁ†Åmysql> show variables like 'character_set_%'; +--------------------------+----------------------------+ | Variable_name | Value | +--------------------------+----------------------------+ | character_set_client | utf8 | | character_set_connection | utf8 | | character_set_database | utf8 | | character_set_filesystem | binary | | character_set_results | utf8 | | character_set_server | utf8 | | character_set_system | utf8 | | character_sets_dir | /usr/share/mysql/charsets/ | +--------------------------+----------------------------+ 8 rows in set (0.00 sec) Âà∞ËøôÈáåÔºåMySQLÁöÑÈªòËÆ§ÁºñÁ†ÅÂ∞±ÊòØÊàë‰πàÁÜüÊÇâÁöÑutf8‰∫Ü ÂøòËÆ∞MySQLÂØÜÁ†ÅÂΩìÂøòËÆ∞MySQLÂØÜÁ†ÅÊàñËÄÖMySQLÂØÜÁ†ÅÈîôËØØÊòØ‰ºöÊèêÁ§∫ÈîôËØØERROR 1045 (28000): Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES) Â¶ÇÊûúÊâæ‰∏çÂà∞MySQLÂØÜÁ†ÅÊó∂ÂèØ‰ª•‰ΩøÁî®Ë∑≥ËøámysqlÊùÉÈôêË°®ÂêØÂä®ÁöÑÊñπÂºèËøõË°åÂØÜÁ†ÅÈáçÁΩÆ ÂÅúÊ≠¢MySQLÊúçÂä° systemctl stop mysqld Ë∑≥ËøámysqlÊùÉÈôêË°®ÂêØÂä® /usr/bin/mysqld_safe --skip-grant-tables Êó†ÂØÜÁ†ÅÁôªÂΩï mysql -uroot ÈÄâÊã©mysqlÊï∞ÊçÆÂ∫ì use mysql; ÈáçÁΩÆÂØÜÁ†Å update user set authentication_string=password('MySQL@123') where user='root'; Âà∑Êñ∞ÊùÉÈôê flush privileges; Â∏∏ËßÅÈóÆÈ¢ò ‰øÆÊîπÈªòËÆ§ÈÖçÁΩÆÔºåÂΩìÊèíÂÖ•ÊàñÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÊØîËæÉÂ§ßÊó∂ÔºåÈúÄË¶Å‰øÆÊîπ/etc/my.cnfÈÖçÁΩÆÊñá‰ª∂ Âú®[mysqlId]‰∏ãÂä†‰∏ä max_allowed_packet=20M (ÂèØ‰ª•ÈÄöËøá mysql ‚Äìhelp | grep my.cnfÊü•ÊâæÊñá‰ª∂Ë∑ØÂæÑ) ÂΩìÈáçÂêØÊúçÂä°Âô®ÂêéÔºåMySQLÊó†Ê≥ïÊ≠£Â∏∏ÂêØÂä®ÔºåÈÅáÂà∞‰ª•‰∏ãÈóÆÈ¢ò Job for mysqld.service failed. See &#39;systemctl status mysqld.service&#39; and &#39;journalctl -xn&#39; for details. Êü•ÁúãÊó•ÂøóÔºåÂá∫Áé∞Â¶Ç‰∏ãÈîôËØØÂÜÖÂÆπÔºö [ERROR] /usr/sbin/mysqld: Can't create/write to file '/var/run/mysqld/mysqld.pid' (Errcode: 2 - No such file or directory) [ERROR] Can't start server: can't create PID file: No such file or directory Copy Ëß£ÂÜ≥ÊñπÊ°àÔºö ##ÊéàÊùÉ chown mysql.mysql /var/run/mysqld/ ##ÂêØÂä® /etc/init.d/mysqld start","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"Java8 ‰∏≠ÁöÑÊó•ÊúüÁ±ªÂ∫èÂàóÂåñÈóÆÈ¢ò","slug":"java8-date-gson","date":"2020-01-07T13:59:27.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2020/01/07/java8-date-gson/","link":"","permalink":"http://iogogogo.github.io/2020/01/07/java8-date-gson/","excerpt":"","text":"Ëá™‰ªé‰π†ÊÉØ‰∫Ü‰ΩøÁî®Java8 ‰∏≠ÁöÑÊó•ÊúüÁ±ª‰ª•ÂêéÔºåÂ∞±Â∑≤ÁªèÂÆåÂÖ®ÊäõÂºÉ‰∫Üjava.sql„ÄÅjava.util‰∏≠ÁöÑÊó•ÊúüÂ§ÑÁêÜÁ±ªÔºå‰ΩÜÊòØJava8‰∏≠ÁöÑÊó•ÊúüÁ±ªÂú®Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÊó∂‰∏çÊòØÊàë‰ª¨Ê≠£Â∏∏ÁúãÂà∞ÁöÑÊ†áÂáÜÊ†ºÂºèÔºåËøôÈáåËÆ∞ÂΩï‰∏Ä‰∏ãÂ¶Ç‰Ωï‰ΩøÁî®GsonËøõË°åÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÊó∂Ê≠£Â∏∏ÂØπJava8ÁöÑÊó•ÊúüÁ±ªËøõË°åÂ§ÑÁêÜ ÈªòËÆ§Â∫èÂàóÂåñÁªìÊûúËøôÈáåÂÜô‰∫Ü‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑtestÔºåÂØπLocalDate„ÄÅLocalDateTimeËøõË°åÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ package com.iogogogo; import com.google.gson.Gson; import lombok.Data; import lombok.extern.slf4j.Slf4j; import org.junit.Test; import java.io.Serializable; import java.time.LocalDate; import java.time.LocalDateTime; /** * Created by tao.zeng on 2020-01-07. */ @Slf4j public class Java8DateTests { @Test public void test1() { DateMetric dateMetric = new DateMetric(); dateMetric.setLocalDate(LocalDate.now()); dateMetric.setLocalDateTime(LocalDateTime.now()); // serializer Gson gson = new Gson(); String json = gson.toJson(dateMetric); log.info(\"serializer:{}\", json); // deserializer log.info(\"deserializer:{}\", gson.fromJson(json, DateMetric.class)); } @Data private class DateMetric implements Serializable { private LocalDate localDate; private LocalDateTime localDateTime; } } Êü•ÁúãÁªìÊûúÔºåÂèØ‰ª•ÁúãÂà∞ÂèçÂ∫èÂàóÂåñÁöÑÁªìÊûúÊòØÊàë‰ª¨Ëá™Â∑±ÊÉ≥Ë¶ÅÁöÑÔºå‰ΩÜÊòØÂ∫èÂàóÂåñÁöÑÁªìÊûúÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑyyyy-MM-dd HH:mm:ss ËøôÁßçÊ†ºÂºèÔºåÈÇ£‰πàËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÁî®Âà∞GsonBuilderÊù•Ê≥®ÂÜåregisterTypeAdapter 22:09:01.345 [main] INFO com.iogogogo.Java8DateTests - serializer:{\"localDate\":{\"year\":2020,\"month\":1,\"day\":7},\"localDateTime\":{\"date\":{\"year\":2020,\"month\":1,\"day\":7},\"time\":{\"hour\":22,\"minute\":9,\"second\":1,\"nano\":271000000}}} 22:09:01.356 [main] INFO com.iogogogo.Java8DateTests - deserializer:Java8DateTests.DateMetric(localDate=2020-01-07, localDateTime=2020-01-07T22:09:01.271) Ëá™ÂÆö‰πâÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÁöÑAdapter/** * Â§ÑÁêÜLocalDateÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ final static class LocalDateAdapter implements JsonSerializer&lt;LocalDate>, JsonDeserializer&lt;LocalDate> { public JsonElement serialize(LocalDate date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE)); } @Override public LocalDate deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDate.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE); } } /** * Â§ÑÁêÜLocalDateTimeÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ */ final static class LocalDateTimeAdapter implements JsonSerializer&lt;LocalDateTime>, JsonDeserializer&lt;LocalDateTime> { public JsonElement serialize(LocalDateTime date, Type typeOfSrc, JsonSerializationContext context) { return new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME)); } @Override public LocalDateTime deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException { String timestamp = element.getAsJsonPrimitive().getAsString(); return LocalDateTime.parse(timestamp, DateTimeFormatter.ISO_LOCAL_DATE_TIME); } } ‰ΩøÁî®GsonBuilderÂàõÂª∫gsonÂØπË±°@Test public void test2() { DateMetric dateMetric = new DateMetric(); dateMetric.setLocalDate(LocalDate.now()); dateMetric.setLocalDateTime(LocalDateTime.now()); // serializer Gson gson = new GsonBuilder() .registerTypeAdapter(LocalDate.class, new LocalDateAdapter()) .registerTypeAdapter(LocalDateTime.class, new LocalDateTimeAdapter()) .create(); String json = gson.toJson(dateMetric); log.info(\"serializer:{}\", json); // deserializer log.info(\"deserializer:{}\", gson.fromJson(json, DateMetric.class)); } ÁªìÊûú 22:16:15.738 [main] INFO com.iogogogo.Java8DateTests - serializer:{\"localDate\":\"2020-01-07\",\"localDateTime\":\"2020-01-07T22:16:15.662\"} 22:16:15.745 [main] INFO com.iogogogo.Java8DateTests - deserializer:Java8DateTests.DateMetric(localDate=2020-01-07, localDateTime=2020-01-07T22:16:15.662) ËæìÂá∫jsonËøõË°åÊ†ºÂºèÂåñÂ§ÑÁêÜÂπ≥Êó∂ËæìÂá∫ÁöÑjsonÈÉΩÊòØ‰∏ÄË°åÊñáÊú¨ÔºåÂ¶ÇÊûúÈúÄË¶ÅÂØπjsonÁöÑËæìÂá∫ÁªìÊûúÈúÄË¶ÅËøõË°åÊ†ºÂºèÂåñÂ§ÑÁêÜÁöÑËØùÔºå‰πüÂèØ‰ª•‰ΩøÁî®GsonBuilderÁöÑsetPrettyPrinting()ÊñπÊ≥ï @Test public void test2() { DateMetric dateMetric = new DateMetric(); dateMetric.setLocalDate(LocalDate.now()); dateMetric.setLocalDateTime(LocalDateTime.now()); // serializer Gson gson = new GsonBuilder() .setPrettyPrinting() // ËÆæÁΩÆËæìÂá∫Ê†ºÂºèÊ†ºÂºèÂåñÊòæÁ§∫ .registerTypeAdapter(LocalDate.class, new LocalDateAdapter()) .registerTypeAdapter(LocalDateTime.class, new LocalDateTimeAdapter()) .create(); String json = gson.toJson(dateMetric); log.info(\"serializer:\\n{}\", json); // deserializer log.info(\"deserializer:{}\", gson.fromJson(json, DateMetric.class)); } ËæìÂá∫ÁªìÊûú 22:21:03.307 [main] INFO com.iogogogo.Java8DateTests - serializer: { \"localDate\": \"2020-01-07\", \"localDateTime\": \"2020-01-07T22:21:03.218\" } 22:21:03.313 [main] INFO com.iogogogo.Java8DateTests - deserializer:Java8DateTests.DateMetric(localDate=2020-01-07, localDateTime=2020-01-07T22:21:03.218) ÂØπÂ∑≤ÊúâÁöÑjsonËøõË°åÊ†ºÂºèÂåñÂ§ÑÁêÜÂ¶ÇÊûúÊàë‰ª¨ÁöÑjsonÊñáÊú¨Â∑≤ÁªèÂ≠òÂú®ÔºåÈÇ£ÊàëÊàë‰ª¨ÊÉ≥ÈÄöËøágsonËøõË°åÊ†ºÂºèÂåñÂ±ïÁ§∫ËØ•ÊÄé‰πàÂÅöÂë¢Ôºü ËøôÈáåÂÅöÊ≥ï‰πüÂæàÁÆÄÂçïÔºå‰∏çËøáJsonObjectÂíåJsonArrayÁï•ÊúâÂå∫Âà´Ôºå‰∏çËøáÈÉΩÊòØÈúÄË¶ÅÂ∞ÜjsonËØªÂèñÊàêJsonObjectÊàñËÄÖJsonArrayÂØπË±° JsonObject Ê†ºÂºèÂåñÂéüÂßãJsonObjectÊï∞ÊçÆ {\"localDate\":{\"year\":2020,\"month\":1,\"day\":7},\"localDateTime\":{\"date\":{\"year\":2020,\"month\":1,\"day\":7},\"time\":{\"hour\":22,\"minute\":9,\"second\":1,\"nano\":271000000}}} @Test public void jsonObjectFormatter() { JsonObject jsonObject = JsonParser.parseString(JSON_STRING).getAsJsonObject(); Gson gson = new GsonBuilder().setPrettyPrinting().create(); System.out.println(gson.toJson(jsonObject)); } ËæìÂá∫ÁªìÊûúÔºö { \"localDate\": { \"year\": 2020, \"month\": 1, \"day\": 7 }, \"localDateTime\": { \"date\": { \"year\": 2020, \"month\": 1, \"day\": 7 }, \"time\": { \"hour\": 22, \"minute\": 9, \"second\": 1, \"nano\": 271000000 } } } JsonArray Ê†ºÂºèÂåñÂéüÂßãJsonArrayÊï∞ÊçÆ [{\"localDate\":{\"year\":2020,\"month\":1,\"day\":7},\"localDateTime\":{\"date\":{\"year\":2020,\"month\":1,\"day\":7},\"time\":{\"hour\":22,\"minute\":9,\"second\":1,\"nano\":271000000}}}] @Test public void jsonArrayFormatter() { JsonArray jsonArray = JsonParser.parseString(JSON_STRING_ARRAY).getAsJsonArray(); Gson gson = new GsonBuilder().setPrettyPrinting().create(); System.out.println(gson.toJson(jsonArray)); } ËæìÂá∫ÁªìÊûúÔºö [ { \"localDate\": { \"year\": 2020, \"month\": 1, \"day\": 7 }, \"localDateTime\": { \"date\": { \"year\": 2020, \"month\": 1, \"day\": 7 }, \"time\": { \"hour\": 22, \"minute\": 9, \"second\": 1, \"nano\": 271000000 } } } ] ÊÄªÁªìÊú¨Êñá‰∏ªË¶Å‰ªãÁªç‰∫Ü‰ΩøÁî®GsonÂØπJava8‰∏≠ÁöÑÊó•ÂøóËøõË°åÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÊ†ºÂºèÁöÑÂ§ÑÁêÜÔºå‰ª•Âèä‰ΩøÁî®gsonÂØπjsonËøõË°åÊ†ºÂºèÂåñÁöÑËæìÂá∫„ÄÇ ÂèÇËÄÉÂú∞ÂùÄÔºöSerialize Java 8 LocalDate as yyyy-mm-dd with Gson ÂÆåÊï¥‰ª£Á†ÅÔºöJava8DateTests","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/tags/Gson/"},{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Spring Boot Êï¥Âêàkafka","slug":"spring-boot-kafka","date":"2020-01-06T15:28:32.000Z","updated":"2024-07-01T12:30:37.378Z","comments":true,"path":"2020/01/06/spring-boot-kafka/","link":"","permalink":"http://iogogogo.github.io/2020/01/06/spring-boot-kafka/","excerpt":"","text":"ÂÖ≥‰∫ékafkaÁöÑ‰ªãÁªçËøôÈáåÂ∞±‰∏çÂú®ËøáÂ§öËØ¥ÊòéÔºåÂèØ‰ª•Áúã‰πãÂâçÂÜôËøá‰∏ÄÈÅçÊñáÁ´†‰ΩøÁî®docker-composeÊûÑÂª∫kafkaÈõÜÁæ§ ÊñáÁ´†ÈáåÈù¢ÊúâÂÖ≥‰∫ékafkaÁöÑ‰∏Ä‰∫õ‰ªãÁªç‰ª•ÂèäÁéØÂ¢ÉÊê≠Âª∫ÔºåÊñáÁ´†‰∏≠ÁöÑÁéØÂ¢ÉÊê≠Âª∫ÊòØÂü∫‰∫édockerÂíådocker-composeÁöÑÔºåÂ¶ÇÊûú‰∏çÊÉ≥ÈÄöËøádockerÊûÑÂª∫Ôºå‰πüÂèØ‰ª•Áõ¥Êé•‰∏ãËΩΩkafkaÁöÑÂÆâË£ÖÂåÖÁõ¥Êé•Âú®Êú∫Âô®‰∏äÂêØÂä®Ôºå‰πãÂâçÁöÑÊñáÁ´†ÈìæÊé•kafkaÂ∏∏Áî®Êìç‰ΩúÁ¨îËÆ∞„ÄÇËøôÈáå‰πü‰∏çÂÜçÂèôËø∞Ôºå‰ªäÂ§©‰∏ªË¶ÅÊù•ÁúãSpring Boot‰∏≠Â¶Ç‰ΩïÂØπÊé•kafkaËøõË°åÊï∞ÊçÆÁöÑÊ∂àË¥π‰∏éÁîü‰∫ß„ÄÇ ÈÖçÁΩÆPOMÁ¨¨‰∏ÄÊ≠•ÂΩìÁÑ∂ÊòØÂÖàÂºïÂÖ•pom‰æùËµñ &lt;dependency> &lt;groupId>org.springframework.kafka&lt;/groupId> &lt;artifactId>spring-kafka&lt;/artifactId> &lt;/dependency> ÈÖçÁΩÆkafkaÂü∫Êú¨‰ø°ÊÅØspring: kafka: bootstrap-servers: localhost:9092 # Â§ö‰∏™‰ΩøÁî®`,`ÈöîÂºÄ producer: key-serializer: org.apache.kafka.common.serialization.StringSerializer value-serializer: org.apache.kafka.common.serialization.StringSerializer retries: 0 # Â§±Ë¥•ÈáçËØïÊ¨°Êï∞ batch-size: 16384 buffer-memory: 33554432 acks: -1 # ÂèñÂÄº all, -1, 0, 1 consumer: enable-auto-commit: true auto-commit-interval: 5000 group-id: group-test auto-offset-reset: earliest # Ê∂àË¥πoffsetÂèñÂÄºearliest,latest,noneÔºàÈªòËÆ§ÔºölatestÔºâ key-deserializer: org.apache.kafka.common.serialization.StringDeserializer value-deserializer: org.apache.kafka.common.serialization.StringDeserializer # Ëá™ÂÆö‰πâproducer topic kafka: producer: topic: test-producer ËØ¶ÁªÜÁöÑÈÖçÁΩÆ‰ªãÁªçÔºöspring-kafkaÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÈÖçÁΩÆËØ¶Ëß£ ÂêØÂä®zookeeperÂíåkafkaÊúçÂä°ÂêØÂä®zookeeper./bin/zookeeper-server-start.sh -daemon config/zookeeper.properties ÂêØÂä®kafka./bin/kafka-server-start.sh -daemon config/server.properties ÈÄöËøájpsÊ£ÄÊü•ËøõÁ®ã ‚ûú kafka_2.11-2.3.0 jps 27442 40473 QuorumPeerMain # zookeeperËøõÁ®ã 40795 Kafka # kafkaËøõÁ®ã 40847 Jps Áîü‰∫ßÊ∂àÊÅØ‰∏∫‰∫ÜÊñπ‰æøÁúãÊï∞ÊçÆÔºåÊàë‰ª¨ÂÆö‰πâ‰∏Ä‰∏™MetricÁ±ªÔºåÁî®Êù•‰øùÂ≠òÊï∞ÊçÆÔºåÂπ∂ÊØèÈöî3sÂæÄkafkaÊúçÂä°Âô®ÂèëÈÄÅ‰∏ÄÊ¨°Êï∞ÊçÆÔºåÂπ∂‰∏îÂú®Á®ãÂ∫èÂêØÂä®‰ª•ÂêéÔºåÈÄöËøáCommandLineRunnerÂàùÂßãÂåñÂèëÈÄÅ metricÁ±ª import com.google.gson.annotations.SerializedName; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import java.io.Serializable; import java.time.LocalDateTime; import java.util.Map; /** * Created by tao.zeng on 2020-01-07. */ @Data @NoArgsConstructor @AllArgsConstructor public class Metric implements Serializable { private String hostname; private long total; @SerializedName(\"succ_cnt\") private long succCnt; @SerializedName(\"succ_rate\") private float succRate; private int status; private LocalDateTime timestamp; private Map&lt;String, Object> tags; } Spring BootÂêØÂä®Á±ª import com.google.common.collect.Maps; import com.iogogogo.common.util.DecimalUtils; import com.iogogogo.common.util.IdHelper; import com.iogogogo.common.util.JsonParse; import com.iogogogo.kafka.pojo.Metric; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.kafka.core.KafkaTemplate; import java.time.LocalDateTime; import java.util.Map; import java.util.Random; import java.util.concurrent.TimeUnit; /** * Created by tao.zeng on 2020-01-06. * Âä®ÊÄÅÈÖçÁΩÆÂ§ö‰∏™topic * https://github.com/spring-projects/spring-kafka/issues/361 */ public class KafkaApplication implements CommandLineRunner { @Autowired private KafkaTemplate kafkaTemplate; /** * ËøôÈáåÂØπÂ∫îÊàë‰ª¨Âú®yml‰∏≠Ëá™ÂÆö‰πâÁöÑÈÖçÁΩÆÔºåÁî®‰∫éËé∑ÂèñÂèëÈÄÅÊï∞ÊçÆÁî®ÁöÑtopic */ @Value(\"${kafka.producer.topic}\") private String producerTopic; public static void main(String[] args) { SpringApplication.run(KafkaApplication.class, args); } @Override public void run(String... args) throws Exception { Random random = new Random(); while (true) { writer2Kafka(random); // ÊØèÈöî3sÂêëkafkaÂèëÈÄÅÊï∞ÊçÆ TimeUnit.SECONDS.sleep(3); } } private void writer2Kafka(Random random) { Metric metric = new Metric(); metric.setHostname(\"NODE-\" + IdHelper.id()); metric.setTotal(random.nextInt(10000)); metric.setSuccCnt(random.nextInt(9900)); float v = DecimalUtils.divide(metric.getSuccCnt(), metric.getTotal()); metric.setSuccRate(v); metric.setStatus(random.nextInt(2)); metric.setTimestamp(LocalDateTime.now()); Map&lt;String, Object> tagMap = Maps.newHashMap(); tagMap.put(\"cpu_util\", random.nextFloat() * 100); tagMap.put(\"mem_util\", random.nextFloat() * 100); metric.setTags(tagMap); kafkaTemplate.send(producerTopic, JsonParse.toJson(metric)); kafkaTemplate.flush(); } } ÂêØÂä®Á®ãÂ∫èÂêéÔºåÂ¶ÇÊûútopic‰∏çÂ≠òÂú®Âàô‰ºöËá™Âä®ÂàõÂª∫topicÔºàÊàë‰ª¨Âπ∂Ê≤°ÊúâÂÖ≥Èó≠Ëá™Âä®ÂàõÂª∫topicÔºâÔºåÈÄöËøákafka-consumeerÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞topic‰∏≠ÁöÑÊï∞ÊçÆ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test-producer --from-beginning # Ê†∑‰æãÊï∞ÊçÆ {\"hostname\":\"NODE-55\",\"total\":6704,\"succ_cnt\":1441,\"succ_rate\":0.2149463,\"status\":0,\"timestamp\":\"2020-01-07T21:29:21.501\",\"tags\":{\"mem_util\":5.2691402,\"cpu_util\":97.53448}} {\"hostname\":\"NODE-23\",\"total\":9579,\"succ_cnt\":2191,\"succ_rate\":0.22872952,\"status\":0,\"timestamp\":\"2020-01-07T21:29:25.422\",\"tags\":{\"mem_util\":27.203756,\"cpu_util\":43.626713}} {\"hostname\":\"NODE-8\",\"total\":6889,\"succ_cnt\":786,\"succ_rate\":0.114094935,\"status\":0,\"timestamp\":\"2020-01-07T21:29:28.428\",\"tags\":{\"mem_util\":18.526094,\"cpu_util\":87.67309}} {\"hostname\":\"NODE-142\",\"total\":8753,\"succ_cnt\":4227,\"succ_rate\":0.48292014,\"status\":0,\"timestamp\":\"2020-01-07T21:29:31.436\",\"tags\":{\"mem_util\":87.426476,\"cpu_util\":12.49879}} {\"hostname\":\"NODE-198\",\"total\":2261,\"succ_cnt\":4251,\"succ_rate\":1.8801415,\"status\":0,\"timestamp\":\"2020-01-07T21:29:34.444\",\"tags\":{\"mem_util\":5.665392,\"cpu_util\":69.29729}} {\"hostname\":\"NODE-46\",\"total\":2846,\"succ_cnt\":6600,\"succ_rate\":2.3190444,\"status\":0,\"timestamp\":\"2020-01-07T21:29:37.451\",\"tags\":{\"mem_util\":66.49958,\"cpu_util\":18.604118}} {\"hostname\":\"NODE-47\",\"total\":5110,\"succ_cnt\":9650,\"succ_rate\":1.888454,\"status\":1,\"timestamp\":\"2020-01-07T21:29:40.459\",\"tags\":{\"mem_util\":92.13784,\"cpu_util\":60.55072}} Processed a total of 195 messages ÈÄöËøáÂëΩ‰ª§ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞kafka‰∏≠Â∑≤ÁªèÊúâÊñ∞ÂÜôËøõÂéªÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàÊàë‰ª¨Âú®Spring Boot‰∏≠ÂèàËØ•Â¶Ç‰ΩïÂØπÊï∞ÊçÆËøõË°åÊ∂àË¥πÂë¢Ôºü Ê∂àË¥πÊ∂àÊÅØÁîü‰∫ßÊï∞ÊçÆÂæàÁÆÄÂçïÔºåÊ∂àË¥πÊï∞ÊçÆ‰πü‰∏çÈöæÔºå‰∏ªË¶Å‰ΩøÁî®Spring BootÊèê‰æõÁöÑÊ≥®Ëß£@KafkaListenerÔºåËøôÊó∂ÂÄôÊàë‰ª¨ÈúÄË¶ÅËá™ÂÆö‰πâ‰∏Ä‰∏™consumerÁ±ªÔºåÂàöÂàöÊàë‰ª¨ÊòØÂæÄtest-producerËøô‰∏™topicÈáåÈù¢ÂÜôÔºåÁé∞Âú®ÈÄöËøáÁ®ãÂ∫èÊ∂àË¥πËøô‰∏™topic @KafkaListener Â∏∏Áî®ÁöÑÂèÇÊï∞ topic ËÆæÁΩÆÊ∂àË¥πÁöÑtopic groupId ÊåáÂÆöÊ∂àË¥πÁªÑ MetricConsumer import com.iogogogo.common.util.JsonParse; import com.iogogogo.kafka.pojo.Metric; import lombok.extern.slf4j.Slf4j; import org.apache.kafka.clients.consumer.ConsumerRecord; import org.springframework.kafka.annotation.KafkaListener; import org.springframework.stereotype.Component; import java.util.Optional; /** * Created by tao.zeng on 2020-01-07. */ @Slf4j @Component public class MetricConsumer { @KafkaListener(topics = \"test-producer\") public void event(ConsumerRecord&lt;String, String> record) { Optional&lt;String> kafkaMessage = Optional.ofNullable(record.value()); kafkaMessage.ifPresent(x -> { Metric metric = JsonParse.parse(x, Metric.class); log.info(\"Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:{}\", metric); }); } } Ê∂àË¥πÂà∞ÁöÑÊï∞ÊçÆÁªìÊûú 2020-01-07 21:38:10.646 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-128, total=7849, succCnt=9252, succRate=1.1787488, status=1, timestamp=2020-01-07T21:38:10.639, tags={mem_util=83.20216, cpu_util=2.36848}) 2020-01-07 21:38:13.651 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-199, total=3799, succCnt=595, succRate=0.15662016, status=0, timestamp=2020-01-07T21:38:13.647, tags={mem_util=37.34904, cpu_util=56.30006}) 2020-01-07 21:38:16.662 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-82, total=2797, succCnt=3004, succRate=1.0740079, status=1, timestamp=2020-01-07T21:38:16.654, tags={mem_util=87.53287, cpu_util=53.029602}) 2020-01-07 21:38:19.671 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-102, total=3232, succCnt=3041, succRate=0.9409035, status=0, timestamp=2020-01-07T21:38:19.664, tags={mem_util=87.7293, cpu_util=51.062298}) 2020-01-07 21:38:22.679 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-173, total=904, succCnt=759, succRate=0.83960176, status=0, timestamp=2020-01-07T21:38:22.672, tags={mem_util=3.923422, cpu_util=36.679466}) 2020-01-07 21:38:25.685 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-4, total=2250, succCnt=8072, succRate=3.5875556, status=1, timestamp=2020-01-07T21:38:25.681, tags={mem_util=71.37522, cpu_util=2.6286244}) 2020-01-07 21:38:28.696 INFO 42501 --- [ntainer#0-0-C-1] c.i.kafka.consumer.MetricConsumer : Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:Metric(hostname=NODE-87, total=2798, succCnt=3955, succRate=1.4135096, status=0, timestamp=2020-01-07T21:38:28.689, tags={mem_util=98.27863, cpu_util=23.622477}) ‰ΩÜÊòØÂ§ßÂÆ∂ÂèëÁé∞‰∫Ü‰∏ÄÁÇπÔºåÂ∞±ÊòØÊàë‰ª¨ÁöÑtopicÈÉΩÊòØÂÜôÊ≠ªÂú®Á®ãÂ∫èÈáåÈù¢ÁöÑÔºå‰∏çËÉΩÂä®ÊÄÅ‰º†ÈÄíËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÔºåËøôÊ†∑ÁöÑËÇØÂÆöÊòØ‰∏çÂèØ‰ª•ÁöÑÔºåÈÇ£‰πàÂ¶Ç‰ΩïÂä®ÊÄÅÈÖçÁΩÆÂèàÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÈóÆÈ¢òÔºåÊúâ‰∫∫ÂèØËÉΩ‰ºöËØ¥ËøôÈáå‰ΩøÁî®@ValueËøõË°åÊ≥®ÂÖ•Ôºå‰ΩÜÊòØÂÆûÈôÖËøôÊ†∑ÊòØÁºñËØë‰∏çËøáÂéªÁöÑÔºåÂõ†‰∏∫Ê≥®Ëß£Â±ûÊÄßÁöÑÂÄºÂøÖÈ°ªÊòØ‰∏Ä‰∏™constantÔºåËß£ÂÜ≥ÊñπÊ≥ïÂ∞±ÊòØ‰ΩøÁî®SPELË°®ËææÂºè IssuesÂú∞ÂùÄÔºöÂä®ÊÄÅÈÖçÁΩÆÂ§ö‰∏™topic ‰øÆÊîπ‰ª•ÂêéÁöÑ‰ª£Á†Å package com.iogogogo.kafka.consumer; import com.iogogogo.common.util.JsonParse; import com.iogogogo.kafka.pojo.Metric; import lombok.extern.slf4j.Slf4j; import org.apache.kafka.clients.consumer.ConsumerRecord; import org.springframework.kafka.annotation.KafkaListener; import org.springframework.stereotype.Component; import java.util.Optional; /** * Created by tao.zeng on 2020-01-07. * &lt;p> * Âä®ÊÄÅÈÖçÁΩÆÂ§ö‰∏™topic * * https://github.com/spring-projects/spring-kafka/issues/361 */ @Slf4j @Component public class MetricConsumer { /** * Ê≥®ÊÑèËøôÈáåÁöÑtopicÈÖçÁΩÆ * ÂΩìÁÑ∂groupId‰πüÂèØ‰ª•‰ΩøÁî®SPELË°®Ëææ‰π¶ËøõË°åÈÖçÁΩÆÔºåËøôÈáåÂ∞±‰∏çÂú®ËµòËø∞ * * @param record */ @KafkaListener(topics = \"#{'${kafka.producer.topic}'}\", groupId = \"metric-group\") public void event(ConsumerRecord&lt;String, String> record) { Optional&lt;String> kafkaMessage = Optional.ofNullable(record.value()); kafkaMessage.ifPresent(x -> { Metric metric = JsonParse.parse(x, Metric.class); log.info(\"Ê∂àË¥πkafka‰∏≠ÁöÑÊï∞ÊçÆ:{}\", metric); }); } } ‰øÆÊîπÂÆåÊàêÔºåÈáçÂêØËøõÁ®ãÔºåÊü•Áúã‰æùÊóßÂèØ‰ª•Ê≠£Â∏∏Ê∂àË¥πÂà∞Êï∞ÊçÆÔºåÂπ∂‰∏îtopicÊòØÂä®ÊÄÅÈÖçÁΩÆÁöÑÔºåÂ¶ÇÊûúÈúÄË¶ÅÈÖçÁΩÆÂ§ö‰∏™‰ΩøÁî®spiltËøõË°åÂàÜÂâ≤Âç≥ÂèØ ÊÄªÁªìÊú¨Êñá‰∏ªË¶Å‰ªãÁªç‰∫ÜSpring Boot‰∏ékafka ÁöÑÊï¥ÂêàÔºåÊó•Â∏∏ÂºÄÂèë‰∏≠Èô§‰∫ÜkafkaËøòÊúâÂÖ∂‰ªñÁöÑÂêÑÁßçÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåÊï¥ÂêàÊñπÂºèÂ§ßÂêåÂ∞èÂºÇÔºåÊØïÁ´üSpring BootÂ∑≤ÁªèÂ∏ÆÊàë‰ª¨Â∞ÅË£ÖÁöÑÂæàÂ•Ω‰∫ÜÔºåÂîØ‰∏ÄÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂ∞±ÊòØÊ≥®Ëß£Â±ûÊÄßÁöÑÂä®ÊÄÅÊ≥®ÂÖ•ÔºåËøôÈáåÈúÄË¶Å‰ΩøÁî®SPELË°®ËææÂºè„ÄÇ ÂÆåÊï¥‰ª£Á†ÅÔºöhttps://github.com/iogogogo/life-example/tree/master/example-kafka","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"},{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/tags/Kafka/"}]},{"title":"Spring Boot ‰ΩøÁî®jpaÂíåH2Êï∞ÊçÆÂ∫ì","slug":"spring-boot-jpa-h2","date":"2020-01-05T09:44:18.000Z","updated":"2024-07-01T12:30:37.377Z","comments":true,"path":"2020/01/05/spring-boot-jpa-h2/","link":"","permalink":"http://iogogogo.github.io/2020/01/05/spring-boot-jpa-h2/","excerpt":"","text":"Êó•Â∏∏ÊµãËØïÊó∂Ê≤°ÊúâÊï∞ÊçÆÂ∫ìÂèØÁî®Êó∂Ôºå‰ΩøÁî®H2‰∏çÂ§±‰∏∫‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÔºåËÄå‰∏îH2‰πüÁªèÂ∏∏Áî®Âú®ÊåÅ‰πÖÂ±ÇÁöÑÂçïÂÖÉÊµãËØïÔºåSpring Boot‰∏≠‰ΩøÁî®H2‰πüÂæàÁÆÄÂçïÔºåÂè™Ë¶Å‰∏Ä‰∫õÈÖçÁΩÆÂç≥ÂèØ„ÄÇ È°πÁõÆÁªìÊûÑ‰∏épom.xmlÂÖàÁúãÁúãÊï¥‰ΩìÁöÑÈ°πÁõÆÁªìÊûÑ ‚ûú example-h2 git:(master) ‚úó tree /Users/tao.zeng/share/life-example/example-h2 /Users/tao.zeng/share/life-example/example-h2 ‚îú‚îÄ‚îÄ example-h2.iml ‚îú‚îÄ‚îÄ pom.xml ‚îî‚îÄ‚îÄ src ‚îú‚îÄ‚îÄ main ‚îÇ ‚îú‚îÄ‚îÄ java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ example ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ h2 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ H2DbApplication.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ entity ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ UserEntity.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ repository ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ UserRepository.java ‚îÇ ‚îî‚îÄ‚îÄ resources ‚îÇ ‚îú‚îÄ‚îÄ application.yml ‚îÇ ‚îî‚îÄ‚îÄ db ‚îÇ ‚îú‚îÄ‚îÄ data.sql ‚îÇ ‚îî‚îÄ‚îÄ schema.sql ‚îî‚îÄ‚îÄ test ‚îî‚îÄ‚îÄ java ‚îî‚îÄ‚îÄ com ‚îî‚îÄ‚îÄ iogogogo ‚îî‚îÄ‚îÄ h2 ‚îî‚îÄ‚îÄ H2DbApplicationTests.java 15 directories, 9 files ËøôÈáå‰ΩøÁî®H2Êï∞ÊçÆÔºå‰∏∫‰∫ÜÊñπ‰æøÊµãËØï‰πü‰ΩøÁî®jpaËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåÁ¨¨‰∏ÄÊ≠•ËÇØÂÆöÊòØÈúÄË¶ÅÂºïÂÖ•maven‰æùËµñ &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-jpa&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>com.h2database&lt;/groupId> &lt;artifactId>h2&lt;/artifactId> &lt;scope>runtime&lt;/scope> &lt;/dependency> ÂàõÂª∫Êï∞ÊçÆÂ∫ìËÑöÊú¨‰∏éÂàùÂßãÂåñÊï∞ÊçÆËÑöÊú¨ schema.sql create table user_info ( id bigint auto_increment primary key not null, name varchar(255) not null, birthday datetime not null, remark varchar(2048) default null ); data.sql insert into user_info values (1, 'ÈòøÁâõ', '2020-01-05 15:40:00', 'ÂìàÂìàÂìà'); ÈÖçÁΩÆÊñá‰ª∂server: port: 8081 spring: datasource: url: jdbc:h2:mem:h2-test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE username: sa password: platform: h2 driver-class-name: org.h2.Driver hikari: # http://blog.didispace.com/Springboot-2-0-HikariCP-default-reason/ minimum-idle: 5 maximum-pool-size: 20 auto-commit: true idle-timeout: 30000 pool-name: H2HikariCP max-lifetime: 1800000 connection-timeout: 30000 connection-test-query: SELECT 1 schema: classpath:db/schema.sql data: classpath:db/data.sql jpa: database-platform: org.hibernate.dialect.H2Dialect show-sql: true hibernate: ddl-auto: update properties: hibernate: use_sql_comments: true format_sql: true h2: console: # ËøõË°åËØ•ÈÖçÁΩÆÔºåÁ®ãÂ∫èÂºÄÂêØÊó∂Â∞±‰ºöÂêØÂä®h2 web console„ÄÇÂΩìÁÑ∂ËøôÊòØÈªòËÆ§ÁöÑÔºåÂ¶ÇÊûú‰Ω†‰∏çÊÉ≥Âú®ÂêØÂä®Á®ãÂ∫èÊó∂ÂêØÂä®h2 web consoleÔºåÈÇ£‰πàÂ∞±ËÆæÁΩÆ‰∏∫false„ÄÇ enabled: true # ËøõË°åËØ•ÈÖçÁΩÆÔºå‰Ω†Â∞±ÂèØ‰ª•ÈÄöËøá URL/h2-consoleËÆøÈóÆh2 web console„ÄÇ path: /h2-console settings: trace: false # ËøõË°åËØ•ÈÖçÁΩÆÂêéÔºåh2 web console Â∞±ÂèØ‰ª•Âú®ËøúÁ®ãËÆøÈóÆ‰∫Ü„ÄÇÂê¶ÂàôÂè™ËÉΩÂú®Êú¨Êú∫ËÆøÈóÆ„ÄÇ web-allow-others: false application.yml‰∏≠ÔºåÂàÜÂà´Êúâdatasource„ÄÅjpa„ÄÅh2Á≠âÈÖçÁΩÆ datasouceÂÖ∂‰∏≠url‰ΩøÁî®‰∫Üh2ÁöÑÈÖçÁΩÆËøûÊé•Â≠óÁ¨¶‰∏≤ÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜhikariÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÔºåËØ¶ÁªÜ‰ø°ÊÅØËØ∑Êü•ÁúãSpringboot 2.0ÈÄâÊã©HikariCP‰Ωú‰∏∫ÈªòËÆ§Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÁöÑ‰∫îÂ§ßÁêÜÁî± jpajpa‰∏≠ÈÖçÁΩÆ‰∫ÜÊï∞ÊçÆÂ∫ìÊñπË®Ädatabase-platformÔºåÊòæÁ§∫sqlÁ≠âÈÖçÁΩÆ h2spring.datasource.schema=classpath:db/schema.sqlËøõË°åËØ•ÈÖçÁΩÆÂêéÔºåÊØèÊ¨°ÂêØÂä®Á®ãÂ∫èÔºåÁ®ãÂ∫èÈÉΩ‰ºöËøêË°åresources/db/schema.sqlÊñá‰ª∂ÔºåÂØπÊï∞ÊçÆÂ∫ìÁöÑÁªìÊûÑËøõË°åÊìç‰Ωú„ÄÇ spring.datasource.data=classpath:db/data.sqlËøõË°åËØ•ÈÖçÁΩÆÂêéÔºåÊØèÊ¨°ÂêØÂä®Á®ãÂ∫èÔºåÁ®ãÂ∫èÈÉΩ‰ºöËøêË°åresources/db/data.sqlÊñá‰ª∂ÔºåÂØπÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÊìç‰Ωú„ÄÇ h2 web consoleÈÖçÁΩÆh2 web consoleÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìGUIÁÆ°ÁêÜÂ∫îÁî®ÔºåÂ∞±ÂíåphpMyAdminÁ±ª‰ºº„ÄÇÁ®ãÂ∫èËøêË°åÊó∂Ôºå‰ºöËá™Âä®ÂêØÂä®h2 web console„ÄÇÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•ËøõË°åÂ¶Ç‰∏ãÁöÑÈÖçÁΩÆ„ÄÇ spring.h2.console.settings.web-allow-others=trueÔºåËøõË°åËØ•ÈÖçÁΩÆÂêéÔºåh2 web consoleÂ∞±ÂèØ‰ª•Âú®ËøúÁ®ãËÆøÈóÆ‰∫Ü„ÄÇÂê¶ÂàôÂè™ËÉΩÂú®Êú¨Êú∫ËÆøÈóÆ„ÄÇ spring.h2.console.path=/h2-consoleÔºåËøõË°åËØ•ÈÖçÁΩÆÔºå‰Ω†Â∞±ÂèØ‰ª•ÈÄöËøá URL/h2-consoleËÆøÈóÆh2 web console„ÄÇ spring.h2.console.enabled=trueÔºåËøõË°åËØ•ÈÖçÁΩÆÔºåÁ®ãÂ∫èÂºÄÂêØÊó∂Â∞±‰ºöÂêØÂä®h2 web console„ÄÇÂΩìÁÑ∂ËøôÊòØÈªòËÆ§ÁöÑÔºåÂ¶ÇÊûú‰Ω†‰∏çÊÉ≥Âú®ÂêØÂä®Á®ãÂ∫èÊó∂ÂêØÂä®h2 web consoleÔºåÈÇ£‰πàÂ∞±ËÆæÁΩÆ‰∏∫false„ÄÇ ÂÆû‰ΩìÁ±ªpackage com.example.h2.entity; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import javax.persistence.Column; import javax.persistence.Entity; import javax.persistence.Id; import javax.persistence.Table; import java.io.Serializable; import java.time.LocalDateTime; /** * Created by tao.zeng on 2020-01-05. */ @Data @Entity @NoArgsConstructor @AllArgsConstructor @Table(name = \"user_info\") public class UserEntity implements Serializable { @Id private Long id; private String name; @Column(name = \"birthday\") private LocalDateTime birthday; private String remark; public UserEntity(String name, LocalDateTime birthday, String remark) { this.name = name; this.birthday = birthday; this.remark = remark; } } repositorypackage com.example.h2.repository; import com.example.h2.entity.UserEntity; import org.springframework.data.jpa.repository.JpaRepository; /** * Created by tao.zeng on 2020-01-05. */ public interface UserRepository extends JpaRepository&lt;UserEntity, Long> { } ÊµãËØï‰∏∫‰∫ÜÊñπ‰æøÊü•ÁúãÁªìÊûúÔºåÂÜô‰∏Ä‰∏™ÊµãËØïÁ±ªÊü•ÁúãÁªìÊûú import com.example.h2.H2DbApplication; import com.example.h2.entity.UserEntity; import com.example.h2.repository.UserRepository; import lombok.extern.slf4j.Slf4j; import org.junit.Ignore; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.junit4.SpringRunner; import java.time.LocalDateTime; import java.util.Optional; import java.util.UUID; /** * Created by tao.zeng on 2020-01-05. */ @Slf4j @Ignore @RunWith(SpringRunner.class) @SpringBootTest(classes = H2DbApplication.class) public class H2DbApplicationTests { @Autowired private UserRepository userRepository; @Test public void test() { // Êñ∞Â¢ûÊï∞ÊçÆ UserEntity entity = userRepository.save(new UserEntity(\"ÈòøÁâõ\" + UUID.randomUUID().toString(), LocalDateTime.now(), \"Êñ∞Â¢ûÊµãËØï\")); log.info(\"Êñ∞Â¢ûÁªìÊûú:{}\\n\", entity); // ‰øÆÊîπÊï∞ÊçÆ entity = userRepository.save(new UserEntity(1L, \"ÂìàÂìàÂìàÂìà\", LocalDateTime.now(), \"‰øÆÊîπ‰ª•ÂêéÁöÑÁªìÊûú\")); log.info(\"ÊåâÁÖßid‰øÆÊîπÁªìÊûú:{}\\n\", entity); // ÊåâÁÖßidÊü•ËØ¢ Optional&lt;UserEntity> optional = userRepository.findById(1L); optional.ifPresent(x -> log.info(\"ÊåâÁÖßidÊü•ËØ¢ÁªìÊûú:{}\\n\", x)); // Êü•ËØ¢ÊâÄÊúâ log.info(\"Êü•ËØ¢ÊâÄÊúâ\"); Iterable&lt;UserEntity> iterable = userRepository.findAll(); iterable.forEach(x -> log.info(\"item:{}\", x)); // Âà†Èô§Êï∞ÊçÆ userRepository.deleteById(1L); // Âà†Èô§id=1ÁöÑÊï∞ÊçÆ‰ª•Âêé System.out.println(); log.info(\"Âà†Èô§id=1ÁöÑÊï∞ÊçÆ‰ª•Âêé\"); iterable = userRepository.findAll(); iterable.forEach(x -> log.info(\"item:{}\", x)); } } ÊµãËØïÁªìÊûúÂ¶Ç‰∏ã 2020-01-05 18:07:40.499 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : Êñ∞Â¢ûÁªìÊûú:UserEntity(id=2, name=ÈòøÁâõ33dc0a6d-29cd-4e79-9ae4-ad64b1588e69, birthday=2020-01-05T18:07:40.383, remark=Êñ∞Â¢ûÊµãËØï) 2020-01-05 18:07:40.527 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : ÊåâÁÖßid‰øÆÊîπÁªìÊûú:UserEntity(id=1, name=ÂìàÂìàÂìàÂìà, birthday=2020-01-05T18:07:40.500, remark=‰øÆÊîπ‰ª•ÂêéÁöÑÁªìÊûú) 2020-01-05 18:07:40.578 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : ÊåâÁÖßidÊü•ËØ¢ÁªìÊûú:UserEntity(id=1, name=ÂìàÂìàÂìàÂìà, birthday=2020-01-05T18:07:40.500, remark=‰øÆÊîπ‰ª•ÂêéÁöÑÁªìÊûú) 2020-01-05 18:07:40.578 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : Êü•ËØ¢ÊâÄÊúâ 2020-01-05 18:07:40.586 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : item:UserEntity(id=1, name=ÂìàÂìàÂìàÂìà, birthday=2020-01-05T18:07:40.500, remark=‰øÆÊîπ‰ª•ÂêéÁöÑÁªìÊûú) 2020-01-05 18:07:40.586 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : item:UserEntity(id=2, name=ÈòøÁâõ33dc0a6d-29cd-4e79-9ae4-ad64b1588e69, birthday=2020-01-05T18:07:40.383, remark=Êñ∞Â¢ûÊµãËØï) 2020-01-05 18:07:40.602 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : Âà†Èô§id=1ÁöÑÊï∞ÊçÆ‰ª•Âêé 2020-01-05 18:07:40.604 INFO 28214 --- [ main] com.iogogogo.h2.H2DbApplicationTests : item:UserEntity(id=2, name=ÈòøÁâõ33dc0a6d-29cd-4e79-9ae4-ad64b1588e69, birthday=2020-01-05T18:07:40.383, remark=Êñ∞Â¢ûÊµãËØï) ÂÆåÊï¥‰ª£Á†Åhttps://github.com/iogogogo/life-example/tree/master/example-h2","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Java8 Â§ÑÁêÜÂ∏∏ËßÅÁöÑÊó•ÊúüÂë®Êúü","slug":"java8-date-cycle","date":"2020-01-04T05:56:18.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2020/01/04/java8-date-cycle/","link":"","permalink":"http://iogogogo.github.io/2020/01/04/java8-date-cycle/","excerpt":"","text":"Êó•Â∏∏ÂºÄÂèë‰∏≠ÔºåÁªèÂ∏∏‰ºöÊúâËé∑ÂèñÂë®„ÄÅÊúà„ÄÅÂ≠£Â∫¶ÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥ÁöÑÈúÄÊ±ÇÔºåJava8‰πãÂâçÁöÑdateÁ±ªÂíåCalendarÁªìÂêà‰πüÂèØ‰ª•ÂÆûÁé∞Ôºå‰ΩÜÊòØËøòÊòØÊØîËæÉÂ§çÊùÇÔºå‰∏ãÈù¢‰ΩøÁî®Java8ÁöÑÊó•ÊúüapiËé∑ÂèñÂë®ÊúàÂ≠£ÁöÑÂë®Êúü„ÄÇ Ëé∑ÂèñÂΩìÂâçÊòØÂë®Âá†LocalDateTime now = LocalDateTime.now(); System.out.println(now); System.out.println(now.getDayOfWeek().getValue()); // ËæìÂá∫ÁªìÊûú 2020-01-04T14:07:15.870 6 Ëé∑ÂèñÂΩìÂâçÂë®ÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥LocalDateTime now = LocalDateTime.now(); System.out.println(\"ÂΩìÂâçÊó∂Èó¥:\" + now + \"\\n\"); //ÂΩìÂâçÊó∂Èó¥ÂáèÂéª‰ªäÂ§©ÊòØÂë®Âá†() LocalDateTime startTime = now.minusDays(now.getDayOfWeek().getValue()); //ÂΩìÂâçÊó∂Èó¥Âä†‰∏äÔºà8-‰ªäÂ§©Âë®Âá†Ôºâ LocalDateTime endTime = now.plusDays(8 - now.getDayOfWeek().getValue()); System.out.println(\"Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:\" + startTime); System.out.println(\"Êú¨Âë®ÁªìÊùüÊó∂Èó¥:\" + endTime); // ËæìÂá∫ÁªìÊûú ÂΩìÂâçÊó∂Èó¥:2020-01-04T14:14:56.110 Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:2019-12-29T14:14:56.110 Êú¨Âë®ÁªìÊùüÊó∂Èó¥:2020-01-06T14:14:56.110 ‰ΩÜÊòØÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰ª•‰∏äËé∑ÂèñÂà∞ÁöÑÁªìÊûú‰∏ÄÂë®ÂºÄÂßãÊòØ‰ªéÂë®Â§©ÂºÄÂßãÁöÑÔºåÂπ∂‰∏çÊòØÊàë‰ª¨Êó•Â∏∏ÁöÑ‰π†ÊÉØ‰ªéÂë®‰∏ÄÂºÄÂßãÔºåÈÇ£‰πàË¶Å‰ªéÂë®‰∏ÄÂºÄÂßãÂèØ‰ª•‰ΩøÁî®WeekFieldsËÆæÁΩÆ‰∏ÄÂë®ÁöÑÂºÄÂßãÊòØÂë®Âá† LocalDateTime now = LocalDateTime.now(); System.out.println(\"ÂΩìÂâçÊó∂Èó¥:\" + now + \"\\n\"); // ‰ΩøÁî®WeekFieldsËÆæÁΩÆ‰∏ÄÂë®ÁöÑÂºÄÂßã‰∏∫Âë®‰∏Ä TemporalField fieldISO = WeekFields.of(DayOfWeek.MONDAY, 1).dayOfWeek(); LocalDateTime startTime = now.with(fieldISO, 1); LocalDateTime endTime = now.with(fieldISO, 7); System.out.println(\"Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:\" + startTime); System.out.println(\"Êú¨Âë®ÁªìÊùüÊó∂Èó¥:\" + endTime); // ËæìÂá∫ÁªìÊûú ÂΩìÂâçÊó∂Èó¥:2020-01-04T14:17:13.176 Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:2019-12-30T14:17:13.176 Êú¨Âë®ÁªìÊùüÊó∂Èó¥:2020-01-05T14:17:13.176 ‰ª•‰∏ä‰∏§ÁßçÊñπÂºèÂèØ‰ª•Ëé∑ÂèñÂà∞Êú¨Âë®ÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥Ôºå‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶Å‰∏ÄÂë®‰ªé00ÁÇπÂºÄÂßãÔºåÂà∞23:59:59ÁßíÁªìÊùüÔºåÂèàËØ•Â¶Ç‰ΩïËÆæÁΩÆÂë¢Ôºü ÂÖ∂ÂÆû‰πüÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÂú®LocalDateTimeÂØπË±°ÁöÑ LocalTimeÂç≥ÂèØ LocalDateTime now = LocalDateTime.now(); System.out.println(\"ÂΩìÂâçÊó∂Èó¥:\" + now + \"\\n\"); // ‰ΩøÁî®WeekFieldsËÆæÁΩÆ‰∏ÄÂë®ÁöÑÂºÄÂßã‰∏∫Âë®‰∏Ä TemporalField fieldISO = WeekFields.of(DayOfWeek.MONDAY, 1).dayOfWeek(); // ËÆæÁΩÆÂºÄÂßãÊó∂Èó¥‰∏∫LocalTime.MIN LocalDateTime startTime = now.with(fieldISO, 1).with(LocalTime.MIN); // ËÆæÁΩÆÁªìÊùüÊó∂Èó¥‰∏∫LocalTime.MAX LocalDateTime endTime = now.with(fieldISO, 7).with(LocalTime.MAX); System.out.println(\"Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:\" + startTime); System.out.println(\"Êú¨Âë®ÁªìÊùüÊó∂Èó¥:\" + endTime); // ËæìÂá∫ÁªìÊûú ÂΩìÂâçÊó∂Èó¥:2020-01-04T14:22:01.291 Êú¨Âë®ÂºÄÂßãÊó∂Èó¥:2019-12-30T00:00 Êú¨Âë®ÁªìÊùüÊó∂Èó¥:2020-01-05T23:59:59.999999999 Ëé∑ÂèñÊú¨ÊúàÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥Â¶ÇÊûú‰∏çÈúÄË¶ÅÊó∂Èó¥ÂΩíÂà∞00ÁÇπÂíå23:59:59ÔºåÂàô‰∏çËÆæÁΩÆLocalTimeÂç≥ÂèØ LocalDateTime now = LocalDateTime.now(); System.out.println(\"ÂΩìÂâçÊó∂Èó¥:\" + now + \"\\n\"); LocalDateTime startTime = now.with(TemporalAdjusters.firstDayOfMonth()).with(LocalTime.MIN); LocalDateTime endTime = now.with(TemporalAdjusters.lastDayOfMonth()).with(LocalTime.MAX); System.out.println(\"Êú¨ÊúàÂºÄÂßãÊó∂Èó¥:\" + startTime); System.out.println(\"Êú¨ÊúàÁªìÊùüÊó∂Èó¥:\" + endTime); // ËæìÂá∫ÁªìÊûú ÂΩìÂâçÊó∂Èó¥:2020-01-04T14:27:33.706 Êú¨ÊúàÂºÄÂßãÊó∂Èó¥:2020-01-01T00:00 Êú¨ÊúàÁªìÊùüÊó∂Èó¥:2020-01-31T23:59:59.999999999 Ëé∑Âèñ‰∏Ä‰∏™Â≠£Â∫¶ÁöÑÂºÄÂßãÂíåÁªìÊûúËé∑ÂèñÂ≠£Â∫¶ÁöÑÂºÄÂßãÂíåÁªìÊùüJava8Âπ∂Ê≤°ÊúâÊèê‰æõÁõ¥Êé•ÁöÑapi‰ΩøÁî®Ôºå‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®TemporalQueryËøõË°åËá™ÂÆö‰πâÊü•ËØ¢Ëé∑ÂèñÔºåËÄå‰∏îÂ≠£Â∫¶ÂíåÊúàÂ∫¶‰ª•ÂèäÂë®Êúâ‰∫õËÆ∏‰∏çÂêåÔºåÊØèÂπ¥ÁöÑÂ≠£Â∫¶ÂºÄÂßãÂíåÁªìÊùüÈÉΩÊòØÂõ∫ÂÆöÁöÑ ‰∏ÄÂ≠£Â∫¶ÁöÑÂßãÁªàÊòØÊØèÂπ¥ÁöÑ01.01-03.31 ‰∫åÂ≠£Â∫¶ÁöÑÂßãÁªàÊòØÊØèÂπ¥ÁöÑ04.01-06.30 ‰∏âÂ≠£Â∫¶ÁöÑÂßãÁªàÊòØÊØèÂπ¥ÁöÑ07.01-09.30 ÂõõÂ≠£Â∫¶ÁöÑÂßãÁªàÊòØÊØèÂπ¥ÁöÑ10.01-12.31 Â∫üËØù‰∏çÂ§öËØ¥ÔºåÁõ¥Êé•‰∏ä‰ª£Á†ÅÔºåÂÖàÂÆö‰πâ‰∫Ü‰∏Ä‰∏™QuarterCycleÁ±ª getQuarterRangeÊñπÊ≥ï‰∏≠‰ΩøÁî®‰∫ÜTupleÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÊñπ‰æøÂ≠òÂÇ®ÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥Ôºå‰πüÂèØ‰ª•‰ΩøÁî®LocalDateTime[]Â≠òÂÇ®ÔºåÂπ∂Ê≤°ÊúâÁâπÊÆäÊÑè‰πâ QuarterCycle import io.vavr.Tuple; import io.vavr.Tuple2; import java.time.LocalDate; import java.time.LocalDateTime; import java.time.LocalTime; import java.time.Month; import java.time.temporal.TemporalAccessor; import java.time.temporal.TemporalQuery; /** * Created by tao.zeng on 2020-01-03. */ public class QuarterCycle { /** * ÂÆö‰πâÂõõ‰∏™Â≠£Â∫¶Êûö‰∏æÂÄº */ enum QuarterEnum { FIRST, SECOND, THIRD, FOURTH } class QuarterOfYearQuery implements TemporalQuery&lt;QuarterEnum> { @Override public QuarterEnum queryFrom(TemporalAccessor temporal) { LocalDate now = LocalDate.from(temporal); if (now.isBefore(now.with(Month.APRIL).withDayOfMonth(1))) { return QuarterEnum.FIRST; } else if (now.isBefore(now.with(Month.JULY).withDayOfMonth(1))) { return QuarterEnum.SECOND; } else if (now.isBefore(now.with(Month.OCTOBER).withDayOfMonth(1))) { return QuarterEnum.THIRD; } else { return QuarterEnum.FOURTH; } } } /** * Ê†πÊçÆ LocalDateTime Ëé∑ÂèñÂ≠£Â∫¶ * * @param dateTime * @return */ public int getQuarter(LocalDateTime dateTime) { return getQuarter(dateTime.toLocalDate()); } /** * Ê†πÊçÆ LocalDate Ëé∑ÂèñÂ≠£Â∫¶ * * @param date * @return */ public int getQuarter(LocalDate date) { TemporalQuery&lt;QuarterEnum> quarterOfYearQuery = new QuarterOfYearQuery(); QuarterEnum quarter = date.query(quarterOfYearQuery); switch (quarter) { case FIRST: return 1; case SECOND: return 2; case THIRD: return 3; case FOURTH: return 4; } return 0; } public Tuple2&lt;LocalDateTime, LocalDateTime> getQuarterRange(LocalDateTime dateTime, int quarter) { return getQuarterRange(dateTime.getYear(), quarter); } public Tuple2&lt;LocalDateTime, LocalDateTime> getQuarterRange(LocalDate dateTime, int quarter) { return getQuarterRange(dateTime.getYear(), quarter); } /** * Ëé∑ÂèñÊüêÂπ¥ÊüêÂ≠£Â∫¶ÁöÑÁ¨¨‰∏ÄÂ§©ÂíåÊúÄÂêé‰∏ÄÂ§© * * @param year Âì™‰∏ÄÂπ¥ * @param quarter Á¨¨Âá†Â≠£Â∫¶ */ public Tuple2&lt;LocalDateTime, LocalDateTime> getQuarterRange(int year, int quarter) { LocalDate startDate, endDate; switch (quarter) { case 1: // 01.01-03.31 startDate = LocalDate.of(year, 1, 1); endDate = LocalDate.of(year, 3, 31); break; case 2: // 04.01-06.30 startDate = LocalDate.of(year, 4, 1); endDate = LocalDate.of(year, 6, 30); break; case 3: // 07.01-09.30 startDate = LocalDate.of(year, 7, 1); endDate = LocalDate.of(year, 9, 30); break; case 4: // 10.01-12.31 startDate = LocalDate.of(year, 10, 1); endDate = LocalDate.of(year, 12, 31); break; default: throw new RuntimeException(\"quarter range [1-4]\"); } return Tuple.of(startDate.atTime(LocalTime.MIN), endDate.atTime(LocalTime.MAX)); } } ÊµãËØï‰ª£Á†ÅQuarterCycle quarterCycle = new QuarterCycle(); LocalDateTime now = LocalDateTime.now(); System.out.println(\"ÂΩìÂâçÊó∂Èó¥:\" + now + \"\\n\"); int quarter = quarterCycle.getQuarter(now); System.out.println(\"ÂΩìÂâçÂ≠£Â∫¶:\" + quarter + \"\\n\"); Tuple2&lt;LocalDateTime, LocalDateTime> tuple2 = quarterCycle.getQuarterRange(now, quarter); System.out.println(\"ÂΩìÂâçÂ≠£Â∫¶ÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥:\" + tuple2 + \"\\n\"); // ËæìÂá∫ÁªìÊûú ÂΩìÂâçÊó∂Èó¥:2020-01-04T15:17:43.949 ÂΩìÂâçÂ≠£Â∫¶:1 ÂΩìÂâçÂ≠£Â∫¶ÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥:(2020-01-01T00:00, 2020-03-31T23:59:59.999999999) Â∏∏Áî®ÊñπÊ≥ïÊï¥ÁêÜ ÊñπÊ≥ï ‰ΩúÁî® adjustInto Ë∞ÉÊï¥ÊåáÂÆöÁöÑTemporalÂíåÂΩìÂâçLocalDateTimeÂØπ atOffset ÁªìÂêàLocalDateTimeÂíåZoneOffsetÂàõÂª∫‰∏Ä‰∏™ atZone ÁªìÂêàLocalDateTimeÂíåÊåáÂÆöÊó∂Âå∫ÂàõÂª∫‰∏Ä‰∏™ZonedD compareTo ÊØîËæÉ‰∏§‰∏™LocalDateTime format Ê†ºÂºèÂåñLocalDateTimeÁîüÊàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ from ËΩ¨Êç¢TemporalAccessor‰∏∫LocalDateTime get ÂæóÂà∞LocalDateTimeÁöÑÊåáÂÆöÂ≠óÊÆµÁöÑÂÄº getDayOfMonth ÂæóÂà∞LocalDateTimeÊòØÊúàÁöÑÁ¨¨Âá†Â§© getDayOfWeek ÂæóÂà∞LocalDateTimeÊòØÊòüÊúüÂá† getDayOfYear ÂæóÂà∞LocalDateTimeÊòØÂπ¥ÁöÑÁ¨¨Âá†Â§© getHour ÂæóÂà∞LocalDateTimeÁöÑÂ∞èÊó∂ getLong ÂæóÂà∞LocalDateTimeÊåáÂÆöÂ≠óÊÆµÁöÑÂÄº getMinute ÂæóÂà∞LocalDateTimeÁöÑÂàÜÈíü getMonth ÂæóÂà∞LocalDateTimeÁöÑÊúà‰ªΩ getMonthValue ÂæóÂà∞LocalDateTimeÁöÑÊúà‰ªΩÔºå‰ªé1Âà∞12 getNano ÂæóÂà∞LocalDateTimeÁöÑÁ∫≥ÁßíÊï∞ getSecond ÂæóÂà∞LocalDateTimeÁöÑÁßíÊï∞ getYear ÂæóÂà∞LocalDateTimeÁöÑÂπ¥‰ªΩ isAfter Âà§Êñ≠LocalDateTimeÊòØÂê¶Âú®ÊåáÂÆöLocalDateTime‰πãÂêé isBefore Âà§Êñ≠LocalDateTimeÊòØÂê¶Âú®ÊåáÂÆöLocalDateTime‰πãÂâç isEqual Âà§Êñ≠‰∏§‰∏™LocalDateTimeÊòØÂê¶Áõ∏Á≠â isSupported Âà§Êñ≠LocalDateTimeÊòØÂê¶ÊîØÊåÅÊåáÂÆöÊó∂Èó¥Â≠óÊÆµÊàñÂçïÂÖÉ minus ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÊï∞ÈáèÁöÑÊó∂Èó¥ÂæóÂà∞ÁöÑÂÄº minusDays ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÂ§©Êï∞ÂæóÂà∞ÁöÑÂÄº minusHours ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÂ∞èÊó∂Êï∞ÂæóÂà∞ÁöÑÂÄº minusMinutes ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÂàÜÈíüÊï∞ÂæóÂà∞ÁöÑÂÄº minusMonths ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÊúàÊï∞ÂæóÂà∞ÁöÑÂÄº minusNanos ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÁ∫≥ÁßíÊï∞ÂæóÂà∞ÁöÑÂÄº minusSeconds ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÁßíÊï∞ÂæóÂà∞ÁöÑÂÄº minusWeeks ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÊòüÊúüÊï∞ÂæóÂà∞ÁöÑÂÄº minusYears ËøîÂõûLocalDateTimeÂáèÂéªÊåáÂÆöÂπ¥Êï∞ÂæóÂà∞ÁöÑÂÄº now ËøîÂõûÊåáÂÆöÊó∂ÈíüÁöÑÂΩìÂâçLocalDateTime of Ê†πÊçÆÂπ¥„ÄÅÊúà„ÄÅÊó•„ÄÅÊó∂„ÄÅÂàÜ„ÄÅÁßí„ÄÅÁ∫≥ÁßíÁ≠âÂàõÂª∫LocalDateTime ofEpochSecond Ê†πÊçÆÁßíÊï∞(‰ªé1970-01-0100:00:00ÂºÄÂßã)ÂàõÂª∫LocalDateTime ofInstant Ê†πÊçÆInstantÂíåZoneIdÂàõÂª∫LocalDateTime parse Ëß£ÊûêÂ≠óÁ¨¶‰∏≤ÂæóÂà∞LocalDateTime plus ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÊï∞ÈáèÁöÑÊó∂Èó¥ÂæóÂà∞ÁöÑÂÄº plusDays ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÂ§©Êï∞ÂæóÂà∞ÁöÑÂÄº plusHours ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÂ∞èÊó∂Êï∞ÂæóÂà∞ÁöÑÂÄº plusMinutes ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÂàÜÈíüÊï∞ÂæóÂà∞ÁöÑÂÄº plusMonths ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÊúàÊï∞ÂæóÂà∞ÁöÑÂÄº plusNanos ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÁ∫≥ÁßíÊï∞ÂæóÂà∞ÁöÑÂÄº plusSeconds ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÁßíÊï∞ÂæóÂà∞ÁöÑÂÄº plusWeeks ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÊòüÊúüÊï∞ÂæóÂà∞ÁöÑÂÄº plusYears ËøîÂõûLocalDateTimeÂä†‰∏äÊåáÂÆöÂπ¥Êï∞ÂæóÂà∞ÁöÑÂÄº query Êü•ËØ¢LocalDateTime range ËøîÂõûÊåáÂÆöÊó∂Èó¥Â≠óÊÆµÁöÑËåÉÂõ¥ toLocalDate ËøîÂõûLocalDateTimeÁöÑLocalDateÈÉ®ÂàÜ toLocalTime ËøîÂõûLocalDateTimeÁöÑLocalTimeÈÉ®ÂàÜ toString ËøîÂõûLocalDateTimeÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ truncatedTo ËøîÂõûLocalDateTimeÊà™ÂèñÂà∞ÊåáÂÆöÊó∂Èó¥Âçï‰ΩçÁöÑÊã∑Ë¥ù until ËÆ°ÁÆóLocalDateTimeÂíåÂè¶‰∏Ä‰∏™LocalDateTime with ËøîÂõûLocalDateTimeÊåáÂÆöÂ≠óÊÆµÊõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withDayOfMonth ËøîÂõûLocalDateTimeÊúàÁöÑÁ¨¨Âá†Â§©Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withDayOfYear ËøîÂõûLocalDateTimeÂπ¥ÁöÑÁ¨¨Âá†Â§©Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withHour ËøîÂõûLocalDateTimeÁöÑÂ∞èÊó∂Êï∞Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withMinute ËøîÂõûLocalDateTimeÁöÑÂàÜÈíüÊï∞Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withMonth ËøîÂõûLocalDateTimeÁöÑÊúà‰ªΩÊõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withNano ËøîÂõûLocalDateTimeÁöÑÁ∫≥ÁßíÊï∞Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withSecond ËøîÂõûLocalDateTimeÁöÑÁßíÊï∞Êõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù withYear ËøîÂõûLocalDateTimeÂπ¥‰ªΩÊõ¥Êîπ‰∏∫Êñ∞ÂÄºÂêéÁöÑÊã∑Ë¥ù","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Swagger2 Â∏∏Áî®Ê≥®Ëß£","slug":"swagger-annotation","date":"2020-01-03T12:15:43.000Z","updated":"2024-07-01T12:30:37.380Z","comments":true,"path":"2020/01/03/swagger-annotation/","link":"","permalink":"http://iogogogo.github.io/2020/01/03/swagger-annotation/","excerpt":"","text":"Spring Boot ÂºÄÂèërestfulÊé•Âè£Êó∂ÔºåÂæÄÂæÄ‰ºöÊúâÂæàÂ§öRESTful APIÔºå‰∏ÄËà¨‰ºöÈÄâÊã©swaggerÂØπÊé•Âè£ËøõË°åÁÆ°ÁêÜ Spring BootÊ∑ªÂä†swaggerÊîØÊåÅ&lt;dependency> &lt;groupId>io.springfox&lt;/groupId> &lt;artifactId>springfox-swagger2&lt;/artifactId> &lt;version>2.9.2&lt;/version> &lt;/dependency> &lt;dependency> &lt;groupId>io.springfox&lt;/groupId> &lt;artifactId>springfox-swagger-ui&lt;/artifactId> &lt;version>2.9.2&lt;/version> &lt;/dependency> ÈÖçÁΩÆÁ±ª import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import springfox.documentation.builders.ApiInfoBuilder; import springfox.documentation.builders.ParameterBuilder; import springfox.documentation.builders.PathSelectors; import springfox.documentation.builders.RequestHandlerSelectors; import springfox.documentation.schema.ModelRef; import springfox.documentation.service.ApiInfo; import springfox.documentation.service.Parameter; import springfox.documentation.spi.DocumentationType; import springfox.documentation.spring.web.plugins.Docket; import springfox.documentation.swagger2.annotations.EnableSwagger2; import java.util.List; import java.util.stream.Collectors; import java.util.stream.Stream; @Configuration @EnableSwagger2 public class Swagger2Configuration { @Bean public Docket createRestApi() { // ÊûÑÂª∫‰∏Ä‰∏™header ParameterBuilder parameterBuilder = new ParameterBuilder() .parameterType(\"header\") .name(BaseConst.AUTH_TOKEN) .defaultValue(null) .description(\"token\") .modelRef(new ModelRef(\"string\")) .required(false); List&lt;Parameter> parameters = Stream.of(parameterBuilder.build()).collect(Collectors.toList()); return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).globalOperationParameters(parameters).select() .apis(RequestHandlerSelectors.basePackage(\"com.iogogogo\")) .paths(PathSelectors.any()) .build(); } private ApiInfo apiInfo() { return new ApiInfoBuilder() .title(\"RESTful APIs\") .description(\"ÊèèËø∞\") .termsOfServiceUrl(\"\").contact(new Contact(\"name\", \"url\", \"email\")) .version(\"1.0\") .build(); } } Ê≥®Ëß£ËØ¶ÁªÜËØ¥Êòé Â±ûÊÄß ÂèñÂÄº ‰ΩúÁî® ‰ΩúÁî®ËåÉÂõ¥ @API ‰ΩøÁî®‰ΩçÁΩÆ ÂØπË±°Â±ûÊÄß @ApiModelProperty Áî®Âú®Âá∫ÂÖ•ÂèÇÊï∞ÂØπË±°ÁöÑÂ≠óÊÆµ‰∏ä ÂçèËÆÆÈõÜÊèèËø∞ @Api Áî®‰∫écontrollerÁ±ª‰∏ä ÂçèËÆÆÊèèËø∞ @ApiOperation Áî®Âú®controllerÁöÑÊñπÊ≥ï‰∏ä ResponseÈõÜ @ApiResponses Áî®Âú®controllerÁöÑÊñπÊ≥ï‰∏ä Response @ApiResponse Áî®Âú® @ApiResponsesÈáåËæπ ÈùûÂØπË±°ÂèÇÊï∞ÈõÜ @ApiImplicitParams Áî®Âú®controllerÁöÑÊñπÊ≥ï‰∏ä ÈùûÂØπË±°ÂèÇÊï∞ÊèèËø∞ @ApiImplicitParam Áî®Âú®@ApiImplicitParamsÁöÑÊñπÊ≥ïÈáåËæπ ÊèèËø∞ËøîÂõûÂØπË±°ÁöÑÊÑè‰πâ @ApiModel Áî®Âú®ËøîÂõûÂØπË±°Á±ª‰∏ä Ê†áËÆ∞@RequestBody @ApiParam Áî®Âú®ÊñπÊ≥ïÂèÇÊï∞ @ApiImplicitParam Â±ûÊÄß ÂèñÂÄº ‰ΩúÁî® paramType Êü•ËØ¢ÂèÇÊï∞Á±ªÂûã path ‰ª•Âú∞ÂùÄÁöÑÂΩ¢ÂºèÊèê‰∫§Êï∞ÊçÆ query Áõ¥Êé•Ë∑üÂèÇÊï∞ÂÆåÊàêËá™Âä®Êò†Â∞ÑËµãÂÄº body ‰ª•ÊµÅÁöÑÂΩ¢ÂºèÊèê‰∫§ ‰ªÖÊîØÊåÅPOST header ÂèÇÊï∞Âú®request headers ÈáåËæπÊèê‰∫§ form ‰ª•formË°®ÂçïÁöÑÂΩ¢ÂºèÊèê‰∫§ ‰ªÖÊîØÊåÅPOST dataType ÂèÇÊï∞ÁöÑÊï∞ÊçÆÁ±ªÂûã Âè™‰Ωú‰∏∫Ê†áÂøóËØ¥Êòé ‰∏ç‰ºöÈ™åËØÅ Long String Integer name Êé•Êî∂ÂèÇÊï∞Âêç value Êé•Êî∂ÂèÇÊï∞ÁöÑÊÑè‰πâÊèèËø∞ required ÂèÇÊï∞ÊòØÂê¶ÂøÖÂ°´ true ÂøÖÂ°´ false ÈùûÂøÖÂ°´ defaultValue ÈªòËÆ§ÂÄº","categories":[{"name":"Swagger","slug":"Swagger","permalink":"http://iogogogo.github.io/categories/Swagger/"}],"tags":[{"name":"Swagger","slug":"Swagger","permalink":"http://iogogogo.github.io/tags/Swagger/"}]},{"title":"mavenÂΩíÊ°£Êèí‰ª∂assembly‰ªãÁªç","slug":"maven-assembly","date":"2020-01-02T12:19:25.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2020/01/02/maven-assembly/","link":"","permalink":"http://iogogogo.github.io/2020/01/02/maven-assembly/","excerpt":"","text":"2020Âπ¥ÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†ÔºåÁ•ùÂ§ßÂÆ∂Êñ∞Âπ¥Âø´‰πêÔºÅ assemblyÊèí‰ª∂‰∏ªË¶ÅÁî®‰∫éÂØπÊâìÂåÖ‰ª•ÂêéÁöÑÊñá‰ª∂ËøõË°åÂΩíÊ°£Â§ÑÁêÜÔºåÊØîÂ¶ÇÈ°πÁõÆ‰∏≠ÁöÑjarÔºåÈÖçÁΩÆÊñá‰ª∂ÔºåËÑöÊú¨‚Ä¶. ÊâìÂåÖÈúÄË¶ÅÂΩíÊ°£Âà∞‰∏ÄËµ∑Êó∂ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®maven-assembly-plugin„ÄÇassembly‰ΩøÁî®ÂæàÁÆÄÂçïÔºåÁ¨¨‰∏ÄÊòØÈúÄË¶ÅÊ∑ªÂä†ÂØπÂ∫îÁöÑmavenÊèí‰ª∂ÔºåÁ¨¨‰∫åÂ∞±ÊòØÊ∑ªÂä†assemblyÈúÄË¶ÅÂΩíÊ°£ÁöÑÊèèËø∞Êñá‰ª∂ È°πÁõÆÁªìÊûÑËøôÈáåÁî®‰πãÂâçÁöÑ‰∏Ä‰∏™‰ªãÁªçÁöÑmavenÂ§öÊ®°ÂùóÈ°πÁõÆÈÖçÁΩÆÊù•ËøõË°åÈÖçÁΩÆ ‚ûú life-multi-module git:(master) ‚úó tree . ‚îú‚îÄ‚îÄ HELP.md ‚îú‚îÄ‚îÄ life-multi-module.iml ‚îú‚îÄ‚îÄ multi-api ‚îÇ ‚îú‚îÄ‚îÄ multi-api.iml ‚îÇ ‚îú‚îÄ‚îÄ pom.xml ‚îÇ ‚îî‚îÄ‚îÄ src ‚îÇ ‚îú‚îÄ‚îÄ assembly ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ assembly-descriptor.xml ‚îÇ ‚îú‚îÄ‚îÄ main ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ java ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iogogogo ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ MainApplication.java ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ java-templates ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iogogogo ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ Version.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ resources ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ git.properties ‚îÇ ‚îî‚îÄ‚îÄ test ‚îÇ ‚îî‚îÄ‚îÄ java ‚îú‚îÄ‚îÄ multi-common ‚îÇ ‚îú‚îÄ‚îÄ multi-common.iml ‚îÇ ‚îú‚îÄ‚îÄ pom.xml ‚îÇ ‚îî‚îÄ‚îÄ src ‚îÇ ‚îú‚îÄ‚îÄ main ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ java ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ com ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iogogogo ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ common ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CommonApplication.java ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ util ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ IdHelper.java ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ resources ‚îÇ ‚îî‚îÄ‚îÄ test ‚îÇ ‚îî‚îÄ‚îÄ java ‚îú‚îÄ‚îÄ mvnw ‚îú‚îÄ‚îÄ mvnw.cmd ‚îî‚îÄ‚îÄ pom.xml Ê∑ªÂä†mavenÈÖçÁΩÆÂ¶ÇÊûúÊòØÂú®Â§öÊ®°ÂùóÈ°πÁõÆ‰∏ãÔºåËØ•ÈÖçÁΩÆÊîæÂú®ÂØπÂ∫îÊ®°Âùó‰∏ãÔºå‰∏çË¶ÅÊîæÂú®parent pom.xml‰∏≠ÔºåÁ§∫‰æãÊîæÂú®./multi-api/pom.xml &lt;plugin> &lt;groupId>org.apache.maven.plugins&lt;/groupId> &lt;artifactId>maven-assembly-plugin&lt;/artifactId> &lt;version>3.1.0&lt;/version> &lt;executions> &lt;execution> &lt;!-- Âú®package‰ªªÂä°‰ª•ÂêéÊâßË°å --> &lt;phase>package&lt;/phase> &lt;goals> &lt;goal>single&lt;/goal> &lt;/goals> &lt;configuration> &lt;!-- Áîü‰∫ßÂéãÁº©ÂåÖÂêçÁß∞ --> &lt;finalName>${project.artifactId}-${project.version}-${timestamp}&lt;/finalName> &lt;appendAssemblyId>false&lt;/appendAssemblyId> &lt;!-- assemblyÈÖçÁΩÆÊèèËø∞Êñá‰ª∂ --> &lt;descriptors> &lt;descriptor>src/assembly/assembly-descriptor.xml&lt;/descriptor> &lt;/descriptors> &lt;/configuration> &lt;/execution> &lt;/executions> &lt;/plugin> assemblyÈÖçÁΩÆÊèèËø∞Êñá‰ª∂&lt;assembly xmlns=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd\"> &lt;id>release&lt;/id> &lt;formats> &lt;format>tar.gz&lt;/format> &lt;format>zip&lt;/format> &lt;/formats> &lt;includeBaseDirectory>false&lt;/includeBaseDirectory> &lt;fileSets> &lt;fileSet> &lt;directory>../docs/bin&lt;/directory> &lt;outputDirectory>multi-api&lt;/outputDirectory> &lt;fileMode>0755&lt;/fileMode> &lt;includes> &lt;include>*.sh&lt;/include> &lt;/includes> &lt;/fileSet> &lt;fileSet> &lt;directory>../docs&lt;/directory> &lt;outputDirectory>multi-api&lt;/outputDirectory> &lt;includes> &lt;include>db/*&lt;/include> &lt;include>db/*/*&lt;/include> &lt;/includes> &lt;/fileSet> &lt;fileSet> &lt;directory>target&lt;/directory> &lt;outputDirectory>multi-api&lt;/outputDirectory> &lt;includes> &lt;include>*.jar&lt;/include> &lt;include>lib/*&lt;/include> &lt;/includes> &lt;/fileSet> &lt;fileSet> &lt;directory>src/main/resources&lt;/directory> &lt;outputDirectory>multi-api&lt;/outputDirectory> &lt;includes> &lt;include>logback-spring.xml&lt;/include> &lt;include>application.properties&lt;/include> &lt;/includes> &lt;/fileSet> &lt;fileSet> &lt;directory>../&lt;/directory> &lt;outputDirectory>multi-api&lt;/outputDirectory> &lt;includes> &lt;include>*.MD&lt;/include> &lt;/includes> &lt;/fileSet> &lt;/fileSets> &lt;/assembly> ÈÖçÁΩÆÊèèËø∞Êñá‰ª∂‰ªãÁªç id id Ê†áËØÜÁ¨¶ÔºåÊ∑ªÂä†Âà∞ÁîüÊàêÊñá‰ª∂ÂêçÁß∞ÁöÑÂêéÁºÄÁ¨¶„ÄÇÂ¶ÇÊûúÊåáÂÆö id ÁöÑËØùÔºåÁõÆÊ†áÊñá‰ª∂ÂàôÊòØ ${artifactId}-${id}.tar.gz formats maven-assembly-plugin ÊîØÊåÅÁöÑÊâìÂåÖÊ†ºÂºèÊúâzip„ÄÅtar„ÄÅtar.gz (or tgz)„ÄÅtar.bz2 (or tbz2)„ÄÅjar„ÄÅdir„ÄÅwarÔºåÂèØ‰ª•ÂêåÊó∂ÊåáÂÆöÂ§ö‰∏™ÊâìÂåÖÊ†ºÂºè includeBaseDirectory Ëß£ÂéãÊó∂ÊòØÂê¶ËÆ≤ÂΩìÂâçÂéãÁº©ÂåÖÂêçÁß∞‰Ωú‰∏∫Êñá‰ª∂Â§πÂêçÁß∞ fileSets ÁÆ°ÁêÜ‰∏ÄÁªÑÊñá‰ª∂ÁöÑÂ≠òÊîæ‰ΩçÁΩÆÔºåÊ†∏ÂøÉÂÖÉÁ¥†Â¶Ç‰∏ãË°®ÊâÄÁ§∫„ÄÇ ÂÖÉÁ¥† Á±ªÂûã ‰ΩúÁî® directory string ÊåáÂÆö‰ªéÂì™‰∏™ÁõÆÂΩïËøõË°åËé∑ÂèñÊñá‰ª∂ËøõË°åÂΩíÊ°£ outputDirectory string ÊåáÂÆöÊñá‰ª∂ÈõÜÂêàÁöÑËæìÂá∫ÁõÆÂΩïÔºåËØ•ÁõÆÂΩïÊòØÁõ∏ÂØπ‰∫éÊ†πÁõÆÂΩï fileMode String ÊåáÂÆöÊñá‰ª∂Â±ûÊÄßÔºå‰ΩøÁî®ÂÖ´ËøõÂà∂Ë°®ËææÔºåÂàÜÂà´‰∏∫(User)(Group)(Other)ÊâÄÂ±ûÂ±ûÊÄßÔºåÈªòËÆ§‰∏∫ 0644 includes/include* ÂåÖÂê´Êñá‰ª∂ excludes/exclude* ÊéíÈô§Êñá‰ª∂ ÂÆåÊï¥‰ª£Á†ÅÔºöhttps://github.com/iogogogo/life-multi-module","categories":[{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/categories/maven/"}],"tags":[{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/tags/maven/"}]},{"title":"ÂïÜ‰∏öËÆ∫ËØÅ‰∏≠ÁöÑË¥¢Âä°ÊµãÈáèÊåáÊ†á","slug":"pmp-note-01","date":"2019-12-31T16:00:00.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2020/01/01/pmp-note-01/","link":"","permalink":"http://iogogogo.github.io/2020/01/01/pmp-note-01/","excerpt":"","text":"ÂïÜ‰∏öËÆ∫ËØÅ‰∏≠ÁöÑË¥¢Âä°ÊµãÈáèÊåáÊ†áÂïÜ‰∏öËÆ∫ËØÅ‰∏≠Â∏∏ËßÅÁöÑË¥¢Âä°ÊåáÊ†áÊµãÈáèÊñπÊ≥ï ROI ÊäïËµÑÂõûÊä•Áéá PBP ÊäïËµÑÂõûÊä•Âë®Êúü NPV ÂáÄÁé∞ÂÄº IRR ÂÜÖÈÉ®Êî∂ÁõäÁéá BCR ÊïàÁõäÊàêÊú¨ÊØîÁéá ÈùôÊÄÅËØÑ‰ª∑Ê≥ïÈÄÇÁî®‰∫éÈ°πÁõÆÊó©ÊúüÔºå‰∏çËÆ°ËæÉÂà©ÊÅØÁöÑÊÉÖÂÜµ„ÄÇ 600‰∏á‰π∞‰∏Ä‰∏™ÊàøÂ≠êÔºåÂá∫ÁßüÔºåÊØè‰∏™ÊúàÁßüÈáëÊî∂ÂÖ•1‰∏á„ÄÇ ËØ∑ÈóÆÊäïËµÑÂõûÊä•Áéá(ROI)ÊòØÂ§öÂ∞ëÔºü ‰∏ÄÁõ¥Áßü‰∏ãÂéªÔºåÊäïËµÑÂõûÊä•Êúü(PBP)Âá†Âπ¥Ôºü ÊäïËµÑÂõûÊä•Áéá(ROI)ÊäïËµÑÂõûÊä•Áéá(ROI) = Âπ¥ÂùáÂà©Ê∂¶ ‚ûó ÊäïËµÑÈ¢ù ROI = 12 ‚ûó 600 = 2% ÊäïËµÑÂõûÊä•Êúü(PBP)ÊäïËµÑÂõûÊä•Êúü(PBP) = 1 ‚ûó ROI PBP = 1 ‚ûó (2%) = 50Âπ¥ ÂÜçÈóÆÔºö600‰∏á‰π∞‰∏Ä‰∏™ÊàøÂ≠êÔºåÂá∫ÁßüÔºåÊØè‰∏™ÊúàÁßüÈáëÊî∂ÂÖ•1‰∏áÔºå5Âπ¥ÂêéÊàø‰ª∑Áøª‰∫Ü‰∏ÄÁï™ÔºåÈóÆROIÊòØÂ§öÂ∞ëÔºüPBPÊòØÂ§öÂ∞ëÂπ¥Ôºü Âπ¥‰ªΩ 0 1 2 3 4 5 Êî∂ÂÖ• 12 12 12 12 1212 ÊîØÂá∫ -600 ÂáÄÁé∞ÈáëÊµÅ -600 12 12 12 12 1212 Á¥ØËÆ°Áé∞ÈáëÊµÅ -600 -588 -576 -564 -552 660 ÊäïËµÑÂõûÊä•Áéá(ROI) = Âπ¥ÂùáÂà©Ê∂¶ ‚ûó ÊäïËµÑÈ¢ù ROI= (600 ‚ûó 5 + 12) ‚ûó 600 = 22% ÊäïËµÑÂõûÊä•Êúü(PBP) = 1 ‚ûó ROI PBP = 5 - 1 + (552 ‚ûó 1212) = 4.46Âπ¥ ÁÆÄÂçïËß£Ê≥ïÔºåÂà©Áî®Áõ∏‰ºº‰∏âËßíÂΩ¢ÂéüÁêÜ PBP = (x-4) ‚ûó (5-x) = (-552) ‚ûó 660 = 4.46Âπ¥ Âä®ÊÄÅÂàÜÊûêÊ≥ïÂ§çÂà©ËÆ°ÁÆó: ÁªàÂÄº = Áé∞ÂÄº ‚úñÔ∏è (1+i)^n ÊäòÁé∞ËÆ°ÁÆó: Áé∞ÂÄº = ÁªàÂÄº ‚ûó (1+i)^n ÂêçËØçËß£Èáä: Áé∞ÂÄº=Êú¨Èáë ÁªàÂÄº=Êî∂ÁõäÊÄªÈ¢ù i = Âà©Áéá n = Âë®Êúü(Âçï‰ΩçÂπ¥) ÂáÄÁé∞ÂÄº NPV (ÊúâÂà©ÊÅØÁöÑËÆ°ÁÆó) Âπ¥‰ªΩ 0 1 2 3 4 5 Êî∂ÂÖ• 12 12 12 12 1212 ÊîØÂá∫ -600 ÂáÄÁé∞ÈáëÊµÅ -600 12 12 12 12 1212 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞) -600 10.9112/(1+10%) 9.9212/(1+10%)^2 9.02 8.20 752.561212/(1+10%)^5 Á¥ØËÆ°Áé∞ÈáëÊµÅ -600 -598.09(600-10.91) -579.17(598.09-9.92) -570.16(579.17-9.02) -561.96 190.60 ÂèñÂü∫ÂáÜÊäòÁé∞Áéá i = 10% ÈùôÊÄÅÔºöPBP (x-4) ‚ûó (5-x) = (-552) ‚ûó 660 x = 4.46Âπ¥ - ËÆ°ÁÆóÊñπÂºèÂèÇËÄÉÂõæ‰∫å Âä®ÊÄÅÔºöPBP (x-4) ‚ûó (5-x) = (-561.96) ‚ûó 190.60 x = 4.75Âπ¥ ÂáÄÁé∞ÂÄºÔºöNPV = 190.60‰∏áÂÖÉÔºåËØ•ÂÄºË°®Á§∫ÊúÄÂêéÁöÑÂáÄÂà©Ê∂¶ ÂÜÖÈÉ®Êî∂ÁõäÁéá IRRËØ•ÂÄºË∂äÈ´òÔºåÁêÜËÆ∫‰∏äË°®Á§∫ÂèØ‰ª•ÊâøÂèóÁöÑÈ£éÈô©Ë∂äÈ´ò„ÄÇ Âπ¥‰ªΩ 0 1 2 3 4 5 i NPV Êî∂ÂÖ• 12 12 12 12 1212 ÊîØÂá∫ -600 ÂáÄÁé∞ÈáëÊµÅ -600 12 12 12 12 1212 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞)1 -600 10.9112/(1+10%) 9.9212/(1+10%)^2 9.02 8.20 752.561212/(1+10%)^5 10% 190.60 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞)2 -600 10.62 9.40 8.32 7.36 657.83 13% 93.52 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞)3 -600 10.43 9.07 7.89 6.86 602.58 15% 36.84 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞)4 -600 10.34 8.92 7.69 6.63 577.05 16% 10.63 ÂáÄÁé∞ÈáëÊµÅ(ÊäòÁé∞)5 -600 10.26 8.77 7.49 6.40 552.81 17% -14.27 ÈááÁî® Áõ∏‰ºº‰∏âËßíÂΩ¢ÂÆöÂæã ÊñπÂºèËøõË°åËÆ°ÁÆó Á∫øÊÄßÊèíÂÄº IRR = (IRR-16%) ‚ûó (17%-IRR) = 10.63 ‚ûó 14.27 IRR = 16.43% // ËØ•ÂÄºË°®Á§∫Âú®Ëøô‰∏™Âà©Áéá‰∏ãÔºå‰∏çËµö‰∏çËµî Â§ö‰∏™È°πÁõÆËøõË°åÊØîËæÉ È°πÁõÆ A B C NPV(‰∏áÂÖÉ) 1500 1000 1000 IRR 16% 16% 38% Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÊØîËæÉIRRÊòØÈúÄË¶ÅNPV‰Ωú‰∏∫ËÄÉÈáèÊ†áÂáÜÔºåÂú®Ê≤°ÊúâNPVÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ≤°ÊúâÊØîËæÉÊÑè‰πâ„ÄÇ Â¶ÇÊûúÈùûË¶ÅÊØîËæÉÁöÑËØùÔºå‰∏™‰∫∫ËÆ§‰∏∫ÂèØ‰ª•‰ªéÂØπÂæÖÈ£éÈô©ÁöÑÊÄÅÂ∫¶ÊñπÈù¢Êù•ËÆ≤„ÄÇ A„ÄÅB ==&gt; IRRÁõ∏ÂêåÔºåË°®Á§∫ÂÜÖÈÉ®Êî∂ÁõäÁéáÁõ∏ÂêåÔºåÊäóÈ£éÈô©ËÉΩÂäõÊõ¥Âº∫ÔºåAÈ°πÁõÆÁöÑNPV(ÂáÄÁé∞ÂÄº)Êî∂ÁõäÊõ¥È´òÔºåÊâÄÊúâÈÄâA B„ÄÅC ==&gt; NPV(ÂáÄÁé∞ÂÄº)Áõ∏ÂêåÔºåË°®Á§∫ËµöÁöÑÈí±ÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØCÈ°πÁõÆÁöÑIRR(ÂÜÖÈÉ®Êî∂ÁõäÁéá)È´òÔºåÊâÄ‰ª•ÈÄâÊã©C ÊïàÁõäÊàêÊú¨ÊØîÁéá BCR (Benefit cost ratio) Ê±ΩÊ≤πËΩ¶ Ê∑∑ÂêàÂä®Âäõ Á∫ØÁîµÂä® ÁôæÂÖ¨ÈáåËÉΩÊ∫êÊàêÊú¨ 65Ôø• 39Ôø• 7.5Ôø• Ë¥≠‰π∞ÊàêÊú¨ +10 ‰∏áÔø• +5 ‰∏áÔø• ËäÇÊ≤πÊïàÁõä 2.6 ‰∏áÔø• 5.75 ‰∏áÔø• ÊïàÁõäÊàêÊú¨BCR 0.26 1.15 Âú®C0Ëøô‰∏™ÁÇπÔºåÊàêÊú¨ÂíåÊïàÁõäËææÂà∞ÊúÄ‰Ω≥ÁÇπ„ÄÇ‚ñ≥C Âå∫Èó¥ÔºöÊàêÊú¨Â¢ûÂä†ÔºåÊïàÁõäÊî∂Áõä‰∏çÊòéÊòæ„ÄÇ","categories":[{"name":"PMPÂÆûÊàò","slug":"PMPÂÆûÊàò","permalink":"http://iogogogo.github.io/categories/PMPÂÆûÊàò/"}],"tags":[{"name":"PMP","slug":"PMP","permalink":"http://iogogogo.github.io/tags/PMP/"}]},{"title":"FTP Â∏∏Áî®ÂëΩ‰ª§","slug":"ftp-command","date":"2019-12-12T02:13:15.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2019/12/12/ftp-command/","link":"","permalink":"http://iogogogo.github.io/2019/12/12/ftp-command/","excerpt":"","text":"FTPÊòØÂèØÁî®‰∫éËÆ∏Â§ö‰∏çÂêåÊìç‰ΩúÁ≥ªÁªü‰∏äÁöÑÂçèËÆÆ„ÄÇÂ¶ÇÊûú FTP ÊúçÂä°Âô®Á´ØÂÖÅËÆ∏ PASV Ë¢´Âä®Ê®°ÂºèÔºåÂèØ‰ª•Áî®ÊµèËßàÂô®ËÆøÈóÆ FTP Ôºå‰πüÂèØ‰ª•‰ΩøÁî®FTPÂëΩ‰ª§ÔºåÁõ¥Êé•‰∏éËøúÁ®ãËÆ°ÁÆóÊú∫ËøûÊé•„ÄÇ ÂêØÂä®Linux ÁªàÁ´ØÁõ¥Êé•Êï≤ÂÖ• ftp ÂõûËΩ¶ÔºåÊàñËÄÖÊåâÁÖß‰∏ãÈù¢Ê®°ÂºèÔºåÁõ¥Êé•ËøûÂÖ• FTP ÊúçÂä°Âô®Ôºö *~&gt;ftp ÊúçÂä°Âô®Âú∞ÂùÄÔºàIPÊàñURLÔºâ ‚Ä¶ Name ‚Ä¶:Áî®Êà∑Âêç ‚Ä¶ Password:ÂØÜÁ†Å ‚Ä¶ ftp&gt; ËøûÊé•ÊàêÂäüÂ¶ÇÊûúÂ∏åÊúõÂåøÂêçÁôªÂΩïÔºå‰ΩøÁî®Áî®Êà∑ÂêçÂØÜÁ†ÅÂÖ®ÈÉ®ÊòØftpÔºåÊàñËÄÖÁî®Êà∑ Anonymous ÂØÜÁ†Å‰∏∫Á©∫„ÄÇ Â∏∏Áî®ÂëΩ‰ª§ÁõÆÂΩïÂëΩ‰ª§ ÂëΩ‰ª§ ‰ΩúÁî® pwd ÊòæÁ§∫ËøúÁ®ãËÆ°ÁÆóÊú∫‰∏äÁöÑÂΩìÂâçÁõÆÂΩï ls/dir ÂàóÂá∫ÂΩìÂâçËøúÁ®ãÁõÆÂΩïÁöÑÂÜÖÂÆπÔºåÂèØ‰ª•‰ΩøÁî®ËØ•ÂëΩ‰ª§Âú®Linux‰∏ãÁöÑ‰ªª‰ΩïÂêàÊ≥ïÁöÑlsÈÄâÈ°π cd ÁßªÂä®Âà∞cd ÂêéÁöÑÁõÆÂΩï cdup/cd .. ËøîÂõû‰∏ä‰∏ÄÁ∫ßÁõÆÂΩï lcd ÂàóÂá∫ÂΩìÂâçÊú¨Âú∞ÁõÆÂΩïË∑ØÂæÑ ÈúÄË¶ÅÊùÉÈôêÁöÑÂëΩ‰ª§ ÂëΩ‰ª§ ‰ΩúÁî® mkdir Âú®ËøúÁ®ãÁ≥ªÁªü‰∏≠ÂàõÂª∫ÁõÆÂΩï rname ÈáçÂëΩÂêç‰∏Ä‰∏™Êñá‰ª∂ÊàñÁõÆÂΩï redir Âà†Èô§ËøúÁ®ãÁõÆÂΩï delete Âà†Èô§ËøúÁ®ãÊñá‰ª∂ mdelete Âà†Èô§Â§ö‰∏™ËøúÁ®ãÊñá‰ª∂ Êñá‰ª∂‰∏ä‰º†‰∏ãËΩΩ ÂëΩ‰ª§ ‰ΩúÁî® binary/bin Áî®‰∫é‰∫åËøõÂà∂Êñá‰ª∂‰º†ÈÄÅÔºàÂõæÂÉèÊñá‰ª∂Á≠âÔºâ ascii Áî®‰∫éÊñáÊú¨Êñá‰ª∂‰º†ÈÄÅ get/mget Âú®ÂΩìÂâçËøúÁ®ãÁõÆÂΩï‰∏ãÂ§çÂà∂Ôºà‰∏Ä‰∏™/Â§ö‰∏™ÔºâÊñá‰ª∂Âà∞Êú¨Âú∞Êñá‰ª∂Á≥ªÁªüÂΩìÂâçÁõÆÂΩï put/mput ‰ªéÂΩìÂâçÁõÆÂΩïÊääÊñá‰ª∂Â§çÂà∂Âà∞ÂΩìÂâçËøúÁ®ãÁõÆÂΩï prompt ÂÖ≥Èó≠‰∫åÊ¨°Á°ÆËÆ§Êó∂ÁöÑÊèêÁ§∫ ÈÄÄÂá∫ ÂëΩ‰ª§ ‰ΩúÁî® ! ‰∏¥Êó∂ÈÄÄÂá∫ftpÊ®°ÂºèÔºåËøîÂõûÊú¨Âú∞Linux ShellÊ®°ÂºèÔºåÈîÆÂÖ•exitËøîÂõû close ÂÖ≥Èó≠ÂΩìÂâçËøûÊé• bye ÂÖ≥Èó≠ËøûÊé•Âπ∂ÈÄÄÂá∫ftpÂëΩ‰ª§Ê®°Âºè","categories":[{"name":"Â∑•ÂÖ∑‰ΩøÁî®","slug":"Â∑•ÂÖ∑‰ΩøÁî®","permalink":"http://iogogogo.github.io/categories/Â∑•ÂÖ∑‰ΩøÁî®/"}],"tags":[{"name":"FTP","slug":"FTP","permalink":"http://iogogogo.github.io/tags/FTP/"}]},{"title":"javacÁºñËØëjavaÊñá‰ª∂","slug":"javac-compiler","date":"2019-11-05T15:32:45.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2019/11/05/javac-compiler/","link":"","permalink":"http://iogogogo.github.io/2019/11/05/javac-compiler/","excerpt":"","text":"javacÁºñËØëjavaÊñá‰ª∂ÊúÄËøëÂÅöÈì∂Ë°åÈ°πÁõÆÔºåÁîü‰∫ß‰∏äÊñ∞Áªô‰∫Ü‰∏Ä‰∏™csvÊñá‰ª∂ÔºåÁ®ãÂ∫èÈúÄË¶ÅËØªÂèñÂÜÖÂÆπËøõË°åÊ∏ÖÊ¥óÔºå‰ΩÜÊòØÊãø‰∏çÂá∫Êù•ÁúãÔºå‰πü‰∏çÂèØËÉΩ‰∏∫‰∫ÜËøô‰∏Ä‰∏™Â∞èÊµãËØï‰∏ìÈó®ÊâìÂÆ°ÊâπÁªôÁîü‰∫ß‰∏ä‰º†‰∏Ä‰∏™Á®ãÂ∫èÂåÖÔºåÂ∞±ÊÉ≥Âà∞‰∫Ü‰ΩøÁî®javacÂÜô‰∏™ÁÆÄÂçïÁöÑÊµãËØïÁúã‰∏ãÊï∞ÊçÆ„ÄÇ‰∏ãÈù¢ÂÖàÊù•Â§ç‰π†‰∏Ä‰∏ãjavacËøô‰∏™ÂëΩ‰ª§ ‰∏ãÈù¢ÊµãËØïÁöÑÊâÄÊúâjavaÊ∫êÊñá‰ª∂Áªü‰∏Ä‰øùÂ≠òÂú® /Users/xxx/Downloads/compiler ÁºñËØëÂçïÊñá‰ª∂Áé∞Âú®ÂÜô‰∏ÄÊÆµÁÆÄÂçïÁöÑJava‰ª£Á†Å public class Test1 { public static void main(String... args){ System.out.println(\"hello world!!!\"); } } ‰ΩøÁî®javacÁºñËØë ‚ûú compiler pwd /Users/xxx/Downloads/compiler # ÂΩìÂâçË∑ØÂæÑ ‚ûú compiler ls -lrt total 8 -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java # ËøôÈáåÊòØÊ∫êÊñá‰ª∂ ‚ûú compiler javac Test1.java # ‰ΩøÁî®javacËøõË°åÁºñËØë ‚ûú compiler ls -lrt total 16 -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r-- 1 xxx staff 418 11 5 22:28 Test1.class # ÁºñËØë‰ª•ÂêéÁöÑclassÊñá‰ª∂ ‚ûú compiler java Test1 # ËøêË°åÁªìÊûú hello world!!! ÂèØ‰ª•ÁúãÂà∞ÁªìÊûúÂ∞±ÊòØÊàë‰ª¨Ê≠£Â∏∏ÁöÑ‰∏Ä‰∏™ËæìÂá∫ hello world ÁºñËØë‰∏§‰∏™Áõ∏‰∫í‰æùËµñÁöÑJavaÊ∫êÊñá‰ª∂ A.java public class A { public void sayHi() { System.out.println(\"ÊàëÊòØ class A hello world!!!\"); } } B.java public class B { public static void main(String... args) { A a = new A(); a.sayHi(); } } ‰ΩøÁî®javacÂàÜÂà´ËøõË°åÁºñËØëÔºåËøôÈáåÊ≥®ÊÑèÂÖàÂêéÈ°∫Â∫èÔºåÂÖàÁºñËØëA.javaÔºåÂú®ÁºñËØëB.javaÔºåÂΩìÁÑ∂ÔºåÂõ†‰∏∫B‰∏≠ÂºïÁî®‰∫ÜAÔºåA.java‰πüÂèØ‰ª•‰∏çÁî®ÁºñËØëÔºåÂú®ÁºñËØëB.javaÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®ÁºñËØëA.javaÁöÑÔºåÂêéÈù¢Êàë‰ª¨‰ºöÁúãÂà∞ ‚ûú compiler ls -lrt total 24 -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 112 11 5 22:20 B.java -rw-r--r--@ 1 xxx staff 113 11 5 22:21 A.java ‚ûú compiler javac A.java ‚ûú compiler javac B.java ‚ûú compiler ls -lrt total 40 -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 112 11 5 22:20 B.java -rw-r--r--@ 1 xxx staff 113 11 5 22:21 A.java -rw-r--r-- 1 xxx staff 402 11 5 22:39 A.class -rw-r--r-- 1 xxx staff 297 11 5 22:39 B.class ‚ûú compiler java B # ËøêË°åBËøô‰∏™Á®ãÂ∫è ÊàëÊòØ class A hello world!!! ÁºñËØëÂ∏¶Â§ñÈÉ®‰æùËµñÁöÑjarËøôÈáåÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®GoogleÁöÑguava-27.1-jre.jarÔºå‰ΩøÁî®ÂÖ∂‰∏≠ÁöÑapiËØªÂèñ‰∏Ä‰∏™ÊñáÊú¨Êñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ ‰∏∫‰∫ÜÊñπ‰æøÔºåÂ∞Üguava-27.1-jre.jarÂ§çÂà∂Âà∞ÂΩìÂâçË∑ØÂæÑÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•‰ΩøÁî®ÁªùÂØπË∑ØÂæÑÔºåÊñ∞Âª∫Êñá‰ª∂GuavaTest.java ‚ûú compiler ls -lrt total 5400 -rw-r--r-- 1 xxx staff 2746671 11 5 09:33 guava-27.1-jre.jar # Êñ∞Â§çÂà∂ÁöÑÂ§ñÈÉ®jarÊñá‰ª∂ -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 112 11 5 22:20 B.java -rw-r--r--@ 1 xxx staff 113 11 5 22:21 A.java -rw-r--r--@ 1 xxx staff 663 11 5 22:54 GuavaTest.java GuavaTest.javaÂÜÖÂÆπ import com.google.common.io.Files; import java.io.File; import java.io.IOException; import java.nio.charset.StandardCharsets; import java.util.List; /** * Created by xxx on 2019-11-05. */ public class GuavaTest { public static void main(String[] args) { String path = \"/Users/xxx/Downloads/compiler/A.java\"; try { // ÊåâË°åËØªÂèñÊñá‰ª∂ÂÜÖÂÆπ List&lt;String> list = Files.readLines(new File(path), StandardCharsets.UTF_8); list.forEach(System.out::println); } catch (IOException e) { e.printStackTrace(); } } } ÁÑ∂Âêé‰ΩøÁî®javacËøõË°åÁºñËØëÔºåÂíåÈ¢ÑÊúüÁöÑÁªìÊûú‰∏ç‰∏ÄËá¥ÔºåÂºïÁî®‰∫Üguava-27.1-jre.jar‰∏≠ÁöÑclass‰∏çÂ≠òÂú® ‚ûú compiler javac GuavaTest.java GuavaTest.java:2: ÈîôËØØ: Á®ãÂ∫èÂåÖcom.google.common.io‰∏çÂ≠òÂú® import com.google.common.io.Files; ^ GuavaTest.java:19: ÈîôËØØ: Êâæ‰∏çÂà∞Á¨¶Âè∑ List list = Files.readLines(new File(path), StandardCharsets.UTF_8); ^ Á¨¶Âè∑: ÂèòÈáè Files ‰ΩçÁΩÆ: Á±ª GuavaTest 2 ‰∏™ÈîôËØØ ÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±‰∏çËÉΩÂçïÁ∫ØÁöÑ‰ΩøÁî®javac GuavaTest.java ËÄåÊòØÈúÄË¶Å‰ΩøÁî®java -cp ÊåáÂÆöÂ§ñÈÉ®‰æùËµñÁöÑjarË∑ØÂæÑÔºåÂèØ‰ª•ÁúãÂà∞Âä†‰∫Ü -cp ÂèÇÊï∞ÊåáÂÆöÂ§ñÈÉ®‰æùËµñÁöÑjar‰ª•ÂêéÁºñËØëÊàêÂäü‰∫Ü ‚ûú compiler javac -cp guava-27.1-jre.jar GuavaTest.java ‚ûú compiler ls -lrt total 5408 -rw-r--r-- 1 xxx staff 2746671 11 5 09:33 guava-27.1-jre.jar -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 112 11 5 22:20 B.java -rw-r--r--@ 1 xxx staff 113 11 5 22:21 A.java -rw-r--r--@ 1 xxx staff 663 11 5 22:54 GuavaTest.java -rw-r--r-- 1 xxx staff 1548 11 5 22:59 GuavaTest.class Ëøô‰∏™Êó∂ÂÄô‰ΩøÁî®java GuavaTestÂéªËøêË°åÁ®ãÂ∫èÊòØÂê¶ÂèØË°åÂë¢Ôºü ‚ûú compiler java GuavaTest Exception in thread \"main\" java.lang.NoClassDefFoundError: com/google/common/io/Files at GuavaTest.main(GuavaTest.java:19) Caused by: java.lang.ClassNotFoundException: com.google.common.io.Files at java.net.URLClassLoader.findClass(URLClassLoader.java:382) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 1 more Á≠îÊ°àÂΩìÁÑ∂ÊòØno ËøôÈáåËøêË°åÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰πüÈúÄË¶Å‰ΩøÁî® -cp ÂèÇÊï∞ÊåáÂÆöÂ§ñÈÉ®‰æùËµñÁöÑjarÊñá‰ª∂Ôºå‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞‰æùÁÑ∂Êä•ÈîôÔºåÂÆûÈôÖ‰∏äÂΩìÊàë‰ª¨‰ΩøÁî®cpÂèÇÊï∞‰ª•ÂêéÊåáÂÆöÂ§ñÈÉ®‰æùËµñjar‰ª•ÂêéÔºåËÄåÂπ∂Ê≤°ÊúâÂåÖÂê´ÂΩìÂâçÁõÆÂΩïÔºåÂ∞±ÁÆóÁºñËØëÊàêÂäüÔºå‰πüÊòØÊâæ‰∏çÂà∞‰∏ªÁ±ªÁöÑ„ÄÇ ‚ûú compiler java -cp guava-27.1-jre.jar GuavaTest ÈîôËØØ: Êâæ‰∏çÂà∞ÊàñÊó†Ê≥ïÂä†ËΩΩ‰∏ªÁ±ª GuavaTest Êé•‰∏ãÊù•Êàë‰ª¨ÂèØ‰ª•ÊääÂΩìÂâçË∑ØÂæÑ‰πüÂä†ËøõÂéªÔºåËøôÈáåÁâπÂà´Ê≥®ÊÑèÁöÑÂ∞±ÊòØÔºåÂíå‰∏ä‰∏ÄÊ¨°ÁöÑÂëΩ‰ª§Áõ∏ÊØîÔºåÊ∑ªÂä†‰∫Ü:.Ôºå: ‰Ωú‰∏∫ÂàÜÈöîÔºå. Ë°®Á§∫ÂΩìÂâçË∑ØÂæÑ„ÄÇÂΩìÁÑ∂‰πüÊúâÂçöÂÆ¢ÊåáÂá∫ÔºåÂú®Linux‰∏ãÈù¢‰ΩøÁî®:ÂàÜÈöîÔºå‰ΩÜÊòØÂú®Windows‰∏ãÈù¢‰ΩøÁî®;ÂàÜÈöîÔºåÂõ†‰∏∫ÊàëÊòØMacÔºåÊ≤°ÊúâWindowsÂéªÈ™åËØÅÔºåËøôÈáåÂ¶ÇÊûúÊúâÈúÄË¶ÅÂ∞±Ëá™Â∑±È™åËØÅ‰∏Ä‰∏ãÂç≥ÂèØ„ÄÇÂ∞±ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçËØªÂèñÈô§‰∫ÜA.javaÊñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπ ‚ûú compiler java -cp guava-27.1-jre.jar:. GuavaTest public class A { public void sayHi() { System.out.println(\"ÊàëÊòØ class A hello world!!!\"); } } ÁºñËØëÊ∫êÊñá‰ª∂‰∏≠Â∏¶ÊúâpackageÁöÑÊñá‰ª∂‰∏äÈù¢Êàë‰ª¨ÊèèËø∞‰∫ÜÁºñËØëÂçï‰∏™Êñá‰ª∂Ôºå‰∏§‰∏™Áõ∏‰∫í‰æùËµñÁöÑÊñá‰ª∂‰ª•Âèä‰æùËµñÂ§ñÈÉ®Êñá‰ª∂ÁöÑÂ§ÑÁêÜÊñπÂºèÔºåÂ¶ÇÊûúÂú®Êàë‰ª¨ÁöÑÊ∫êÊñá‰ª∂‰∏≠ÂåÖÂê´packageÂèàËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÂë¢ÔºüÊé•‰∏ãÊù•Êàë‰ª¨ÁªßÁª≠Êù•ÁúãÔºåÈ¶ñÂÖàÊàë‰ª¨ÁªôA.javaÂíåB.javaÂàÜÂà´Ê∑ªÂä†‰∏äpackage A.java package compiler; public class A { public void sayHi() { System.out.println(\"ÊàëÊòØ class A hello world!!!\"); } } B.java package compiler; public class B { public static void main(String... args) { A a = new A(); a.sayHi(); } } Êé•‰∏ãÊù•Êàë‰ª¨‰ΩøÁî®javacËøõË°åÁºñËØëÔºåÂèØ‰ª•ÁúãÂà∞A.javaÂèØ‰ª•Ê≠£Â∏∏ÁºñËØëÔºå‰ΩÜÊòØB.javaÁºñËØëÂ∞±Âá∫Èîô‰∫Ü„ÄÇËøôÊòØÂõ†‰∏∫ÔºåÊ∑ªÂä†‰∫ÜpackageËØ≠Âè•ÂêéÔºåÁºñËØëÂô®ÈúÄË¶ÅÊâæÁöÑÊòØcompiler.AÁ±ªÔºåÁºñËØëÂô®‰ºöÈ¶ñÂÖàÊâæÂà∞compilerÁõÆÂΩïÔºåÁÑ∂ÂêéÂÜç‰ªécompilerÁõÆÂΩï‰∏≠ÊâæÂà∞AÔºåÊ≠§Êó∂ÂΩìÂâçÁõÆÂΩï‰∏≠(compilerÁõÆÂΩïÂÜÖ)‰∏çÂ≠òÂú®compilerÂ≠êÁõÆÂΩïÔºåÂõ†Ê≠§ÔºåÁºñËØëÂô®Êâæ‰∏çÂà∞AÁ±ªÔºåÁºñËØëÂ§±Ë¥•„ÄÇËøôËØ¥ÊòéÊàë‰ª¨ÂåÖÂê´ÁöÑÁ±ªË∑ØÂæÑÈúÄË¶ÅÂåÖÊã¨Á±ªÊâÄÂú®ÁöÑÂåÖÔºåËøôÈáåÈúÄË¶ÅÂåÖÂê´compilerÁõÆÂΩïÁöÑ‰∏ä‰∏ÄÁ∫ßÂ≠êÁõÆÂΩï„ÄÇ ‚ûú compiler javac A.java ‚ûú compiler javac B.java B.java:5: ÈîôËØØ: Êâæ‰∏çÂà∞Á¨¶Âè∑ A a = new A(); ^ Á¨¶Âè∑: Á±ª A ‰ΩçÁΩÆ: Á±ª B B.java:5: ÈîôËØØ: Êâæ‰∏çÂà∞Á¨¶Âè∑ A a = new A(); ^ Á¨¶Âè∑: Á±ª A ‰ΩçÁΩÆ: Á±ª B 2 ‰∏™ÈîôËØØ Êé•‰∏ãÊù•Êàë‰ª¨ÁºñËØëÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÊåáÂÆöcompilerÁöÑ‰∏ä‰∏ÄÁ∫ßÂ≠êÁõÆÂΩï ‚ûú compiler ls -lrt total 5400 -rw-r--r-- 1 xxx staff 2746671 11 5 09:33 guava-27.1-jre.jar -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 663 11 5 22:54 GuavaTest.java -rw-r--r--@ 1 xxx staff 131 11 5 23:19 B.java -rw-r--r--@ 1 xxx staff 131 11 5 23:19 A.java # Ê≥®ÊÑèËøôÈáå‰ΩøÁî®‰∫Ü‰∏§‰∏™.. Ë°®Á§∫‰∏ä‰∏ÄÁ∫ßÁõÆÂΩïÔºåÂõ†‰∏∫BÈáåÈù¢‰æùËµñ‰∫ÜAÔºåÊâÄÊúâ‰πü‰ºöÊääA.javaËá™Âä®ÁºñËØëÔºåA.javaÂèØ‰ª•‰∏çÁÆ° ‚ûú compiler javac -cp .. B.java ‚ûú compiler ls -lrt total 5416 -rw-r--r-- 1 xxx staff 2746671 11 5 09:33 guava-27.1-jre.jar -rw-r--r--@ 1 xxx staff 119 11 5 22:11 Test1.java -rw-r--r--@ 1 xxx staff 663 11 5 22:54 GuavaTest.java -rw-r--r--@ 1 xxx staff 131 11 5 23:19 B.java -rw-r--r--@ 1 xxx staff 131 11 5 23:19 A.java -rw-r--r-- 1 xxx staff 315 11 5 23:28 B.class -rw-r--r-- 1 xxx staff 411 11 5 23:28 A.class # ËøêË°åÊòØ‰πü‰∏ÄÊ†∑ÔºåÈúÄË¶Å.. ÊåáÂÆöÂà∞‰∏ä‰∏ÄÁ∫ßÁõÆÂΩïÔºåÂπ∂‰∏îË¶Å‰ΩøÁî®compiler.B ‚ûú compiler java -cp .. compiler.B ÊàëÊòØ class A hello world!!! # A.java‰∏≠ÁöÑËæìÂá∫ËØ≠Âè• Â∞èÁªì‰ª•‰∏äÂÜÖÂÆπËôΩÁÑ∂Âπ≥Êó∂ÂæàÂ∞ëÁî®Âà∞ÔºåÂ∫îÁî®Âú∫ÊôØËôΩÁÑ∂‰∏çÂ§öÔºå‰ΩÜÊòØ‰πüÊòØÁü•ËØÜÁÇπÁöÑ‰∏ÄÊ¨°Â∑©Âõ∫Â§ç‰π†ÔºåÊúâ‰∏çË∂≥ÁöÑÂú∞ÊñπÔºåÊ¨¢ËøéÊåáÊ≠£„ÄÇ","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"‰ΩøÁî®webpackÊûÑÂª∫vueÈ°πÁõÆ","slug":"web-vue-starter","date":"2019-10-20T06:53:43.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"2019/10/20/web-vue-starter/","link":"","permalink":"http://iogogogo.github.io/2019/10/20/web-vue-starter/","excerpt":"","text":"ÂÆâË£ÖnodejsNodejs ÂÆòÁΩë‰∏ãËΩΩÂú∞ÂùÄ Êé®Ëçê‰∏ãËΩΩLTSÈïøÊúüÊîØÊåÅÁâàÊú¨ÔºåÁÑ∂Âêé‰∏ã‰∏ÄÊ≠•ÂÆâË£ÖÂç≥ÂèØ Êü•Áúã nodeÁâàÊú¨node -v # ÁªìÊûú ‚ûú ~ node -v v10.16.3 ‚ûú ~ Êü•Áúã npm ÁâàÊú¨npm -v # ÁªìÊûú ‚ûú ~ npm -v 6.11.3 ‚ûú ~ ÂÆâË£ÖvueÁªÑ‰ª∂‰ª•ÂèäwebpackÂÆâË£Ö @vue/clinpm install -g @vue/cli ÂÆâË£Ö @vue/cli-initnpm install -g @vue/cli-init ÂÆâË£Ö webpacknpm install webpack webpack-cli -g ÂàõÂª∫vueÈ°πÁõÆvue create vue-template ËæìÂÖ•vue create vue-template‰ª•ÂêéÔºåÊåâÁÖßÊèêÁ§∫ÈÄâÊã©ÂØπÂ∫îÁöÑÈÄâÂûãÔºåÂç≥ÂèØÂàõÂª∫‰∏Ä‰∏™vueËÑöÊâãÊû∂È°πÁõÆ Â∏∏Áî®Â≠¶‰π†ÁΩëÁ´ô VueÂÆòÁΩëÔºöhttps://cn.vuejs.org/index.html VueË∑ØÁî±Ôºöhttps://router.vuejs.org/ VuexÔºöhttps://vuex.vuejs.org/zh/guide/ ES6ËØ≠Ê≥ïÔºöhttp://es6.ruanyifeng.com/ JSÂ∑•ÂÖ∑Â∫ìÔºöhttps://www.lodashjs.com/docs/latest Êó•ÊúüÂ§ÑÁêÜÔºöhttp://momentjs.cn/docs/ ÁΩëÁªúËØ∑Ê±ÇÔºöhttp://www.axios-js.com/zh-cn/docs/ CSSÈ¢ÑÁºñËØëÔºöhttps://www.sass.hk/docs/ BabelÔºöhttp://www.ruanyifeng.com/blog/2016/01/babel.html FlexÂ∏ÉÂ±ÄÔºöhttp://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool HTMLÊïôÁ®ãÔºöhttps://www.w3school.com.cn/html/index.asp","categories":[{"name":"WebÂºÄÂèë","slug":"WebÂºÄÂèë","permalink":"http://iogogogo.github.io/categories/WebÂºÄÂèë/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://iogogogo.github.io/tags/Vue/"}]},{"title":"MavenÊûÑÂª∫Spring-BootÂ§öÊ®°ÂùóÈ°πÁõÆ","slug":"spring-boot-multi-module-project","date":"2019-07-27T03:18:17.000Z","updated":"2024-07-01T12:30:37.378Z","comments":true,"path":"2019/07/27/spring-boot-multi-module-project/","link":"","permalink":"http://iogogogo.github.io/2019/07/27/spring-boot-multi-module-project/","excerpt":"","text":"Êó•Â∏∏ÂºÄÂèëËøáÁ®ã‰∏≠ËÇØÂÆö‰ºöÁî®Âà∞mavenÊûÑÂª∫È°πÁõÆÔºåÁî®Êù•ÁÆ°ÁêÜ‰æùËµñÁöÑjarÊñá‰ª∂ÔºåÂØπ‰∫é‰ΩøÁî®mavenÊûÑÂª∫Â§ömoduleÈ°πÁõÆÂæàÂ§öÊó∂ÂÄôËøòÊòØ‰∏çÊÄé‰πàÁÜüÊÇâÔºåËøôÁØáÊñáÁ´†Â∞ÜÂ∏¶ÁùÄÂ§ßÂÆ∂‰ªéÂ§¥ÂºÄÂßãÊê≠Âª∫‰∏Ä‰∏™‰ΩøÁî®mavenÊûÑÂª∫ÁöÑÂ§ömoduleÈ°πÁõÆÔºåÂπ∂ÈõÜÊàêÂ∏∏Áî®ÁöÑÈ°πÁõÆÊèí‰ª∂„ÄÇ ‰ΩøÁî®Spring InitializrÂàõÂª∫È°πÁõÆËøô‰∏ÄÊ≠•ÂæàÁÆÄÂçïÔºåÁõ¥Êé•‰ΩøÁî®ideaËá™Â∏¶ÁöÑÂäüËÉΩÔºåÂàõÂª∫‰∏Ä‰∏™spring-bootÈ°πÁõÆ ‰∏Ä‰∏™ÂàùÂßãÂåñÁöÑÈ°πÁõÆÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ã Ê∑ªÂä†Êñ∞ÁöÑmodule‰∏Ä‰∏™È°πÁõÆ‰∏≠ÂèØËÉΩÈúÄË¶ÅÁî®Âà∞Â§ö‰∏™Â≠êÊ®°ÂùóÔºå‰ΩÜÊòØÂèàÊúâ‰∏Ä‰∫õÂÖ¨ÂÖ±ÁöÑÂ∑•ÂÖ∑Á±ªÔºåmodel‰πãÁ±ªÁöÑÔºå‰ΩÜÊòØÂèà‰∏çÊÉ≥‰º†Âà∞nexusÁßÅÊúç‰∏äÈù¢ÂéªÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Ê∑ªÂä†Â≠êmoduleÔºåÁÑ∂Âêéinstall‰ª•ÂêéÔºåÊèê‰æõÁªôÂΩìÂâçprojectÊù•‰ΩøÁî®‰∫Ü„ÄÇÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™commonÂíå‰∏Ä‰∏™Êèê‰æõapiÊúçÂä°ÁöÑmoduleÔºåÈÇ£‰πàÂèØ‰ª•Êñ∞Âª∫‰∏§‰∏™moduleÔºåparent‰∏ãÈù¢ÁöÑsrcÁõÆÂΩï‰πüÂ∞±Ê≤°ÊúâÂ≠òÂú®ÁöÑÊÑè‰πâÔºåÂèØ‰ª•Áõ¥Êé•Âà†Èô§„ÄÇÂú®project‰∏äÈù¢ÈÇÆ‰ª∂Êñ∞Âª∫moduleÔºåÊ≠•È™§ÂíåÊñ∞Âª∫‰∏Ä‰∏™maven projectÊòØ‰∏ÄÊ†∑ÁöÑÔºåËøôÈáåÂ∞±‰∏çÂÅöÊà™ÂõæÂ±ïÁ§∫‰∫Ü„ÄÇÂ§ömoduleÁöÑ‰∏Ä‰∏™ÂÆåÊï¥ÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÔºö moduleÈó¥Áõ∏‰∫í‰æùËµñÂ§ömoduleÂ∞±ÊòØ‰∏∫‰∫ÜÊñπ‰æøÂÖ¨ÂÖ±ÈÉ®ÂàÜË¢´ÂÖ∂‰ªñmoduleÂºïÁî®ÔºåÂÖ∂ÂÆûÂºïÁî®‰πüÂ∞±ÂæàÁÆÄÂçï‰∫ÜÔºåÂ∞±Á±ª‰ºº‰∫é‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑmaven depÂ∞±ÂèØ‰ª•ÔºåÊØîÂ¶ÇÂú®multi-apiËøô‰∏™module‰∏≠ÂºïÁî®multi-commonÔºåËøôÊ†∑‰∏ÄÊù•Ôºåmulti-common‰∏≠ÁöÑÁ±ªÂ∞±ËÉΩË¢´multi-apiÊ≠£Â∏∏ËÆøÈóÆ‰ΩøÁî®‰∫Ü &lt;dependency> &lt;groupId>com.iogogogo&lt;/groupId> &lt;artifactId>multi-common&lt;/artifactId> &lt;version>0.0.1-SNAPSHOT&lt;/version> &lt;/dependency> Âú®multi-commonÂÜô‰∫Ü‰∏Ä‰∏™Á±ªÂè´ com.iogogogo.common.util.IdHelper ÈáåÈù¢Êúâ‰∏Ä‰∏™Ëé∑ÂèñUUIDÁöÑÊñπÊ≥ïÔºåÊó©ÂÖ∂‰ªñÂ∑≤ÁªèÂºïÁî®multi-commonÁöÑËøô‰∏™module‰∏≠ÔºåÂè™ÈúÄË¶ÅÁõ¥Êé•Ë∞ÉÁî®Âç≥ÂèØ package com.iogogogo; import com.iogogogo.common.util.IdHelper; import lombok.extern.slf4j.Slf4j; /** * Created by tao.zeng on 2019-07-27. */ @Slf4j public class MainApplicatiom { public static void main(String[] args) { // ËøôÈáåÁöÑIdHelper Á±ªÔºåÊù•Ëá™‰∫émulti-common module log.info(\"uuid [{}]\", IdHelper.uuid()); } } ÊâìÂåÖÂ§ömoduleÈ°πÁõÆÂÖ≥‰∫éÂ§ömoduleÈ°πÁõÆÊâìÂåÖÔºåspring bootÂçáÁ∫ßÂà∞2.0‰ª•ÂêéÔºåÊâìÂåÖÊèí‰ª∂Êúâ‰∏Ä‰∫õÂ∞èÂèòÂåñÔºåÊØîÂ¶ÇÂè™Âú®multi-commonÂä†‰∏Ä‰∏™Â∑•ÂÖ∑Á±ªÔºå‰ΩøÁî®mavenËá™Â∏¶ÁöÑÊâìÂåÖÂ∑•ÂÖ∑ÊâìÂåÖÔºå‰ºöÊä•ÈîôËØØÔºå‰ΩÜÊòØ‰∏çÂΩ±ÂìçÈ°πÁõÆÊ≠£Â∏∏ËøêË°å„ÄÇÊó•ÂøóÂ¶Ç‰∏ã [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] life-multi-module [INFO] multi-common [INFO] multi-api [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building life-multi-module 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- spring-boot-maven-plugin:2.1.6.RELEASE:repackage (repackage) @ life-multi-module --- [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building multi-common 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ multi-common --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 0 resource [INFO] Copying 0 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ multi-common --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 2 source files to /Users/tao.zeng/tmp/life-multi-module/multi-common/target/classes [INFO] [INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ multi-common --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory /Users/tao.zeng/tmp/life-multi-module/multi-common/src/test/resources [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ multi-common --- [INFO] Changes detected - recompiling the module! [INFO] [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ multi-common --- [INFO] Tests are skipped. [INFO] [INFO] --- maven-jar-plugin:3.1.2:jar (default-jar) @ multi-common --- [INFO] Building jar: /Users/tao.zeng/tmp/life-multi-module/multi-common/target/multi-common-0.0.1-SNAPSHOT.jar [INFO] [INFO] --- spring-boot-maven-plugin:2.1.6.RELEASE:repackage (repackage) @ multi-common --- [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary: [INFO] [INFO] life-multi-module .................................. SUCCESS [ 1.037 s] [INFO] multi-common ....................................... FAILURE [ 2.536 s] [INFO] multi-api .......................................... SKIPPED [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 4.037 s [INFO] Finished at: 2019-07-27T10:50:18+08:00 [INFO] Final Memory: 35M/293M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.1.6.RELEASE:repackage (repackage) on project multi-common: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.1.6.RELEASE:repackage failed: Unable to find main class -> [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException [ERROR] [ERROR] After correcting the problems, you can resume the build with the command [ERROR] mvn &lt;goals> -rf :multi-common ÊÑèÊÄùÂ∞±ÊòØËØ¥Êàë‰ª¨Âú®multi-commonËøô‰∏™module‰∏≠Áº∫Â∞ë‰∫Ümain classÔºåÈÇ£‰πàÊàë‰ª¨Âä†‰∏äÂú®multi-common‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Á±ªÔºåÂè™Êúâ‰∏Ä‰∏™mainÊñπÊ≥ïÔºåÁÑ∂ÂêéÂÜçÊù•ÊâìÂåÖÔºå‰æùÊóßÊä•ÈîôÔºåÊó•ÂøóÂ¶Ç‰∏ã /Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home/bin/java -Dvisualvm.id=375540266385044 -Dmaven.multiModuleProjectDirectory=/Users/tao.zeng/tmp/life-multi-module \"-Dmaven.home=/Applications/IntelliJ IDEA.app/Contents/plugins/maven/lib/maven3\" \"-Dclassworlds.conf=/Applications/IntelliJ IDEA.app/Contents/plugins/maven/lib/maven3/bin/m2.conf\" \"-javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=56994:/Applications/IntelliJ IDEA.app/Contents/bin\" -Dfile.encoding=UTF-8 -classpath \"/Applications/IntelliJ IDEA.app/Contents/plugins/maven/lib/maven3/boot/plexus-classworlds-2.5.2.jar\" org.codehaus.classworlds.Launcher -Didea.version=2018.3.5 -DskipTests=true package [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] life-multi-module [INFO] multi-common [INFO] multi-api [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building life-multi-module 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- spring-boot-maven-plugin:2.1.6.RELEASE:repackage (repackage) @ life-multi-module --- [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building multi-common 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ multi-common --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 0 resource [INFO] Copying 0 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ multi-common --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 2 source files to /Users/tao.zeng/tmp/life-multi-module/multi-common/target/classes [INFO] [INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ multi-common --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory /Users/tao.zeng/tmp/life-multi-module/multi-common/src/test/resources [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ multi-common --- [INFO] Changes detected - recompiling the module! [INFO] [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ multi-common --- [INFO] Tests are skipped. [INFO] [INFO] --- maven-jar-plugin:3.1.2:jar (default-jar) @ multi-common --- [INFO] Building jar: /Users/tao.zeng/tmp/life-multi-module/multi-common/target/multi-common-0.0.1-SNAPSHOT.jar [INFO] [INFO] --- spring-boot-maven-plugin:2.1.6.RELEASE:repackage (repackage) @ multi-common --- [INFO] Replacing main artifact with repackaged archive [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building multi-api 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ multi-api --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 0 resource [INFO] Copying 0 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ multi-api --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 1 source file to /Users/tao.zeng/tmp/life-multi-module/multi-api/target/classes [INFO] ------------------------------------------------------------- [ERROR] COMPILATION ERROR : [INFO] ------------------------------------------------------------- [ERROR] /Users/tao.zeng/tmp/life-multi-module/multi-api/src/main/java/com/iogogogo/MainApplicatiom.java:[3,32] Á®ãÂ∫èÂåÖcom.iogogogo.common.util‰∏çÂ≠òÂú® [INFO] 1 error [INFO] ------------------------------------------------------------- [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary: [INFO] [INFO] life-multi-module .................................. SUCCESS [ 1.499 s] [INFO] multi-common ....................................... SUCCESS [ 2.279 s] [INFO] multi-api .......................................... FAILURE [ 0.540 s] [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 4.828 s [INFO] Finished at: 2019-07-27T10:52:45+08:00 [INFO] Final Memory: 38M/302M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project multi-api: Compilation failure [ERROR] /Users/tao.zeng/tmp/life-multi-module/multi-api/src/main/java/com/iogogogo/MainApplicatiom.java:[3,32] Á®ãÂ∫èÂåÖcom.iogogogo.common.util‰∏çÂ≠òÂú® [ERROR] -> [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException [ERROR] [ERROR] After correcting the problems, you can resume the build with the command [ERROR] mvn &lt;goals> -rf :multi-api Process finished with exit code 1 Ëøô‰∏™ÈÖçÁΩÆÔºåÂú®spring boot2.0ÁâàÊú¨‰πãÂâçÔºåÂÖ∂ÂÆûÊòØÂÆåÂÖ®ÂèØ‰ª•ÁöÑÔºåÂú®ÂàÜÊûêÈîôËØØ‰πãÂâçÔºåÊàë‰ª¨ÂÖàÁúã‰∏Ä‰∏ãÊï¥‰∏™È°πÁõÆÁöÑÁõÆÂΩïÁªìÊûÑ ÂèØ‰ª•ÁúãÂà∞Âú®multi-common‰∏ãÈù¢Êúâ‰∏§‰∏™classÔºåÂú®multi-api‰∏ãÈù¢Êúâ‰∏Ä‰∏™classÔºåÈÇ£ÈáåÈù¢ÁöÑÂÜÖÂÆπÂ∞±ÊòØÂºïÁî®‰∫Ümulti-common‰∏≠ÁöÑcom.iogogogo.common.util.IdHelperÔºå‰ΩÜÊòØÁé∞Âú®ÈîôËØØÊó•ÂøóÂç¥ËØ¥com.iogogogo.common.util‰∏çÂ≠òÂú®ÔºåËøôÈáåÂ∞±ÂæàÁ∫≥Èó∑‰∫ÜÂêßÔºåÊé•‰∏ãÊù•Ôºå‰ªãÁªç‰∏Ä‰∏ãspring bootÁöÑÊâìÂåÖÊèí‰ª∂ÔºåËøòÂæóÂõûÂà∞parent pom.xml‰∏≠Ôºå‰ΩøÁî®Spring InitializrÂàõÂª∫È°πÁõÆÂêéÔºåÈªòËÆ§Êúâ‰∏Ä‰∏™ spring-boot-maven-plugin Ëøô‰∏™mavenÊèí‰ª∂Ôºå‰∏ªË¶ÅÂéüÂõ†Â∞±Âú®ËøôÈáåÔºåsprint boot2.0ÂçáÁ∫ß‰ª•ÂêéÔºåÂØπÊèí‰ª∂‰πüÂÅö‰∫ÜÁõ∏Â∫îÁöÑÂçáÁ∫ßÔºåÂ¶ÇÊûúË¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÈúÄË¶ÅÂú®Ê≠§Âü∫Á°Ä‰∏äÂÅö‰∏Ä‰∫õÈÖçÁΩÆ &lt;build> &lt;plugins> &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;/plugin> &lt;/plugins> &lt;/build> plugin‰øÆÊîπ‰ª•ÂêéÔºåÂÖ≥‰∫éconfigurationÁöÑÈÖçÁΩÆ‰ªãÁªçÔºåÂèØ‰ª•Áúãspring bootÂÆòÊñπÁöÑÊñáÊ°£ maven-plugin &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;configuration> &lt;classifier>bootJar&lt;/classifier> &lt;outputDirectory>${project.build.directory}/boot&lt;/outputDirectory> &lt;/configuration> &lt;/plugin> ‰øÆÊîπÊèí‰ª∂‰ª•ÂêéÔºåÂú®Ê≠§ÊâßË°åÊâìÂåÖÂëΩ‰ª§Â∞±ÂèØ‰ª•Ê≠£Â∏∏ÊâìÂåÖÔºåÊàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊâìÂåÖ‰ª•Âêé targetÁõÆÂΩïÁöÑÁªìÊûúÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ÂèØ‰ª•ÂéªÁõ∏Â∫îÁöÑÁõÆÂΩïÁúã‰∏Ä‰∏ãÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåËøôÈáåÊàëÂ∞±‰∏çÂú®Êâ©Â±ï‰∫ÜÔºåÊ†∏ÂøÉÊó•ÂøóÊàë‰πüÊúâÂÅöÊ†áËÆ∞ Â•Ω‰∫ÜÔºåÂà∞ËøôÈáåÔºå‰∏Ä‰∏™ÂÆåÊï¥ÁöÑspring bootÂ§ömoduleÊûÑÂª∫ÁöÑÈ°πÁõÆÈ™®Êû∂Âü∫Êú¨ÂÆåÊàê‰∫ÜÔºå‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∫õÂÆûÁî®ÁöÑmavenÊèí‰ª∂ÔºåÈÖçÂêàspring bootÈ£üÁî®Êõ¥‰Ω≥„ÄÇ github Â∏∏Áî®Êèí‰ª∂‰ΩøÁî®‰ªãÁªçspring-boot-maven-pluginËØ•Êèí‰ª∂‰∏ªË¶ÅÁî®‰∫éspring bootÈ°πÁõÆÊûÑÂª∫ÂíåÊâìÂåÖÔºå‰∏äÈù¢ÊúâÁÆÄÂçïÁöÑ‰ªãÁªçÂíåÂÆòÁΩëÈìæÊé•Ôºå‰∏ªË¶ÅÂ∞±ÊòØÈÖçÁΩÆ templating-maven-pluginËØ•Êèí‰ª∂‰∏ªË¶ÅÁîüÊàê‰∏Ä‰∏™Ê®°ÊùøÁ±ªÔºåÂèØ‰ª•Áõ¥Êé•ËØªÂèñmaven pom‰∏≠ÁöÑartifactId„ÄÅgroupId„ÄÅversionÁ≠â‰ø°ÊÅØÔºå‰∏äÈù¢ÁöÑÈ°πÁõÆÊ∫êÁ†Å‰∏≠Êàë‰ºöÂÅöÂá∫Á§∫‰æãÔºåÁî®‰∫ÜËØ•Êèí‰ª∂‰ª•ÂêéÔºåÁ¨¨‰∏ÄÊ¨°checkout project‰ª•Âêé ÈúÄË¶Å‰ΩøÁî®mavenÁöÑ compileÊûÑÂª∫‰∏Ä‰∏ã buildnumber-maven-pluginËØ•Êèí‰ª∂‰∏ªË¶ÅËß£ÂÜ≥mavenÊâìÂåÖ‰ª•ÂêéÁöÑÊó∂Èó¥Êú¨Âú∞ÂåñÈóÆÈ¢òÔºå‰∏çÁÑ∂‰∏ÄÁõ¥‰ºöÊúâ8Â∞èÊó∂ÁöÑÊó∂Â∑ÆÔºå‰∏ÄËà¨ÈÖçÂêàmaven-assembly-plugin‰ΩøÁî®Êõ¥Â•Ω maven-assembly-pluginËØ•Êèí‰ª∂‰∏ªË¶ÅÁî®‰∫éÈ°πÁõÆÊâìÂåÖ‰ª•ÂêéÁöÑÊñá‰ª∂ÂΩíÊ°£ÊàêÊåáÂÆöÁöÑÂéãÁº©ÂåÖÔºåÈÄöËøáÈÖçÁΩÆÊñá‰ª∂Ëá™ÂÆö‰πâÈúÄË¶ÅÂΩíÊ°£ÁöÑÊñá‰ª∂ maven-compiler-pluginËØ•Êèí‰ª∂‰∏ªË¶ÅËßÑËåÉmaven projectÁöÑcompilerÁöÑjdkÁâàÊú¨ git-commit-id-pluginËØ•Êèí‰ª∂Áî®‰∫éÁîü‰∫ßÈ°πÁõÆÁöÑgit‰ø°ÊÅØÔºåÊñπ‰æøÁ®ãÂ∫èËØªÂèñ maven-jar-plugin„ÄÅmaven-dependency-pluginspring bootÊâìÂåÖÁöÑjarÈªòËÆ§ÊòØall in oneÔºåÊó¢‰∏Ä‰∏™jarÂåÖÂê´ÊâÄÊúâ‰æùËµñÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏§‰∏™Êèí‰ª∂ÔºåÂ∞ÜÊâìÂá∫ÁöÑjarÂÅö‰∏Ä‰∏™libÁöÑÂàÜÁ¶ª","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Spring Cloud ÈÖçÁΩÆ‰∏≠‚ºº","slug":"spring-cloud-config","date":"2019-04-06T03:32:30.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2019/04/06/spring-cloud-config/","link":"","permalink":"http://iogogogo.github.io/2019/04/06/spring-cloud-config/","excerpt":"","text":"Âú®Á≥ªÁªüÊû∂ÊûÑ‰∏≠ÔºåÂíåÂÆâÂÖ®„ÄÅ‚ΩáÊó•Âøó„ÄÅÁõëÊéßÁ≠â‚æÆÈùûÂäüËÉΩÈúÄÊ±Ç‚ºÄ‰∏ÄÊ†∑ÔºåÈÖçÁΩÆÁÆ°ÁêÜÔß§‰πüÊòØ‚ºÄ‰∏ÄÁßç‚æÆÈùûÂäüËÉΩÈúÄÊ±Ç„ÄÇÈÖçÁΩÆ‰∏≠‚ººÂøÉÊòØÊï¥‰∏™ÂæÆÊúçÂä°Âü∫Á°ÄÊû∂ÊûÑ‰ΩìÁ≥ª‰∏≠ÁöÑ‚ºÄ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåÂÆÉÁöÑÂäüËÉΩÁúã‰∏äÂéªÂπ∂‰∏çÔ•ßËµ∑ÁúºÔºå‚ΩÜÊó†‚æÆÈùûÂ∞±ÊòØÁÆÄÂçïÈÖçÁΩÆÁöÑÁÆ°ÁêÜÔß§ÂíåÂ≠òÂèñÔºå‰ΩÜÂÆÉÊòØÊï¥‰∏™ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠‰∏çÔ•ßÂèØÊàñÁº∫ÁöÑ‚ºÄ‰∏ÄÁéØ„ÄÇÂè¶Â§ñÔºåÈÖçÁΩÆ‰∏≠‚ººÂøÉÂ¶ÇÊûúÁúüÂæó‚Ω§Áî®Â•Ω‰∫ÜÔ¶∫ÔºåÂÆÉËøòËÉΩÊé®Âä®ÊäÄÊúØÁªÑÁªáÊåÅÁª≠‰∫§‰ªòÂíåDevOps‚ΩÇÊñáÂåñËΩ¨Âûã„ÄÇ Â∏∏Áî®ÈÖçÁΩÆ‰∏≠ÂøÉ Èòø‚æ•ÈáåÔß©Â∑¥Â∑¥‰∏≠Èó¥‰ª∂ÈÉ®‚ªîÈó®ÂæàÊó©Â∞±‚æÉËá™Á†î‰∫ÜÔ¶∫ÈÖçÁΩÆ‰∏≠‚ººÂøÉDiamondÔºåÂπ∂‰∏îÊòØÂºÄÊ∫êÁöÑ„ÄÇDiamondÂØπÈòø‚æ•ÈáåÔß©Á≥ªÁªüÁöÑÁÅµ Ê¥ªÁ®≥ÂÆöÊÄßÂèëÊå•‰∫ÜÔ¶∫‚æÑËá≥ÂÖ≥ÈáçË¶ÅÁöÑ‰Ωú‚Ω§Áî®„ÄÇÂºÄÊ∫êÁâàÊú¨ÁöÑDiamondÁî±‰∫éÁ†îÂèëÊó∂Èó¥‚ΩêÊØîËæÉÊó©Ôºå‰Ωø‚Ω§Áî®ÁöÑÊäÄÊúØ‚ΩêÊØîËæÉ ‚ΩºËÄÅÔ§¥ÔºåÂäüËÉΩ‰πü‰∏çÔ•ßÂ§üÂÆåÂñÑÔºå‚Ω¨ÁõÆÂâçÁ§æÂå∫‰∏çÔ•ßÁÉ≠Â∑≤Áªè‰∏çÔ•ßÁª¥Êä§‰∫ÜÔ¶∫„ÄÇ FacebookÂÜÖÈÉ®‰πüÊúâ‚ºÄ‰∏ÄÊï¥Â•óÂÆåÂñÑÁöÑÈÖçÁΩÆÁÆ°ÁêÜÔß§‰ΩìÁ≥ªÔºåÂÖ∂‰∏≠‚ºÄ‰∏Ä‰∏™‰∫ßÂìÅÂè´GatekeeperÔºå‚Ω¨ÁõÆÂâçÊ≤°ÊúâÂºÄÊ∫ê„ÄÇ NetflixÂÜÖÈÉ®Êúâ‚º§Â§ßÈáèÔ•æÁöÑÂæÆÊúçÂä°ÔºåÂÆÉÁöÑÊúçÂä°ÁöÑÁ®≥ÂÆöÁÅµÊ¥ªÊÄß‰πüÈáçÂ∫¶‰æùËµñ‰∫éÈÖçÁΩÆ‰∏≠‚ººÂøÉ„ÄÇNetflixÂºÄÊ∫ê‰∫ÜÔ¶∫ÂÆÉÁöÑÈÖç ÁΩÆ‰∏≠‚ººÂøÉÁöÑÂÆ¢Êà∑Á´ØÔºåÂè´Âèò‚æäËâ≤‚ª∞ÈæôArchaiusÔºå‚ΩêÊØîËæÉÂèØÊÉúÁöÑÊòØÔºåNetflixÊ≤°ÊúâÂºÄÊ∫êÂÆÉÁöÑÈÖçÁΩÆ‰∏≠‚ººÂøÉÁöÑÊúçÂä°Âô®Ô®∏Á´Ø„ÄÇ ApolloÊòØÊê∫Á®ãÊ°ÜÊû∂ÈÉ®Á†îÂèëÂπ∂ÂºÄÊ∫êÁöÑ‚ºÄ‰∏ÄÊ¨æÈÖçÁΩÆ‰∏≠‚ººÂøÉ‰∫ßÂìÅÔºå‰ºÅ‰∏öÁ∫ßÊ≤ªÁêÜÔß§ÂäüËÉΩÂÆåÂñÑÔºå‚Ω¨ÁõÆÂâçÁ§æÂå∫‚ΩêÊØîËæÉ‚ΩïÁÅ´ÔºåÂú® github‰∏äÊúâË∂ÖËøá10kÊòüÔºåÂú®ÂõΩÂÜÖ‰ºóÂ§ö‰∫íËÅî‚ΩπÁΩëÂÖ¨Âè∏ÊúâËêΩÂú∞Ê°à‰æãÔ¶µ„ÄÇ‚Ω¨ÁõÆÂâçITOA‰πüÊòØÈáá‚Ω§Áî®ÁöÑApolloÈÖçÁΩÆ‰∏≠ ‚ººÂøÉ„ÄÇ ÁôæÂ∫¶‰πãÂâç‰πüÂºÄÊ∫êËøá‚ºÄ‰∏Ä‰∏™Âè´DisconfÁöÑÈÖçÁΩÆ‰∏≠‚ººÂøÉ‰∫ßÂìÅÔºå‰ΩúËÄÖÊòØÂâçÁôæÂ∫¶ËµÑÊ∑±‚ºØÂ∑•Á®ãÂ∏àÂªñÁªÆÁªÆ„ÄÇÂú®ApolloÊ≤° ÊúâÂá∫Êù•‰πãÂâçÔºåDisconfÂú®Á§æÂå∫ÊòØ‚ΩêÊØîËæÉ‚ΩïÁÅ´ÁöÑÔºå‰ΩÜÊòØ‚æÉËá™‰ªéÂªñÁê¶Áê¶Á¶ªÂºÄÁôæÂ∫¶‰πãÂêéÔºå‰ªñÂ•ΩÂÉèÊ≤°Êúâ‚æúË∂≥Â§üÁ≤æ‚ºíÂäõÔ¶äÊäï ‚ºäÂÖ•Áª¥Êä§Ëøô‰∏™È°π‚Ω¨ÁõÆÔºå‚Ω¨ÁõÆÂâçÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶Â∑≤Áªè‚º§Â§ß‰∏çÔ•ßÂ¶ÇÂâç„ÄÇ ‰ª•Âèä Spring Cloud ConfigÔºåÂíåspring cloud‚Ω£ÁîüÊÄÅÊòØÂ§©ÁÑ∂‚ΩÄÊîØÊåÅÔºåÂΩìÁÑ∂ÔºåÊàë‰∏™‚ºà‰∫∫ËßâÂæó‰Ωú‰∏∫‚ºÄ‰∏Ä‰∏™‚Ω£Áîü‰∫ßÁ∫ß Âà´ÁöÑÈÖçÁΩÆ‰∏≠‚ººÂøÉÔºåspring cloud configËøòÊòØÂ≠òÂú®‚ºÄ‰∏ÄÂÆöÁöÑÁº∫Èô∑ÁöÑÔºå‚ΩêÊØîÂ¶Ç‚ºÄ‰∏Ä‰∏™ÂèØËßÜÂåñÁöÑÁÆ°ÁêÜÔß§Áïå‚æØÈù¢ÔºåÊ≤°Êúâ spring cloud busÁ≠â‚ΩÄÊîØÊåÅÔºå‚ΩÜÊó†Ê≥ïÂÅöÂà∞ÁÉ≠ÂèëÂ∏ÉÁ≠âÁ≠âÔºå‰ΩÜÊòØÊàë‰ª¨ËøòÊòØÁÆÄÂçï‰ªãÁªç‚ºÄ‰∏Ä‰∏ãspring cloud config„ÄÇ‰∏™‚ºà‰∫∫Êé®Ëçê‚Ω£Áîü‰∫ß‰Ωø‚Ω§Áî®Êê∫Á®ãApollo„ÄÇ Spring Cloud ConfigSpring Cloud ConfigÈ°πÁõÆÊòØ‰∏Ä‰∏™Ëß£ÂÜ≥ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑÈÖçÁΩÆÁÆ°ÁêÜÊñπÊ°à„ÄÇÂÆÉÂåÖÂê´‰∫ÜClientÂíåServer‰∏§‰∏™ÈÉ®ÂàÜÔºåserverÊèê‰æõÈÖçÁΩÆÊñá‰ª∂ÁöÑÂ≠òÂÇ®„ÄÅ‰ª•Êé•Âè£ÁöÑÂΩ¢ÂºèÂ∞ÜÈÖçÁΩÆÊñá‰ª∂ÁöÑÂÜÖÂÆπÊèê‰æõÂá∫ÂéªÔºåclientÈÄöËøáÊé•Âè£Ëé∑ÂèñÊï∞ÊçÆ„ÄÅÂπ∂‰æùÊçÆÊ≠§Êï∞ÊçÆÂàùÂßãÂåñËá™Â∑±ÁöÑÂ∫îÁî®„ÄÇSpring cloud‰ΩøÁî®gitÊàñsvnÂ≠òÊîæÈÖçÁΩÆÊñá‰ª∂ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰ΩøÁî®git„ÄÇ Êàë‰ª¨ËøòÊòØ‰ª•‰πãÂâçÁöÑservice-producer‰∏∫Âü∫Á°ÄÔºåÂπ∂‰∏îÂú®È°πÁõÆÊ†πÁõÆÂΩïÂàõÂª∫‰∏Ä‰∏™cloud-conf-repoÊñá‰ª∂Â§πÁî®Êù•Â≠òÊîæÈÖçÁΩÆÔºåÂπ∂‰∏îÂáÜÂ§á‰∏â‰∏™Êñá‰ª∂ # ÂºÄÂèëÁéØÂ¢É life-example-producer-dev.properties # ÊµãËØïÁéØÂ¢É life-example-producer-test.properties # Áîü‰∫ßÁéØÂ¢É life-example-producer-pro.properties Êñá‰ª∂ÂÜÖÂÆπ‰∏∫ÂàÜÂà´‰∏∫sharplook.instance=sharplook-[dev/test/pro] Server Á´ØÈÖçÁΩÆpom ÈÖçÁΩÆ&lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-config-server&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-eureka-client&lt;/artifactId> &lt;/dependency> Â±ûÊÄßÊñá‰ª∂ÈÖçÁΩÆspring.application.name=life-cloud-config server.port=8899 eureka.instance.prefer-ip-address=true eureka.client.service-url.defaultZone=http://localhost:8761/eureka/ # git‰ªìÂ∫ìÂú∞ÂùÄ spring.cloud.config.server.git.uri= # git‰ªìÂ∫ìÂú∞ÂùÄ‰∏ãÁöÑÁõ∏ÂØπÂú∞ÂùÄ ÂèØ‰ª•ÈÖçÁΩÆÂ§ö‰∏™ Áî®,ÂàÜÂâ≤„ÄÇ spring.cloud.config.server.git.search-paths= # git ‰ªìÂ∫ìÁî®Êà∑Âêç spring.cloud.config.server.git.username= # git ‰ªìÂ∫ìÂØÜÁ†Å spring.cloud.config.server.git.password= # Â¶ÇÊûúÊúâÂàÜÊîØ ÂèØ‰ª•Âú®ËøôÈáåÈÖçÁΩÆÂàÜÊîØÂêçÁß∞ spring.cloud.config.server.git.default-label= ÂêØÂä®Á±ªÈÖçÁΩÆpackage com.iogogogo.config; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.config.server.EnableConfigServer; import org.springframework.cloud.netflix.eureka.EnableEurekaClient; /** * Created by tao.zeng on 2019-03-16. */ @EnableConfigServer @EnableEurekaClient @SpringBootApplication public class ConfigApplication { public static void main(String[] args) { SpringApplication.run(ConfigApplication.class, args); } } ÊµãËØïÊµèËßàÂô®ËÆøÈóÆ http://localhost:8899/life-example-producer/dev http://localhost:8899/life-example-producer/test http://localhost:8899/life-example-producer/pro ÂàÜÂà´‰ºöÊåâÁÖßÊàë‰ª¨ÁöÑÈÖçÁΩÆËøîÂõûÁõ∏Â∫îÁöÑÊï∞ÊçÆÔºåÊ†ºÂºèÂ¶Ç‰∏ã // 20190317102625 // http://localhost:8899/life-example-producer/dev { \"name\": \"life-example-producer\", \"profiles\": [ \"dev\" ], \"label\": null, \"version\": \"131d288174b48601af4461dfde809913c87b91ca\", \"state\": null, \"propertySources\": [ { \"name\": \"https://gitlab.eoitek.net/zengtao/life-cloud-example.git/cloud-conf-repo/life-example-producer-dev.properties\", \"source\": { \"sharplook.instance\": \"sharplook-dev\" } } ] } ‰ªìÂ∫ì‰∏≠ÁöÑÈÖçÁΩÆÊñá‰ª∂‰ºöË¢´ËΩ¨Êç¢ÊàêwebÊé•Âè£ÔºåËÆøÈóÆÂèØ‰ª•ÂèÇÁÖß‰ª•‰∏ãÁöÑËßÑÂàôÔºö /{application}/{profile}[/{label}] /{application}-{profile}.yml /{label}/{application}-{profile}.yml /{application}-{profile}.properties /{label}/{application}-{profile}.properties ClientÈÖçÁΩÆclient ‰∏ªË¶ÅÊòØÂÖ∂‰ªñÊúçÂä°ÊÄé‰πàÂéªËé∑Âèñconfig‰∏≠ÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåËøòÊòØ‰ª•service-producer‰∏∫‰æã pom ÈÖçÁΩÆ&lt;!-- Ê∑ªÂä†configÂÆ¢Êà∑Á´Ø‰æùËµñ --> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-config&lt;/artifactId> &lt;/dependency> Â±ûÊÄßÊñá‰ª∂ÈÖçÁΩÆapplication.propertiesÊó†ÈúÄ‰øÆÊîπÔºåÊñ∞Âª∫bootstrap.propertiesÊñá‰ª∂ÔºåÁî®‰∫éÈÖçÁΩÆspring cloud configÁöÑÊúçÂä°Âô®‰ø°ÊÅØ # ÈÖçÁΩÆ‰∏≠ÂøÉÂú∞ÂùÄ spring.cloud.config.uri=http://localhost:8899/ # ‰ΩøÁî®Âì™‰∏™ÁéØÂ¢ÉÁöÑÈÖçÁΩÆ spring.cloud.config.profile=dev # ÂΩìÂâçÊúçÂä°ÁöÑÂêçÁß∞ Âíå spring.application.nameÂØπÂ∫îÂç≥ÂèØ spring.cloud.config.name=${spring.application.name} # ËØªÂèñÊåáÂÆöÂàÜÊîØÈÖçÁΩÆ spring.cloud.config.label=master ‰∏äÈù¢Ëøô‰∫õ‰∏éspring-cloudÁõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÂøÖÈ°ªÈÖçÁΩÆÂú®bootstrap.properties‰∏≠ÔºåconfigÈÉ®ÂàÜÂÜÖÂÆπÊâçËÉΩË¢´Ê≠£Á°ÆÂä†ËΩΩ„ÄÇÂõ†‰∏∫configÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ‰ºöÂÖà‰∫éapplication.propertiesÔºåËÄåbootstrap.propertiesÁöÑÂä†ËΩΩ‰πüÊòØÂÖà‰∫éapplication.properties„ÄÇ ÂêØÂä®Á±ª Êó†ÈúÄÂèòÊõ¥ Controller‰∏∫‰∫ÜÊñπ‰æøÊµãËØïÔºåËøòÊòØ‰ΩøÁî®Êé•Âè£ËÆøÈóÆÂΩ¢ÂºèÔºåÊñ∞Âª∫ConfigApi package com.iogogogo.producer.api; import org.springframework.beans.factory.annotation.Value; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; /** * Created by tao.zeng on 2019-03-17. */ @RestController @RequestMapping(\"/api/config\") public class ConfigApi { /** * ËøôÈáåkey Â∞±ÊòØËá™ÂÆö‰πâÂú®ÈÖçÁΩÆ‰∏≠ÂøÉ‰∏≠ÁöÑkey */ @Value(\"${sharplook.instance}\") private String instance; @GetMapping(\"/\") public String config() { return instance; } } ÊµãËØïÂêØÂä®service-producerÊúçÂä°ÔºåËÆøÈóÆ http://localhost:8080/api/config/ ËøîÂõû sharplook-dev ‰øÆÊîπspring.cloud.config.profile=proÈÖçÁΩÆÔºåÈáçÂêØÊúçÂä°ÂêéÔºåËÆøÈóÆÊé•Âè£ÔºåËøîÁé∞ËøîÂõûÁªìÊûúÂ∞±ÊòØÊàë‰ª¨Âú®config‰∏≠ÁöÑÈÖçÁΩÆ ‰øÆÊîπÈÖçÁΩÆ‰∏≠ÂøÉÁöÑgit‰∏≠ÁöÑÈÖçÁΩÆÔºåÊé®ÈÄÅÂà∞git‰ª•ÂêéÔºåÂÜçÊ¨°ËØ∑Ê±ÇÊúçÂä°ÔºåÂ∞±ËÉΩÁúãÂà∞Êñ∞ÁöÑÂèòÊõ¥ÈÖçÁΩÆ„ÄÇ Â∞èÁªì ÈÖçÁΩÆ‰∏≠ÂøÉÊòØÂæÆÊúçÂä°Âü∫Á°ÄÊû∂ÊûÑ‰∏≠‰∏çÂèØÊàñÁº∫ÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ÔºåÁé∞‰ª£ÂæÆÊúçÂä°Êû∂ÊûÑÂíå‰∫ëÂéüÁîüÁéØÂ¢ÉÔºåÂØπÂ∫îÁî®ÈÖçÁΩÆÁÆ°ÁêÜÊèêÂá∫‰∫ÜÊõ¥È´òÁöÑË¶ÅÊ±Ç„ÄÇ ÈÖçÁΩÆ‰∏≠ÂøÉÊúâ‰ºóÂ§öÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÈÖçÁΩÆ‰∏≠ÂøÉ+ÂäüËÉΩÂºÄÂÖ≥ÊòØDevOpsÊúÄ‰Ω≥ÂÆûË∑µ„ÄÇÁî®Â•ΩÈÖçÁΩÆ‰∏≠ÂøÉÔºåÂÆÉËÉΩÂ∏ÆÂä©ÊäÄÊúØÁªÑÁªáÂÆûÁé∞ÊåÅÁª≠‰∫§‰ªòÂíåDevOpsÊñáÂåñËΩ¨Âûã„ÄÇ Spring Cloud ConfigÁõ∏ÂØπÊù•ËØ¥ËøòÊòØËææ‰∏çÂà∞Áîü‰∫ßÁ∫ßÂà´ÔºåÁõÆÂâçÊù•ÁúãÊê∫Á®ãÂºÄÊ∫êÁöÑApolloÈÖçÁΩÆ‰∏≠ÂøÉÔºå‰ºÅ‰∏öÁ∫ßÂäüËÉΩÂÆåÂñÑÔºåÁªèËøáÂ§ßËßÑÊ®°Áîü‰∫ßÈ™åËØÅÔºåÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶È´òÔºåÊòØÂºÄÊ∫êÈÖçÁΩÆ‰∏≠ÂøÉ‰∫ßÂìÅÁöÑÈ¶ñÈÄâ„ÄÇ","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/tags/Spring-Cloud/"}]},{"title":"ÊúçÂä°ÁΩëÂÖ≥ Zuul","slug":"spring-cloud-gateway-zuul","date":"2019-04-04T15:01:45.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2019/04/04/spring-cloud-gateway-zuul/","link":"","permalink":"http://iogogogo.github.io/2019/04/04/spring-cloud-gateway-zuul/","excerpt":"","text":"ÊúçÂä°ÁΩëÂÖ≥ ZuulEurekaÁî®‰∫éÊúçÂä°ÁöÑÊ≥®ÂÜå‰∫éÂèëÁé∞ÔºåFeignÊîØÊåÅÊúçÂä°ÁöÑË∞ÉÁî®‰ª•ÂèäÂùáË°°Ë¥üËΩΩÔºåHystrixÂ§ÑÁêÜÊúçÂä°ÁöÑÁÜîÊñ≠Èò≤Ê≠¢ÊïÖÈöúÊâ©Êï£„ÄÇ ‰ΩÜÊòØÂ§ñÈÉ®ÁöÑÂ∫îÁî®Â¶Ç‰ΩïÊù•ËÆøÈóÆÂÜÖÈÉ®ÂêÑÁßçÂêÑÊ†∑ÁöÑÂæÆÊúçÂä°Âë¢ÔºüÂú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåÂêéÁ´ØÊúçÂä°ÂæÄÂæÄ‰∏çÁõ¥Êé•ÂºÄÊîæÁªôË∞ÉÁî®Á´ØÔºåËÄåÊòØÈÄöËøá‰∏Ä‰∏™APIÁΩëÂÖ≥Ê†πÊçÆËØ∑Ê±ÇÁöÑurlÔºåË∑ØÁî±Âà∞Áõ∏Â∫îÁöÑÊúçÂä°„ÄÇÂΩìÊ∑ªÂä†APIÁΩëÂÖ≥ÂêéÔºåÂú®Á¨¨‰∏âÊñπË∞ÉÁî®Á´ØÂíåÊúçÂä°Êèê‰æõÊñπ‰πãÈó¥Â∞±ÂàõÂª∫‰∫Ü‰∏ÄÈù¢Â¢ôÔºåËøôÈù¢Â¢ôÁõ¥Êé•‰∏éË∞ÉÁî®ÊñπÈÄö‰ø°ËøõË°åÊùÉÈôêÊéßÂà∂ÔºåÂêéÂ∞ÜËØ∑Ê±ÇÂùáË°°ÂàÜÂèëÁªôÂêéÂè∞ÊúçÂä°Á´Ø„ÄÇ Spring Cloud ZuulÊ∑ªÂä†‰æùËµñ&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"> &lt;parent> &lt;artifactId>life-cloud-example&lt;/artifactId> &lt;groupId>com.iogogogo&lt;/groupId> &lt;version>0.0.1&lt;/version> &lt;/parent> &lt;modelVersion>4.0.0&lt;/modelVersion> &lt;artifactId>cloud-zuul&lt;/artifactId> &lt;dependencies> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-zuul&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-eureka-client&lt;/artifactId> &lt;/dependency> &lt;/dependencies> &lt;/project> ÈÖçÁΩÆÊñá‰ª∂spring.application.name=life-cloud-zuul server.port=8888 eureka.instance.prefer-ip-address=true eureka.client.service-url.defaultZone=http://localhost:8761/eureka/ # Ë°®Á§∫ËÆøÈóÆiogogogo ÈÉΩ‰ºöË∑≥ËΩ¨Âà∞ https://iogogogo.github.io/ zuul.routes.iogogogo.path=/iogogogo/* zuul.routes.iogogogo.url=https://iogogogo.github.io/ ÂêØÂä®Á±ªpackage com.iogogogo.zuul; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.netflix.eureka.EnableEurekaClient; import org.springframework.cloud.netflix.zuul.EnableZuulProxy; import org.springframework.cloud.netflix.zuul.EnableZuulServer; /** * &lt;p> * Created by tao.zeng on 2019-03-16. */ @EnableZuulProxy @EnableEurekaClient @SpringBootApplication public class ZuulApplication { public static void main(String[] args) { SpringApplication.run(ZuulApplication.class, args); } } ‰æùÊ¨°ÂêØÂä®cloud-eureka„ÄÅcloud-zuul ÂæÆÊúçÂä°Êï¥ÂêàÈÄöËøáurlÊò†Â∞ÑÁöÑÊñπÂºèÊù•ÂÆûÁé∞zuulÁöÑËΩ¨ÂèëÊúâÂ±ÄÈôêÊÄßÔºåÊØîÂ¶ÇÊØèÂ¢ûÂä†‰∏Ä‰∏™ÊúçÂä°Â∞±ÈúÄË¶ÅÈÖçÁΩÆ‰∏ÄÊù°ÂÜÖÂÆπÔºåÂè¶Â§ñÂêéÁ´ØÁöÑÊúçÂä°Â¶ÇÊûúÊòØÂä®ÊÄÅÊù•Êèê‰æõÔºåÂ∞±‰∏çËÉΩÈááÁî®ËøôÁßçÊñπÊ°àÊù•ÈÖçÁΩÆ‰∫Ü„ÄÇÂÆûÈôÖ‰∏äÂú®ÂÆûÁé∞ÂæÆÊúçÂä°Êû∂ÊûÑÊó∂ÔºåÊúçÂä°Âêç‰∏éÊúçÂä°ÂÆû‰æãÂú∞ÂùÄÁöÑÂÖ≥Á≥ªÂú®eureka server‰∏≠Â∑≤ÁªèÂ≠òÂú®‰∫ÜÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÂ∞ÜZuulÊ≥®ÂÜåÂà∞eureka server‰∏äÂéªÂèëÁé∞ÂÖ∂‰ªñÊúçÂä°ÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞ÂØπserviceIdÁöÑÊò†Â∞Ñ„ÄÇ ÈÖçÁΩÆÊñá‰ª∂spring.application.name=life-cloud-zuul server.port=8888 eureka.instance.prefer-ip-address=true eureka.client.service-url.defaultZone=http://localhost:8761/eureka/ # Ë°®Á§∫ËÆøÈóÆiogogogo ÈÉΩ‰ºöË∑≥ËΩ¨Âà∞ https://iogogogo.github.io/ zuul.routes.iogogogo.path=/iogogogo/** zuul.routes.iogogogo.url=https://iogogogo.github.io/ # Ê∑ªÂä†ÂæÆÊúçÂä°Ë∑ØÁî±Âú∞ÂùÄ zuul.routes.producer.path=/producer/** zuul.routes.producer.service-id=life-example-producer ÂêØÂä®ÊúçÂä°Êèê‰æõËÄÖjava -jar service-producer-0.0.1.jar --server.port=8080 --service.instance.name=ËøôÊòØÊúçÂä°Âô®1 java -jar service-producer-0.0.1.jar --server.port=8081 --service.instance.name=ËøôÊòØÊúçÂä°Âô®2 java -jar service-producer-0.0.1.jar --server.port=8082 --service.instance.name=ËøôÊòØÊúçÂä°Âô®3 ËÆøÈóÆ http://localhost:8888/producer/api/index?name=ÈòøÁâõ ‰ºöÂèëÁé∞Ëá™Âä®Ë¥üËΩΩÂùáË°°ÔºåÂ∞ÜÊØè‰∏™ËØ∑Ê±ÇÂàÜÂèëÂà∞‰∏çÂêåÁöÑÊúçÂä°ÔºåËá≥Ê≠§ÔºåÊï¥‰∏™zuulÂíåÂæÆÊúçÂä°Êï¥Âêà‰πüÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ spring cloud gatewayÁåøÂ§©Âú∞spring cloud gatewayÁ≥ªÂàóÊïôÁ®ã","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/tags/Spring-Cloud/"}]},{"title":"ÊúçÂä°Êèê‰æõË∞ÉÁî®‰∏éÁÜîÊñ≠","slug":"spring-cloud-feign","date":"2019-04-01T11:34:40.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2019/04/01/spring-cloud-feign/","link":"","permalink":"http://iogogogo.github.io/2019/04/01/spring-cloud-feign/","excerpt":"","text":"ÊúçÂä°Êèê‰æõË∞ÉÁî®‰∏éÁÜîÊñ≠‰πãÂâçÊàë‰ª¨‰ªãÁªç‰∫ÜeurekaÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÁöÑÊê≠Âª∫ÔºåËøôÁØáÊñáÁ´†‰ªãÁªç‰∏Ä‰∏ãÂ¶Ç‰Ωï‰ΩøÁî®eurekaÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÔºåÊê≠Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊúçÂä°Á´ØÊ≥®ÂÜåÊúçÂä°ÔºåÂÆ¢Êà∑Á´ØÂéªË∞ÉÁî®ÊúçÂä°‰ΩøÁî®ÁöÑÊ°à‰æã„ÄÇ ÈúÄË¶ÅÊúâ‰∏â‰∏™ËßíËâ≤ÔºöÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÅÊúçÂä°Êèê‰æõËÄÖ„ÄÅÊúçÂä°Ê∂àË¥πËÄÖÔºåÂÖ∂‰∏≠ÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÂ∞±ÊòØÊàë‰ª¨‰∏ä‰∏ÄÁØáÁöÑeurekaÂçïÊú∫ÁâàÂêØÂä®Êó¢ÂèØÔºåÊµÅÁ®ãÊòØÈ¶ñÂÖàÂêØÂä®Ê≥®ÂÜå‰∏≠ÂøÉÔºåÊúçÂä°Êèê‰æõËÄÖÁîü‰∫ßÊúçÂä°Âπ∂Ê≥®ÂÜåÂà∞ÊúçÂä°‰∏≠ÂøÉ‰∏≠ÔºåÊ∂àË¥πËÄÖ‰ªéÊúçÂä°‰∏≠ÂøÉ‰∏≠Ëé∑ÂèñÊúçÂä°Âπ∂ÊâßË°å„ÄÇ ÊúçÂä°Êèê‰æõÊàë‰ª¨ÂÅáËÆæÊúçÂä°Êèê‰æõËÄÖÊúâ‰∏Ä‰∏™helloÊñπÊ≥ïÔºåÂèØ‰ª•Ê†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÊèê‰æõËæìÂá∫‚Äúhello xxx‚ÄùÁöÑÊúçÂä° pomÈÖçÁΩÆÂàõÂª∫‰∏Ä‰∏™springbootÈ°πÁõÆÔºåpom.xml‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆÔºåÊ≥®:ÊóßÁâàÁöÑspring cloudÂíåÊúÄÊñ∞ÁâàÁöÑartifactId‰∏çÂ§™‰∏ÄÊ†∑ &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-eureka-client&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-hystrix&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-openfeign&lt;/artifactId> &lt;/dependency> ÈÖçÁΩÆÊñá‰ª∂application.propertiesÈÖçÁΩÆÂ¶Ç‰∏ãÔºö spring.application.name=life-example-producer server.port=8080 eureka.instance.prefer-ip-address=true eureka.client.service-url.defaultZone=http://localhost:8761/eureka/ # Ëøô‰∏™ÈÖçÁΩÆÊòØ‰∏∫‰∫ÜÂêéÈù¢ÊµãËØïË¥üËΩΩÂùáË°° service.instance.name=ËøôÊòØÊúçÂä°Âô®1 ÂêØÂä®Á±ªpackage com.iogogogo.producer; import feign.Retryer; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.netflix.eureka.EnableEurekaClient; import org.springframework.cloud.netflix.hystrix.EnableHystrix; import org.springframework.context.annotation.Bean; /** * Created by tao.zeng on 2019-03-16. */ @EnableHystrix @EnableEurekaClient @SpringBootApplication public class ProducerApplication { public static void main(String[] args) { SpringApplication.run(ProducerApplication.class, args); } @Bean public Retryer feignRetryer() { // new Retryer.Default(100,TimeUnit.SECONDS.toMillis(1),5);//ÈªòËÆ§ÊòØ5Ê¨° return Retryer.NEVER_RETRY; } } Controllerpackage com.iogogogo.producer.api; import org.springframework.beans.factory.annotation.Value; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import java.util.UUID; /** * Created by tao.zeng on 2019-03-16. */ @RestController @RequestMapping(\"/api\") public class IndexApi { @Value(\"${service.instance.name}\") private String instanceName; @GetMapping(\"/index\") public String index(String name) { return String.format(\"%s hello %s - %s\", instanceName, name, UUID.randomUUID().toString()); } } Ê∑ªÂä†@EnableEurekaClientÊ≥®Ëß£ÂêéÔºåÈ°πÁõÆÂ∞±ÂÖ∑Êúâ‰∫ÜÊúçÂä°Ê≥®ÂÜåÁöÑÂäüËÉΩ„ÄÇÂêØÂä®Â∑•Á®ãÂêéÔºåÂ∞±ÂèØ‰ª•Âú®Ê≥®ÂÜå‰∏≠ÂøÉÁöÑÈ°µÈù¢ÁúãÂà∞service-producerÊúçÂä°„ÄÇ Âà∞Ê≠§ÊúçÂä°Êèê‰æõËÄÖÈÖçÁΩÆÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ ÊúçÂä°Ë∞ÉÁî®pomÈÖçÁΩÆÂíåÊúçÂä°Êèê‰æõËÄÖ‰∏ÄËá¥ &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-eureka-client&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-hystrix&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-openfeign&lt;/artifactId> &lt;/dependency> ÈÖçÁΩÆÊñá‰ª∂application.propertiesÈÖçÁΩÆÂ¶Ç‰∏ãÔºö spring.application.name=life-example-consumer server.port=8081 eureka.instance.prefer-ip-address=true eureka.client.service-url.defaultZone=http://localhost:8761/eureka/ # ÂºÄÂêØÁÜîÊñ≠ feign.hystrix.enabled=true ÂêØÂä®Á±ªpackage com.iogogogo.consumer; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.netflix.eureka.EnableEurekaClient; import org.springframework.cloud.netflix.hystrix.EnableHystrix; import org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard; import org.springframework.cloud.openfeign.EnableFeignClients; /** * Created by tao.zeng on 2019-03-16. */ @EnableHystrix @EnableFeignClients @EnableEurekaClient @SpringBootApplication @EnableHystrixDashboard public class ConsumerApplication { public static void main(String[] args) { SpringApplication.run(ConsumerApplication.class, args); } } FeignÊòØ‰∏Ä‰∏™Â£∞ÊòéÂºèWeb ServiceÂÆ¢Êà∑Á´Ø„ÄÇ‰ΩøÁî®FeignËÉΩËÆ©ÁºñÂÜôWeb ServiceÂÆ¢Êà∑Á´ØÊõ¥Âä†ÁÆÄÂçï, ÂÆÉÁöÑ‰ΩøÁî®ÊñπÊ≥ïÊòØÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£ÔºåÁÑ∂ÂêéÂú®‰∏äÈù¢Ê∑ªÂä†Ê≥®Ëß£ÔºåÂêåÊó∂‰πüÊîØÊåÅJAX-RSÊ†áÂáÜÁöÑÊ≥®Ëß£„ÄÇFeign‰πüÊîØÊåÅÂèØÊãîÊèíÂºèÁöÑÁºñÁ†ÅÂô®ÂíåËß£Á†ÅÂô®„ÄÇSpring CloudÂØπFeignËøõË°å‰∫ÜÂ∞ÅË£ÖÔºå‰ΩøÂÖ∂ÊîØÊåÅ‰∫ÜSpring MVCÊ†áÂáÜÊ≥®Ëß£ÂíåHttpMessageConverters„ÄÇFeignÂèØ‰ª•‰∏éEurekaÂíåRibbonÁªÑÂêà‰ΩøÁî®‰ª•ÊîØÊåÅË¥üËΩΩÂùáË°°„ÄÇ feignË∞ÉÁî®ÂÆûÁé∞package com.iogogogo.consumer.feign; import com.iogogogo.consumer.configure.FeignConfig; import com.iogogogo.consumer.feign.fallback.ProducerFallback; import org.springframework.cloud.openfeign.FeignClient; import org.springframework.stereotype.Component; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestMethod; import org.springframework.web.bind.annotation.RequestParam; /** * value = ÊúçÂä°Êèê‰æõËÄÖÁöÑ spring.application.name * fallback = ÁÜîÊñ≠ÈôçÁ∫ßÂ§ÑÁêÜÁ±ª * configuration = ÁÜîÊñ≠ÈôçÁ∫ßÈÖçÁΩÆ * &lt;p> * Created by tao.zeng on 2019-03-16. */ @Component @FeignClient(value = \"life-example-producer\", fallback = ProducerFallback.class, configuration = FeignConfig.class) public interface ProducerService { /** * Ë∞ÉÁî®ÁöÑËøúÁ®ãÊñπÊ≥ïË∑ØÁî±Âú∞ÂùÄÈúÄË¶ÅÂíåÊúçÂä°Êèê‰æõËÄÖÁöÑ‰∏ÄËá¥ÔºåÂπ∂‰∏î‰∏çË¶Å‰ΩøÁî®GetMapping‰πãÁ±ªÁöÑÁÆÄÂåñÊñπÊ≥ï * * @param name * @return */ @RequestMapping(value = \"/api/index\", method = RequestMethod.GET) String index(@RequestParam(\"name\") String name); } Ê∂àË¥πËÄÖË∞ÉÁî®ËøúÁ®ãÊúçÂä°package com.iogogogo.consumer.api; import com.iogogogo.consumer.feign.ProducerService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; /** * Created by tao.zeng on 2019-03-16. */ @RestController @RequestMapping(\"/api/consumer\") public class IndexApi { @Autowired private ProducerService producerService; @RequestMapping(\"/index\") public String index(String name) { return producerService.index(name); } } Âà∞Ê≠§ÔºåÊúÄÁÆÄÂçïÁöÑ‰∏Ä‰∏™ÊúçÂä°Ê≥®ÂÜå‰∏éË∞ÉÁî®ÁöÑ‰æãÂ≠êÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ ÊµãËØïÂêØÂä®ÊúçÂä°‰æùÊ¨°ÂêØÂä®cloud-eureka„ÄÅservice-producer„ÄÅservice-consumer‰∏â‰∏™È°πÁõÆÔºåÂπ∂‰∏îÊü•ÁúãeurekaÊ≥®ÂÜåÊÉÖÂÜµ ÊµãËØïÊúçÂä°Êèê‰æõËÄÖÊµèËßàÂô®ËæìÂÖ•ÊúçÂä°Êèê‰æõËÄÖË∑ØÁî±Âú∞ÂùÄÊü•ÁúãÊòØÂê¶Ê≠£Â∏∏ http://localhost:8080/api/index?name=sharplook ËøîÂõûÁªìÊûú hello sharplook - 7359bd06-8471-4a5d-aa04-7b25b7c13ddb ËØ¥Êòéservice-producerÊ≠£Â∏∏ÂêØÂä®ÔºåÊèê‰æõÁöÑÊúçÂä°‰πüÊ≠£Â∏∏„ÄÇ ÊµãËØïÊúçÂä°Ë∞ÉÁî®ËÄÖÊµèËßàÂô®ËæìÂÖ•Ë∞ÉÁî®ËÄÖË∑ØÁî±Âú∞ÂùÄÔºåÂπ∂‰º†ÈÄíÁõ∏Â∫îÁöÑÂèÇÊï∞ http://localhost:8081/api/consumer/index?name=ÈòøÁâõ ËøîÂõûÁªìÊûú hello ÈòøÁâõ - f012cf85-9a04-4ae0-b879-42fa860d5015 ËØ¥ÊòéÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÊàêÂäüÁöÑÈÄöËøáfeignË∞ÉÁî®‰∫ÜËøúÁ®ãÊúçÂä°ÔºåÂπ∂‰∏îÂ∞ÜÁªìÊûúËøîÂõûÂà∞‰∫ÜÊµèËßàÂô®„ÄÇ Ë¥üËΩΩÂùáË°°ÂâçÈù¢Âú®ÊúçÂä°Êèê‰æõËÄÖÁöÑapplication.propertiesÊñá‰ª∂‰∏≠ÈÖçÁΩÆ‰∫Ü‰∏Ä‰∏™service.instance.nameÂ±ûÊÄßÔºåÁé∞Âú®ËÆ≤Á®ãÂ∫èÊâìÂåÖÔºåÁÑ∂ÂêéËæìÂÖ•‰∏çÂêåÁöÑinstanceÂêçÁß∞ÔºåÁî®Êù•Ê®°ÊãüÂ§ö‰∏™ÊúçÂä°Âô® ‰æùÊ¨°ÂêØÂä®Â§ö‰∏™service-producerÂÆû‰æãÔºå‰ΩøÁî®‰∏çÂêåÁöÑÁ´ØÂè£‰ª•ÂèäËá™ÂÆö‰πâÁöÑservice.instance.name java -jar service-producer-0.0.1.jar --server.port=8080 --service.instance.name=ËøôÊòØÊúçÂä°Âô®1 java -jar service-producer-0.0.1.jar --server.port=8081 --service.instance.name=ËøôÊòØÊúçÂä°Âô®2 java -jar service-producer-0.0.1.jar --server.port=8082 --service.instance.name=ËøôÊòØÊúçÂä°Âô®3 ÂêØÂä®ÂÆåÊàêÂêéÔºå‰ºöÁúãÂà∞eureka‰∏≠ÊúâÂ§ö‰∏™ÊúçÂä°Êèê‰æõËÄÖ ÁÑ∂ÂêéÊ¨°‰ΩøÁî®ÊúçÂä°Ê∂àË¥πËÄÖÂéªË∞ÉÁî® http://localhost:8081/api/consumer/index?name=ÈòøÁâõ Á¨¨‰∏ÄÊ¨°ËøîÂõûÁªìÊûúÔºö ËøôÊòØÊúçÂä°Âô®1 hello ÈòøÁâõ - c280ad85-8475-464e-9856-151c70b8970d Á¨¨‰∫åÊ¨°ËøîÂõûÁªìÊûúÔºö ËøôÊòØÊúçÂä°Âô®2 hello ÈòøÁâõ - 4e798f0a-7fda-4063-bb33-bbaaad106f05 Á¨¨‰∏âÊ¨°ËøîÂõûÁªìÊûúÔºö ËøôÊòØÊúçÂä°Âô®3 hello ÈòøÁâõ - a318c789-9765-4119-a991-b77c72a19ba3 ‰∏çÊñ≠ÁöÑËøõË°åÊµãËØï‰∏ãÂéª‰ºöÂèëÁé∞‰∏§ÁßçÁªìÊûú‰∫§ÊõøÂá∫Áé∞ÔºåËØ¥Êòé‰∏§‰∏™ÊúçÂä°‰∏≠ÂøÉËá™Âä®Êèê‰æõ‰∫ÜÊúçÂä°ÂùáË°°Ë¥üËΩΩÁöÑÂäüËÉΩ„ÄÇÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÊúçÂä°Êèê‰æõËÄÖÁöÑÊï∞ÈáèÂú®ÊèêÈ´ò‰∏∫N‰∏™ÔºåÊµãËØïÁªìÊûú‰∏ÄÊ†∑ÔºåËØ∑Ê±Ç‰ºöËá™Âä®ËΩÆËØ¢Âà∞ÊØè‰∏™ÊúçÂä°Á´ØÊù•Â§ÑÁêÜ„ÄÇ ÊúçÂä°ÁÜîÊñ≠ÁÜîÊñ≠Âô®Èõ™Â¥©ÊïàÂ∫îÂú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÈÄöÂ∏∏‰ºöÊúâÂ§ö‰∏™ÊúçÂä°Â±ÇË∞ÉÁî®ÔºåÂü∫Á°ÄÊúçÂä°ÁöÑÊïÖÈöúÂèØËÉΩ‰ºöÂØºËá¥Á∫ßËÅîÊïÖÈöúÔºåËøõËÄåÈÄ†ÊàêÊï¥‰∏™Á≥ªÁªü‰∏çÂèØÁî®ÁöÑÊÉÖÂÜµÔºåËøôÁßçÁé∞Ë±°Ë¢´Áß∞‰∏∫ÊúçÂä°Èõ™Â¥©ÊïàÂ∫î„ÄÇÊúçÂä°Èõ™Â¥©ÊïàÂ∫îÊòØ‰∏ÄÁßçÂõ†‚ÄúÊúçÂä°Êèê‰æõËÄÖ‚ÄùÁöÑ‰∏çÂèØÁî®ÂØºËá¥‚ÄúÊúçÂä°Ê∂àË¥πËÄÖ‚ÄùÁöÑ‰∏çÂèØÁî®,Âπ∂Â∞Ü‰∏çÂèØÁî®ÈÄêÊ∏êÊîæÂ§ßÁöÑËøáÁ®ã„ÄÇ Â¶ÇÊûú‰∏ãÂõæÊâÄÁ§∫ÔºöA‰Ωú‰∏∫ÊúçÂä°Êèê‰æõËÄÖÔºåB‰∏∫AÁöÑÊúçÂä°Ê∂àË¥πËÄÖÔºåCÂíåDÊòØBÁöÑÊúçÂä°Ê∂àË¥πËÄÖ„ÄÇA‰∏çÂèØÁî®ÂºïËµ∑‰∫ÜBÁöÑ‰∏çÂèØÁî®ÔºåÂπ∂Â∞Ü‰∏çÂèØÁî®ÂÉèÊªöÈõ™ÁêÉ‰∏ÄÊ†∑ÊîæÂ§ßÂà∞CÂíåDÊó∂ÔºåÈõ™Â¥©ÊïàÂ∫îÂ∞±ÂΩ¢Êàê‰∫Ü„ÄÇ ÁÜîÊñ≠Âô®ÔºàCircuitBreakerÔºâÁÜîÊñ≠Âô®ÁöÑÂéüÁêÜÂæàÁÆÄÂçïÔºåÂ¶ÇÂêåÁîµÂäõËøáËΩΩ‰øùÊä§Âô®„ÄÇÂÆÉÂèØ‰ª•ÂÆûÁé∞Âø´ÈÄüÂ§±Ë¥•ÔºåÂ¶ÇÊûúÂÆÉÂú®‰∏ÄÊÆµÊó∂Èó¥ÂÜÖ‰æ¶ÊµãÂà∞ËÆ∏Â§öÁ±ª‰ººÁöÑÈîôËØØÔºå‰ºöÂº∫Ëø´ÂÖ∂‰ª•ÂêéÁöÑÂ§ö‰∏™Ë∞ÉÁî®Âø´ÈÄüÂ§±Ë¥•Ôºå‰∏çÂÜçËÆøÈóÆËøúÁ®ãÊúçÂä°Âô®Ôºå‰ªéËÄåÈò≤Ê≠¢Â∫îÁî®Á®ãÂ∫è‰∏çÊñ≠Âú∞Â∞ùËØïÊâßË°åÂèØËÉΩ‰ºöÂ§±Ë¥•ÁöÑÊìç‰ΩúÔºå‰ΩøÂæóÂ∫îÁî®Á®ãÂ∫èÁªßÁª≠ÊâßË°åËÄå‰∏çÁî®Á≠âÂæÖ‰øÆÊ≠£ÈîôËØØÔºåÊàñËÄÖÊµ™Ë¥πCPUÊó∂Èó¥ÂéªÁ≠âÂà∞ÈïøÊó∂Èó¥ÁöÑË∂ÖÊó∂‰∫ßÁîü„ÄÇÁÜîÊñ≠Âô®‰πüÂèØ‰ª•‰ΩøÂ∫îÁî®Á®ãÂ∫èËÉΩÂ§üËØäÊñ≠ÈîôËØØÊòØÂê¶Â∑≤Áªè‰øÆÊ≠£ÔºåÂ¶ÇÊûúÂ∑≤Áªè‰øÆÊ≠£ÔºåÂ∫îÁî®Á®ãÂ∫è‰ºöÂÜçÊ¨°Â∞ùËØïË∞ÉÁî®Êìç‰Ωú„ÄÇ ÁÜîÊñ≠Âô®Ê®°ÂºèÂ∞±ÂÉèÊòØÈÇ£‰∫õÂÆπÊòìÂØºËá¥ÈîôËØØÁöÑÊìç‰ΩúÁöÑ‰∏ÄÁßç‰ª£ÁêÜ„ÄÇËøôÁßç‰ª£ÁêÜËÉΩÂ§üËÆ∞ÂΩïÊúÄËøëË∞ÉÁî®ÂèëÁîüÈîôËØØÁöÑÊ¨°Êï∞ÔºåÁÑ∂ÂêéÂÜ≥ÂÆö‰ΩøÁî®ÂÖÅËÆ∏Êìç‰ΩúÁªßÁª≠ÔºåÊàñËÄÖÁ´ãÂç≥ËøîÂõûÈîôËØØ„ÄÇ ÁÜîÊñ≠Âô®ÂºÄÂÖ≥Áõ∏‰∫íËΩ¨Êç¢ÁöÑÈÄªËæëÂ¶Ç‰∏ãÂõæÔºö ÁÜîÊñ≠Âô®Â∞±ÊòØ‰øùÊä§ÊúçÂä°È´òÂèØÁî®ÁöÑÊúÄÂêé‰∏ÄÈÅìÈò≤Á∫ø„ÄÇ HystrixÁâπÊÄß1.Êñ≠Ë∑ØÂô®Êú∫Âà∂ Êñ≠Ë∑ØÂô®ÂæàÂ•ΩÁêÜËß£, ÂΩìHystrix CommandËØ∑Ê±ÇÂêéÁ´ØÊúçÂä°Â§±Ë¥•Êï∞ÈáèË∂ÖËøá‰∏ÄÂÆöÊØî‰æã(ÈªòËÆ§50%), Êñ≠Ë∑ØÂô®‰ºöÂàáÊç¢Âà∞ÂºÄË∑ØÁä∂ÊÄÅ(Open). ËøôÊó∂ÊâÄÊúâËØ∑Ê±Ç‰ºöÁõ¥Êé•Â§±Ë¥•ËÄå‰∏ç‰ºöÂèëÈÄÅÂà∞ÂêéÁ´ØÊúçÂä°. Êñ≠Ë∑ØÂô®‰øùÊåÅÂú®ÂºÄË∑ØÁä∂ÊÄÅ‰∏ÄÊÆµÊó∂Èó¥Âêé(ÈªòËÆ§5Áßí), Ëá™Âä®ÂàáÊç¢Âà∞ÂçäÂºÄË∑ØÁä∂ÊÄÅ(HALF-OPEN). ËøôÊó∂‰ºöÂà§Êñ≠‰∏ã‰∏ÄÊ¨°ËØ∑Ê±ÇÁöÑËøîÂõûÊÉÖÂÜµ, Â¶ÇÊûúËØ∑Ê±ÇÊàêÂäü, Êñ≠Ë∑ØÂô®ÂàáÂõûÈó≠Ë∑ØÁä∂ÊÄÅ(CLOSED), Âê¶ÂàôÈáçÊñ∞ÂàáÊç¢Âà∞ÂºÄË∑ØÁä∂ÊÄÅ(OPEN). HystrixÁöÑÊñ≠Ë∑ØÂô®Â∞±ÂÉèÊàë‰ª¨ÂÆ∂Â∫≠ÁîµË∑Ø‰∏≠ÁöÑ‰øùÈô©‰∏ù, ‰∏ÄÊó¶ÂêéÁ´ØÊúçÂä°‰∏çÂèØÁî®, Êñ≠Ë∑ØÂô®‰ºöÁõ¥Êé•ÂàáÊñ≠ËØ∑Ê±ÇÈìæ, ÈÅøÂÖçÂèëÈÄÅÂ§ßÈáèÊó†ÊïàËØ∑Ê±ÇÂΩ±ÂìçÁ≥ªÁªüÂêûÂêêÈáè, Âπ∂‰∏îÊñ≠Ë∑ØÂô®ÊúâËá™ÊàëÊ£ÄÊµãÂπ∂ÊÅ¢Â§çÁöÑËÉΩÂäõ. 2.Fallback FallbackÁõ∏ÂΩì‰∫éÊòØÈôçÁ∫ßÊìç‰Ωú. ÂØπ‰∫éÊü•ËØ¢Êìç‰Ωú, Êàë‰ª¨ÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™fallbackÊñπÊ≥ï, ÂΩìËØ∑Ê±ÇÂêéÁ´ØÊúçÂä°Âá∫Áé∞ÂºÇÂ∏∏ÁöÑÊó∂ÂÄô, ÂèØ‰ª•‰ΩøÁî®fallbackÊñπÊ≥ïËøîÂõûÁöÑÂÄº. fallbackÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏ÄËà¨ÊòØËÆæÁΩÆÁöÑÈªòËÆ§ÂÄºÊàñËÄÖÊù•Ëá™ÁºìÂ≠ò. 3.ËµÑÊ∫êÈöîÁ¶ª Âú®Hystrix‰∏≠, ‰∏ªË¶ÅÈÄöËøáÁ∫øÁ®ãÊ±†Êù•ÂÆûÁé∞ËµÑÊ∫êÈöîÁ¶ª. ÈÄöÂ∏∏Âú®‰ΩøÁî®ÁöÑÊó∂ÂÄôÊàë‰ª¨‰ºöÊ†πÊçÆË∞ÉÁî®ÁöÑËøúÁ®ãÊúçÂä°ÂàíÂàÜÂá∫Â§ö‰∏™Á∫øÁ®ãÊ±†. ‰æãÂ¶ÇË∞ÉÁî®‰∫ßÂìÅÊúçÂä°ÁöÑCommandÊîæÂÖ•AÁ∫øÁ®ãÊ±†, Ë∞ÉÁî®Ë¥¶Êà∑ÊúçÂä°ÁöÑCommandÊîæÂÖ•BÁ∫øÁ®ãÊ±†. ËøôÊ†∑ÂÅöÁöÑ‰∏ªË¶Å‰ºòÁÇπÊòØËøêË°åÁéØÂ¢ÉË¢´ÈöîÁ¶ªÂºÄ‰∫Ü. ËøôÊ†∑Â∞±ÁÆóË∞ÉÁî®ÊúçÂä°ÁöÑ‰ª£Á†ÅÂ≠òÂú®bugÊàñËÄÖÁî±‰∫éÂÖ∂‰ªñÂéüÂõ†ÂØºËá¥Ëá™Â∑±ÊâÄÂú®Á∫øÁ®ãÊ±†Ë¢´ËÄóÂ∞ΩÊó∂, ‰∏ç‰ºöÂØπÁ≥ªÁªüÁöÑÂÖ∂‰ªñÊúçÂä°ÈÄ†ÊàêÂΩ±Âìç. ‰ΩÜÊòØÂ∏¶Êù•ÁöÑ‰ª£‰ª∑Â∞±ÊòØÁª¥Êä§Â§ö‰∏™Á∫øÁ®ãÊ±†‰ºöÂØπÁ≥ªÁªüÂ∏¶Êù•È¢ùÂ§ñÁöÑÊÄßËÉΩÂºÄÈîÄ. Â¶ÇÊûúÊòØÂØπÊÄßËÉΩÊúâ‰∏•Ê†ºË¶ÅÊ±ÇËÄå‰∏îÁ°Æ‰ø°Ëá™Â∑±Ë∞ÉÁî®ÊúçÂä°ÁöÑÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰∏ç‰ºöÂá∫ÈóÆÈ¢òÁöÑËØù, ÂèØ‰ª•‰ΩøÁî®HystrixÁöÑ‰ø°Âè∑Ê®°Âºè(Semaphores)Êù•ÈöîÁ¶ªËµÑÊ∫ê. Feign HystrixÂõ†‰∏∫ÁÜîÊñ≠Âè™ÊòØ‰ΩúÁî®Âú®ÊúçÂä°Ë∞ÉÁî®Ëøô‰∏ÄÁ´ØÔºåÂõ†Ê≠§Êàë‰ª¨Ê†πÊçÆ‰∏ä‰∏ÄÁØáÁöÑÁ§∫‰æã‰ª£Á†ÅÂè™ÈúÄË¶ÅÊîπÂä®service-consumerÈ°πÁõÆÁõ∏ÂÖ≥‰ª£Á†ÅÂ∞±ÂèØ‰ª•„ÄÇÂõ†‰∏∫ÔºåFeign‰∏≠Â∑≤Áªè‰æùËµñ‰∫ÜHystrixÊâÄ‰ª•Âú®mavenÈÖçÁΩÆ‰∏ä‰∏çÁî®ÂÅö‰ªª‰ΩïÊîπÂä®„ÄÇ ÈÖçÁΩÆÊñá‰ª∂feign.hystrix.enabled=true ÁÜîÊñ≠ÈôçÁ∫ßÂ§ÑÁêÜÁ±ªpackage com.iogogogo.consumer.feign.fallback; import com.iogogogo.consumer.feign.ProducerService; import org.springframework.stereotype.Component; /** * Created by tao.zeng on 2019-03-16. */ @Component public class ProducerFallback implements ProducerService { @Override public String index(String name) { return String.format(\"life-example-producer ÊúçÂä°‰∏çÂèØÁî® param:%s\", name); } } fallbackÂ±ûÊÄßpackage com.iogogogo.consumer.feign; import com.iogogogo.consumer.configure.FeignConfig; import com.iogogogo.consumer.feign.fallback.ProducerFallback; import org.springframework.cloud.openfeign.FeignClient; import org.springframework.stereotype.Component; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestMethod; import org.springframework.web.bind.annotation.RequestParam; /** * value = ÊúçÂä°Êèê‰æõËÄÖÁöÑ spring.application.name * fallback = ÁÜîÊñ≠ÈôçÁ∫ßÂ§ÑÁêÜÁ±ª * configuration = ÁÜîÊñ≠ÈôçÁ∫ßÈÖçÁΩÆ * &lt;p> * Created by tao.zeng on 2019-03-16. */ @Component @FeignClient(value = \"life-example-producer\", fallback = ProducerFallback.class, configuration = FeignConfig.class) public interface ProducerService { /** * Ë∞ÉÁî®ÁöÑËøúÁ®ãÊñπÊ≥ïË∑ØÁî±Âú∞ÂùÄÈúÄË¶ÅÂíåÊúçÂä°Êèê‰æõËÄÖÁöÑ‰∏ÄËá¥ÔºåÂπ∂‰∏î‰∏çË¶Å‰ΩøÁî®GetMapping‰πãÁ±ªÁöÑÁÆÄÂåñÊñπÊ≥ï * * @param name * @return */ @RequestMapping(value = \"/api/index\", method = RequestMethod.GET) String index(@RequestParam(\"name\") String name); } ÊµãËØï‰æùÊ¨°ÂêØÂä®cloud-eureka„ÄÅservice-producer„ÄÅservice-consumer‰∏â‰∏™È°πÁõÆÔºåÊâãÂä®ÂÅúÊéâÊúçÂä°Êü•ÁúãÁÜîÊñ≠ÁªìÊûú","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/tags/Spring-Cloud/"}]},{"title":"MySQL ÂØºÂá∫Ë°®ÁªìÊûÑÂíåË°®Êï∞ÊçÆ mysqldumpÁî®Ê≥ï","slug":"mysql-note-mysqldump","date":"2019-03-22T14:51:12.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2019/03/22/mysql-note-mysqldump/","link":"","permalink":"http://iogogogo.github.io/2019/03/22/mysql-note-mysqldump/","excerpt":"","text":"ÂëΩ‰ª§Ë°å‰∏ãÂÖ∑‰ΩìÁî®Ê≥ïÂ¶Ç‰∏ãÔºö mysqldump -uÁî®Êà∂Âêç -pÂØÜÁ†Å -d Êï∞ÊçÆÂ∫ìÂêç Ë°®Âêç &gt; ËÑöÊú¨Âêç; ÂØºÂá∫Êï¥‰∏™Êï∞ÊçÆÂ∫ìÁªìÊûÑÂíåÊï∞ÊçÆmysqldump -h localhost -uroot -p123456 database > dump.sql ÂØºÂá∫Âçï‰∏™Êï∞ÊçÆË°®ÁªìÊûÑÂíåÊï∞ÊçÆmysqldump -h localhost -uroot -p123456 database table > dump.sql ÂØºÂá∫Êï¥‰∏™Êï∞ÊçÆÂ∫ìÁªìÊûÑÔºà‰∏çÂåÖÂê´Êï∞ÊçÆÔºâmysqldump -h localhost -uroot -p123456 -d database > dump.sql ÂØºÂá∫Âçï‰∏™Êï∞ÊçÆË°®ÁªìÊûÑÔºà‰∏çÂåÖÂê´Êï∞ÊçÆÔºâmysqldump -h localhost -uroot -p123456 -d database table > dump.sql","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"Spring Boot Êï¥ÂêàMyBatis-Plus‰ΩøÁî®Â§öÊï∞ÊçÆÊ∫ê","slug":"spring-boot-mybatisplus-multiple-datasource","date":"2019-03-19T14:34:14.000Z","updated":"2024-07-01T12:30:37.378Z","comments":true,"path":"2019/03/19/spring-boot-mybatisplus-multiple-datasource/","link":"","permalink":"http://iogogogo.github.io/2019/03/19/spring-boot-mybatisplus-multiple-datasource/","excerpt":"","text":"È°πÁõÆ‰∏≠‰ΩøÁî®Âà∞‰∫ÜMySQLÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÈÖçÁΩÆÊï∞ÊçÆÔºåVertica‰∏≠Â≠òÂÇ®ÊåáÊ†áÊï∞ÊçÆÔºåËøôÊ†∑Â∞±Êúâ‰∏§‰∏™Âü∫‰∫éjdbcÁöÑÊï∞ÊçÆÊ∫êÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÅöÂà∞Âä®ÊÄÅÈÖçÁΩÆ‰∏éÂàáÊç¢ÔºåÂπ∂‰∏îÈ°πÁõÆÈááÁî®‰∫Ümybatis-plus‰Ωú‰∏∫ormÊ°ÜÊû∂ÔºåÊâÄ‰ª•‰ΩøÁî®mybatis-plusÈÖçÁΩÆÂ§öÊï∞ÊçÆÊ∫êÔºåÂπ∂‰∏îÈÖçÁΩÆhikariËøûÊé•Ê±†ÔºåËøô‰πüÊòØSpring Boot-2.xËá™Â∏¶ÁöÑËøûÊé•Ê±†ÔºåËøôÈáåÊèê‰æõ‰∏Ä‰∏™ÈÖçÁΩÆÊÄùË∑Ø‰∏éÊñπÊ°àÔºå‰ªÖ‰æõÂèÇËÄÉ„ÄÇÈÄöËøáÊü•Áúãmybatis-plusÁöÑÊ∫êÁ†ÅÂèëÁé∞ÔºåËØ•Ê°ÜÊû∂ÁõÆÂâçËøûÊé•VerticaÊó∂‰ºöÊèêÁ§∫‰∏Ä‰∏™Ë≠¶Âëä‚ö†Ô∏è Ë°®Á§∫‰∏çÊîØÊåÅËØ•Êï∞ÊçÆÂ∫ìÔºåÂÆûÈôÖ‰ΩøÁî®Êó∂ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®mybatisÊâßË°åsqlÁöÑÂäüËÉΩÂç≥ÂèØ„ÄÇ 2019-03-19 17:36:20.877 WARN 14103 --- [ restartedMain] c.b.m.extension.toolkit.JdbcUtils : The jdbcUrl is jdbc:vertica://192.168.21.188:5433/vertica20190122001, Mybatis Plus Cannot Read Database type or The Database&#39;s Not Supported! ÂÖ≥‰∫éMySQLÂíåVerticaÁöÑÂª∫Â∫ìÂª∫Ë°®ËøôËæπÂ∞±‰∏çÊîæ‰∫ÜÔºåÁõ¥Êé•Ë¥¥‰∏äÊ†∏ÂøÉ‰ª£Á†Å„ÄÇ pom ÈÖçÁΩÆ&lt;dependency> &lt;groupId>com.baomidou&lt;/groupId> &lt;artifactId>mybatis-plus-boot-starter&lt;/artifactId> &lt;version>${mybatisplus.spring.version}&lt;/version> &lt;/dependency> &lt;!-- jdbc driver ËøôÊòØÊòØÂÆòÁΩë‰∏ãËΩΩÔºåËá™Â∑±‰º†Âà∞ÂÜÖÁΩëÊúçÂä°Âô®ÁöÑjdbcÈ©±Âä® --> &lt;dependency> &lt;groupId>com.iogogogo.vertica&lt;/groupId> &lt;artifactId>vertica-jdbc&lt;/artifactId> &lt;version>9.2.0&lt;/version> &lt;/dependency> &lt;dependency> &lt;groupId>mysql&lt;/groupId> &lt;artifactId>mysql-connector-java&lt;/artifactId> &lt;/dependency> &lt;/dependencies> ÈÖçÁΩÆÊñá‰ª∂spring: application: name: example-dynamic-datasource datasource: mysql: driver-class-name: com.mysql.cj.jdbc.Driver hikari: auto-commit: true connection-test-query: SELECT 1 connection-timeout: 30000 idle-timeout: 30000 max-lifetime: 1800000 maximum-pool-size: 15 minimum-idle: 5 pool-name: MySQLHikariCP password: Root@123 type: com.zaxxer.hikari.HikariDataSource jdbc-url: jdbc:mysql://192.168.21.111:3306/life-test?characterEncoding=utf8&amp;useSSL=false username: root vertica: driver-class-name: com.vertica.jdbc.Driver hikari: auto-commit: true connection-test-query: SELECT 1 connection-timeout: 30000 idle-timeout: 30000 max-lifetime: 1800000 maximum-pool-size: 15 minimum-idle: 5 pool-name: VerticaHikariCP password: 123456 type: com.zaxxer.hikari.HikariDataSource jdbc-url: jdbc:vertica://192.168.21.188:5433/vertica20190122001 username: dbadmin logging: home: ${user.dir}/logs mybatis-plus: configuration: map-underscore-to-camel-case: true type-aliases-package: com.iogogogo.entity HikariCP ÈÖçÁΩÆpackage com.iogogogo.datasource.config; import lombok.Data; /** * Created by tao.zeng on 2019-03-20. */ @Data public class HikariConfig { private String poolName; private boolean autoCommit; private long connectionTimeout; private long idleTimeout; private long maxLifetime; private int maximumPoolSize; private int minimumIdle; private String connectionTestQuery; } MySQLÊï∞ÊçÆÊ∫êÈÖçÁΩÆËøûÊé•Ê±†ÈÖçÁΩÆpackage com.iogogogo.datasource.config; import lombok.Data; import lombok.EqualsAndHashCode; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.context.annotation.Configuration; /** * Created by tao.zeng on 2019-03-20. */ @Data @Configuration @EqualsAndHashCode(callSuper = true) @ConfigurationProperties(prefix = \"spring.datasource.mysql.hikari\") public class HikariMySQLConfig extends HikariConfig { } DataSourceÈÖçÁΩÆpackage com.iogogogo.datasource; import com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean; import com.iogogogo.datasource.configure.HikariMySQLConfig; import com.zaxxer.hikari.HikariDataSource; import org.apache.ibatis.session.SqlSessionFactory; import org.mybatis.spring.SqlSessionTemplate; import org.mybatis.spring.annotation.MapperScan; import org.springframework.beans.factory.annotation.Qualifier; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.boot.jdbc.DataSourceBuilder; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.jdbc.datasource.DataSourceTransactionManager; import javax.sql.DataSource; /** * Created by tao.zeng on 2019-03-19. */ @Configuration @MapperScan(basePackages = \"com.iogogogo.mapper.mysql\", sqlSessionTemplateRef = \"mysqlSqlSessionTemplate\") public class MySQLDataSourceConfigure { private HikariMySQLConfig mysqlConfig; public MySQLDataSourceConfigure(HikariMySQLConfig mysqlConfig) { this.mysqlConfig = mysqlConfig; } @Bean(name = \"mysqlDataSource\") @ConfigurationProperties(\"spring.datasource.mysql\") public DataSource mysql() { DataSource dataSource = DataSourceBuilder.create().build(); HikariDataSource hikariDataSource = null; if (dataSource instanceof HikariDataSource) { // ËøûÊé•Ê±†ÈÖçÁΩÆ hikariDataSource = (HikariDataSource) dataSource; hikariDataSource.setPoolName(mysqlConfig.getPoolName()); hikariDataSource.setAutoCommit(mysqlConfig.isAutoCommit()); hikariDataSource.setConnectionTestQuery(mysqlConfig.getConnectionTestQuery()); hikariDataSource.setIdleTimeout(mysqlConfig.getIdleTimeout()); hikariDataSource.setConnectionTimeout(mysqlConfig.getConnectionTimeout()); hikariDataSource.setMaximumPoolSize(mysqlConfig.getMaximumPoolSize()); hikariDataSource.setMaxLifetime(mysqlConfig.getMaxLifetime()); hikariDataSource.setMinimumIdle(mysqlConfig.getMinimumIdle()); } return hikariDataSource == null ? dataSource : hikariDataSource; } @Bean(name = \"mysqlSqlSessionFactory\") public SqlSessionFactory mysqlSqlSessionFactory(@Qualifier(\"mysqlDataSource\") DataSource dataSource) throws Exception { // MyBatis-Plus‰ΩøÁî®MybatisSqlSessionFactoryBean MyBatisÁõ¥Êé•‰ΩøÁî®SqlSessionFactoryBean MybatisSqlSessionFactoryBean bean = new MybatisSqlSessionFactoryBean(); // ÁªôMyBatis-PlusÊ≥®ÂÖ•Êï∞ÊçÆÊ∫ê bean.setDataSource(dataSource); return bean.getObject(); } @Bean(name = \"mysqlTransactionManager\") public DataSourceTransactionManager mysqlTransactionManager(@Qualifier(\"mysqlDataSource\") DataSource dataSource) { return new DataSourceTransactionManager(dataSource); } @Bean(name = \"mysqlSqlSessionTemplate\") public SqlSessionTemplate mysqlSqlSessionTemplate(@Qualifier(\"mysqlSqlSessionFactory\") SqlSessionFactory sqlSessionFactory) { return new SqlSessionTemplate(sqlSessionFactory); } } VerticaÊï∞ÊçÆÊ∫êÈÖçÁΩÆËøûÊé•Ê±†ÈÖçÁΩÆpackage com.iogogogo.datasource.config; import lombok.Data; import lombok.EqualsAndHashCode; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.context.annotation.Configuration; /** * Created by tao.zeng on 2019-03-20. */ @Data @Configuration @EqualsAndHashCode(callSuper = true) @ConfigurationProperties(prefix = \"spring.datasource.vertica.hikari\") public class HikariVerticaConfig extends HikariConfig { } DataSourceÈÖçÁΩÆpackage com.iogogogo.datasource; import com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean; import com.iogogogo.datasource.configure.HikariVerticaConfig; import com.zaxxer.hikari.HikariDataSource; import org.apache.ibatis.session.SqlSessionFactory; import org.mybatis.spring.SqlSessionTemplate; import org.mybatis.spring.annotation.MapperScan; import org.springframework.beans.factory.annotation.Qualifier; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.boot.jdbc.DataSourceBuilder; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.jdbc.datasource.DataSourceTransactionManager; import javax.sql.DataSource; /** * Created by tao.zeng on 2019-03-19. */ @Configuration @MapperScan(basePackages = \"com.iogogogo.mapper.vertica\", sqlSessionTemplateRef = \"verticaSqlSessionTemplate\") public class VerticaDataSourceConfigure { private HikariVerticaConfig verticaConfig; public VerticaDataSourceConfigure(HikariVerticaConfig verticaConfig) { this.verticaConfig = verticaConfig; } @Bean(name = \"verticaDataSource\") @ConfigurationProperties(\"spring.datasource.vertica\") public DataSource vertica() { DataSource dataSource = DataSourceBuilder.create().build(); HikariDataSource hikariDataSource = null; if (dataSource instanceof HikariDataSource) { // ËøûÊé•Ê±†ÈÖçÁΩÆ hikariDataSource = (HikariDataSource) dataSource; hikariDataSource.setPoolName(verticaConfig.getPoolName()); hikariDataSource.setAutoCommit(verticaConfig.isAutoCommit()); hikariDataSource.setConnectionTestQuery(verticaConfig.getConnectionTestQuery()); hikariDataSource.setIdleTimeout(verticaConfig.getIdleTimeout()); hikariDataSource.setConnectionTimeout(verticaConfig.getConnectionTimeout()); hikariDataSource.setMaximumPoolSize(verticaConfig.getMaximumPoolSize()); hikariDataSource.setMaxLifetime(verticaConfig.getMaxLifetime()); hikariDataSource.setMinimumIdle(verticaConfig.getMinimumIdle()); } return hikariDataSource == null ? dataSource : hikariDataSource; } @Bean(name = \"verticaSqlSessionFactory\") public SqlSessionFactory verticaSqlSessionFactory(@Qualifier(\"verticaDataSource\") DataSource dataSource) throws Exception { // MyBatis-Plus‰ΩøÁî®MybatisSqlSessionFactoryBean MyBatisÁõ¥Êé•‰ΩøÁî®SqlSessionFactoryBean MybatisSqlSessionFactoryBean bean = new MybatisSqlSessionFactoryBean(); // ÁªôMyBatis-PlusÊ≥®ÂÖ•Êï∞ÊçÆÊ∫ê bean.setDataSource(dataSource); return bean.getObject(); } @Bean(name = \"verticaTransactionManager\") public DataSourceTransactionManager verticaTransactionManager(@Qualifier(\"verticaDataSource\") DataSource dataSource) { return new DataSourceTransactionManager(dataSource); } @Bean(name = \"verticaSqlSessionTemplate\") public SqlSessionTemplate verticaSqlSessionTemplate(@Qualifier(\"verticaSqlSessionFactory\") SqlSessionFactory sqlSessionFactory) { return new SqlSessionTemplate(sqlSessionFactory); } } MapperMySQLpackage com.iogogogo.mapper.mysql; import com.baomidou.mybatisplus.core.mapper.BaseMapper; import com.iogogogo.entity.SysUser; import org.apache.ibatis.annotations.Insert; import org.apache.ibatis.annotations.Param; import org.apache.ibatis.annotations.Select; import org.springframework.stereotype.Repository; import java.util.List; /** * Created by tao.zeng on 2019-03-19. */ @Repository public interface SysUserMapper extends BaseMapper&lt;SysUser> { @Insert(\"insert into sys_user values(#{x.id},#{x.name},#{x.birthday})\") boolean save(@Param(\"x\") SysUser user); @Select(\"select * from sys_user\") List&lt;SysUser> list(); } Verticapackage com.iogogogo.mapper.vertica; import com.baomidou.mybatisplus.core.mapper.BaseMapper; import com.iogogogo.entity.User; import org.apache.ibatis.annotations.Select; import org.springframework.stereotype.Repository; import java.util.List; /** * Created by tao.zeng on 2019-03-15. */ @Repository public interface UserMapper extends BaseMapper&lt;User> { @Select(\"select * from public.user\") List&lt;User> list(); } ÂèØ‰ª•ÂèëÁé∞Âè™Ë¶ÅÊï∞ÊçÆÊ∫êÈÖçÁΩÆÊàêÂäü‰ª•ÂêéÔºå‰∏§ËÄÖÂ∑≤ÁªèÊ≤°Êúâ‰ªª‰ΩïÂå∫Âà´‰∫ÜÔºåÂ∞±ÂèØ‰ª•ÂÉèÊ≠£Â∏∏ÂÜô‰ª£Á†Å‰∏ÄÊ†∑ÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂ∞±ÊòØ‰∏çÂêåÊï∞ÊçÆÂ∫ìÁöÑmapperÈúÄË¶ÅÊîæÂú®ÊåáÂÆöÁöÑÂåÖ‰∏ãÈù¢ÔºåÂê¶ÂàôspringÂÆπÂô®Êó†Ê≥ïÊâ´Êèè„ÄÇ ÊµãËØï‰∏∫‰∫ÜÊñπ‰æøÔºåÁõ¥Êé•Â∞±Âú®È°πÁõÆÂêØÂä®‰ª•ÂêéÊü•ËØ¢‰∏§‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÂ∞±Â•Ω‰∫Ü package com.iogogogo; import com.iogogogo.entity.SysUser; import com.iogogogo.entity.User; import com.iogogogo.mapper.mysql.SysUserMapper; import com.iogogogo.mapper.vertica.UserMapper; import com.iogogogo.util.IdHelper; import lombok.extern.slf4j.Slf4j; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import java.time.LocalDateTime; import java.util.List; /** * Created by tao.zeng on 2019-03-15. */ @Slf4j @SpringBootApplication public class DynamicDataSourceApplication implements CommandLineRunner { @Autowired private UserMapper userMapper; @Autowired private SysUserMapper sysUserMapper; public static void main(String[] args) { SpringApplication.run(DynamicDataSourceApplication.class, args); } @Override public void run(String... args) { int i = userMapper.insert(new User(IdHelper.id(), \"ÈòøÁâõ-\" + IdHelper.uuid(), \"description-\" + IdHelper.uuid())); // ‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÊü•ËØ¢ÊñπÊ≥ï List&lt;User> list = userMapper.list(); log.info(\"insert result:{} list.size:{}\", i, list.size()); boolean b = sysUserMapper.save(new SysUser(IdHelper.id(), \"ÈòøÁâõ-\" + IdHelper.uuid(), LocalDateTime.now())); // ‰ΩøÁî®MyBatis-PlusÊèê‰æõÁöÑÊü•ËØ¢ÊñπÊ≥ï List&lt;SysUser> users = sysUserMapper.selectList(null); log.info(\"insert result:{} list.size:{}\", b, users.size()); users.forEach(x -> log.info(x.toString())); } } È°πÁõÆÂêØÂä®‰ª•ÂêéÔºåÂèØ‰ª•ÁúãÂà∞ÊéßÂà∂Âè∞ÂàùÂßãÂåñ‰∫ÜÂ§ö‰∏™Êï∞ÊçÆÊ∫êÁöÑÊó•Âøó . ____ _ __ _ _ /\\\\ / ___&#39;_ __ _ _(_)_ __ __ _ \\ \\ \\ \\ ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) &#39; |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.1.3.RELEASE) 2019-03-20 10:33:18.233 INFO 21123 --- [ restartedMain] c.iogogogo.DynamicDataSourceApplication : Starting DynamicDataSourceApplication on iogogogo.local with PID 21123 (/Users/tao.zeng/share/life-example/example-dynamic-datasource/target/classes started by tao.zeng in /Users/tao.zeng/share/life-example) 2019-03-20 10:33:18.237 INFO 21123 --- [ restartedMain] c.iogogogo.DynamicDataSourceApplication : No active profile set, falling back to default profiles: default 2019-03-20 10:33:18.360 INFO 21123 --- [ restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable 2019-03-20 10:33:18.360 INFO 21123 --- [ restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39; 2019-03-20 10:33:20.341 INFO 21123 --- [ restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http) 2019-03-20 10:33:20.374 INFO 21123 --- [ restartedMain] o.apache.catalina.core.StandardService : Starting service [Tomcat] 2019-03-20 10:33:20.375 INFO 21123 --- [ restartedMain] org.apache.catalina.core.StandardEngine : Starting Servlet engine: [Apache Tomcat/9.0.16] 2019-03-20 10:33:20.391 INFO 21123 --- [ restartedMain] o.a.catalina.core.AprLifecycleListener : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/tao.zeng/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.] 2019-03-20 10:33:20.497 INFO 21123 --- [ restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext 2019-03-20 10:33:20.497 INFO 21123 --- [ restartedMain] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 2136 ms _ _ |_ _ _|_. ___ _ | _ | | |\\/|_)(_| | |_\\ |_)||_|_\\ / | 3.0.6 2019-03-20 10:33:20.751 INFO 21123 --- [ restartedMain] com.zaxxer.hikari.HikariDataSource : VerticaHikariCP - Starting... 2019-03-20 10:33:21.449 INFO 21123 --- [ restartedMain] com.zaxxer.hikari.pool.PoolBase : VerticaHikariCP - Driver does not support get/set network timeout for connections. (com.vertica.jdbc.VerticaJdbc4ConnectionImpl.getNetworkTimeout()I) 2019-03-20 10:33:21.672 INFO 21123 --- [ restartedMain] com.zaxxer.hikari.HikariDataSource : VerticaHikariCP - Start completed. 2019-03-20 10:33:21.683 WARN 21123 --- [ restartedMain] c.b.m.extension.toolkit.JdbcUtils : The jdbcUrl is jdbc:vertica://192.168.21.188:5433/vertica20190122001, Mybatis Plus Cannot Read Database type or The Database&#39;s Not Supported! _ _ |_ _ _|_. ___ _ | _ | | |\\/|_)(_| | |_\\ |_)||_|_\\ / | 3.0.6 2019-03-20 10:33:21.865 INFO 21123 --- [ restartedMain] com.zaxxer.hikari.HikariDataSource : MySQLHikariCP - Starting... 2019-03-20 10:33:23.201 INFO 21123 --- [ restartedMain] com.zaxxer.hikari.HikariDataSource : MySQLHikariCP - Start completed. 2019-03-20 10:33:23.516 INFO 21123 --- [ restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService &#39;applicationTaskExecutor&#39; 2019-03-20 10:33:23.804 INFO 21123 --- [ restartedMain] o.s.b.d.a.OptionalLiveReloadServer : LiveReload server is running on port 35729 2019-03-20 10:33:23.887 INFO 21123 --- [ restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path &#39;&#39; 2019-03-20 10:33:23.892 INFO 21123 --- [ restartedMain] c.iogogogo.DynamicDataSourceApplication : Started DynamicDataSourceApplication in 6.41 seconds (JVM running for 7.001) ‰ª•‰∏äÂÆåÊï¥‰ª£Á†Å","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Spring Cloud Eureka Ê≥®ÂÜå‰∏≠ÂøÉ","slug":"spring-cloud-eureka","date":"2019-03-17T08:41:17.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2019/03/17/spring-cloud-eureka/","link":"","permalink":"http://iogogogo.github.io/2019/03/17/spring-cloud-eureka/","excerpt":"","text":"‰ªÄ‰πàÊòØSpring CloudSpring CloudÊòØ‰∏ÄÁ≥ªÂàóÊ°ÜÊû∂ÁöÑÊúâÂ∫èÈõÜÂêà„ÄÇÂÆÉÂà©Áî®Spring BootÁöÑÂºÄÂèë‰æøÂà©ÊÄßÂ∑ßÂ¶ôÂú∞ÁÆÄÂåñ‰∫ÜÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂü∫Á°ÄËÆæÊñΩÁöÑÂºÄÂèëÔºåÂ¶ÇÊúçÂä°ÂèëÁé∞Ê≥®ÂÜå„ÄÅÈÖçÁΩÆ‰∏≠ÂøÉ„ÄÅÊ∂àÊÅØÊÄªÁ∫ø„ÄÅË¥üËΩΩÂùáË°°„ÄÅÊñ≠Ë∑ØÂô®„ÄÅÊï∞ÊçÆÁõëÊéßÁ≠âÔºåÈÉΩÂèØ‰ª•Áî®Spring BootÁöÑÂºÄÂèëÈ£éÊ†ºÂÅöÂà∞‰∏ÄÈîÆÂêØÂä®ÂíåÈÉ®ÁΩ≤„ÄÇSpringÂπ∂Ê≤°ÊúâÈáçÂ§çÂà∂ÈÄ†ËΩÆÂ≠êÔºåÂÆÉÂè™ÊòØÂ∞ÜÁõÆÂâçÂêÑÂÆ∂ÂÖ¨Âè∏ÂºÄÂèëÁöÑÊØîËæÉÊàêÁÜü„ÄÅÁªèÂæóËµ∑ÂÆûÈôÖËÄÉÈ™åÁöÑÊúçÂä°Ê°ÜÊû∂ÁªÑÂêàËµ∑Êù•ÔºåÈÄöËøáSpring BootÈ£éÊ†ºËøõË°åÂÜçÂ∞ÅË£ÖÂ±èËîΩÊéâ‰∫ÜÂ§çÊùÇÁöÑÈÖçÁΩÆÂíåÂÆûÁé∞ÂéüÁêÜÔºåÊúÄÁªàÁªôÂºÄÂèëËÄÖÁïôÂá∫‰∫Ü‰∏ÄÂ•óÁÆÄÂçïÊòìÊáÇ„ÄÅÊòìÈÉ®ÁΩ≤ÂíåÊòìÁª¥Êä§ÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂºÄÂèëÂ∑•ÂÖ∑ÂåÖ„ÄÇ ‰∏ãÂõæÊòØ‰∏Ä‰∏™Âü∫Êú¨ÁöÑSpring CloudÁªÑ‰ª∂Êû∂ÊûÑÔºåÊ†∏ÂøÉÁªÑ‰ª∂ÊúâEureka„ÄÅZuul„ÄÅRibbon„ÄÅFegin„ÄÅHystrixÁ≠âÁ≠â„ÄÇÊé•‰∏ãÊù•Â∞Ü‰ªãÁªçÁ¨¨‰∏Ä‰∏™EurekaÁªÑ‰ª∂ EurekaÊ≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜå‰∏≠ÂøÉÔºåÁÆ°ÁêÜÂêÑÁßçÊúçÂä°ÂäüËÉΩÂåÖÊã¨ÊúçÂä°ÁöÑÊ≥®ÂÜå„ÄÅÂèëÁé∞„ÄÅÁÜîÊñ≠„ÄÅË¥üËΩΩ„ÄÅÈôçÁ∫ßÁ≠âÔºåÊØîÂ¶Çdubbo adminÂêéÂè∞ÁöÑÂêÑÁßçÂäüËÉΩ„ÄÇÊúâ‰∫ÜÊúçÂä°‰∏≠ÂøÉ‰πãÂêéÔºå‰ªª‰Ωï‰∏Ä‰∏™ÊúçÂä°ÈÉΩ‰∏çËÉΩÁõ¥Êé•ÂéªÊéâÁî®ÔºåÈÉΩÈúÄË¶ÅÈÄöËøáÊúçÂä°‰∏≠ÂøÉÊù•Ë∞ÉÁî®„ÄÇÈÄöËøáÊúçÂä°‰∏≠ÂøÉÊù•Ëé∑ÂèñÊúçÂä°‰Ω†‰∏çÈúÄË¶ÅÂÖ≥Ê≥®‰Ω†Ë∞ÉÁî®ÁöÑÈ°πÁõÆIPÂú∞ÂùÄÔºåÁî±Âá†Âè∞ÊúçÂä°Âô®ÁªÑÊàêÔºåÊØèÊ¨°Áõ¥Êé•ÂéªÊúçÂä°‰∏≠ÂøÉËé∑ÂèñÂèØ‰ª•‰ΩøÁî®ÁöÑÊúçÂä°ÂéªË∞ÉÁî®Êó¢ÂèØ„ÄÇ EurekaÊòØNetflixÂºÄÊ∫êÁöÑ‰∏ÄÊ¨æÊèê‰æõÊúçÂä°Ê≥®ÂÜåÂíåÂèëÁé∞ÁöÑ‰∫ßÂìÅÔºåÂÆÉÊèê‰æõ‰∫ÜÂÆåÊï¥ÁöÑService RegistryÂíåService DiscoveryÂÆûÁé∞„ÄÇ‰πüÊòØSpring Cloud‰ΩìÁ≥ª‰∏≠ÊúÄÈáçË¶ÅÊúÄÊ†∏ÂøÉÁöÑÁªÑ‰ª∂‰πã‰∏Ä„ÄÇ ÂÆòÊñπ‰ªãÁªç: Eureka is a REST (Representational State Transfer) based service that is primarily used in the AWS cloud for locating services for the purpose of load balancing and failover of middle-tier servers. Eureka ÊòØ‰∏Ä‰∏™Âü∫‰∫é REST ÁöÑÊúçÂä°Ôºå‰∏ªË¶ÅÂú® AWS ‰∫ë‰∏≠‰ΩøÁî®, ÂÆö‰ΩçÊúçÂä°Êù•ËøõË°å‰∏≠Èó¥Â±ÇÊúçÂä°Âô®ÁöÑË¥üËΩΩÂùáË°°ÂíåÊïÖÈöúËΩ¨Áßª„ÄÇ Áî®‰∏ÄÂº†ÂõæÁÆÄÂçïËØ¥Êòé: ‰∏äÂõæÁÆÄË¶ÅÊèèËø∞‰∫ÜEurekaÁöÑÂü∫Êú¨Êû∂ÊûÑÔºåÁî±3‰∏™ËßíËâ≤ÁªÑÊàêÔºö 1„ÄÅEureka Server Êèê‰æõÊúçÂä°Ê≥®ÂÜåÂíåÂèëÁé∞ 2„ÄÅService Provider ÊúçÂä°Êèê‰æõÊñπ Â∞ÜËá™Ë∫´ÊúçÂä°Ê≥®ÂÜåÂà∞EurekaÔºå‰ªéËÄå‰ΩøÊúçÂä°Ê∂àË¥πÊñπËÉΩÂ§üÊâæÂà∞ 3„ÄÅService Consumer ÊúçÂä°Ê∂àË¥πÊñπ ‰ªéEurekaËé∑ÂèñÊ≥®ÂÜåÊúçÂä°ÂàóË°®Ôºå‰ªéËÄåËÉΩÂ§üÊ∂àË¥πÊúçÂä° Eureka ServerÊàë‰ª¨ÂèØ‰ª•Áî®Spring initialize ÊûÑÂª∫‰∏Ä‰∏™Âü∫Êú¨ÁöÑmavenÈ°πÁõÆÔºåÂü∫‰∫éSpring Cloud Greenwich.SR1 ÁÑ∂ÂêéËá™Â∑±Ê∑ªÂä†Áõ∏Â∫îÁöÑ‰æùËµñ pom‰æùËµñ&lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-starter-netflix-eureka-server&lt;/artifactId> &lt;/dependency> &lt;dependencyManagement> &lt;dependencies> &lt;dependency> &lt;groupId>org.springframework.cloud&lt;/groupId> &lt;artifactId>spring-cloud-dependencies&lt;/artifactId> &lt;version>${spring-cloud.version}&lt;/version> &lt;type>pom&lt;/type> &lt;scope>import&lt;/scope> &lt;/dependency> &lt;/dependencies> &lt;/dependencyManagement> &lt;build> &lt;plugins> &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;executions> &lt;execution> &lt;goals> &lt;!-- ÈªòËÆ§goal„ÄÇÂú®mvn package‰πãÂêéÔºåÂÜçÊ¨°ÊâìÂåÖÂèØÊâßË°åÁöÑjar/warÔºåÂêåÊó∂‰øùÁïômvn packageÁîüÊàêÁöÑjar/war‰∏∫.origin --> &lt;!-- https://docs.spring.io/spring-boot/docs/current/maven-plugin/repackage-mojo.html --> &lt;goal>repackage&lt;/goal> &lt;/goals> &lt;/execution> &lt;/executions> &lt;/plugin> &lt;/plugins> &lt;/build> ÂêØÂä®Á±ªpackage com.iogogogo.eureka; import lombok.extern.slf4j.Slf4j; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer; /** * Ê∑ªÂä†ÂêØÂä®‰ª£Á†Å‰∏≠Ê∑ªÂä†@EnableEurekaServerÊ≥®Ëß£ * Created by tao.zeng on 2019-03-15. */ @Slf4j @EnableEurekaServer @SpringBootApplication public class EurekaServerApplication { public static void main(String[] args) { SpringApplication.run(EurekaServerApplication.class, args); } } application.properties ÈÖçÁΩÆeureka‰ΩøÁî®8761Á´ØÂè£ spring.application.name=life-cloud-eureka server.port=8761 eureka.instance.hostname=localhost # ÂÆû‰æãÂêçÁß∞ÊòæÁ§∫IP eureka.instance.prefer-ip-address=true # ÂÅ•Â∫∑Ê£ÄÊü• eureka.server.enable-self-preservation=false # Ê∏ÖÁêÜÈó¥Èöî eureka.server.eviction-interval-timer-in-ms=6000 # Ë°®Á§∫ÊòØÂê¶Â∞ÜËá™Â∑±Ê≥®ÂÜåÂà∞Eureka ServerÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.register-with-eureka=false # Ë°®Á§∫ÊòØÂê¶‰ªéEureka ServerËé∑ÂèñÊ≥®ÂÜå‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.fetch-registry=false # eurekaÊúçÂä°Âú∞ÂùÄ Â§ö‰∏™Âú∞ÂùÄÂèØ‰ΩøÁî® , ÂàÜÈöî„ÄÇ eureka.client.service-url.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/ ÁÑ∂ÂêéÂêØÂä®È°πÁõÆÔºåËÆøÈóÆ http://localhost:8761/ Eureka È´òÂèØÁî®Ê≥®ÂÜå‰∏≠ÂøÉËøô‰πàÂÖ≥ÈîÆÁöÑÊúçÂä°ÔºåÂ¶ÇÊûúÊòØÂçïÁÇπËØùÔºåÈÅáÂà∞ÊïÖÈöúÂ∞±ÊòØÊØÅÁÅ≠ÊÄßÁöÑ„ÄÇÂú®Áîü‰∫ß‰∏≠Êàë‰ª¨ÂèØËÉΩÈúÄË¶Å‰∏âÂè∞ÊàñËÄÖÂ§ß‰∫é‰∏âÂè∞ÁöÑÊ≥®ÂÜå‰∏≠ÂøÉÊù•‰øùËØÅÊúçÂä°ÁöÑÁ®≥ÂÆöÊÄßÔºåÂú®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÊòØÊúÄÈáçË¶ÅÁöÑÂü∫Á°ÄÈÉ®ÂàÜÔºåÁêÜÂ∫îÈöèÊó∂Â§Ñ‰∫éÂèØ‰ª•Êèê‰æõÊúçÂä°ÁöÑÁä∂ÊÄÅ„ÄÇ‰∏∫‰∫ÜÁª¥ÊåÅÂÖ∂ÂèØÁî®ÊÄßÔºå‰ΩøÁî®ÈõÜÁæ§ÊòØÂæàÂ•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇEurekaÈÄöËøá‰∫íÁõ∏Ê≥®ÂÜåÁöÑÊñπÂºèÊù•ÂÆûÁé∞È´òÂèØÁî®ÁöÑÈÉ®ÁΩ≤ÔºåÊâÄ‰ª•Êàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜEureke ServerÈÖçÁΩÆÂÖ∂‰ªñÂèØÁî®ÁöÑserviceUrlÂ∞±ËÉΩÂÆûÁé∞È´òÂèØÁî®ÈÉ®ÁΩ≤„ÄÇ ‰øÆÊîπhostsÊñá‰ª∂hostsÊñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπvim /etc/hosts 127.0.0.1 peer1 127.0.0.1 peer2 127.0.0.1 peer3 ‰øÆÊîπpropertiesÊñá‰ª∂ ÂàõÂª∫ application-peer1.properties Â∞ÜserviceUrlÊåáÂêëpeer2„ÄÅpeer3 spring.application.name=life-cloud-eureka server.port=8761 eureka.instance.hostname=peer1 # ÂÆû‰æãÂêçÁß∞ÊòæÁ§∫IP eureka.instance.prefer-ip-address=true # ÂÅ•Â∫∑Ê£ÄÊü• eureka.server.enable-self-preservation=false # Ê∏ÖÁêÜÈó¥Èöî eureka.server.eviction-interval-timer-in-ms=6000 # Ë°®Á§∫ÊòØÂê¶Â∞ÜËá™Â∑±Ê≥®ÂÜåÂà∞Eureka ServerÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.register-with-eureka=false # Ë°®Á§∫ÊòØÂê¶‰ªéEureka ServerËé∑ÂèñÊ≥®ÂÜå‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.fetch-registry=false # eurekaÊúçÂä°Âú∞ÂùÄ Â§ö‰∏™Âú∞ÂùÄÂèØ‰ΩøÁî® , ÂàÜÈöî„ÄÇ eureka.client.service-url.defaultZone=http://peer2:8762/eureka/,http://peer3:8763/eureka/ ÂàõÂª∫ application-peer2.properties Â∞ÜserviceUrlÊåáÂêëpeer1„ÄÅpeer3 spring.application.name=life-cloud-eureka server.port=8762 eureka.instance.hostname=peer2 # ÂÆû‰æãÂêçÁß∞ÊòæÁ§∫IP eureka.instance.prefer-ip-address=true # ÂÅ•Â∫∑Ê£ÄÊü• eureka.server.enable-self-preservation=false # Ê∏ÖÁêÜÈó¥Èöî eureka.server.eviction-interval-timer-in-ms=6000 # Ë°®Á§∫ÊòØÂê¶Â∞ÜËá™Â∑±Ê≥®ÂÜåÂà∞Eureka ServerÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.register-with-eureka=false # Ë°®Á§∫ÊòØÂê¶‰ªéEureka ServerËé∑ÂèñÊ≥®ÂÜå‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.fetch-registry=false # eurekaÊúçÂä°Âú∞ÂùÄ Â§ö‰∏™Âú∞ÂùÄÂèØ‰ΩøÁî® , ÂàÜÈöî„ÄÇ eureka.client.service-url.defaultZone=http://peer1:8761/eureka/,http://peer3:8763/eureka/ ÂàõÂª∫ application-peer3.properties Â∞ÜserviceUrlÊåáÂêëpeer1„ÄÅpeer2 spring.application.name=life-cloud-eureka server.port=8763 eureka.instance.hostname=peer3 # ÂÆû‰æãÂêçÁß∞ÊòæÁ§∫IP eureka.instance.prefer-ip-address=true # ÂÅ•Â∫∑Ê£ÄÊü• eureka.server.enable-self-preservation=false # Ê∏ÖÁêÜÈó¥Èöî eureka.server.eviction-interval-timer-in-ms=6000 # Ë°®Á§∫ÊòØÂê¶Â∞ÜËá™Â∑±Ê≥®ÂÜåÂà∞Eureka ServerÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.register-with-eureka=false # Ë°®Á§∫ÊòØÂê¶‰ªéEureka ServerËé∑ÂèñÊ≥®ÂÜå‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫true„ÄÇ eureka.client.fetch-registry=false # eurekaÊúçÂä°Âú∞ÂùÄ Â§ö‰∏™Âú∞ÂùÄÂèØ‰ΩøÁî® , ÂàÜÈöî„ÄÇ eureka.client.service-url.defaultZone=http://peer1:8761/eureka/,http://peer2:8762/eureka/ ÊâìÂåÖ‰æùÊ¨°ÂêØÂä®mvn clean package ‰æùÊ¨°ÂêØÂä® java -jar cloud-eureka-0.0.1.jar --spring.profiles.active=peer1 java -jar cloud-eureka-0.0.1.jar --spring.profiles.active=peer2 java -jar cloud-eureka-0.0.1.jar --spring.profiles.active=peer3 ÂêØÂä®ÂÆåÊàêÂêéÔºåÊµèËßàÂô®ËæìÂÖ•Ôºöhttp://localhost:8762/ ÊïàÊûúÂõæÂ¶Ç‰∏ãÔºö ÂèØ‰ª•Âú®peer2‰∏≠ÁúãÂà∞‰∫Üpeer1„ÄÅpeer3ÁöÑÁõ∏ÂÖ≥ÁöÑÂâØÊú¨‰ø°ÊÅØ„ÄÇËá≥Ê≠§eurekaÈõÜÁæ§‰πüÂ∑≤ÁªèÂÆåÊàê‰∫Ü„ÄÇ ‰ª•‰∏äÂÆåÊï¥‰ª£Á†Ågithub","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/tags/Spring-Cloud/"}]},{"title":"MySQL Â∏∏Áî®ËØ≠Âè•","slug":"mysql-note-01","date":"2019-03-14T08:21:43.000Z","updated":"2024-07-01T12:30:37.376Z","comments":true,"path":"2019/03/14/mysql-note-01/","link":"","permalink":"http://iogogogo.github.io/2019/03/14/mysql-note-01/","excerpt":"","text":"MySQL Â∏∏Áî®ËØ≠Âè•sql-joinmysqlÂ∏∏Áî®sqlËØ≠Âè•ÊÄªÁªì ‰øÆÊîπÊõøÊç¢Â≠óÊÆµ‰∏≠ÁöÑÊüê‰∏Ä‰∏™ÂÄºupdate dictionary set content=REPLACE(content, 'Ë∞≠', 'Ë∞à'); update recipes set item_image=REPLACE(item_image,'http://app-file.botu.com:9000','http://app-file.botu.com:9000/BOTU') where id in (select rec.id from (select id from recipes r where binary r.item_image not like '%BOTU%') rec); Ê∏ÖÁ©∫Ë°®Êï∞ÊçÆtruncate table dictionary; -- Ê∏ÖÁ©∫Ëá™Â¢û‰∏ªÈîÆ delete from dictionary; -- ‰∏çÊ∏ÖÁ©∫Ëá™Â¢û‰∏ªÈîÆ NULLÊü•ËØ¢select * from tmp where name is not null; select * from tmp where name is null; Ê†πÊçÆË°®ÁªìÊûÑÁîüÊàêÂÆû‰ΩìÂØπÂ∫îÂ≠óÊÆµSELECT CONCAT_WS( '', '/** *', COLUMN_COMMENT, ' */ @TableField(\"',column_name,'\") @JSONField(name = \"',column_name,'\") private ', CASE DATA_TYPE WHEN 'varchar' THEN 'String ' WHEN 'bigint' THEN 'Long ' WHEN 'longtext' THEN 'String ' WHEN 'datetime' THEN 'Date ' WHEN 'int' THEN 'Integer ' WHEN 'decimal' THEN 'BigDecimal ' WHEN 'double' THEN 'Double ' WHEN 'timestamp' THEN 'Timestamp ' WHEN 'longblob' THEN 'Byte[] ' WHEN 'tinyint' THEN 'Integer ' WHEN 'text' THEN 'String ' WHEN 'char' THEN 'Char ' WHEN 'date' THEN 'Date ' WHEN 'float' THEN 'Float ' WHEN 'varbinary' THEN 'Byte[] ' WHEN 'mediumtext' THEN 'String ' WHEN 'enum' THEN 'String ' WHEN 'blob' THEN 'Byte[] ' WHEN 'set' THEN 'String ' WHEN 'time' THEN 'Time ' WHEN 'smallint' THEN 'Integer ' WHEN 'tinytext' THEN 'String ' WHEN 'binary' THEN 'Byte[] ' WHEN 'bit' THEN 'Boolean ' END, column_name, ';' ) FROM information_schema.`COLUMNS` WHERE TABLE_SCHEMA = 'life_health' AND TABLE_NAME = 'health_exp'; Ë°®Êìç‰ΩúÂ¢ûÂä†‰∏é‰øÆÊîπÂàóAlter table Ë°®Âêç add ÂàóÂêçÁß∞ ÂàóÁ±ªÂûã ÂàóÂèÇÊï∞; [Âä†ÁöÑÂàóÂú®Ë°®ÁöÑÊúÄÂêé] ‰æã: alter table m1 add birth date not null default '0000-00-00'; Alter table Ë°®Âêç add ÂàóÂêçÁß∞ ÂàóÁ±ªÂûã ÂàóÂèÇÊï∞ after ÊüêÂàó; [ÊääÊñ∞ÂàóÂä†Âú®ÊüêÂàóÂêé] ‰æã: alter table m1 add gender char(1) not null default '' after username; Alter table Ë°®Âêç add ÂàóÂêçÁß∞ ÂàóÁ±ªÂûã ÂàóÂèÇÊï∞ first; [ÊääÊñ∞ÂàóÂä†Âú®ÊúÄÂâçÈù¢] ‰æã: alter table m1 add pid int not null default 0 first; Âà†Èô§ÂàóAlter table Ë°®Âêç drop ÂàóÂêç; ‰øÆÊîπÂàóÁ±ªÂûãAlter table Ë°®Âêç modify ÂàóÂêç Êñ∞Á±ªÂûã Êñ∞ÂèÇÊï∞; (‰∏çËÉΩ‰øÆÊîπÂàóÂêç); ‰æã:alter table m1 modify gender char(4) not null default ''; ‰øÆÊîπÂàóÂêçÂèäÂàóÁ±ªÂûãAlter table Ë°®Âêç change ÊóßÂàóÂêç Êñ∞ÂàóÂêç Êñ∞Á±ªÂûã Êñ∞ÂèÇÊï∞; ‰æã:alter table m1 change id uid int unsigned; ÊîπË°®Âêçrename table regist3 to reg3; Âà†Èô§Ë°®DROP TABLE IF EXISTS `dictionary`; Â∏∏Áî®Êü•ËØ¢SELECT * FROM sensitive_word_condition a WHERE a.count &lt; 11 ORDER BY a.count DESC LIMIT 1; MySQL 5.7Êü•ËØ¢‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÊúÄÂêé‰∏ÄÊù°Êï∞ÊçÆmysql ÂçáÁ∫ßÂà∞5.7‰πãÂêéÔºåÂ≠òÂÇ®ÂºïÊìéÂÅö‰∫Ü‰∏Ä‰∫õ‰ºòÂåñÔºå‰πãÂâçÊàë‰ª¨‰ΩøÁî®ÁöÑ ÂÖàorder by ÂÜç group by ÁöÑÊñπÂºèÂèñÊúÄÂêé‰∏ÄÊù°Êï∞ÊçÆÁöÑÊü•ËØ¢Ôºå‰ºöÂá∫Áé∞ÂèñÁöÑ‰∏çÊòØÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÈóÆÈ¢ò ‰∏∫‰∫ÜÂÆûÁé∞ÂéüÊúâÊü•ËØ¢ÈÄªËæëÔºåËØ∑Âú®Â≠êÊü•ËØ¢ÂêéÈù¢ÔºåÂä†‰∏älimit 9223372036854775807ÂÖ∂‰∏≠Ôºå9223372036854775807‰∏∫bigintÁöÑÊúÄÂ§ßÂÄº SELECT * FROM ( SELECT e.*, DATE_FORMAT(`update_date`, '%Y-%m-%d') AS edt FROM health_exp e WHERE update_date BETWEEN '2018-02-01' AND '2018-02-06 23:23:59' AND user_id = '2baef230bad144e89296c2c51fa2b680' ORDER BY update_date DESC LIMIT 9223372036854775807 ) t GROUP BY t.edt;","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"Vertica ÂàÜÊûêÂáΩÊï∞","slug":"vertica-03","date":"2019-03-14T03:33:07.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"2019/03/14/vertica-03/","link":"","permalink":"http://iogogogo.github.io/2019/03/14/vertica-03/","excerpt":"","text":"ÂàÜÊûêÂáΩÊï∞‰Ωú‰∏∫ SQL Ë®ÄËØ≠ÁöÑ‰∏ÄÁßçÊâ©Â±ïÂ∑≤ÁªèË¢´Á∫≥ÂÖ•‰∫ÜÁæéÂõΩÂõΩÂÆ∂Ê†áÂáÜÂåñÁªÑÁªáSQL ÂßîÂëò‰ºöÁöÑSQL ËßÑËåÉËØ¥Êòé‰π¶‰∏≠„ÄÇÊâÄ‰ª•‰∏çÂêåÊï∞ÊçÆÂ∫ìÂéÇÂïÜÊîØÊåÅÁöÑÂàÜÊûêÂáΩÊï∞ÂÖ∂ËØ≠Ê≥ïÁªìÊûÑÂíåÂáΩÊï∞ÂêçÁß∞‰πüÂü∫Êú¨‰∏ÄËá¥„ÄÇËøôÈáå‰ªÖ‰ªãÁªçVerticaÁöÑÁöÑÂàÜÊûêÂáΩÊï∞ËØ≠Ê≥ïÂíåÂáΩÊï∞‰ΩúÁî®ÔºåÂ∫îÁî®ÂáΩÊï∞Áõ∏ÂÖ≥‰æãÂ≠êÁï•„ÄÇ ÂàÜÊûêÂáΩÊï∞ËØ≠Ê≥ïANALYTIC_FUNCTIONÔºàargument-1Ôºå...Ôºåargument-nÔºâ OVERÔºà[window_partition_clause] [window_order_clause] [window_frame_clauseÔºâ Â∏∏ËßÅÂáΩÊï∞Áî®ÈÄîÂíåÊèèËø∞ Âíå ËØ•ÂáΩÊï∞ËÆ°ÁÆóÁªÑ‰∏≠Ë°®ËææÂºèÁöÑÁ¥ØÁßØÂíå MIN Âú®‰∏Ä‰∏™ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÁ™óÂè£‰∏≠Êü•ÊâæË°®ËææÂºèÁöÑÊúÄÂ∞èÂÄº MAX Âú®‰∏Ä‰∏™ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÁ™óÂè£‰∏≠Êü•ÊâæË°®ËææÂºèÁöÑÊúÄÂ§ßÂÄº AVG Áî®‰∫éËÆ°ÁÆó‰∏Ä‰∏™ÁªÑÂíåÊï∞ÊçÆÁ™óÂè£ÂÜÖË°®ËææÂºèÁöÑÂπ≥ÂùáÂÄº„ÄÇ ËÆ°Êï∞ ÂØπ‰∏ÄÁªÑÂÜÖÂèëÁîüÁöÑ‰∫ãÊÉÖËøõË°åÁ¥ØÁßØËÆ°Êï∞ Áß© Ê†πÊçÆORDER BYÂ≠êÂè•‰∏≠Ë°®ËææÂºèÁöÑÂÄºÔºå‰ªéÊü•ËØ¢ËøîÂõûÁöÑÊØè‰∏ÄË°åÔºåËÆ°ÁÆóÂÆÉ‰ª¨‰∏éÂÖ∂ÂÆÉË°åÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ DENSE_RANK Ê†πÊçÆORDER BYÂ≠êÂè•‰∏≠Ë°®ËææÂºèÁöÑÂÄºÔºå‰ªéÊü•ËØ¢ËøîÂõûÁöÑÊØè‰∏ÄË°åÔºåËÆ°ÁÆóÂÆÉ‰ª¨‰∏éÂÖ∂ÂÆÉË°åÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ FIRST_VALUE ËøîÂõûÁªÑ‰∏≠Êï∞ÊçÆÁ™óÂè£ÁöÑÁ¨¨‰∏Ä‰∏™ÂÄº LAST_VALUE ËøîÂõûÁªÑ‰∏≠Êï∞ÊçÆÁ™óÂè£ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÄº„ÄÇ ËêΩÂêé ÂèØ‰ª•ËÆøÈóÆÁªìÊûúÈõÜ‰∏≠ÁöÑÂÖ∂ÂÆÉË°åËÄå‰∏çÁî®ËøõË°åËá™ËøûÊé• ÈìÖ LEAD‰∏éLAGÁõ∏ÂèçÔºåLEADÂèØ‰ª•ËÆøÈóÆÁªÑ‰∏≠ÂΩìÂâçË°å‰πãÂêéÁöÑË°å ROW_NUMBER ËøîÂõûÊúâÂ∫èÁªÑ‰∏≠‰∏ÄË°åÁöÑÂÅèÁßªÈáèÔºå‰ªéËÄåÂèØÁî®‰∫éÊåâÁâπÂÆöÊ†áÂáÜÊéíÂ∫èÁöÑË°åÂè∑ STDDEV ËÆ°ÁÆóÂΩìÂâçË°åÂÖ≥‰∫éÁªÑÁöÑÊ†áÂáÜÂÅèÁ¶ª STDDEV_POP ËØ•ÂáΩÊï∞ËÆ°ÁÆóÊÄª‰ΩìÊ†áÂáÜÂÅèÁ¶ªÔºåÂπ∂ËøîÂõûÊÄª‰ΩìÂèòÈáèÁöÑÂπ≥ÊñπÊ†π STDDEV_SAMP ËØ•ÂáΩÊï∞ËÆ°ÁÆóÁ¥ØÁßØÊ†∑Êú¨Ê†áÂáÜÂÅèÁ¶ªÔºåÂπ∂ËøîÂõûÊÄª‰ΩìÂèòÈáèÁöÑÂπ≥ÊñπÊ†π VAR_POP ËØ•ÂáΩÊï∞ËøîÂõûÈùûÁ©∫ÈõÜÂêàÁöÑÊÄª‰ΩìÂèòÈáèÔºàÂøΩÁï•nullÔºâ VAR_SAMP ËØ•ÂáΩÊï∞ËøîÂõûÈùûÁ©∫ÈõÜÂêàÁöÑÊ†∑Êú¨ÂèòÈáèÔºàÂøΩÁï•nullÔºâ ÊñπÂ∑Æ Â¶ÇÊûúË°®ËææÂºè‰∏≠Ë°åÊï∞‰∏∫1ÔºåÂàôËøîÂõû0ÔºåÂ¶ÇÊûúË°®ËææÂºè‰∏≠Ë°åÊï∞Â§ß‰∫é1ÔºåÂàôËøîÂõûVAR_SAMP CUME_DIST ËÆ°ÁÆó‰∏ÄË°åÂú®ÁªÑ‰∏≠ÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ NTILE Â∞Ü‰∏Ä‰∏™ÁªÑÂàÜ‰∏∫‚ÄúË°®ËææÂºè‚ÄùÁöÑÊï£ÂàóË°®Á§∫ PERCENT_RANK ÂíåCUME_DISTÔºàÁ¥ØÁßØÂàÜÈÖçÔºâÂáΩÊï∞Á±ª‰ºº PERCENTILE_DISC ËøîÂõû‰∏Ä‰∏™‰∏éËæìÂÖ•ÁöÑÂàÜÂ∏ÉÁôæÂàÜÊØîÂÄºÁõ∏ÂØπÂ∫îÁöÑÊï∞ÊçÆÂÄº PERCENTILE_CONT ËøîÂõû‰∏Ä‰∏™‰∏éËæìÂÖ•ÁöÑÂàÜÂ∏ÉÁôæÂàÜÊØîÂÄºÁõ∏ÂØπÂ∫îÁöÑÊï∞ÊçÆÂÄº MEDIAN Âú®‰∏Ä‰∏™ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÁ™óÂè£‰∏≠Êü•ÊâæÊúÄÂ∞èÂÄº‰∏éÊúÄÂ§ßÂÄºÁöÑÂπ≥ÂùáÂÄº ÂèÇÊï∞-1Ôºå‚Ä¶ÔºåÂèÇÊï∞-nÂàÜÊûêÂáΩÊï∞ÁöÑÂèÇÊï∞ window_partition_clauseÊ†πÊçÆÂàíÂàÜË°®ËææÂºèËÆæÁΩÆÁöÑËßÑÂàôÔºå PARTITION BY ÔºàÊåâ‚Ä¶ ÂàíÂàÜÔºâÂ∞Ü‰∏Ä‰∏™ÁªìÊûúÈÄªËæëÂàÜÊàê√ë ‰∏™ÂàÜÁªÑÂàíÂàÜË°®ËææÂºè„ÄÇÂú®Ê≠§‚Äú ÂàíÂàÜ‚Äù Âíå‚Äú ÂàÜÁªÑ‚Äù Áî®‰ΩúÂêå‰πâËØç„ÄÇÂàÜÊûêÂáΩÊï∞Áã¨Á´ãÂ∫îÁî®‰∫éÂêÑ‰∏™ÂàÜÁªÑÔºåÂπ∂Âú®Â∫îÁî®Êó∂ÈáçÁΩÆ„ÄÇ OVERÔºàPARTITION BY expression [Ôºå...]Ôºâ window_order_clauseORDER BY ÔºàÊåâ‚Ä¶ ÊéíÂ∫èÔºâËØ≠Âè•ËßÑÂÆö‰∫ÜÊØè‰∏™ÂàÜÁªÑÔºàÂàíÂàÜÔºâÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÊéíÂ∫è„ÄÇËøô‰∫õÂøÖÁÑ∂ÂΩ±ÂìçÂàÜÊûêÂáΩÊï∞ÁöÑÁªìÊûú„ÄÇ OVERÔºàORDER BY expression [{ASC | DESC}] ... [NULLS {FIRST | LAST | AUTO}] [Ôºåexpression ...]Ôºâ window_frame_clauseÁ™óÂè£ÁîüÊàêËØ≠Âè•Áî®‰ª•ÂÆö‰πâÊªëÂä®ÊàñÂõ∫ÂÆöÊï∞ÊçÆÁ™óÂè£ÔºåÂàÜÊûêÂáΩÊï∞Âú®ÂàÜÁªÑÂÜÖËøõË°åÂàÜÊûê„ÄÇËØ•ËØ≠Âè•ËÉΩÂ§üÂØπÂàÜÁªÑ‰∏≠‰ªªÊÑèÂÆö‰πâÁöÑÊªëÂä®ÊàñÂõ∫ÂÆöÁ™óÂè£ËøõË°åËÆ°ÁÆó„ÄÇ","categories":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/categories/Vertica/"}],"tags":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/tags/Vertica/"}]},{"title":"Vertica Âü∫Êú¨Êìç‰ΩúËØ≠Âè•","slug":"vertica-02","date":"2019-03-14T02:51:43.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"2019/03/14/vertica-02/","link":"","permalink":"http://iogogogo.github.io/2019/03/14/vertica-02/","excerpt":"","text":"Âü∫Êú¨‰ªãÁªçÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÔºåÁõ∏ÂØπ‰∫é‰º†ÁªüÁöÑÂü∫‰∫éË°åÁöÑÊï∞ÊçÆÂ∫ìÔºåÂÆÉÊõ¥ÈÄÇÂêàÂú®Êï∞ÊçÆ‰ªìÂ∫ìÂ≠òÂÇ®ÊñπÈù¢ÂèëÊå•ÁâπÈïø„ÄÇÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÁÇπÔºö ÂØπ‰∫éËÅöÈõÜÊìç‰ΩúÔºåÊØîÂ¶ÇÊ±ÇsumÔºåÊòéÊòæÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑË¶ÅÊØîÂü∫‰∫éË°åÂ≠òÂÇ®ÁöÑÂø´Ôºõ ÂØπ‰∫éupdateÊìç‰ΩúÔºå‰∏çÈ°ªÊé•Ëß¶ÂÖ∂‰ªñÂàóÂÄºÔºõ Âü∫‰∫éË°åÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÂú®Êü•ËØ¢ÊØèË°åËÆ∞ÂΩïÁöÑÂ§ö‰∏™ÂàóÂÄºÊõ¥È´òÊïàÁöÑÊù°‰ª∂ÊòØÔºårow-sizeÊØîËæÉÂ∞èÔºåËøôÊ†∑‰∏ÄÊ¨°Á£ÅÁõòËØªÂèñÂ∞±ÂèØ‰ª•Ëé∑ÂèñÊï¥Ë°åÔºõ Âü∫‰∫éË°åÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÂú®insert‰∏ÄË°åÁöÑÊó∂ÂÄôÁõ∏ÂØπÊõ¥È´òÊïàÔºåÊØïÁ´üÂèØ‰∏ÄÊ¨°ÂÜôÂÖ•‰∏Ä‰∏™ËøûÁª≠Á©∫Èó¥ÔºåÂç≥‰∏ÄÊ¨°single disk seek„ÄÇ ‰ªéÂÆûÈôÖÊÉÖÂÜµ‰∏äÊù•ÁúãÔºåÂü∫‰∫éË°åÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÊõ¥ÈÄÇÂêàOLTPÔºàËÅîÊú∫‰∫ãÂä°Â§ÑÁêÜÁ≥ªÁªüÔºâÔºåÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÊõ¥ÈÄÇÂêàOLAPÔºàËÅîÊú∫ÂàÜÊûêÂ§ÑÁêÜÁ≥ªÁªüÔºâÔºåÊØîÂ¶ÇÊï∞ÊçÆ‰ªìÂ∫ì„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂêå‰∏ÄÂàóÂøÖÂÆöÊòØÂêå‰∏ÄÁ±ªÂûãÂ§ßÂ∞èÔºåÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÊõ¥ÂÆπÊòì‰ΩøÁî®È´òÊïàÁöÑÂ≠òÂÇ®ÊñπÂºèÔºå‰∏é‰πãÁõ∏ÂØπÔºåÂü∫‰∫éË°åÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ìÂàôÂè™ËÉΩÈááÁî®ÈöèÊú∫ÊñπÂºèÂ§ÑÁêÜÂàóÂÄº‰∫Ü„ÄÇ VerticaÊï∞ÊçÆÂ∫ìÁöÑËÆæËÆ°ÁâπÁÇπÊòØÔºö ÂÆÉÊòØÂü∫‰∫éÂàóÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºåÊèêÈ´ò‰∫ÜËøûÁª≠ÁöÑrecordÂ§ÑÁêÜÁöÑÊÄßËÉΩÔºå‰ΩÜÊòØÂú®‰∏ÄËà¨‰∫ãÂä°‰∏≠Â¢ûÂä†‰∫ÜÂØπÂçïÁã¨recordËøõË°åupdateÂíådeleteÁöÑÂºÄÈîÄÔºõ ‚ÄúÂçïÁã¨‚ÄùÊõ¥Êñ∞Ôºàout-of-place updatesÔºâÂíåÊ∑∑ÂêàÂ≠òÂÇ®ÁªìÊûÑÔºåÊèêÈ´ò‰∫ÜÊü•ËØ¢„ÄÅÊèíÂÖ•ÁöÑÊÄßËÉΩÔºå‰ΩÜÂ¢ûÂä†‰∫ÜupdateÂíådeleteÁöÑÂºÄÈîÄÔºõ ÂéãÁº©ÔºåÂáèÂ∞ëÂ≠òÂÇ®ÂºÄÈîÄÂíåIOÂ∏¶ÂÆΩÂºÄÈîÄÔºõ ÂÆåÂÖ®Êó†ÂÖ±‰∫´Êû∂ÊûÑÔºåÈôç‰ΩéÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑÁ≥ªÁªüÁ´û‰∫â„ÄÇ VerticaÊï∞ÊçÆÂ∫ìËøêË°åÂú®Âü∫‰∫éLinuxÁöÑÁΩëÊ†ºÊúçÂä°Âô®‰∏äÔºåÁõÆÂâçÂ∫îÁî®‰∫éAmazon Elastic Compute CloudÁöÑÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªü„ÄÇ Âü∫Êú¨Êìç‰ΩúËøõÂÖ• vsql ÁéØÂ¢Évsql -U dbadmin -w 123456 Êü•ÁúãÂ∏ÆÂä©dbadmin=> \\h ÂàáÊç¢verticaÁî®Êà∑ÔºåÁî®‰∫éÂàõÂª∫database# ÂàáÊç¢Áî®Êà∑ su - dbadmin # ËøõÂÖ•verticaÁÆ°ÁêÜÂ∑•ÂÖ∑ /opt/vertica/bin/admintools ÂàõÂª∫Êï∞ÊçÆÂ∫ì Áî®Êà∑‰∏éschemaÊü•ËØ¢Êü•ËØ¢Áî®Êà∑select * from v_catalog.users; Êü•ËØ¢schemaselect * from schemata; Êüê‰∏™schemaÂøÖÈ°ªÈôÑÂ±û‰∫éÊüê‰∏™Áî®Êà∑ÔºàuserÔºâÔºåÊü•ËØ¢Áî®Êà∑Âíåschema‰ø°ÊÅØSELECT u.user_name, s.schema_name FROM users u LEFT OUTER JOIN schemata s ON u.user_name = s.schema_owner; ÂàõÂª∫Áî®Êà∑ÂíåschemaÂàõÂª∫‰∏Ä‰∏™Áî®Êà∑# username:dev_test password:test create user dev_test identified by 'test'; Âü∫‰∫éÊüê‰∏™Áî®Êà∑ÂàõÂª∫schemacreate schema if not exists test authorization dev_test; ÈáçÂëΩÂêç(Â§á‰ªΩ)datanameÊï∞ÊçÆÂ∫ì‰∏∫ dataname_bak alter schema dataname rename to dataname_bak; Âà†Èô§ schema(dataname)drop schema dataname cascade; ÂàõÂª∫Ë°®CREATE TABLE test.\"user\" ( id Integer NOT NULL, name Varchar(100), description Varchar(1024) ); ËµãÊùÉ‰∏Ä‰∏™schema‰∏äÁöÑÊùÉÈôêËµãÁªôÂè¶‰∏Ä‰∏™Áî®Êà∑GRANT USAGE ON SCHEMA dbname_dw TO dev_test; ÊääÂØπÊüê‰∏™Ë°®ÁöÑÊìç‰ΩúÁöÑÊùÉÈôêËµãÁªôÂè¶‰∏Ä‰∏™Áî®Êà∑GRANT ALL ON TABLE tw_re_pm_cell_all_cell_h to dev_test; ‰ªéÊüê‰∏™Áî®Êà∑Êî∂ÂõûÂØπÊüê‰∏™schemaÁöÑ‰ΩøÁî®ÊùÉÈôêrevoke all on SCHEMA dbname_dw from dev_test; ‰ªéÊüê‰∏™Áî®Êà∑Êî∂ÂõûÂØπÊüê‰∏™Ë°®ÁöÑ‰ΩøÁî®ÊùÉÈôêrevoke all on table fct_flux_se_flux_flow_whole_ana_d from dev_test; Â∫èÂàóÊü•ËØ¢Á≥ªÁªü‰∏≠ÁöÑÂ∫èÂàóselect * from sequences; ÂàõÂª∫Â∫èÂàó# ÁÆÄÂçïËØ≠Ê≥ïÔºö CREATE SEQUENCE my_seq MAXVALUE 5000 START 1; # Ê†áÂáÜËØ≠Ê≥ïÔºö CREATE SEQUENCE [[db-name.]schema.]sequence_name ... [ INCREMENT [ BY ] positive_or_negative ] ... [ MINVALUE minvalue | NO MINVALUE ] ... [ MAXVALUE maxvalue | NO MAXVALUE ] ... [ START [ WITH ] start ] ... [ CACHE cache ] ... [ CYCLE | NO CYCLE ] ‰ΩøÁî®Â∫èÂàó# ‰∏Ä‰∏™Êñ∞ÂàõÂª∫ËøòÊ≤°Êúâ‰ΩøÁî®ËøáÁöÑÂ∫èÂàóÔºåÂøÖÈ°ªÈ¶ñÂÖàÊâßË°åNEXTVALÔºåÁÑ∂ÂêéÊâçËÉΩÊâßË°åCURRVAL„ÄÇ SELECT NEXTVAL('my_seq'); SELECT CURRVAL('my_seq'); Âú®INSERTËØ≠Âè•Èáå‰ΩøÁî®Â∫èÂàó INSERT INTO customer VALUES ('Hawkins' ,'John', 072753, NEXTVAL('my_seq')); Âú®INSERTËØ≠Âè•ÈáåÊääÂ∫èÂàó‰Ωú‰∏∫ÈªòËÆ§ÂÄºÔºö CREATE TABLE customer2(ID INTEGER DEFAULT NEXTVAL('my_seq'), lname VARCHAR(25), fname VARCHAR(25), membership_card INTEGER ); => INSERT INTO customer2 VALUES (default,'Carr', 'Mary', 87432); Âà†Èô§Â∫èÂàó DROP SEQUENCE seq_name; VerticaÂàõÂª∫Â§ñÈÉ®Ë°®CREATE EXTERNAL TABLE ext1 (x integer) AS COPY FROM '/tmp/ext1.dat' DELIMITER ','; CREATE EXTERNAL TABLE ext1 (x integer) AS COPY FROM '/tmp/ext1.dat.bz2' BZIP DELIMITER ','; CREATE EXTERNAL TABLE ext1 (x integer, y integer) AS COPY (x as '5', y) FROM '/tmp/ext1.dat.bz2' BZIP DELIMITER ','; copyÊâßË°åÈîôËØØÂêéÁöÑVerticaÁöÑÈîôËØØÊó•Âøó/database/dbname/dbname/v_dbname_node0002_catalog/CopyErrorLogs ‰ªéverticaÊï∞ÊçÆÁöÑË°®‰∏≠ÂØºÂá∫Êï∞ÊçÆÂà∞Êï∞ÊçÆÊñá‰ª∂echo `vsql -d dbname -U dbadmin -Atq -w Zongfen_12 -c \"select * from test.dim_flow_direction order by flow_type_code\"> /database/datastage/export/dim_all/test` ÈÄöËøáÊï∞ÊçÆÊñá‰ª∂ÂêëverticaÊï∞ÊçÆÂ∫ìÈáåÂä†ËΩΩÊï∞ÊçÆcopy test.fct_flux_se_bus_res_ana_d from '/database/imp_file/fct_flux_se_bus_res_ana_d' on v_dbname_node0002 delimiter '|'; ‰øÆÊîπÂ≠óÊÆµ‰øÆÊîπÂ≠óÊÆµ‰∏∫ÈùûÁ©∫alter table test.fct_fournet_wlanap_equp_ana_d alter column day_id set not null; Êõ¥ÊîπÂ≠óÊÆµÊï∞ÊçÆÁ±ªÂûãÂØπ‰∫éÊï∞ÂÄºÁ±ªÂûãÔºötypes‚ÄìINTEGER, INT, BIGINT, TINYINT, INT8, SMALLINT, and all NUMERIC values of scale &lt;=18 and precision 0 ‰πãÈó¥ÊòØÂèØ‰ª•‰∫íÁõ∏ËΩ¨ÂåñÁöÑ„ÄÇÊ≠§Â§ñÔºånumericÁ±ªÂûãÁöÑÁ≤æÂ∫¶ÔºàprecisionÔºâÊòØÊó†Ê≥ïÊõ¥ÊîπÁöÑÔºå‰ΩÜÊòØÈïøÂ∫¶(scale)ÊòØÂèØ‰ª•‰øÆÊîπÁöÑÔºåÔºà0-18Ôºâ‰πãÈó¥ÂèØ‰ª•‰∫í‰øÆÊîπÔºåÔºà19-37Ôºâ‰πãÈó¥ÂèØ‰ª•‰∫í‰øÆÊîπ„ÄÇ alter table test.dim_micro_area_gsm alter column cell_id set data type numeric(15,0); ÁªôË°®Â¢ûÂä†Â≠óÊÆµ alter table test.DIM_DETAIL_SVCTYPE add column if_app numeric(10,0); Âà†Èô§Ë°®Â≠óÊÆµalter table test.DIM_DETAIL_SVCTYPE drop column if_app; Êï∞ÊçÆÂ∫ìË°®‰πãÈó¥ÂØºÊï∞ÊçÆCONNECT TO VERTICA dbname USER dbadmin PASSWORD 'dbname' ON '192.168.1.1',5433; export TO VERTICA dbname.test.FCT_TNES_GN_NET_M FROM test.FCT_TNES_GN_NET_M; ‰øÆÊîπÊôÆÈÄöË°®‰∏∫ÂàÜÂå∫Ë°®alter table test.fct_fournet_wlanap_equp_ana_d partition by day_id; ‰øÆÊîπË°®Âêçalter table test.fct_fournet_wlanap_equp_ana_d_x rename to fct_fournet_wlanap_equp_ana_d; ‰øÆÊîπË°®ÊâÄÂ±ûÁöÑÁî®Êà∑alter table test.fct_fournet_wlanap_equp_ana_d owner to dev_test Êü•ËØ¢Ë°®tables projectionsprojections # Êü•ËØ¢Ë°®ÂØπÂ∫îÁöÑprojection SELECT owner_name, anchor_table_name, projection_name FROM projections WHERE projection_basename = 'DIM_CFG_LEVEL'; Êü•ËØ¢Âàócolumns Êü•ËØ¢Ê≥®Èáäcomments # Êü•ËØ¢Ë°®ÁöÑÂàóÂØπÂ∫îÁöÑÊ≥®Èáä SELECT t3.anchor_table_name AS Table_name, SUBSTR (t1.object_name, INSTR (t1.object_name, '.', 1) + 1) AS Column_name, t1.comment AS comment FROM comments t1, projections t3 WHERE SUBSTR (t1.object_name, 1, INSTR (t1.object_name, '.', 1) - 1) = t3.projection_name AND t1.object_type = 'COLUMN' ORDER BY t3.anchor_table_name; ÂÖ∂‰ªñÊìç‰ΩúÂõõËàç‰∫îÂÖ•„ÄÅÂπ∂‰∏î‰øùÁïô‰∏§‰ΩçÂ∞èÊï∞SELECT TRIM (TO_CHAR (ROUND (3.456, 2.0), '999999999999999999.00')), TRIM (TO_CHAR (ROUND (3, 2.0), '999999999999999999.00')), TRIM (TO_CHAR (ROUND (3.00, 2.0), '999999999999999999.00')), TRIM (TO_CHAR (ROUND (323542.101, 2.0), '999999999999999999.00')), TRIM (TO_CHAR (ROUND (3.1067, 2.0), '999999999999999999.00')) ‰∫ßÁîüÈöèÊú∫Êï∞ RANDOM() SELECT RANDOM(); RANDOMINT RANDOMINT ( N )","categories":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/categories/Vertica/"}],"tags":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/tags/Vertica/"}]},{"title":"Vertica ÁÆÄ‰ªã","slug":"vertica-01","date":"2019-03-14T02:51:39.000Z","updated":"2024-07-01T12:30:37.380Z","comments":true,"path":"2019/03/14/vertica-01/","link":"","permalink":"http://iogogogo.github.io/2019/03/14/vertica-01/","excerpt":"","text":"VerticaÊòØ‰∏ÄÊ¨æÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑMPP Ôºàmassively parallel processingÔºâÊû∂ÊûÑÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂÆÉÂèØ‰ª•ÊîØÊåÅÂ≠òÊîæÂ§öËá≥PBÔºàPetabyteÔºâÁ∫ßÂà´ÁöÑÁªìÊûÑÂåñÊï∞ÊçÆ„ÄÇVerticaÊòØÁî±ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂ§ßÂ∏àMichael Stonebraker(2014 Âπ¥ÂõæÁÅµÂ•ñËé∑ÂæóËÄÖ)ÊâÄÂàõÂª∫Ôºå‰∫é2011Âπ¥Ë¢´ÊÉ†ÊôÆÊî∂Ë¥≠Âπ∂Êàê‰∏∫ÂÖ∂Ê†∏ÂøÉÂ§ßÊï∞ÊçÆÂπ≥Âè∞ËΩØ‰ª∂„ÄÇ ÁÆÄ‰ªãVerticaÊòØ‰∏ÄÊ¨æÂü∫‰∫éÂàóÂ≠òÂÇ®ÁöÑMPPÔºàmassively parallel processingÔºâÊû∂ÊûÑÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ ÂÆÉÂèØ‰ª•ÊîØÊåÅÂ≠òÊîæÂ§öËá≥PBÔºàPetabyteÔºâÁ∫ßÂà´ÁöÑÁªìÊûÑÂåñÊï∞ÊçÆ„ÄÇVerticaÊòØÁî±ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂ§ßÂ∏àMichael Stonebraker(2014 Âπ¥ÂõæÁÅµÂ•ñËé∑ÂæóËÄÖ)ÊâÄÂàõÂª∫Ôºå‰∫é2011Âπ¥Ë¢´ÊÉ†ÊôÆÊî∂Ë¥≠Âπ∂Êàê‰∏∫ÂÖ∂Ê†∏ÂøÉÂ§ßÊï∞ÊçÆÂπ≥Âè∞ËΩØ‰ª∂„ÄÇ Vertica ÈááÁî®Êó†ÂÖ±‰∫´ÁöÑMPP Êû∂ÊûÑÔºåÂü∫‰∫éÂ∑•‰∏öÊ†áÂáÜÁöÑx86 ÊúçÂä°Âô®ÔºåÊã•ÊúâÈ´òÂèØÊâ©Â±ïÊÄß„ÄÇVertica ÈõÜÁæ§‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπ100%ÂØπÁ≠âÔºåÈõÜÁæ§‰∏≠Ê≤°Êúâ‰∏ªËäÇÁÇπÊàñÂÖ∂‰ªñÂÖ±‰∫´ËµÑÊ∫ê„ÄÇÈÄöËøáÂ¢ûÂä†ËäÇÁÇπÔºåÂ∞±ÂèØ‰ª•Á∫øÊÄßÂú∞Êâ©Â±ïÈõÜÁæ§ÁöÑËÆ°ÁÆóËÉΩÂäõÂíåÊï∞ÊçÆÂ§ÑÁêÜÂÆπÈáè„ÄÇ Vertica ÊòØÁúüÊ≠£ÁöÑÁ∫ØÂàóÂºèÊï∞ÊçÆÂ∫ìÔºå‰ºòÂåñÂô®ÂíåÊâßË°åÂºïÊìéÂèØ‰ª•ÂøΩÁï•Ë°®‰∏≠‰∏éÊü•ËØ¢Êó†ÂÖ≥ÁöÑÂàó„ÄÇVertica ‰∏ç‰ªÖ‰ªÖÊåâÂàóÂºèÂ≠òÂÇ®Êï∞ÊçÆÔºåËøò‰∏ªÂä®Âú∞Ê†πÊçÆÂàóÊï∞ÊçÆÁöÑÁâπÁÇπÂíåÊü•ËØ¢ÁöÑË¶ÅÊ±ÇÈÄâÁî®ÊúÄ‰Ω≥ÁöÑÁÆóÊ≥ïÂØπÊï∞ÊçÆËøõË°åÊéíÂ∫èÂíåÁºñÁ†ÅÂéãÁº©ÔºåËøôÂ∞±ÊûÅÂ§ßÂú∞Èôç‰ΩéÁ£ÅÁõòI/O Ê∂àËÄó„ÄÇÂêåÊó∂ÔºåVertica ÁöÑÊâßË°åÂºïÊìéÂíå‰ºòÂåñÂô®‰πüÊòØÂü∫‰∫éÂàóÂºèÊï∞ÊçÆÂ∫ìËÆæËÆ°ÁöÑÔºåÁºñÁ†ÅÂéãÁº©ËøáÁöÑÂàóÊï∞ÊçÆÂú®Vertica ÁöÑÊâßË°åÂºïÊìé‰∏≠ËøõË°åËøáÊª§„ÄÅÂÖ≥ËÅî„ÄÅÂàÜÁªÑÁ≠âÊìç‰ΩúÊó∂‰∏çÈúÄË¶ÅËß£ÂèçÁºñÁ†ÅÔºå‰ªéËÄåÂ§ßÂ§ßÈôç‰Ωé‰∫ÜCPU ÂíåÂÜÖÂ≠òÊ∂àËÄó„ÄÇ Vertica ÂÖÖÂàÜÂà©Áî®ÂàóÂºèÂ≠òÂÇ®ÁöÑ‰ºòÁÇπÔºåÂú®‰øùÊåÅÂØπÂâçÁ´ØÂ∫îÁî®ÈÄèÊòéÁöÑÂâçÊèê‰∏ãÔºåÊääÊï∞ÊçÆÂú®ÈõÜÁæ§‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπËøõË°åÂùáÂåÄÂàÜÂ∏ÉÁöÑÂêåÊó∂ÔºåËøòÂú®Â§ö‰∏™ËäÇÁÇπ‰∏äÂØπÂêå‰∏Ä‰ªΩÊï∞ÊçÆÁª¥Êä§‰∫ÜÂ§ö‰∏™Êã∑Ë¥ùÔºåÁ°Æ‰øù‰ªªÊÑè‰∏Ä‰∏™Êâ©Âá†‰∏™ËäÇÁÇπÂá∫Áé∞ÊïÖÈöúÊàñËøõÂÖ•Áª¥‰øÆÁä∂ÊÄÅÈÉΩ‰∏ç‰ºöÂΩ±ÂìçÈõÜÁæ§ÁöÑÂÅ•Â∫∑Áä∂ÊÄÅ„ÄÇËøô‰ΩøÂæóVertica Êã•ÊúâÁ±ª‰ººÁ£ÅÁõòRAID ‰∏ÄÊ†∑È´òÂèØÈù†ÊÄß„ÄÇ Êó†ÂÖ±‰∫´ÁöÑMPP Êû∂ÊûÑÂíåÁúüÊ≠£ÁöÑÂàóÂºèÊï∞ÊçÆÂ∫ìÁâπÊÄßÔºå‰ΩøVertica Êã•ÊúâÈ´òÊÄßËÉΩ„ÄÅÈ´òÊâ©Â±ïÊÄß„ÄÅÈ´òÂéãÁº©Áéá„ÄÅÈ´òÂÅ•Â£ÆÊÄßÁöÑÁâπÁÇπ„ÄÇ‰∏é‰º†ÁªüÁöÑËß£ÂÜ≥ÊñπÊ°àÁõ∏ÊØîÔºåVertica ÂèØ‰ª•‰ª•30%ÁöÑÊàêÊú¨ÔºåÂÆûÁé∞50 ÂÄç-1000 ÂÄçÁöÑÊÄßËÉΩÊèêÈ´ò„ÄÇ ËΩØ‰ª∂‰ºòÂäø‰Ωú‰∏∫ÂÖ®Êñ∞Êû∂ÊûÑÁöÑÂÆûÊó∂ÂàÜÊûêÂπ≥Âè∞ÔºåVertica ÊúâÂæàÂ§öÁöÑÂàõÊñ∞ÔºåÁâπÁÇπÂåÖÊã¨Ôºö ÂàóÂºèÂ≠òÂÇ®ÂíåËÆ°ÁÆó ÈÄöËøáÂàóÂºèËÆ°ÁÆóÂíåÂº∫Â§ßÁöÑ‰∏ªÂä®Êï∞ÊçÆÂéãÁº©ÔºåÂ§ßÂπÖÈôç‰ΩéÊàêÊú¨È´òÊòÇÁöÑÁ£ÅÁõò I/OÔºà‰∏ªË¶ÅÊòØ‰º†ÁªüÁöÑ‰ª•Ë°å‰∏∫Â≠òÂÇ®Âçï‰ΩçÁöÑSQL Êï∞ÊçÆÂ∫ì‰ΩøÁî®ÔºâÔºåÊâßË°åÊü•ËØ¢ÁöÑÈÄüÂ∫¶ÂèØÊèêÂçá 50 Âà∞ 1000ÂÄçÔºåÂ≠òÂÇ®ÊàêÊú¨ÊúÄÈ´òÂâäÂáè 90%„ÄÇ ‚ÄúÊ®™ÂêëÊâ©Â±ïÂºè‚ÄùÂ§ßËßÑÊ®°Âπ∂Ë°åÂ§ÑÁêÜ (MPP) Âü∫‰∫éÊó†ÂÖ±‰∫´ÁöÑMPP Êû∂ÊûÑÔºåÊîØÊåÅÂú®Á∫øÊ∑ªÂä†Êï∞Èáè‰∏çÈôêÁöÑX86 Â∑•‰∏öÊ†áÂáÜÊúçÂä°Âô®ÔºåÂèØÊ†πÊçÆÈúÄÊ±Ç‰ªªÊÑèÊâ©Â±ïËß£ÂÜ≥ÊñπÊ°à„ÄÇ ÂÆûÊó∂ÂàÜÊûê ÈÄöËøáÂÜÖÂ≠ò‰∏éÁ£ÅÁõòÊ∑∑ÂêàÂ≠òÂÇ®Êû∂ÊûÑÔºå‰ª•ÂèäÂéüÁîüÊîØÊåÅkafka Ê∂àÊÅØÁ≥ªÁªüÁöÑËøûÊé•ÔºåÊîØÊåÅÊï∞ÊçÆÂÆûÊó∂Ë£ÖËΩΩÂíåÁßíÁ∫ßÂàÜÊûê„ÄÇ Êï∞ÊçÆÂ∫ìÂÜÖÈÉ®ÂàÜÊûêÂ∫ì ÂºÄÁÆ±Âç≥Áî®ÁöÑÊï∞ÊçÆÂ∫ìÂÜÖÊó∂Â∫èÊèíÂÄºÂíåÂÖ≥ËÅî„ÄÅ‰∫ã‰ª∂Á™óÂè£Âíå‰ºöËØùÂ§ÑÁêÜ„ÄÅÊ®°ÂºèÂåπÈÖç„ÄÅÁ©∫Èó¥Âú∞ÁêÜÂàÜÊûê„ÄÅÊñáÊú¨ÊÉÖÊÑüÂàÜÊûêÁ≠âÈ´òÁ∫ßÂàÜÊûêÔºå‰ª•ÂèäÂπø‰πâÁ∫øÊÄßÂõûÂΩí„ÄÅÈÄªËæëÂõûÂΩí„ÄÅK-MeansËÅöÁ±ª„ÄÅÊú¥Á¥†Ë¥ùÂè∂ÊñØÂàÜÁ±ªÁ≠âÂ∏∏Áî®Êú∫Âô®Â≠¶‰π†ÂíåÈ¢ÑÊµãÂàÜÊûêÂäüËÉΩ„ÄÇÊÇ®‰πüÂèØ‰ª•Ëé∑ÂèñÂºÄÊ∫êÂàÜÊûêÂ∫ìÔºåÂåÖÊã¨Ê∫êËá™ CRANÔºàÁªºÂêà R Â≠òÊ°£ÁΩëÁªúÔºâÁöÑ‰ºóÂ§öÂàÜÊûêÂäüËÉΩÂåÖ„ÄÇ ÂÆåÊï¥ÁöÑÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂíåSQL Ê†áÂáÜÊîØÊåÅ Vertica ÊîØÊåÅÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∫ãÂä°Â§ÑÁêÜÂíåACID ËßÑËåÉÔºåÊîØÊåÅSQL-92/SQL-99/SQL-2003 Ê†áÂáÜÔºåÊèê‰æõODBC„ÄÅJDBC„ÄÅADO.NET Êé•Âè£ËßÑËåÉÈ©±Âä®ÔºåÂÆåÂÖ®ÂÖºÂÆπ‰º†ÁªüÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑÂºÄÂèë„ÄÅ‰ΩøÁî®ÂíåÁÆ°ÁêÜ‰π†ÊÉØÔºåÂèØ‰ª•ËΩªÊùæ‰∏éÁé∞ÊúâÁöÑETL ÂíåÊä•Ë°®Â∑•ÂÖ∑ÈõÜÊàêÔºå‰øùÊä§ÂÆ¢Êà∑Â∑≤ÊúâÁöÑÊäïËµÑ„ÄÇ ÂèØÊâ©Â±ïÁöÑÊï∞ÊçÆÂ∫ìÂÜÖÈÉ®ÂàÜÊûêÊ°ÜÊû∂ ÈááÁî®Èù¢ÂêëÁî®Êà∑ÂÆö‰πâÁöÑËøáÁ®ãÂºèÂàÜÊûêÁöÑÂº∫Â§ßÂºÄÂèëÊ°ÜÊû∂ÔºåÂÆûÁé∞‰∫ÜÂØπ‰∫éÊï∞ÊçÆÂ∫ìÂÜÖÈÉ®Â§ÑÁêÜÁöÑÂºÄÊîæÂºèËÆøÈóÆ„ÄÇÈô§‰∫Ü‰ΩøÁî®ÂÜÖÁΩÆÁöÑ SQL ÂàÜÊûêÂíåËÅöÂêàÂáΩÊï∞Â§ñÔºåËøòÂèØÂÄüÂä© C++/Java/RËØ≠Ë®ÄËΩØ‰ª∂ÂºÄÂèë‰∫∫ÂëòÂ•ó‰ª∂ (SDK) ÂÆö‰πâËá™Â∑±ÁöÑÂÆöÂà∂ÂáΩÊï∞„ÄÇSDK ÂäüËÉΩÂèØ‰øùËØÅÊ≤ôÁõíÂÆâÂÖ®ÔºåÂπ∂‰ΩøÂáΩÊï∞ËÉΩÂ§üÂπ∂Ë°åËøêË°å‰ª•Âä†Âø´ËøêË°åÈÄüÂ∫¶„ÄÇ ÂéüÁîüÊîØÊåÅHadoop Vertica ÂèØ‰ª•‰Ωú‰∏∫SQL ÂàÜÊûêÂºïÊìéÁõ¥Êé•ÈÉ®ÁΩ≤Âà∞Hadoop ÈõÜÁæ§‰∏≠ÔºåÁõ¥Êé•Â≠òÂèñHDFS‰∏äÁöÑÊï∞ÊçÆÔºõ‰πüÂèØ‰ª•ÈÄöËøáÊ†áÂáÜSQL Áõ¥Êé•ËÆøÈóÆHive Á≠âÁÆ°ÁêÜÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏éVertica ÁÆ°ÁêÜÁöÑÊï∞ÊçÆËøõË°åÂÖ≥ËÅîÂàÜÊûêÔºõÂè¶Â§ñVertica ËøòÊèê‰æõÂ∫îÁî®ÁºñÁ®ãÊé•Âè£ (API)ÊîØÊåÅ‰∏éMapReduce„ÄÅPig Á≠âÊ°ÜÊû∂ÊûÑÂª∫ÁªìÊûÑÂåñ„ÄÅÂçäÁªìÊûÑÂåñÂíåÈùûÁªìÊûÑÂåñÊ∑±Â∫¶ËûçÂêàÁöÑÂ§ßÊï∞ÊçÆÂàÜÊûêÂ∫îÁî®„ÄÇ Ëá™Âä®ÂÆûÁé∞È´òÂèØÁî®ÊÄß ‰∏çÈó¥Êñ≠ËøêË°åÔºåÂπ∂ÂÖ∑ÊúâÊï∞ÊçÆÂ§çÂà∂„ÄÅÊïÖÈöúËΩ¨ÁßªÂíåÊÅ¢Â§çÂäüËÉΩÔºõVertica ËøõË°å‰∫ÜÊÄßËÉΩ‰ºòÂåñÔºåÂπ∂‰∏îÂØπ‰∏öÂä°ÂíåËøêËê•Âõ¢ÈòüÂÆåÂÖ®ÈÄèÊòé„ÄÇ Ëá™Âä®‰ºòÂåñÂíåÊÄßËÉΩÁÆ°ÁêÜ ÈÄöËøáÂº∫Â§ßÁöÑ API ÈõÜÂêàÊù•ÁõëÊéßÁ≥ªÁªüÁöÑËµÑÊ∫ê„ÄÅÂêéÂè∞ËøõÁ®ã„ÄÅÂ∑•‰ΩúË¥üËΩΩÂèäÊÄßËÉΩÔºåÈÄöËøáÂ∑•‰ΩúË¥üËΩΩÂàÜÊûêÂíåÊï∞ÊçÆÂ∫ìËÆæËÆ°Âô®Ëá™Âä®‰ºòÂåñÊï∞ÊçÆÂ∫ìÔºåÁÆÄÂåñÁ≥ªÁªüÁÆ°ÁêÜ„ÄÇ ‰ª•‰∏äÊëòËá™ÁôæÂ∫¶ÁôæÁßë„ÄÇ","categories":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/categories/Vertica/"}],"tags":[{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/tags/Vertica/"}]},{"title":"Mac ‰øÆÊîπMySQLÁºñÁ†ÅÈõÜ","slug":"mac-change-character-set","date":"2019-03-09T14:05:06.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2019/03/09/mac-change-character-set/","link":"","permalink":"http://iogogogo.github.io/2019/03/09/mac-change-character-set/","excerpt":"","text":"Ââç‰∏§Â§©Âõ†‰∏∫CiscoÁöÑVPNÂùè‰∫ÜÔºå‰∏ÄÁõ¥Áî®‰∏ç‰∫ÜÔºåÊâÄ‰ª•ÈáçÊñ∞ËøòÂéü‰∫ÜMacÔºåÈáçÊñ∞ÂÆâË£Ö‰∫ÜÊâÄÊúâÁöÑËΩØ‰ª∂ÔºåÂÖ∂‰∏≠Â∞±ÊúâMySQL-5.7.25„ÄÇ‰πãÂâçÂÆâË£Ö‰ª•Âêé‰πüÊòØÁ¨¨‰∏ÄÊó∂Èó¥ËÆæÁΩÆ‰∫ÜMySQLÁöÑÁºñÁ†Å‰∏∫utf8ÔºåËøôÊ¨°Êñ∞ÂÆâË£Ö‰πüÂÜçÊ¨°ËÆ∞ÂΩï‰∏Ä‰∏ã‰øÆÊîπÊ≠•È™§ Êü•ÁúãMac ÂÆâË£ÖMySQL‰ª•ÂêéÁöÑÈªòËÆ§ÁºñÁ†ÅSHOW VARIABLES LIKE 'character_set_%'; # ÁªìÊûú character_set_client utf8mb4 character_set_connection utf8mb4 character_set_database latin1 ## ËøôÈáåÊòØÈªòËÆ§ÁºñÁ†Å character_set_filesystem binary character_set_results utf8mb4 character_set_server latin1 ## ËøôÈáåÊòØÈªòËÆ§ÁºñÁ†Å character_set_system utf8 character_sets_dir /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/ Êñ∞Âª∫my.cnfÊñá‰ª∂[client] default-character-set=utf8 [mysqld] collation-server = utf8_unicode_ci init-connect='SET NAMES utf8' character-set-server = utf8 [mysql] default-character-set=utf8 ÁßªÂä®Âà∞ /etc ÁõÆÂΩïÁßªÂä®my.cnfÊñá‰ª∂Âà∞/etcÁõÆÂΩïÔºåÈúÄË¶ÅrootÊùÉÈôê sudo mv my.cnf /etc/ ÈáçÂêØMySQLÔºåÂÜçÊ¨°Êü•ÁúãÁºñÁ†ÅSHOW VARIABLES LIKE 'character_set_%'; # ÁªìÊûú character_set_client utf8mb4 character_set_connection utf8mb4 character_set_database utf8 ## ËøôÈáåÊòØ‰øÆÊîπ‰ª•ÂêéÁöÑ character_set_filesystem binary character_set_results utf8mb4 character_set_server utf8 ## ËøôÈáåÊòØ‰øÆÊîπ‰ª•ÂêéÁöÑ character_set_system utf8 character_sets_dir /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/","categories":[{"name":"MacBook","slug":"MacBook","permalink":"http://iogogogo.github.io/categories/MacBook/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"http://iogogogo.github.io/tags/Mac/"}]},{"title":"Elasticsearch Âø´ÈÄü‰∏äÊâã","slug":"elasticsearch-rest-api","date":"2019-03-09T05:29:36.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2019/03/09/elasticsearch-rest-api/","link":"","permalink":"http://iogogogo.github.io/2019/03/09/elasticsearch-rest-api/","excerpt":"","text":"Elasticsearch Âø´ÈÄü‰∏äÊâã Ê≥®ÔºöÊú¨ÊñáÊ°£‰∏≠Èô§Êó†ÁâπÂà´ËØ¥ÊòéÔºåËØ∑Ê±ÇÊñπÂºèÂùá‰∏∫GET„ÄÇÊâÄÊúâÁöÑËØ∑Ê±ÇÂùáÂú®Sense‰∏≠ÊµãËØïÈÄöËøá ÈÅµÂæ™ÁöÑÊ†ºÂºè‰∏∫ curl -X&lt;REST Verb&gt; &lt;Node&gt;:&lt;Port&gt;/&lt;Index&gt;/&lt;Type&gt;/&lt;ID&gt; ÈõÜÁæ§ÂÅ•Â∫∑Êü•Áúã http://127.0.0.1:9200/_cat/health?v epoch timestamp cluster status node.total node.data shards pri relo init unassign pending_tasks 1441940569 11:02:49 elasticsearch yellow 1 1 7 7 0 0 7 0 http://127.0.0.1:9200/_cat/nodes?v host ip heap.percent ram.percent load node.role master name acer 169.254.9.202 32 52 d * Mys-Tech ÂàóÂá∫ÊâÄÊúâÁöÑindices http://127.0.0.1:9200/_cat/indices?v health status index pri rep docs.count docs.deleted store.size pri.store.size yellow open .marvel-2015.09.11 1 1 3233 0 10.5mb 10.5mb yellow open .marvel-2015.09.10 1 1 1996 0 3.9mb 3.9mb yellow open news 5 1 3455 0 17.8mb 17.8mb ÂàõÂª∫Á¥¢Âºï‰ΩøÁî®PUTËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™countriesÁöÑÁ¥¢Âºï curl -XPUT http://127.0.0.1:9200/countries?pretty ËæìÂá∫: { &quot;acknowledged&quot;: true } Êü•ÁúãÁ¥¢ÂºïÂàóË°® curl -XGET http://127.0.0.1:9200/_cat/indices?v ËæìÂá∫: health status index pri rep docs.count docs.deleted store.size pri.store.size yellow open countries 5 1 0 0 575b 575b yellow open .marvel-2015.09.11 1 1 3436 0 11.4mb 11.4mb yellow open .marvel-2015.09.10 1 1 1996 0 3.9mb 3.9mb yellow open news 5 1 3455 0 17.8mb 17.8mb Á¥¢ÂºïÊñáÊ°£ ‰ΩøÁî®Ëá™ÂÆö‰πâidÁ¥¢ÂºïÊñáÊ°£ ‰ΩøÁî®PUTËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Á¥¢Âºï‰∏∫countriesÁ±ªÂûã‰∏∫countryÁöÑÊñáÊ°£„ÄÇÂÖ∂ÊñáÊ°£ÁºñÂè∑‰∏∫1ÔºåÊñáÊ°£ÂÜÖÂÆπÂåÖÂê´nameÂíåcapital curl -XPUT http://127.0.0.1:9200/countries/country/1?pretty -d &#39; { &quot;name&quot;: &quot;‰∏≠ÂõΩ&quot;, &quot;capital&quot;: &quot;Âåó‰∫¨&quot; }&#39; ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 1, &quot;created&quot;: true } ‰ΩøÁî®Á≥ªÁªüÂàÜÈÖçÁöÑidÁ¥¢ÂºïÊñáÊ°£ curl -XPOST http://127.0.0.1:9200/countries/country?pretty -d &#39; { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; }&#39; Ê≥®ÊÑèÔºö‰ΩøÁî®Á≥ªÁªüÂàÜÈÖçÁöÑidÊó∂‰ΩøÁî®POSTÊñπÂºèÊèê‰∫§ÊñáÊ°£Ôºå‰∏îÂú®Á¥¢Âºï\\Á±ªÂûãurlÊ†ºÂºè‰∏≠‰∏çÂÜçÊúâid ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;AU-6awteDgxJZYVN-E5I&quot;, &quot;_version&quot;: 1, &quot;created&quot;: true } Êü•ËØ¢ÊñáÊ°£‰ΩøÁî®Ëá™ÂÆö‰πâidÊü•ËØ¢ÊñáÊ°£ curl -XGET http://127.0.0.1:9200/countries/country/1?pretty ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 1, &quot;found&quot;: true, &quot;_source&quot;: { &quot;name&quot;: &quot;‰∏≠ÂõΩ&quot;, &quot;capital&quot;: &quot;Âåó‰∫¨&quot; } } ‰ΩøÁî®Á≥ªÁªüÂàÜÈÖçÁöÑidÊü•ËØ¢ GET http://127.0.0.1:9200/countries/country/AU-6awteDgxJZYVN-E5I?pretty ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;AU-6awteDgxJZYVN-E5I&quot;, &quot;_version&quot;: 1, &quot;found&quot;: true, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } } Êü•ÁúãÁ¥¢Âºï‰ø°ÊÅØGET http://127.0.0.1:9200/countries/ ËæìÂá∫: { &quot;countries&quot;: { &quot;aliases&quot;: {}, &quot;mappings&quot;: { &quot;country&quot;: { &quot;properties&quot;: { &quot;capital&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;name&quot;: { &quot;type&quot;: &quot;string&quot; } } } }, &quot;settings&quot;: { &quot;index&quot;: { &quot;creation_date&quot;: &quot;1441941497754&quot;, &quot;uuid&quot;: &quot;UaoQ_WCATaiy5w736cjw2A&quot;, &quot;number_of_replicas&quot;: &quot;1&quot;, &quot;number_of_shards&quot;: &quot;5&quot;, &quot;version&quot;: { &quot;created&quot;: &quot;1070199&quot; } } }, &quot;warmers&quot;: {} } } Âà†Èô§Á¥¢ÂºïÂà†Èô§myindexÁ¥¢Âºï DELETE http://127.0.0.1:9200/myindex/?pretty ËæìÂá∫: { &quot;acknowledged&quot;: true } Á¥¢ÂºïÊàñÊõøÊç¢‰∏Ä‰∏™ÊñáÊ°£Ê†πÊçÆÊñáÊ°£idÁ¥¢ÂºïÊàñÊõøÊç¢ÊñáÊ°£ÔºåËã•Â≠òÂú®Âàô‰øÆÊîπÊõøÊç¢ÔºåÂê¶ÂàôÁ¥¢ÂºïËØ•ÊñáÊ°£„ÄÇ ‰ΩøÁî®Â∑≤Â≠òÂú®ÁöÑid ‰øÆÊîπÊñáÊ°£id‰∏∫1ÁöÑÂõΩÂÆ∂‰ø°ÊÅØ„ÄÇ PUT &#39;http://127.0.0.1:9200/countries/country/1?pretty&#39; { &quot;name&quot;: &quot;Êó•Êú¨&quot;, &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } Êü•ËØ¢ÂÖ∂ÊòØÂê¶Â∑≤‰øÆÊîπ GET http://127.0.0.1:9200/countries/country/1?pretty ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 2, &quot;found&quot;: true, &quot;_source&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot;, &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } } ÂèØËßÅÂõΩÂÆ∂‰ø°ÊÅØÂ∑≤Áî±‰∏≠ÂõΩÂèò‰∏∫Êó•Êú¨ÔºåÂÖ∂È¶ñÈÉΩ‰ø°ÊÅØ‰πüÂèëÁîü‰∫ÜÂèòÂåñ ‰ΩøÁî®‰∏çÂ≠òÂú®ÁöÑidÂàôÊòØÁ¥¢ÂºïÊñáÊ°£ PUT http://127.0.0.1:9200/countries/country/2?pretty { &quot;name&quot;: &quot;Êæ≥Â§ßÂà©‰∫ö&quot;, &quot;capital&quot;: &quot;ÊÇâÂ∞º&quot; } ËæìÂá∫: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_version&quot;: 1, &quot;created&quot;: true } ‰øÆÊîπÊñáÊ°£ ÊåâdocÊñπÂºèÊõ¥Êñ∞ÊñáÊ°£ ‰ª•docÊñπÂºè‰øÆÊîπÊñáÊ°£id‰∏∫1ÁöÑÊñáÊ°£ POST http://127.0.0.1:9200/countries/country/1/_update?pretty { &quot;doc&quot;: { &quot;name&quot;: &quot;ÁæéÂõΩ&quot;,&quot;capital&quot;: &quot;ÂçéÁõõÈ°ø&quot;} } ÂÖ∂‰∏≠docÊòØÂõ∫ÂÆöÂÜôÊ≥ï,ÂÖ∂ÂÜÖÂÆπ‰∏∫Ë¶Å‰øÆÊîπÁöÑÊñáÊ°£ÂÜÖÂÆπ ÊåâscriptÊñπÂºèÊõ¥Êñ∞ÊñáÊ°£ ‰ª•scriptÊñπÂºè‰øÆÊîπÊñáÊ°£id‰∏∫1ÁöÑÊñáÊ°£ POST http://127.0.0.1:9200/countries/country/1/_update?pretty { &quot;script&quot;: &quot;ctx._source.name=\\&quot;Âä†ÊãøÂ§ß\\&quot;;ctx._source.capital=\\&quot;Ê∏•Â§™Âçé\\&quot;&quot; } Âà†Èô§ÊñáÊ°£ ÊåâÊñáÊ°£idÂà†Èô§ DELETE http://127.0.0.1:9200/countries/country/1?pretty ËæìÂá∫Ôºö { &quot;found&quot;: true, &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 6 } Ê†πÊçÆÊü•ËØ¢ÁªìÊûúÂà†Èô§ DELETE http://127.0.0.1:9200/countries/country/_query?pretty { &quot;query&quot;: { &quot;match&quot;: { &quot;name&quot;: &quot;ÁæéÂõΩ&quot; } } } ËæìÂá∫Ôºö { &quot;_indices&quot;: { &quot;countries&quot;: { &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 } } } } Êü•ËØ¢ÊòØÂê¶ËøòÊúâname‰∏∫ÁæéÂõΩÁöÑÊñáÊ°£ GET http://127.0.0.1:9200/countries/country/_query { &quot;query&quot;: { &quot;match_all&quot;: { &quot;name&quot;: &quot;ÁæéÂõΩ&quot; } } } ÊâπÈáèÂ§ÑÁêÜ_bulk api https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html ÈÅµÂæ™Ê†ºÂºè /_bulk, /{index}/_bulk, {index}/{type}/_bulk action_and_meta_data\\n optional_source\\n action_and_meta_data\\n optional_source\\n ÊîØÊåÅÁöÑactionÊúâindex, create, delete, update indexÂíåcreateÂú®‰∏ã‰∏ÄË°åË∑ü‰∏äË¶ÅÁ¥¢ÂºïÁöÑdocdeleteÂàô‰∏çÈúÄË¶ÅupdateÂú®‰∏ã‰∏ÄË°åË∑ü‰∏ädocÊàñscript ÊâπÈáèÁ¥¢ÂºïÊñáÊ°£ POST http://127.0.0.1:9200/countries/country/_bulk?pretty {&quot;index&quot;:{&quot;_id&quot;:&quot;1&quot;}} {&quot;name&quot;: &quot;‰∏≠ÂõΩ&quot;,&quot;capital&quot;: &quot;Âåó‰∫¨&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;2&quot;}} {&quot;name&quot;: &quot;ÁæéÂõΩ&quot;,&quot;capital&quot;: &quot;ÂçéÁõõÈ°ø&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;3&quot;}} {&quot;name&quot;: &quot;Êó•Êú¨&quot;,&quot;capital&quot;: &quot;‰∏ú‰∫¨&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;4&quot;}} {&quot;name&quot;: &quot;Êæ≥Â§ßÂà©‰∫ö&quot;,&quot;capital&quot;: &quot;ÊÇâÂ∞º&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;5&quot;}} {&quot;name&quot;: &quot;Âç∞Â∫¶&quot;,&quot;capital&quot;: &quot;Êñ∞Âæ∑Èáå&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;6&quot;}} {&quot;name&quot;: &quot;Èü©ÂõΩ&quot;,&quot;capital&quot;: &quot;È¶ñÂ∞î&quot;} ‰ª•‰∏äËØ∑Ê±ÇÂ∞Ü‰ºöÊâπÈáèÁ¥¢Âºï6‰∏™ÊñáÊ°£„ÄÇ ËæìÂá∫Ôºö { &quot;took&quot;: 4, &quot;errors&quot;: false, &quot;items&quot;: [ { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_version&quot;: 2, &quot;status&quot;: 200 } }, { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;4&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;5&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;6&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } } ] } ÊâπÈáèÊâßË°åÔºåÂê´index„ÄÅcreate„ÄÅdelete„ÄÅupdate POST http://127.0.0.1:9200/countries/country/_bulk?pretty {&quot;index&quot;:{&quot;_id&quot;:&quot;7&quot;}} {&quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;,&quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot;} {&quot;create&quot;:{&quot;_id&quot;:&quot;8&quot;}} {&quot;name&quot;: &quot;Âæ∑ÂõΩ&quot;,&quot;capital&quot;: &quot;ÊüèÊûó&quot;} {&quot;update&quot;:{&quot;_id&quot;:&quot;1&quot;}} {&quot;doc&quot;: {&quot;name&quot;: &quot;Ê≥ïÂõΩ&quot;,&quot;capital&quot;: &quot;Â∑¥Èªé&quot; }} {&quot;update&quot;:{&quot;_id&quot;:&quot;3&quot;}} {&quot;script&quot;: &quot;ctx._source.name = \\&quot;Ê≥ïÂõΩ\\&quot;;ctx._source.capital = \\&quot;Â∑¥Èªé\\&quot;&quot;} {&quot;delete&quot;:{&quot;_id&quot;:&quot;2&quot;}} ËæìÂá∫Ôºö { &quot;took&quot;: 40, &quot;errors&quot;: false, &quot;items&quot;: [ { &quot;index&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;7&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;create&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;8&quot;, &quot;_version&quot;: 1, &quot;status&quot;: 201 } }, { &quot;update&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 2, &quot;status&quot;: 200 } }, { &quot;update&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_version&quot;: 2, &quot;status&quot;: 200 } }, { &quot;delete&quot;: { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_version&quot;: 3, &quot;status&quot;: 200, &quot;found&quot;: true } } ] } ÂØºÂÖ•Êï∞ÊçÆ countries.json {&quot;index&quot;:{&quot;_id&quot;:&quot;1&quot;}} {&quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;,&quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;2&quot;}} {&quot;name&quot;: &quot;Èü©ÂõΩ&quot;,&quot;capital&quot;: &quot;È¶ñÂ∞î&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;3&quot;}} {&quot;name&quot;: &quot;ÊúùÈ≤ú&quot;,&quot;capital&quot;: &quot;Âπ≥Â£§&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;4&quot;}} {&quot;name&quot;: &quot;Êó•Êú¨&quot;,&quot;capital&quot;: &quot;‰∏ú‰∫¨&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;5&quot;}} {&quot;name&quot;: &quot;È©¨Êù•Ë•ø‰∫ö&quot;,&quot;capital&quot;: &quot;ÂêâÈöÜÂù°&quot;} ‰ΩøÁî®curlÁöÑ--data-binaryÂèÇÊï∞ÂØºÂÖ•Êï∞ÊçÆ curl XPOST http://127.0.0.1:9200/countries/country/_bulk?pretty --data-binary @countries.json ÊàñËÄÖ‰ΩøÁî®postmanÂØºÂÖ• http://127.0.0.1:9200/countries/country/_bulk?pretty {&quot;index&quot;:{&quot;_id&quot;:&quot;1&quot;}} {&quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;,&quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;2&quot;}} {&quot;name&quot;: &quot;Èü©ÂõΩ&quot;,&quot;capital&quot;: &quot;È¶ñÂ∞î&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;3&quot;}} {&quot;name&quot;: &quot;ÊúùÈ≤ú&quot;,&quot;capital&quot;: &quot;Âπ≥Â£§&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;4&quot;}} {&quot;name&quot;: &quot;Êó•Êú¨&quot;,&quot;capital&quot;: &quot;‰∏ú‰∫¨&quot;} {&quot;index&quot;:{&quot;_id&quot;:&quot;5&quot;}} {&quot;name&quot;: &quot;È©¨Êù•Ë•ø‰∫ö&quot;,&quot;capital&quot;: &quot;ÂêâÈöÜÂù°&quot;} search api GETÊñπÂºèÊêúÁ¥¢(queryString) GET http://127.0.0.1:9200/countries/_search?q=*&amp;pretty Ê≥®:q=*Â∞ÜÂåπÈÖçÁ¥¢Âºï‰∏≠ÁöÑÊâÄÊúâÊñáÊ°£ ËæìÂá∫: { &quot;took&quot;: 1, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 10, &quot;max_score&quot;: 1, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;4&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot;, &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;_query&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;query&quot;: { &quot;match_all&quot;: { &quot;name&quot;: &quot;ÁæéÂõΩ&quot; } } } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;5&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Âç∞Â∫¶&quot;, &quot;capital&quot;: &quot;Êñ∞Âæ∑Èáå&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;6&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;, &quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;7&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;, &quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;AU-6awteDgxJZYVN-E5I&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;8&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Âæ∑ÂõΩ&quot;, &quot;capital&quot;: &quot;ÊüèÊûó&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;ÊúùÈ≤ú&quot;, &quot;capital&quot;: &quot;Âπ≥Â£§&quot; } } ] } } POSTÊñπÂºèÊêúÁ¥¢(Âê´ËØ∑Ê±Ç‰Ωìquery) POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} } } ËæìÂá∫: { &quot;took&quot;: 1, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 10, &quot;max_score&quot;: 1, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;4&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot;, &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;_query&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;query&quot;: { &quot;match_all&quot;: { &quot;name&quot;: &quot;ÁæéÂõΩ&quot; } } } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;5&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Âç∞Â∫¶&quot;, &quot;capital&quot;: &quot;Êñ∞Âæ∑Èáå&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;6&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;, &quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;7&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êñ∞Âä†Âù°&quot;, &quot;capital&quot;: &quot;Ê∏•Â§™Âçé&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;AU-6awteDgxJZYVN-E5I&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot;, &quot;capital&quot;: &quot;È¶ñÂ∞î&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;8&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Âæ∑ÂõΩ&quot;, &quot;capital&quot;: &quot;ÊüèÊûó&quot; } }, { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;ÊúùÈ≤ú&quot;, &quot;capital&quot;: &quot;Âπ≥Â£§&quot; } } ] } } ÈôêÂÆöËøîÂõûÊù°ÁõÆ POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} }, &quot;size&quot;: 1 } sizeÊéßÂà∂ËøîÂõûÊù°ÁõÆÔºåÈªòËÆ§‰∏∫10 ËæìÂá∫: { &quot;took&quot;: 1, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 10, &quot;max_score&quot;: 1, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;countries&quot;, &quot;_type&quot;: &quot;country&quot;, &quot;_id&quot;: &quot;4&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot;, &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } } ] } } ÂàÜÈ°µ(form,size) POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} }, &quot;from&quot;: 2, &quot;size&quot;: 2 } ‰ΩøÁî®fromÂíåsizeÊù•ÁøªÈ°µ„ÄÇÂÖ∂‰∏≠formÈªòËÆ§‰∏∫0,sizeÈªòËÆ§‰∏∫10 ÊéíÂ∫è(sort) POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} }, &quot;sort&quot;: [ { &quot;name&quot;: { &quot;order&quot;: &quot;desc&quot; } } ] } ÂÖ∂‰∏≠name‰∏∫ÊéíÂ∫èÂ≠óÊÆµ ÈôêÂÆöËøîÂõûÂ≠óÊÆµPOST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} }, &quot;_source&quot;: [&quot;name&quot;] } ‰ΩøÁî®_sourceÊù•ÈôêÂÆöËøîÂõûÁöÑÂ≠óÊÆµ„ÄÇËøôÈáåÂè™ËøîÂõûname È´òÁ∫ßÊü•ËØ¢ match_phrase POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_phrase&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot; } } } must POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;bool&quot;: { &quot;must&quot;: [ {&quot;match&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot; }}, {&quot;match&quot;: { &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; }} ] } } } should POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;bool&quot;: { &quot;should&quot;: [ {&quot;match&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot; }}, {&quot;match&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot; }} ] } } } must_not POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;bool&quot;: { &quot;must_not&quot;: [ {&quot;match&quot;: { &quot;name&quot;: &quot;Êó•Êú¨&quot; }}, {&quot;match&quot;: { &quot;name&quot;: &quot;Èü©ÂõΩ&quot; }} ] } } } filter POST http://127.0.0.1:9200/countries/_search?pretty { &quot;query&quot;: { &quot;match_all&quot;: {} }, &quot;filter&quot;: { &quot;term&quot;: { &quot;capital&quot;: &quot;‰∏ú‰∫¨&quot; } } } ËÅöÂêà(aggs) POST http://127.0.0.1:9200/countries/_search?pretty { &quot;size&quot;: 0, &quot;aggs&quot;: { &quot;group_by_name&quot;: { &quot;terms&quot;: { &quot;field&quot;: &quot;name&quot; } } } } ÊåânameÁªüËÆ°ÂàÜÁªÑÊñáÊ°£Êï∞ ËæìÂá∫: { &quot;took&quot;: 1, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 10, &quot;max_score&quot;: 0, &quot;hits&quot;: [] }, &quot;aggregations&quot;: { &quot;group_by_name&quot;: { &quot;doc_count_error_upper_bound&quot;: 0, &quot;sum_other_doc_count&quot;: 0, &quot;buckets&quot;: [ { &quot;key&quot;: &quot;Èü©ÂõΩ&quot;, &quot;doc_count&quot;: 3 }, { &quot;key&quot;: &quot;Êñ∞Âä†Âù°&quot;, &quot;doc_count&quot;: 2 }, { &quot;key&quot;: &quot;Âç∞Â∫¶&quot;, &quot;doc_count&quot;: 1 }, { &quot;key&quot;: &quot;Âæ∑ÂõΩ&quot;, &quot;doc_count&quot;: 1 }, { &quot;key&quot;: &quot;Êó•Êú¨&quot;, &quot;doc_count&quot;: 1 }, { &quot;key&quot;: &quot;ÊúùÈ≤ú&quot;, &quot;doc_count&quot;: 1 } ] } } } È´ò‰∫ÆÊü•ËØ¢(highlight)POST http://127.0.0.1:9200/news/_search?q=ÊùéÂÖãÂº∫ { &quot;query&quot; : { match_all:{} }, &quot;highlight&quot; : { &quot;pre_tags&quot; : [&quot;&lt;font color=&#39;red&#39;&gt;&quot;, &quot;&lt;b&gt;&quot;, &quot;&lt;em&gt;&quot;], &quot;post_tags&quot; : [&quot;&lt;/font&gt;&quot;, &quot;&lt;b&gt;&quot;, &quot;&lt;/em&gt;&quot;], &quot;fields&quot; : [ {&quot;title&quot; : {}}, {&quot;content&quot; : { &quot;fragment_size&quot; : 350, &quot;number_of_fragments&quot; : 3, &quot;no_match_size&quot;: 150 }} ] } } POST http://127.0.0.1:9200/news/_search?q=ÊùéÂÖãÂº∫ { &quot;query&quot; : { match_all:{} }, &quot;highlight&quot; : { &quot;pre_tags&quot; : [&quot;&lt;font color=&#39;red&#39;&gt;&lt;b&gt;&lt;em&gt;&quot;], &quot;post_tags&quot; : [&quot;&lt;/font&gt;&lt;b&gt;&lt;/em&gt;&quot;], &quot;fields&quot; : [ {&quot;title&quot; : {}}, {&quot;content&quot; : { &quot;fragment_size&quot; : 350, &quot;number_of_fragments&quot; : 3, &quot;no_match_size&quot;: 150 }} ] } } Âà†Èô§Á¥¢Âºïhttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-delete-index.html DELETE http://127.0.0.1:9200/news ÂàõÂª∫Á¥¢Âºïhttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html PUT http://127.0.0.1:9200/news ÂàõÂª∫Êàñ‰øÆÊîπmappinghttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-put-mapping.html PUT /{index}/_mapping/{type} PUT http://127.0.0.1:9200/news/_mapping/article { &quot;article&quot;: { &quot;properties&quot;: { &quot;pubdate&quot;: { &quot;type&quot;: &quot;date&quot;, &quot;format&quot;: &quot;dateOptionalTime&quot; }, &quot;author&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;content&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;id&quot;: { &quot;type&quot;: &quot;long&quot; }, &quot;source&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;title&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;url&quot;: { &quot;type&quot;: &quot;string&quot; } } } } Êü•Áúãmappinghttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-get-mapping.html GET http://127.0.0.1:9200/_all/_mapping GET http://127.0.0.1:9200/_mapping GET http://127.0.0.1:9200/news/_mapping/article ËæìÂá∫: { &quot;news&quot;: { &quot;mappings&quot;: { &quot;article&quot;: { &quot;properties&quot;: { &quot;author&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;content&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;id&quot;: { &quot;type&quot;: &quot;long&quot; }, &quot;pubdate&quot;: { &quot;type&quot;: &quot;date&quot;, &quot;store&quot;: true, &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss&quot; }, &quot;source&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;title&quot;: { &quot;type&quot;: &quot;string&quot; }, &quot;url&quot;: { &quot;type&quot;: &quot;string&quot; } } } } } } Âà†Èô§mappinghttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-delete-mapping.html [DELETE] /{index}/{type} [DELETE] /{index}/{type}/_mapping [DELETE] /{index}/_mapping/{type} DELETE http://127.0.0.1:9200/news/_mapping/article ÊñáÁ´†ËΩ¨Ëá™:elasticsearchÂø´ÈÄü‰∏äÊâã.md","categories":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://iogogogo.github.io/categories/elasticsearch/"}],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://iogogogo.github.io/tags/elasticsearch/"}]},{"title":"Java8 stream-ÂÆûÊàò","slug":"java8-stream-drill","date":"2019-03-06T09:03:21.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2019/03/06/java8-stream-drill/","link":"","permalink":"http://iogogogo.github.io/2019/03/06/java8-stream-drill/","excerpt":"","text":"Java8Âú®Êó•Â∏∏ÁºñÁ†Å‰∏≠ÊÑüËß¶ÊúÄÊ∑±ÁöÑÊó†ÈùûÂ∞±ÊòØsteamÂíålambdaË°®ËææÂºè‰ª•ÂèäÊñ∞ÁöÑÊó∂Èó¥apiÔºåÂú®Ê≠§‰πãÂâçÔºåÈõÜÂêàÂ§ÑÁêÜ‰∏ÄÁõ¥ÊòØ‰∏çÂ§™Êñπ‰æø‰∏îÊÄßËÉΩËæÉ‰ΩéÔºåÁ¨¨‰∫å‰∏™ÊòØÊó∂Èó¥api‰∏çÂ•ΩÁî®Ôºå‰∏ÄËà¨ÈÖçÂêàjoda-timeËøô‰∏™Â∫ìÈÖçÂêà‰ΩøÁî®Ôºå‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∫õÂú®Java8‰∏≠Â∏∏Áî®ÁöÑstreamÂ§ÑÁêÜ ListËΩ¨Êç¢ÊàêMap/** * toMap Â¶ÇÊûúÈõÜÂêà‰∏≠ÈáçÂ§çÁöÑkey ÂèØËÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏ Duplicate key... * apply1„ÄÅapply2ÁöÑIDÈÉΩ‰∏∫1 Êó¢m1,m2ÁöÑIDÈÉΩ‰∏∫1 * ÂèØ‰ª•Áî®(m1,m2)->m1 Êù•ËÆæÁΩÆ Â¶ÇÊûúÊúâÈáçÂ§çÁöÑkey ‰øùÁïôm1 ËàçÂºÉm2 */ Map&lt;String, Model> modelMap = modelList .parallelStream() .collect(Collectors.toMap(Model::getId, x -> x, (m1, m2) -> m1)); groupBy‰ª•ÂêéÊ±ÇÊúÄÂ§ßÂÄºÊàñËÄÖÊúÄÂ∞èÂÄºhttp://www.java2s.com/Tutorials/Java_Streams/Example/Group/Get_max_value_in_each_group.htm @Data @NoArgsConstructor @AllArgsConstructor class Model { String hostname; String ip; int num; } @Test public void test() { List&lt;Model> models = new ArrayList&lt;>(); models.add(new Model(\"vm_11_11\", \"192.168.1.0\", 1)); models.add(new Model(\"vm_11_11\", \"192.168.1.1\", 2)); models.add(new Model(\"vm_11_11\", \"192.168.1.2\", 3)); models.add(new Model(\"vm_11_11\", \"192.168.1.3\", 4)); models.add(new Model(\"vm_11_11\", \"192.168.1.2\", 5)); models.add(new Model(\"vm_11_12\", \"192.168.1.3\", 6)); models.add(new Model(\"vm_11_12\", \"192.168.1.6\", 7)); models.add(new Model(\"vm_11_12\", \"192.168.1.7\", 8)); models.add(new Model(\"vm_11_12\", \"192.168.1.8\", 9)); models.add(new Model(\"vm_11_12\", \"192.168.1.9\", 10)); models.add(new Model(\"vm_11_13\", \"192.168.1.10\", 11)); models.add(new Model(\"vm_11_13\", \"192.168.1.11\", 12)); models.add(new Model(\"vm_11_13\", \"192.168.1.11\", 13)); models.add(new Model(\"vm_11_13\", \"192.168.1.12\", 14)); models.add(new Model(\"vm_11_13\", \"192.168.1.11\", 15)); models.add(new Model(\"vm_11_13\", \"192.168.1.15\", 16)); models.add(new Model(\"vm_11_16\", \"192.168.1.16\", 17)); models.add(new Model(\"vm_11_16\", \"192.168.1.17\", 18)); models.add(new Model(\"vm_11_16\", \"192.168.1.18\", 19)); models.add(new Model(\"vm_11_16\", \"192.168.1.19\", 20)); models.add(new Model(\"vm_11_16\", \"192.168.1.20\", 21)); models.add(new Model(\"vm_11_16\", \"192.168.1.21\", 22)); models.add(new Model(\"vm_11_16\", \"192.168.1.22\", 23)); Map&lt;String, Model> map = models .parallelStream() .collect(Collectors.toMap(model -> model.getHostname() + \"_\" + model.getIp(), Function.identity(), (Model d1, Model d2) -> d1.getOrder() &lt; d2.getOrder() ? d1 : d2)); log.info(\"map:{}\", map); } Scala‰∏≠‰ΩøÁî®groupÊ±ÇÂá∫ÊúÄÂ§ßÂÄºÊàñËÄÖÊúÄÂ∞èÂÄºobject CollectionApp { def main(args: Array[String]): Unit = { val log = LoggerFactory.getLogger(getClass) import scala.collection.JavaConverters._ val models: util.List[Model] = new util.ArrayList[Model]() models.add(Model(\"vm_11_11\", \"192.168.1.0\", 1)) models.add(Model(\"vm_11_11\", \"192.168.1.1\", 2)) models.add(Model(\"vm_11_11\", \"192.168.1.2\", 3)) models.add(Model(\"vm_11_11\", \"192.168.1.3\", 4)) models.add(Model(\"vm_11_11\", \"192.168.1.2\", 5)) models.add(Model(\"vm_11_12\", \"192.168.1.3\", 6)) models.add(Model(\"vm_11_12\", \"192.168.1.6\", 7)) models.add(Model(\"vm_11_12\", \"192.168.1.7\", 8)) models.add(Model(\"vm_11_12\", \"192.168.1.8\", 9)) models.add(Model(\"vm_11_12\", \"192.168.1.9\", 10)) models.add(Model(\"vm_11_13\", \"192.168.1.10\", 11)) models.add(Model(\"vm_11_13\", \"192.168.1.11\", 12)) models.add(Model(\"vm_11_13\", \"192.168.1.11\", 13)) models.add(Model(\"vm_11_13\", \"192.168.1.12\", 14)) models.add(Model(\"vm_11_13\", \"192.168.1.11\", 15)) models.add(Model(\"vm_11_13\", \"192.168.1.15\", 16)) models.add(Model(\"vm_11_16\", \"192.168.1.16\", 17)) models.add(Model(\"vm_11_16\", \"192.168.1.17\", 18)) models.add(Model(\"vm_11_16\", \"192.168.1.18\", 19)) models.add(Model(\"vm_11_16\", \"192.168.1.19\", 20)) models.add(Model(\"vm_11_16\", \"192.168.1.20\", 21)) models.add(Model(\"vm_11_16\", \"192.168.1.21\", 22)) models.add(Model(\"vm_11_16\", \"192.168.1.22\", 23)) val list = models.asScala val res = list.groupBy(x => x.hostname + x.ip).map { case (k, v) => (k, v.map(_.order).min) } log.info(s\"$res\") } } case class Model(hostname: String, ip: String, order: Int) ÊâπÂ§ÑÁêÜpackage com.iogogog.util; import lombok.extern.slf4j.Slf4j; import org.apache.commons.collections4.CollectionUtils; import java.util.ArrayList; import java.util.Collection; import java.util.Iterator; import java.util.List; /** * Created by tao.zeng on 2019-03-09. */ @Slf4j public class BatchProcess { public static void process(Collection&lt;?> totalList, int batchSize, BatchProcessListener batchProcessListener) throws Exception { if (CollectionUtils.isEmpty(totalList)) return; if (batchProcessListener == null) { throw new RuntimeException(\"Ê≤°ÊúâÊâπÂ§ÑÁêÜÁõëÂê¨Âô®!\"); } Iterator&lt;?> iterator = totalList.parallelStream().iterator(); int i = 0; List&lt;Object> list = new ArrayList&lt;>(1024); while (iterator.hasNext()) { Object next = iterator.next(); list.add(next); if ((i + 1) % batchSize == 0 || i == (totalList.size() - 1)) { // process batchProcessListener.onProcess(list); log.debug(\"batchSize:{} processSize:{} \", batchSize, list.size()); list.clear(); } i++; } } public interface BatchProcessListener { void onProcess(List&lt;?> list) throws Exception; } }","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Spring Boot ‰ΩøÁî®logbackÁÆ°ÁêÜÊó•Âøó","slug":"spring-boot-logback","date":"2019-03-02T13:09:11.000Z","updated":"2024-07-01T12:30:37.378Z","comments":true,"path":"2019/03/02/spring-boot-logback/","link":"","permalink":"http://iogogogo.github.io/2019/03/02/spring-boot-logback/","excerpt":"","text":"Spring BootÂú®ÊâÄÊúâÂÜÖÈÉ®Êó•Âøó‰∏≠‰ΩøÁî®Commons LoggingÔºå‰ΩÜÊòØÈªòËÆ§ÈÖçÁΩÆ‰πüÊèê‰æõ‰∫ÜÂØπÂ∏∏Áî®Êó•ÂøóÁöÑÊîØÊåÅÔºåÂ¶ÇÔºöJava Util LoggingÔºåLog4J, Log4J2ÂíåLogback„ÄÇÊØèÁßçLoggerÈÉΩÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆ‰ΩøÁî®ÊéßÂà∂Âè∞ÊàñËÄÖÊñá‰ª∂ËæìÂá∫Êó•ÂøóÂÜÖÂÆπ„ÄÇ ‰∏ãÈù¢ËÆ∞ÂΩï‰∏Ä‰∏ãspring boot‰∏≠Â¶Ç‰ΩïÊåâÁÖßÊó•ÂøóÁ≠âÁ∫ßÊãÜÂàÜÔºåËæìÂá∫Âà∞‰∏çÂêåÊñá‰ª∂Âπ∂ÂÅöÂΩíÊ°£Â§ÑÁêÜ &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?> &lt;configuration scan=\"true\" scanPeriod=\"2000\" debug=\"false\"> &lt;!-- scan: ÂΩìÊ≠§Â±ûÊÄßËÆæÁΩÆ‰∏∫trueÊó∂ÔºåÈÖçÁΩÆÊñá‰ª∂Â¶ÇÊûúÂèëÁîüÊîπÂèòÔºåÂ∞Ü‰ºöË¢´ÈáçÊñ∞Âä†ËΩΩÔºåÈªòËÆ§ÂÄº‰∏∫true„ÄÇÔºàËøô‰∏™ÂäüËÉΩÂèØ‰ª•Âú®‰∏çÈáçÂêØËøêË°åÁéØÂ¢É‰∏ãÔºåË∞ÉÊï¥ÊâìÂç∞Êó•ÂøóÁöÑÁªÜËäÇÔºåÊñπ‰æøÂÆö‰ΩçÈóÆÈ¢òÔºâ scanPeriod: ËÆæÁΩÆÁõëÊµãÈÖçÁΩÆÊñá‰ª∂ÊòØÂê¶Êúâ‰øÆÊîπÁöÑÊó∂Èó¥Èó¥ÈöîÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªôÂá∫Êó∂Èó¥Âçï‰ΩçÔºåÈªòËÆ§Âçï‰ΩçÊòØÊØ´Áßí„ÄÇÂΩìscan‰∏∫trueÊó∂ÔºåÊ≠§Â±ûÊÄßÁîüÊïà„ÄÇÈªòËÆ§ÁöÑÊó∂Èó¥Èó¥Èöî‰∏∫1ÂàÜÈíü„ÄÇ debug: ÂΩìÊ≠§Â±ûÊÄßËÆæÁΩÆ‰∏∫trueÊó∂ÔºåÂ∞ÜÊâìÂç∞Âá∫logbackÂÜÖÈÉ®Êó•Âøó‰ø°ÊÅØÔºåÂÆûÊó∂Êü•ÁúãlogbackËøêË°åÁä∂ÊÄÅ„ÄÇÈªòËÆ§ÂÄº‰∏∫false„ÄÇ Logger ÂèØ‰ª•Ë¢´ÂàÜÈÖçÁ∫ßÂà´„ÄÇÁ∫ßÂà´ÂåÖÊã¨ÔºöTRACE„ÄÅDEBUG„ÄÅINFO„ÄÅWARN Âíå ERROR Á∫ßÂà´ÊéíÂ∫è‰∏∫Ôºö TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --> &lt;!-- springProperty ÂèØ‰ª•ËØªÂèñapplication.propertiesÊñá‰ª∂‰∏≠ÁöÑÂ±ûÊÄßÂÄºÔºåÂè™ÊúâÂΩìlogbackÊñá‰ª∂Âêç‰∏∫logback-springÊó∂ÔºåËØ•ÈÖçÁΩÆÊâç‰ºöÁîüÊïà --> &lt;springProperty scope=\"context\" name=\"app.name\" source=\"spring.application.name\"/> &lt;springProperty scope=\"context\" name=\"log.home\" source=\"logging.home\"/> &lt;!-- ÈÖçÁΩÆÊòØlogbackÈªòËÆ§ÁöÑ --> &lt;!--&lt;property name=\"log.home\" value=\"${user.dir}/logs\"/>--> &lt;!-- %mËæìÂá∫ÁöÑ‰ø°ÊÅØ,%pÊó•ÂøóÁ∫ßÂà´,%tÁ∫øÁ®ãÂêç,%dÊó•Êúü,%cÁ±ªÁöÑÂÖ®Âêç,%iÁ¥¢Âºï„Äê‰ªéÊï∞Â≠ó0ÂºÄÂßãÈÄíÂ¢û„Äë,,, --> &lt;!-- appenderÊòØconfigurationÁöÑÂ≠êËäÇÁÇπÔºåÊòØË¥üË¥£ÂÜôÊó•ÂøóÁöÑÁªÑ‰ª∂„ÄÇ --> &lt;!-- ConsoleAppenderÔºöÊääÊó•ÂøóËæìÂá∫Âà∞ÊéßÂà∂Âè∞ --> &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"> &lt;encoder> &lt;pattern>%date{ISO8601} [%thread] %-5level [${app.name}] [%logger{50}] [%file:%line] - %msg%n&lt;/pattern> &lt;!-- ÊéßÂà∂Âè∞‰πüË¶Å‰ΩøÁî®UTF-8Ôºå‰∏çË¶Å‰ΩøÁî®GBKÔºåÂê¶Âàô‰ºö‰∏≠Êñá‰π±Á†Å --> &lt;charset>UTF-8&lt;/charset> &lt;/encoder> &lt;/appender> &lt;!-- info level --> &lt;appender name=\"file_info\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"> &lt;file>${log.home}/${app.name}.log&lt;/file> &lt;encoder> &lt;pattern>%date{ISO8601} [%thread] %-5level [${app.name}] [%logger{50}] [%file:%line] - %msg%n&lt;/pattern> &lt;/encoder> &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"> &lt;level>INFO&lt;/level> &lt;onMatch>ACCEPT&lt;/onMatch> &lt;onMismatch>DENY&lt;/onMismatch> &lt;/filter> &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"> &lt;fileNamePattern>${log.home}/${app.name}.info.%d{yyyy-MM-dd}.%i.zip&lt;/fileNamePattern> &lt;!-- Â¶ÇÊûúÊåâÂ§©Êù•ÂõûÊªöÔºåÂàôÊúÄÂ§ß‰øùÂ≠òÊó∂Èó¥‰∏∫10Â§©Ôºå10Â§©‰πãÂâçÁöÑÈÉΩÂ∞ÜË¢´Ê∏ÖÁêÜÊéâ --> &lt;maxHistory>10&lt;/maxHistory> &lt;!-- Êó•ÂøóÊÄª‰øùÂ≠òÈáè‰∏∫500MB --> &lt;totalSizeCap>500MB&lt;/totalSizeCap> &lt;!--Êñá‰ª∂ËææÂà∞ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"> &lt;!--Êñá‰ª∂ËææÂà∞ ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;maxFileSize>50MB&lt;/maxFileSize> &lt;/timeBasedFileNamingAndTriggeringPolicy> &lt;!--&lt;maxFileSize>50MB&lt;/maxFileSize>--> &lt;/rollingPolicy> &lt;/appender> &lt;!-- debug level --> &lt;appender name=\"file_debug\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"> &lt;file>${log.home}/${app.name}.debug.log&lt;/file> &lt;encoder> &lt;pattern>%date{ISO8601} [%thread] %-5level [${app.name}] [%logger{50}] [%file:%line] - %msg%n&lt;/pattern> &lt;/encoder> &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"> &lt;level>DEBUG&lt;/level> &lt;onMatch>ACCEPT&lt;/onMatch> &lt;onMismatch>DENY&lt;/onMismatch> &lt;/filter> &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"> &lt;fileNamePattern>${log.home}/${app.name}.debug.%d{yyyy-MM-dd}.%i.zip&lt;/fileNamePattern> &lt;!-- Â¶ÇÊûúÊåâÂ§©Êù•ÂõûÊªöÔºåÂàôÊúÄÂ§ß‰øùÂ≠òÊó∂Èó¥‰∏∫10Â§©Ôºå10Â§©‰πãÂâçÁöÑÈÉΩÂ∞ÜË¢´Ê∏ÖÁêÜÊéâ --> &lt;maxHistory>10&lt;/maxHistory> &lt;!-- Êó•ÂøóÊÄª‰øùÂ≠òÈáè‰∏∫500MB --> &lt;totalSizeCap>500MB&lt;/totalSizeCap> &lt;!--Êñá‰ª∂ËææÂà∞ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"> &lt;!--Êñá‰ª∂ËææÂà∞ ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;maxFileSize>50MB&lt;/maxFileSize> &lt;/timeBasedFileNamingAndTriggeringPolicy> &lt;!--&lt;maxFileSize>50MB&lt;/maxFileSize>--> &lt;/rollingPolicy> &lt;/appender> &lt;!-- warn level --> &lt;appender name=\"file_warn\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"> &lt;file>${log.home}/${app.name}.warn.log&lt;/file> &lt;encoder> &lt;pattern>%date{ISO8601} [%thread] %-5level [${app.name}] [%logger{100}] [%file:%line] - %msg%n&lt;/pattern> &lt;/encoder> &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"> &lt;level>WARN&lt;/level> &lt;onMatch>ACCEPT&lt;/onMatch> &lt;onMismatch>DENY&lt;/onMismatch> &lt;/filter> &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"> &lt;fileNamePattern>${log.home}/${app.name}.warn.%d{yyyy-MM-dd}.%i.zip&lt;/fileNamePattern> &lt;!-- Â¶ÇÊûúÊåâÂ§©Êù•ÂõûÊªöÔºåÂàôÊúÄÂ§ß‰øùÂ≠òÊó∂Èó¥‰∏∫10Â§©Ôºå10Â§©‰πãÂâçÁöÑÈÉΩÂ∞ÜË¢´Ê∏ÖÁêÜÊéâ --> &lt;maxHistory>10&lt;/maxHistory> &lt;!-- Êó•ÂøóÊÄª‰øùÂ≠òÈáè‰∏∫500MB --> &lt;totalSizeCap>500MB&lt;/totalSizeCap> &lt;!--Êñá‰ª∂ËææÂà∞ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"> &lt;!--Êñá‰ª∂ËææÂà∞ ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;maxFileSize>50MB&lt;/maxFileSize> &lt;/timeBasedFileNamingAndTriggeringPolicy> &lt;!--&lt;maxFileSize>50MB&lt;/maxFileSize>--> &lt;/rollingPolicy> &lt;/appender> &lt;!-- error level --> &lt;appender name=\"file_error\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"> &lt;file>${log.home}/${app.name}.error.log&lt;/file> &lt;encoder> &lt;pattern>%date{ISO8601} [%thread] %-5level [${app.name}] [%logger{100}] [%file:%line] - %msg%n&lt;/pattern> &lt;/encoder> &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"> &lt;level>ERROR&lt;/level> &lt;onMatch>ACCEPT&lt;/onMatch> &lt;onMismatch>DENY&lt;/onMismatch> &lt;/filter> &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"> &lt;fileNamePattern>${log.home}/${app.name}.error.%d{yyyy-MM-dd}.%i.zip&lt;/fileNamePattern> &lt;!-- Â¶ÇÊûúÊåâÂ§©Êù•ÂõûÊªöÔºåÂàôÊúÄÂ§ß‰øùÂ≠òÊó∂Èó¥‰∏∫10Â§©Ôºå10Â§©‰πãÂâçÁöÑÈÉΩÂ∞ÜË¢´Ê∏ÖÁêÜÊéâ --> &lt;maxHistory>10&lt;/maxHistory> &lt;!-- Êó•ÂøóÊÄª‰øùÂ≠òÈáè‰∏∫500MB --> &lt;totalSizeCap>500MB&lt;/totalSizeCap> &lt;!--Êñá‰ª∂ËææÂà∞ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"> &lt;!--Êñá‰ª∂ËææÂà∞ ÊúÄÂ§ß50MBÊó∂‰ºöË¢´ÂéãÁº©ÂíåÂàáÂâ≤ --> &lt;maxFileSize>50MB&lt;/maxFileSize> &lt;/timeBasedFileNamingAndTriggeringPolicy> &lt;!--&lt;maxFileSize>50MB&lt;/maxFileSize>--> &lt;/rollingPolicy> &lt;/appender> &lt;!-- level Options: ERROR, WARN, INFO, DEBUG --> &lt;!-- loggerÔºöÊó•ÂøóÊâÄÂ§ÑÁöÑÂåÖÊàñËÄÖÂÖ∑‰ΩìÁöÑÁ±ª levelÔºöÊó•ÂøóÊâìÂç∞Á∫ßÂà´ --> &lt;logger name=\"com.zaxxer.hikari\" level=\"WARN\"/> &lt;logger name=\"com.example.LogbackApplication\" level=\"INFO\"/> &lt;root level=\"INFO\"> &lt;!-- Options: ERROR, WARN, INFO, DEBUG --> &lt;appender-ref ref=\"STDOUT\"/> &lt;appender-ref ref=\"file_debug\"/> &lt;appender-ref ref=\"file_info\"/> &lt;appender-ref ref=\"file_warn\"/> &lt;appender-ref ref=\"file_error\"/> &lt;/root> &lt;/configuration>","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Apache CollectionUtils Â∏∏Áî®ÊñπÊ≥ïÊÄªÁªì","slug":"apache-common-collection-utils","date":"2019-03-01T02:09:21.000Z","updated":"2024-07-01T12:30:37.346Z","comments":true,"path":"2019/03/01/apache-common-collection-utils/","link":"","permalink":"http://iogogogo.github.io/2019/03/01/apache-common-collection-utils/","excerpt":"","text":"CollectionUtilsÂú®ÁúüÂÆûÈ°πÁõÆ‰∏≠ÔºåÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁî®ÁöÑÂ∑•ÂÖ∑Á±ªÔºå‰ΩøÁî®ÈùûÂ∏∏È¢ëÁπÅ„ÄÇÂÆÉÂèØ‰ª•‰Ωø‰ª£Á†ÅÊõ¥Âä†ÁÆÄÊ¥ÅÂíåÂÆâÂÖ®„ÄÇ ‰æùËµñ maven &lt;!-- https://mvnrepository.com/artifact/commons-collections/commons-collections --> &lt;dependency> &lt;groupId>commons-collections&lt;/groupId> &lt;artifactId>commons-collections&lt;/artifactId> &lt;version>3.2.1&lt;/version> &lt;/dependency> gradle // https://mvnrepository.com/artifact/commons-collections/commons-collections compile group: 'commons-collections', name: 'commons-collections', version: '3.2.1' Â∏∏Áî®ÊñπÊ≥ïÈùûÁ©∫Âà§Êñ≠// Âà§Êñ≠ÈõÜÂêàÊòØÂê¶‰∏∫Á©∫: CollectionUtils.isEmpty(null): true CollectionUtils.isEmpty(new ArrayList()): true CollectionUtils.isEmpty({a,b}): false // Âà§Êñ≠ÈõÜÂêàÊòØÂê¶‰∏ç‰∏∫Á©∫: CollectionUtils.isNotEmpty(null): false CollectionUtils.isNotEmpty(new ArrayList()): false CollectionUtils.isNotEmpty({a,b}): true Âπ∂ÈõÜ„ÄÅ‰∫§ÈõÜ„ÄÅ‰∫§ÈõÜÁöÑË°•ÈõÜ„ÄÅÂ∑ÆÈõÜ@Test public void test() { List&lt;String> list1 = Stream.of(\"a\", \"b\", \"c\", \"d\", \"e\").parallel().collect(Collectors.toList()); List&lt;String> list2 = Stream.of(\"a\", \"f\", \"C\", \"e\", \"g\",\"z\").parallel().collect(Collectors.toList()); // Âπ∂ÈõÜ Collection union = CollectionUtils.union(list1, list2); log.info(\"union:{}\", union); // ‰∫§ÈõÜ Collection intersection = CollectionUtils.intersection(list1, list2); log.info(\"intersection:{}\", intersection); // ‰∫§ÈõÜÁöÑË°•ÈõÜÔºàÊûêÂèñÔºâ Collection disjunction = CollectionUtils.disjunction(list1, list2); log.info(\"disjunction:{}\", disjunction); // Â∑ÆÈõÜÔºàÊâ£Èô§Ôºâlist1Êâ£Èô§list2 Collection subtract = CollectionUtils.subtract(list1, list2); log.info(\"subtract:{}\", subtract); } // ÁªìÊûú union:[a, b, c, C, d, e, f, g, z] intersection:[a, e] disjunction:[b, c, C, d, f, g, z] subtract:[b, c, d] Âà§Êñ≠Áõ∏Á≠â@Test public void testEqual() { List&lt;String> list1 = Stream.of(\"a\", \"b\", \"c\", \"d\", \"e\").parallel().collect(Collectors.toList()); List&lt;String> list2 = Stream.of(\"a\", \"f\", \"C\", \"e\", \"g\", \"z\").parallel().collect(Collectors.toList()); // ÊØîËæÉÂÄº false log.info(\"isEqualCollection:{}\", CollectionUtils.isEqualCollection(list1, list2)); List&lt;Integer> list3 = Stream.of(1, 2, 3, 4).parallel().collect(Collectors.toList()); List&lt;Integer> list4 = Stream.of(1, 2, 3, 4).parallel().collect(Collectors.toList()); // ÊØîËæÉÂÄº true log.info(\"isEqualCollection:{}\", CollectionUtils.isEqualCollection(list3, list4)); class Person { } @Data @NoArgsConstructor @AllArgsConstructor @EqualsAndHashCode(callSuper = true) class Boy extends Person { String name; } List&lt;Person> boy1 = new ArrayList&lt;>(); boy1.add(new Boy(\"ÈòøÁâõ\")); List&lt;Person> boy2 = new ArrayList&lt;>(); boy2.add(new Boy(\"ÈòøÁâõ\")); // ÊØîËæÉÈõÜÂêà‰∏≠‰∏çÂêåÂØπË±° false log.info(\"isEqualCollection:{}\", CollectionUtils.isEqualCollection(boy1, boy2)); Boy boy = new Boy(); List&lt;Boy> boy3 = new ArrayList&lt;>(); boy3.add(boy); List&lt;Boy> boy4 = new ArrayList&lt;>(); boy4.add(boy); // ÊØîËæÉÈõÜÂêà‰∏≠Áõ∏ÂêåÂØπË±° true log.info(\"isEqualCollection:{}\", CollectionUtils.isEqualCollection(boy3, boy4)); } ‰∏çÂèØÂèòÈõÜÂêà@Test public void testUnmodifiable() { Collection&lt;String> list = new ArrayList&lt;>(); // ÊäìÊç¢‰∏∫‰∏çÂèØÂèòÈõÜÂêàÔºåÊ∑ªÂä†Êï∞ÊçÆ‰ºöÊä•Èîô Collection&lt;String> collection = CollectionUtils.unmodifiableCollection(list); collection.add(\"a\"); collection.add(\"b\"); collection.add(\"c\"); log.info(\"collection:{}\", collection); } // Collections.unmodifiableCollectionÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™ÈõÜÂêàÁöÑÈïúÂÉèÔºåÂÆÉÁöÑËøîÂõûÁªìÊûúÊòØ‰∏çÂèØÁõ¥Êé•Ë¢´ÊîπÂèòÔºåÂê¶Âàô‰ºöÊèêÁ§∫ÈîôËØØ java.lang.UnsupportedOperationException at org.apache.commons.collections.collection.UnmodifiableCollection.add(UnmodifiableCollection.java:75)","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"ComparableÂíåComparatorÁöÑÂå∫Âà´","slug":"chinese-sort","date":"2019-02-17T03:27:48.000Z","updated":"2024-07-01T12:30:37.369Z","comments":true,"path":"2019/02/17/chinese-sort/","link":"","permalink":"http://iogogogo.github.io/2019/02/17/chinese-sort/","excerpt":"","text":"ComparableComparableÂèØ‰ª•ËÆ§‰∏∫ÊòØ‰∏Ä‰∏™ÂÜÖÊØîËæÉÂô®ÔºåÂÆûÁé∞‰∫ÜComparableÊé•Âè£ÁöÑÁ±ªÊúâ‰∏Ä‰∏™ÁâπÁÇπÔºåÂ∞±ÊòØËøô‰∫õÁ±ªÊòØÂèØ‰ª•ÂíåËá™Â∑±ÊØîËæÉÁöÑÔºåËá≥‰∫éÂÖ∑‰ΩìÂíåÂè¶‰∏Ä‰∏™ÂÆûÁé∞‰∫ÜComparableÊé•Âè£ÁöÑÁ±ªÂ¶Ç‰ΩïÊØîËæÉÔºåÂàô‰æùËµñcompareToÊñπÊ≥ïÁöÑÂÆûÁé∞ÔºåcompareToÊñπÊ≥ï‰πüË¢´Áß∞‰∏∫Ëá™ÁÑ∂ÊØîËæÉÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÂºÄÂèëËÄÖaddËøõÂÖ•‰∏Ä‰∏™CollectionÁöÑÂØπË±°ÊÉ≥Ë¶ÅCollectionsÁöÑsortÊñπÊ≥ïÂ∏Æ‰Ω†Ëá™Âä®ËøõË°åÊéíÂ∫èÁöÑËØùÔºåÈÇ£‰πàËøô‰∏™ÂØπË±°ÂøÖÈ°ªÂÆûÁé∞ComparableÊé•Âè£„ÄÇcompareToÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØintÔºåÊúâ‰∏âÁßçÊÉÖÂÜµÔºö 1„ÄÅÊØîËæÉËÄÖÂ§ß‰∫éË¢´ÊØîËæÉËÄÖÔºà‰πüÂ∞±ÊòØcompareToÊñπÊ≥ïÈáåÈù¢ÁöÑÂØπË±°ÔºâÔºåÈÇ£‰πàËøîÂõûÊ≠£Êï¥Êï∞ 2„ÄÅÊØîËæÉËÄÖÁ≠â‰∫éË¢´ÊØîËæÉËÄÖÔºåÈÇ£‰πàËøîÂõû0 3„ÄÅÊØîËæÉËÄÖÂ∞è‰∫éË¢´ÊØîËæÉËÄÖÔºåÈÇ£‰πàËøîÂõûË¥üÊï¥Êï∞ public class Domain implements Comparable&lt;Domain> { private String str; public Domain(String str) { this.str = str; } public int compareTo(Domain domain) { if (this.str.compareTo(domain.str) > 0) return 1; else if (this.str.compareTo(domain.str) == 0) return 0; else return -1; } public String getStr() { return str; } } public static void main(String[] args) { Domain d1 = new Domain(\"c\"); Domain d2 = new Domain(\"c\"); Domain d3 = new Domain(\"b\"); Domain d4 = new Domain(\"d\"); System.out.println(d1.compareTo(d2)); System.out.println(d1.compareTo(d3)); System.out.println(d1.compareTo(d4)); } // ËæìÂá∫ÁªìÊûú 0 1 -1 ComparatorComparatorÂèØ‰ª•ËÆ§‰∏∫ÊòØÊòØ‰∏Ä‰∏™Â§ñÊØîËæÉÂô®Ôºå‰∏™‰∫∫ËÆ§‰∏∫Êúâ‰∏§ÁßçÊÉÖÂÜµÂèØ‰ª•‰ΩøÁî®ÂÆûÁé∞ComparatorÊé•Âè£ÁöÑÊñπÂºèÔºö 1„ÄÅ‰∏Ä‰∏™ÂØπË±°‰∏çÊîØÊåÅËá™Â∑±ÂíåËá™Â∑±ÊØîËæÉÔºàÊ≤°ÊúâÂÆûÁé∞ComparableÊé•Âè£ÔºâÔºå‰ΩÜÊòØÂèàÊÉ≥ÂØπ‰∏§‰∏™ÂØπË±°ËøõË°åÊØîËæÉ 2„ÄÅ‰∏Ä‰∏™ÂØπË±°ÂÆûÁé∞‰∫ÜComparableÊé•Âè£Ôºå‰ΩÜÊòØÂºÄÂèëËÄÖËÆ§‰∏∫compareToÊñπÊ≥ï‰∏≠ÁöÑÊØîËæÉÊñπÂºèÂπ∂‰∏çÊòØËá™Â∑±ÊÉ≥Ë¶ÅÁöÑÈÇ£ÁßçÊØîËæÉÊñπÂºè ComparatorÊé•Âè£ÈáåÈù¢Êúâ‰∏Ä‰∏™compareÊñπÊ≥ïÔºåÊñπÊ≥ïÊúâ‰∏§‰∏™ÂèÇÊï∞T o1ÂíåT o2ÔºåÊòØÊ≥õÂûãÁöÑË°®Á§∫ÊñπÂºèÔºåÂàÜÂà´Ë°®Á§∫ÂæÖÊØîËæÉÁöÑ‰∏§‰∏™ÂØπË±°ÔºåÊñπÊ≥ïËøîÂõûÂÄºÂíåComparableÊé•Âè£‰∏ÄÊ†∑ÊòØintÔºåÊúâ‰∏âÁßçÊÉÖÂÜµÔºö 1„ÄÅo1Â§ß‰∫éo2ÔºåËøîÂõûÊ≠£Êï¥Êï∞ 2„ÄÅo1Á≠â‰∫éo2ÔºåËøîÂõû0 3„ÄÅo1Â∞è‰∫éo3ÔºåËøîÂõûË¥üÊï¥Êï∞ public class DomainComparator implements Comparator&lt;Domain> { public int compare(Domain domain1, Domain domain2) { if (domain1.getStr().compareTo(domain2.getStr()) > 0) return 1; else if (domain1.getStr().compareTo(domain2.getStr()) == 0) return 0; else return -1; } } public static void main(String[] args) { Domain d1 = new Domain(\"c\"); Domain d2 = new Domain(\"c\"); Domain d3 = new Domain(\"b\"); Domain d4 = new Domain(\"d\"); DomainComparator dc = new DomainComparator(); System.out.println(dc.compare(d1, d2)); System.out.println(dc.compare(d1, d3)); System.out.println(dc.compare(d1, d4)); } // ËæìÂá∫ÁªìÊûú 0 1 -1 Âõ†‰∏∫Ê≥õÂûãÊåáÂÆöÊ≠ª‰∫ÜÔºåÊâÄ‰ª•ÂÆûÁé∞ComparatorÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÂè™ËÉΩÊòØ‰∏§‰∏™Áõ∏ÂêåÁöÑÂØπË±°Ôºà‰∏çËÉΩ‰∏Ä‰∏™Domain„ÄÅ‰∏Ä‰∏™StringÔºâËøõË°åÊØîËæÉ‰∫ÜÔºåÂõ†Ê≠§ÂÆûÁé∞ComparatorÊé•Âè£ÁöÑÂÆûÁé∞Á±ª‰∏ÄËà¨ÈÉΩ‰ºö‰ª•‚ÄùÂæÖÊØîËæÉÁöÑÂÆû‰ΩìÁ±ª+Comparator‚ÄùÊù•ÂëΩÂêç ÊÄªÁªì1„ÄÅÂ¶ÇÊûúÂÆûÁé∞Á±ªÊ≤°ÊúâÂÆûÁé∞ComparableÊé•Âè£ÔºåÂèàÊÉ≥ÂØπ‰∏§‰∏™Á±ªËøõË°åÊØîËæÉÔºàÊàñËÄÖÂÆûÁé∞Á±ªÂÆûÁé∞‰∫ÜComparableÊé•Âè£Ôºå‰ΩÜÊòØÂØπcompareToÊñπÊ≥ïÂÜÖÁöÑÊØîËæÉÁÆóÊ≥ï‰∏çÊª°ÊÑèÔºâÔºåÈÇ£‰πàÂèØ‰ª•ÂÆûÁé∞ComparatorÊé•Âè£ÔºåËá™ÂÆö‰πâ‰∏Ä‰∏™ÊØîËæÉÂô®ÔºåÂÜôÊØîËæÉÁÆóÊ≥ï 2„ÄÅÂÆûÁé∞ComparableÊé•Âè£ÁöÑÊñπÂºèÊØîÂÆûÁé∞ComparatorÊé•Âè£ÁöÑËÄ¶ÂêàÊÄß Ë¶ÅÂº∫‰∏Ä‰∫õÔºåÂ¶ÇÊûúË¶Å‰øÆÊîπÊØîËæÉÁÆóÊ≥ïÔºåË¶Å‰øÆÊîπComparableÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåËÄåÂÆûÁé∞ComparatorÁöÑÁ±ªÊòØÂú®Â§ñÈÉ®ËøõË°åÊØîËæÉÁöÑÔºå‰∏çÈúÄË¶ÅÂØπÂÆûÁé∞Á±ªÊúâ‰ªª‰Ωï‰øÆ Êîπ„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶ËØ¥ÔºåÂÖ∂ÂÆûÊúâ‰∫õ‰∏çÂ§™Â•ΩÔºåÂ∞§ÂÖ∂Âú®Êàë‰ª¨Â∞ÜÂÆûÁé∞Á±ªÁöÑ.classÊñá‰ª∂ÊâìÊàê‰∏Ä‰∏™.jarÊñá‰ª∂Êèê‰æõÁªôÂºÄÂèëËÄÖ‰ΩøÁî®ÁöÑÊó∂ÂÄô„ÄÇÂÆûÈôÖ‰∏äÂÆûÁé∞Comparator Êé•Âè£ÁöÑÊñπÂºèÂêéÈù¢‰ºöÂÜôÂà∞Â∞±ÊòØ‰∏ÄÁßçÂÖ∏ÂûãÁöÑÁ≠ñÁï•Ê®°Âºè„ÄÇ ‰∏≠ÊñáÂÆûÁé∞ÊéíÂ∫ètreeMap ÊñπÂºè @org.junit.Test public void test() { CollatorComparator comparator = new CollatorComparator(); TreeMap&lt;String, Object> sortMap = new TreeMap&lt;>(comparator); sortMap.put(\"ÂπøÂ∑û\", \"500\"); sortMap.put(\"ÂÆâÂæΩ\", \"100000000000\"); sortMap.put(\"‰∏≠Â±±\", \"9000\"); sortMap.put(\"ÊΩÆÂ∑û\", \"8000\"); //Ê≥®ÊÑèÔºöÊØèÊ¨°ÂØπTreeMapËøõË°åput()Êó∂ÔºåTreeMapÈÉΩ‰ºöËá™Âä®Ë∞ÉÁî®ÂÆÉÁöÑcompare(key,Entry.key) //ÊåâÁÖßkeyËøõË°åÊéíÂ∫è System.out.println(sortMap); } class CollatorComparator implements Comparator&lt;Object> { Collator collator = Collator.getInstance(); @Override public int compare(Object element1, Object element2) { CollationKey key1 = collator.getCollationKey(element1.toString()); CollationKey key2 = collator.getCollationKey(element2.toString()); return key1.compareTo(key2); } } Comparator ÊñπÂºè@org.junit.Test public void test() { Comparator&lt;Object> com = Collator.getInstance(java.util.Locale.CHINA); String[] newArray = {\"‰∏≠Â±±\", \"Ê±ïÂ§¥\", \"ÂπøÂ∑û\", \"$\", \"ÂÆâÂ∫Ü\", \"1\", \"Èò≥Ê±ü\", \"z\", \"Âçó‰∫¨\", \"Ê≠¶Ê±â\", \"Âåó‰∫¨\", \"ÂÆâÈò≥\", \"ÂåóÊñπ\"}; List&lt;String> list = Arrays.asList(newArray); list.sort(com); for (String i : list) { System.out.print(i + \" \"); } }","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"Java8 Êñ∞ÁâπÊÄß-OptionalÁ±ª","slug":"java8-optional","date":"2019-02-13T03:15:36.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2019/02/13/java8-optional/","link":"","permalink":"http://iogogogo.github.io/2019/02/13/java8-optional/","excerpt":"","text":"Âú®StreamÊµÅÂºèÊï∞ÊçÆÂ§ÑÁêÜÁöÑÊñáÁ´†‰∏≠ÊèêÂà∞‰∫ÜOptionalÁ±ªÔºåËøôÊòØJava 8Êñ∞Â¢ûÁöÑ‰∏Ä‰∏™Á±ªÔºåÁî®‰ª•Ëß£ÂÜ≥Á®ãÂ∫è‰∏≠Â∏∏ËßÅÁöÑNullPointerExceptionÂºÇÂ∏∏ÈóÆÈ¢ò„ÄÇÊú¨ÁØáÊñáÁ´†Â∞ÜËØ¶ÁªÜ‰ªãÁªçOptionalÁ±ªÔºå‰ª•ÂèäÂ¶Ç‰ΩïÁî®ÂÆÉÊ∂àÈô§‰ª£Á†Å‰∏≠ÁöÑnullÊ£ÄÊü•„ÄÇ ÈÅøÂÖç‰ΩøÁî®nullÊ£ÄÊü•‰Ωú‰∏∫JavaÂºÄÂèë‰∫∫ÂëòÔºåÂá†‰πéÊâÄÊúâ‰∫∫ÈÉΩÈÅáÂà∞ËøáNullPointerExceptionÂºÇÂ∏∏ÔºåÂ§ßÂ§öÊï∞‰∫∫ÈÅáÂà∞NullPointerExceptionÂºÇÂ∏∏Êó∂ÈÉΩ‰ºöÂú®ÂºÇÂ∏∏Âá∫Áé∞ÁöÑÂú∞ÊñπÂä†‰∏äif‰ª£Á†ÅÂùóÊù•Âà§Êñ≠ÂÄº‰∏ç‰∏∫Á©∫ÔºåÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö public void bindUserToRole(User user) { if (user != null) { String roleId = user.getRoleId(); if (roleId != null) { Role role = roleDao.findOne(roleId); if (role != null) { role.setUserId(user.getUserId()); roleDao.save(role); } } } } ËøôÊòØÊØîËæÉÊôÆÈÅçÁöÑÂÅöÊ≥ïÔºå‰∏∫‰∫ÜÈÅøÂÖçÂá∫Áé∞NullPointerExceptionÂºÇÂ∏∏ÔºåÊâãÂä®ÂØπÂèØËÉΩ‰∏∫nullÂÄºËøõË°å‰∫ÜÂ§ÑÁêÜÔºå‰∏çËøá‰ª£Á†ÅÁúãËµ∑Êù•ÈùûÂ∏∏Á≥üÁ≥ïÔºå‰∏öÂä°ÈÄªËæëË¢´Ê∑πÊ≤°Âú®ifÈÄªËæëÂà§Êñ≠‰∏≠Ôºå‰πüËÆ∏‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁúãËµ∑Êù•ÂèØËØªÊÄßÁ®çÂ•Ω‰∏Ä‰∫õÔºö public String bindUserToRole(User user) { if (user == null) { return; } String roleId = user.getRoleId(); if (roleId == null) { return; } Role = roleDao.findOne(roleId); if (role != null) { role.setUserId(user.getUserId()); roleDao.save(role); } } ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÈÅøÂÖç‰∫ÜÊ∑±Â±ÇÁöÑifËØ≠Âè•ÂµåÂ•óÔºå‰ΩÜÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊñπÊ≥ïÂÜÖÊúâ‰∏â‰∏™‰∏çÂêåÁöÑËøîÂõûÁÇπÔºåÂá∫ÈîôÂêéË∞ÉËØï‰πü‰∏çÂÆπÊòìÔºåÂõ†‰∏∫‰Ω†‰∏çÁü•ÈÅìÊòØÈÇ£‰∏™ÂÄºÂØºËá¥‰∫ÜNullPointerExceptionÂºÇÂ∏∏„ÄÇ Âü∫‰∫é‰∏äÈù¢ÁöÑÂéüÂõ†ÔºåJava 8‰∏≠ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªOptionalÔºåÁî®‰ª•ÈÅøÂÖç‰ΩøÁî®nullÂÄºÂºïÂèëÁöÑÁßçÁßçÈóÆÈ¢ò„ÄÇ OptionalÁ±ªjava.util.Optional&lt;T&gt;Á±ªÊòØ‰∏Ä‰∏™Â∞ÅË£Ö‰∫ÜOptionalÂÄºÁöÑÂÆπÂô®ÂØπË±°ÔºåOptionalÂÄºÂèØ‰ª•‰∏∫nullÔºåÂ¶ÇÊûúÂÄºÂ≠òÂú®ÔºåË∞ÉÁî®isPresent()ÊñπÊ≥ïËøîÂõûtrueÔºåË∞ÉÁî®get()ÊñπÊ≥ïÂèØ‰ª•Ëé∑ÂèñÂÄº„ÄÇ ÂàõÂª∫OptionalÂØπË±°OptionalÁ±ªÊèê‰æõÁ±ª‰∏â‰∏™ÊñπÊ≥ïÁî®‰∫éÂÆû‰æãÂåñ‰∏Ä‰∏™OptionalÂØπË±°ÔºåÂÆÉ‰ª¨ÂàÜÂà´‰∏∫empty()„ÄÅof()„ÄÅofNullable()ÔºåËøô‰∏â‰∏™ÊñπÊ≥ïÈÉΩÊòØÈùôÊÄÅÊñπÊ≥ïÔºåÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®„ÄÇ empty()ÊñπÊ≥ïÁî®‰∫éÂàõÂª∫‰∏Ä‰∏™Ê≤°ÊúâÂÄºÁöÑOptionalÂØπË±°Ôºö Optional&lt;String> emptyOpt = Optional.empty(); empty()ÊñπÊ≥ïÂàõÂª∫ÁöÑÂØπË±°Ê≤°ÊúâÂÄºÔºåÂ¶ÇÊûúÂØπemptyOptÂèòÈáèË∞ÉÁî®isPresent()ÊñπÊ≥ï‰ºöËøîÂõûfalseÔºåË∞ÉÁî®get()ÊñπÊ≥ïÊäõÂá∫NullPointerExceptionÂºÇÂ∏∏„ÄÇ of()ÊñπÊ≥ï‰ΩøÁî®‰∏Ä‰∏™ÈùûÁ©∫ÁöÑÂÄºÂàõÂª∫OptionalÂØπË±°Ôºö String str = \"Hello World\"; Optional&lt;String> notNullOpt = Optional.of(str); ofNullable()ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™ÂèØ‰ª•‰∏∫nullÁöÑÂÄºÔºö Optional&lt;String> nullableOpt = Optional.ofNullable(str); Â¶ÇÊûústrÁöÑÂÄº‰∏∫nullÔºåÂæóÂà∞ÁöÑnullableOptÊòØ‰∏Ä‰∏™Ê≤°ÊúâÂÄºÁöÑOptionalÂØπË±°„ÄÇ ÊèêÂèñOptionalÂØπË±°‰∏≠ÁöÑÂÄºÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅËé∑ÂèñUserÂØπË±°‰∏≠ÁöÑroleIdÂ±ûÊÄßÂÄºÔºåÂ∏∏ËßÅÁöÑÊñπÂºèÊòØÁõ¥Êé•Ëé∑ÂèñÔºö String roleId = null; if (user != null) { roleId = user.getRoleId(); } ‰ΩøÁî®Optional‰∏≠Êèê‰æõÁöÑmap()ÊñπÊ≥ïÂèØ‰ª•‰ª•Êõ¥ÁÆÄÂçïÁöÑÊñπÂºèÂÆûÁé∞Ôºö Optional&lt;User> userOpt = Optional.ofNullable(user); Optional&lt;String> roleIdOpt = userOpt.map(User::getRoleId); ‰ΩøÁî®orElse()ÊñπÊ≥ïËé∑ÂèñÂÄºOptionalÁ±ªËøòÂåÖÂê´ÂÖ∂‰ªñÊñπÊ≥ïÁî®‰∫éËé∑ÂèñÂÄºÔºåËøô‰∫õÊñπÊ≥ïÂàÜÂà´‰∏∫Ôºö orElse()ÔºöÂ¶ÇÊûúÊúâÂÄºÂ∞±ËøîÂõûÔºåÂê¶ÂàôËøîÂõû‰∏Ä‰∏™ÁªôÂÆöÁöÑÂÄº‰Ωú‰∏∫ÈªòËÆ§ÂÄºÔºõ orElseGet()Ôºö‰∏éorElse()ÊñπÊ≥ï‰ΩúÁî®Á±ª‰ººÔºåÂå∫Âà´Âú®‰∫éÁîüÊàêÈªòËÆ§ÂÄºÁöÑÊñπÂºè‰∏çÂêå„ÄÇËØ•ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™Supplier&lt;? extends T&gt;ÂáΩÊï∞ÂºèÊé•Âè£ÂèÇÊï∞ÔºåÁî®‰∫éÁîüÊàêÈªòËÆ§ÂÄºÔºõ orElseThrow()Ôºö‰∏éÂâçÈù¢‰ªãÁªçÁöÑget()ÊñπÊ≥ïÁ±ª‰ººÔºåÂΩìÂÄº‰∏∫nullÊó∂Ë∞ÉÁî®Ëøô‰∏§‰∏™ÊñπÊ≥ïÈÉΩ‰ºöÊäõÂá∫NullPointerExceptionÂºÇÂ∏∏ÔºåÂå∫Âà´Âú®‰∫éËØ•ÊñπÊ≥ïÂèØ‰ª•ÊåáÂÆöÊäõÂá∫ÁöÑÂºÇÂ∏∏Á±ªÂûã„ÄÇ ‰∏ãÈù¢Êù•ÁúãÁúãËøô‰∏â‰∏™ÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÁî®Ê≥ïÔºö String str = \"Hello World\"; Optional&lt;String> strOpt = Optional.of(str); String orElseResult = strOpt.orElse(\"Hello Shanghai\"); String orElseGet = strOpt.orElseGet(() -> \"Hello Shanghai\"); String orElseThrow = strOpt.orElseThrow( () -> new IllegalArgumentException(\"Argument 'str' cannot be null or blank.\")); Ê≠§Â§ñÔºåOptionalÁ±ªËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ifPresent()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™Consumer&lt;? super T&gt;ÂáΩÊï∞ÂºèÊé•Âè£Ôºå‰∏ÄËà¨Áî®‰∫éÂ∞Ü‰ø°ÊÅØÊâìÂç∞Âà∞ÊéßÂà∂Âè∞Ôºö Optional&lt;String> strOpt = Optional.of(\"Hello World\"); strOpt.ifPresent(System.out::println); ‰ΩøÁî®filter()ÊñπÊ≥ïËøáÊª§filter()ÊñπÊ≥ïÂèØÁî®‰∫éÂà§Êñ≠OptionalÂØπË±°ÊòØÂê¶Êª°Ë∂≥ÁªôÂÆöÊù°‰ª∂Ôºå‰∏ÄËà¨Áî®‰∫éÊù°‰ª∂ËøáÊª§Ôºö Optional&lt;String> optional = Optional.of(\"lw900925@163.com\"); optional = optional.filter(str -> str.contains(\"164\")); Âú®‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÂ¶ÇÊûúfilter()ÊñπÊ≥ï‰∏≠ÁöÑLambdaË°®ËææÂºèÊàêÁ´ãÔºåfilter()ÊñπÊ≥ï‰ºöËøîÂõûÂΩìÂâçOptionalÂØπË±°ÂÄºÔºåÂê¶ÂàôÔºåËøîÂõû‰∏Ä‰∏™ÂÄº‰∏∫Á©∫ÁöÑOptionalÂØπË±°„ÄÇ Â¶Ç‰ΩïÊ≠£Á°Æ‰ΩøÁî®OptionalÈÄöËøá‰∏äÈù¢ÁöÑ‰æãÂ≠êÂèØ‰ª•ÁúãÂá∫ÔºåOptionalÁ±ªÂèØ‰ª•‰ºòÈõÖÁöÑÈÅøÂÖçNullPointerExceptionÂ∏¶Êù•ÁöÑÂêÑÁßçÈóÆÈ¢òÔºå‰∏çËøáÔºå‰Ω†ÊòØÂê¶ÁúüÊ≠£ÊéåÊè°‰∫ÜOptionalÁöÑÁî®Ê≥ïÔºüÂÅáËÆæ‰Ω†ËØïÂõæ‰ΩøÁî®OptionalÊù•ÈÅøÂÖçÂèØËÉΩÂá∫Áé∞ÁöÑNullPointerExceptionÂºÇÂ∏∏ÔºåÁºñÂÜô‰∫ÜÂ¶Ç‰∏ã‰ª£Á†ÅÔºö Optional&lt;User> userOpt = Optional.ofNullable(user); if (userOpt.isPresent()) { User user = userOpt.get(); // do something... } else { // do something... } Âù¶ÁôΩËØ¥Ôºå‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏éÊàë‰ª¨‰πãÂâçÁöÑ‰ΩøÁî®ifËØ≠Âè•Âà§Êñ≠Á©∫ÂÄºÊ≤°Êúâ‰ªª‰ΩïÂå∫Âà´ÔºåÊ≤°ÊúâËµ∑Âà∞OptionalÁöÑÊ≠£Áúü‰ΩúÁî®Ôºö if (user != null) { // do something... } else { // do something... } ÂΩìÊàë‰ª¨‰ªé‰πãÂâçÁâàÊú¨ÂàáÊç¢Âà∞Java 8ÁöÑÊó∂ÂÄôÔºå‰∏çÂ∫îËØ•ËøòÊåâÁÖß‰πãÂâçÁöÑÊÄùÁª¥ÊñπÂºèÂ§ÑÁêÜnullÂÄºÔºåJava 8ÊèêÂÄ°ÂáΩÊï∞ÂºèÁºñÁ®ãÔºåÊñ∞Â¢ûÁöÑËÆ∏Â§öAPIÈÉΩÂèØ‰ª•Áî®ÂáΩÊï∞ÂºèÁºñÁ®ãË°®Á§∫ÔºåOptionalÁ±ª‰πüÊòØÂÖ∂‰∏≠‰πã‰∏Ä„ÄÇËøôÈáåÊúâÂá†Êù°ÂÖ≥‰∫éOptional‰ΩøÁî®ÁöÑÂª∫ËÆÆÔºö Â∞ΩÈáèÈÅøÂÖçÂú®Á®ãÂ∫è‰∏≠Áõ¥Êé•Ë∞ÉÁî®OptionalÂØπË±°ÁöÑget()ÂíåisPresent()ÊñπÊ≥ïÔºõ ÈÅøÂÖç‰ΩøÁî®OptionalÁ±ªÂûãÂ£∞ÊòéÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÔºõ Á¨¨‰∏ÄÊù°Âª∫ËÆÆ‰∏≠Áõ¥Êé•Ë∞ÉÁî®get()ÊñπÊ≥ïÊòØÂæàÂç±Èô©ÁöÑÂÅöÊ≥ïÔºåÂ¶ÇÊûúOptionalÁöÑÂÄº‰∏∫Á©∫ÔºåÈÇ£‰πàÊØ´Êó†ÁñëÈóÆ‰ºöÊäõÂá∫NullPointerExceptionÂºÇÂ∏∏ÔºåËÄå‰∏∫‰∫ÜË∞ÉÁî®get()ÊñπÊ≥ïËÄå‰ΩøÁî®isPresent()ÊñπÊ≥ï‰Ωú‰∏∫Á©∫ÂÄºÊ£ÄÊü•ÔºåËøôÁßçÂÅöÊ≥ï‰∏é‰º†ÁªüÁöÑÁî®ifËØ≠Âè•ÂùóÂÅöÁ©∫ÂÄºÊ£ÄÊü•Ê≤°Êúâ‰ªª‰ΩïÂå∫Âà´„ÄÇ Á¨¨‰∫åÊù°Âª∫ËÆÆÈÅøÂÖç‰ΩøÁî®Optional‰Ωú‰∏∫ÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÔºåÂÆÉÂú®ËÆæËÆ°ÁöÑÊó∂ÂÄôÂ∞±Ê≤°ÊúâËÄÉËôëËøáÁî®Êù•‰Ωú‰∏∫Á±ªÁöÑÂ±ûÊÄßÔºåÂ¶ÇÊûú‰Ω†Êü•ÁúãOptionalÁöÑÊ∫ê‰ª£Á†ÅÔºå‰Ω†‰ºöÂèëÁé∞ÂÆÉÊ≤°ÊúâÂÆûÁé∞java.io.SerializableÊé•Âè£ÔºåËøôÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÊòØÂæàÈáçË¶ÅÁöÑÔºàÊØîÂ¶Ç‰Ω†ÁöÑÈ°πÁõÆ‰∏≠‰ΩøÁî®‰∫ÜÊüê‰∫õÂ∫èÂàóÂåñÊ°ÜÊû∂ÔºâÔºå‰ΩøÁî®‰∫ÜOptional‰Ωú‰∏∫ÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÔºåÊÑèÂë≥ÁùÄ‰ªñ‰ª¨‰∏çËÉΩË¢´Â∫èÂàóÂåñ„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ÈÄöËøá‰∏Ä‰∫õ‰æãÂ≠êËÆ≤Ëß£OptionalÁöÑÊ≠£Á°ÆÁî®Ê≥ïÔºö Ê≠£Á°ÆÂàõÂª∫OptionalÂØπË±°‰∏äÈù¢ÊèêÂà∞ÂàõÂª∫OptionalÂØπË±°Êúâ‰∏â‰∏™ÊñπÊ≥ïÔºåempty()ÊñπÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÊ≤°‰ªÄ‰πàÁâπÂà´Ë¶ÅËØ¥ÊòéÁöÑ„ÄÇ‰∏ªË¶ÅÊòØof()ÂíåofNullable()ÊñπÊ≥ï„ÄÇÂΩì‰Ω†ÂæàÁ°ÆÂÆö‰∏Ä‰∏™ÂØπË±°‰∏çÂèØËÉΩ‰∏∫nullÁöÑÊó∂ÂÄôÔºåÂ∫îËØ•‰ΩøÁî®of()ÊñπÊ≥ïÔºåÂê¶ÂàôÔºåÂ∞ΩÂèØËÉΩ‰ΩøÁî®ofNullable()ÊñπÊ≥ïÔºåÊØîÂ¶ÇÔºö public static void method(Role role) { // ÂΩìOptionalÁöÑÂÄºÈÄöËøáÂ∏∏ÈáèËé∑ÂæóÊàñËÄÖÈÄöËøáÂÖ≥ÈîÆÂ≠ónewÂàùÂßãÂåñÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®of()ÊñπÊ≥ï Optional&lt;String> strOpt = Optional.of(\"Hello World\"); Optional&lt;User> userOpt = Optional.of(new User()); // ÊñπÊ≥ïÂèÇÊï∞‰∏≠roleÂÄº‰∏çÁ°ÆÂÆöÊòØÂê¶‰∏∫nullÔºå‰ΩøÁî®ofNullable()ÊñπÊ≥ïÂàõÂª∫ Optional&lt;Role> roleOpt = Optional.ofNullable(role); } orElse()ÊñπÊ≥ïÁöÑ‰ΩøÁî®return str != null ? str : \"Hello World\" ‰∏äÈù¢ÁöÑ‰ª£Á†ÅË°®Á§∫Âà§Êñ≠Â≠óÁ¨¶‰∏≤strÊòØÂê¶‰∏∫Á©∫Ôºå‰∏ç‰∏∫Á©∫Â∞±ËøîÂõûÔºåÂê¶ÂàôÔºåËøîÂõû‰∏Ä‰∏™Â∏∏Èáè„ÄÇ‰ΩøÁî®OptionalÁ±ªÂèØ‰ª•Ë°®Á§∫‰∏∫Ôºö return strOpt.orElse(\"Hello World\") ÁÆÄÂåñif-elseUser user = ... if (user != null) { String userName = user.getUserName(); if (userName != null) { return userName.toUpperCase(); } else { return null; } } else { return null; } ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁÆÄÂåñÊàêÔºö User user = ... Optional&lt;User> userOpt = Optional.ofNullable(user); return user.map(User::getUserName) .map(String::toUpperCase) .orElse(null); ÊÄªÁªì‰∏Ä‰∏ãÔºåÊñ∞ÁöÑOptionalÁ±ªËÆ©Êàë‰ª¨ÂèØ‰ª•‰ª•ÂáΩÊï∞ÂºèÁºñÁ®ãÁöÑÊñπÂºèÂ§ÑÁêÜnullÂÄºÔºåÊäõÂºÉ‰∫ÜJava 8‰πãÂâçÈúÄË¶ÅÂµåÂ•óÂ§ßÈáèif-else‰ª£Á†ÅÂùóÔºå‰Ωø‰ª£Á†ÅÂèØËØªÊÄßÊúâ‰∫ÜÂæàÂ§ßÁöÑÊèêÈ´ò„ÄÇ","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Java8 Êñ∞ÁâπÊÄß-lambdaË°®ËææÂºè","slug":"java8-lambda-expression","date":"2019-02-13T03:10:25.000Z","updated":"2024-07-01T12:30:37.373Z","comments":true,"path":"2019/02/13/java8-lambda-expression/","link":"","permalink":"http://iogogogo.github.io/2019/02/13/java8-lambda-expression/","excerpt":"","text":"2014Âπ¥3ÊúàÂèëÂ∏ÉÁöÑJava 8ÔºåÊúâÂèØËÉΩÊòØJavaÁâàÊú¨Êõ¥Êñ∞‰∏≠ÂèòÂåñÊúÄÂ§ßÁöÑ‰∏ÄÊ¨°„ÄÇÊñ∞ÁöÑJava 8‰∏∫ÂºÄÂèëËÄÖÂ∏¶Êù•‰∫ÜËÆ∏Â§öÈáçÈáèÁ∫ßÁöÑÊñ∞ÁâπÊÄßÔºåÂåÖÊã¨LambdaË°®ËææÂºèÔºåÊµÅÂºèÊï∞ÊçÆÂ§ÑÁêÜÔºåÊñ∞ÁöÑOptionalÁ±ªÔºåÊñ∞ÁöÑÊó•ÊúüÂíåÊó∂Èó¥APIÁ≠â„ÄÇËøô‰∫õÊñ∞ÁâπÊÄßÁªôJavaÂºÄÂèëËÄÖÂ∏¶Êù•‰∫ÜÁ¶èÈü≥ÔºåÁâπÂà´ÊòØLambdaË°®ËææÂºèÁöÑÊîØÊåÅÔºå‰ΩøÁ®ãÂ∫èËÆæËÆ°Êõ¥Âä†ÁÆÄÂåñ„ÄÇÊú¨ÁØáÊñáÁ´†Â∞ÜËÆ®ËÆ∫Ë°å‰∏∫ÂèÇÊï∞ÂåñÔºåLambdaË°®ËææÂºèÔºåÂáΩÊï∞ÂºèÊé•Âè£Á≠âÁâπÊÄß„ÄÇ Ë°å‰∏∫ÂèÇÊï∞ÂåñÂú®ËΩØ‰ª∂ÂºÄÂèëÁöÑËøáÁ®ã‰∏≠ÔºåÂºÄÂèë‰∫∫ÂëòÂèØËÉΩ‰ºöÈÅáÂà∞È¢ëÁπÅÁöÑÈúÄÊ±ÇÂèòÊõ¥Ôºå‰Ωø‰ªñ‰ª¨‰∏çÊñ≠Âú∞‰øÆÊîπÁ®ãÂ∫è‰ª•Â∫îÂØπËøô‰∫õÂèòÂåñÁöÑÈúÄÊ±ÇÔºåÂØºËá¥È°πÁõÆËøõÂ∫¶ÁºìÊÖ¢ÁîöËá≥È°πÁõÆÂª∂Êúü„ÄÇË°å‰∏∫ÂèÇÊï∞ÂåñÂ∞±ÊòØ‰∏ÄÁßçÂèØ‰ª•Â∏ÆÂä©‰Ω†Â∫îÂØπÈ¢ëÁπÅÈúÄÊ±ÇÂèòÊõ¥ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÁÆÄÂçïÁöÑËØ¥ÔºåÂ∞±ÊòØÈ¢ÑÂÖàÂÆö‰πâ‰∏Ä‰∏™‰ª£Á†ÅÂùóËÄå‰∏çÂéªÊâßË°åÂÆÉÔºåÊääÂÆÉÂΩìÂÅöÂèÇÊï∞‰º†ÈÄíÁªôÂè¶‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøôÊ†∑ÔºåËøô‰∏™ÊñπÊ≥ïÁöÑË°å‰∏∫Â∞±Ë¢´ËøôÊÆµ‰ª£Á†ÅÂùóÂèÇÊï∞Âåñ‰∫Ü„ÄÇ ‰∏∫‰∫ÜÊñπ‰æøÁêÜËß£ÔºåÊàë‰ª¨ÈÄöËøá‰∏Ä‰∏™‰æãÂ≠êÊù•ËÆ≤Ëß£Ë°å‰∏∫ÂèÇÊï∞ÂåñÁöÑ‰ΩøÁî®„ÄÇÂÅáËÆæÊàë‰ª¨Ê≠£Âú®ÂºÄÂèë‰∏Ä‰∏™Âõæ‰π¶ÁÆ°ÁêÜÁ≥ªÁªüÔºåÈúÄÊ±ÇÊòØË¶ÅÂØπÂõæ‰π¶ÁöÑ‰ΩúËÄÖËøõË°åËøáÊª§ÔºåÁ≠õÈÄâÂá∫ÊåáÂÆö‰ΩúËÄÖÁöÑ‰π¶Á±ç„ÄÇÊØîËæÉÂ∏∏ËßÅÁöÑÂÅöÊ≥ïÂ∞±ÊòØÁºñÂÜô‰∏Ä‰∏™ÊñπÊ≥ïÔºåÊää‰ΩúËÄÖÂΩìÊàêÊñπÊ≥ïÁöÑÂèÇÊï∞Ôºö public List&lt;Book> filterByAuthor(List&lt;Book> books, String author) { List&lt;Book> result = new ArrayList&lt;>(); for (Book book : books) { if (author.equals(book.getAuthor())) { result.add(book); } } return result; } Áé∞Âú®ÂÆ¢Êà∑ÈúÄË¶ÅÂèòÊõ¥ÈúÄÊ±ÇÔºåÊ∑ªÂä†ËøáÊª§Êù°‰ª∂ÔºåÊåâÁÖßÂá∫ÁâàÁ§æËøáÊª§Ôºå‰∫éÊòØÊàë‰ª¨‰∏çÂæó‰∏çÂÜçÊ¨°ÁºñÂÜô‰∏Ä‰∏™ÊñπÊ≥ïÔºö public List&lt;Book> filterByPublisher(List&lt;Book> books, String publisher) { List&lt;Book> result = new ArrayList&lt;>(); for (Book book : books) { if (publisher.equals(book.getPublisher())) { result.add(book); } } return result; } ‰∏§‰∏™ÊñπÊ≥ïÈô§‰∫ÜÂêçÁß∞‰πãÂ§ñÔºåÂÜÖÈÉ®ÁöÑÂÆûÁé∞ÈÄªËæëÂá†‰πé‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØifÂà§Êñ≠Êù°‰ª∂ÔºåÂâçËÄÖÂà§Êñ≠ÁöÑÊòØ‰ΩúËÄÖÔºåÂêéËÄÖÂà§Êñ≠ÁöÑÊòØÂá∫ÁâàÁ§æ„ÄÇÂ¶ÇÊûúÁé∞Âú®ÂÆ¢Êà∑ÂèàË¶ÅÂ¢ûÂä†ÈúÄÊ±ÇÔºåÈúÄË¶ÅÊåâÁÖßÂõæ‰π¶ÁöÑÂîÆ‰ª∑ËøáÊª§ÔºåÊòØ‰∏çÊòØÈúÄË¶ÅÂÜçÊ¨°Â∞Ü‰∏äÈù¢ÁöÑÊñπÊ≥ïÂ§çÂà∂‰∏ÄÈÅçÔºåÂ∞ÜifÂà§Êñ≠Êù°‰ª∂Êîπ‰∏∫ÂîÆ‰ª∑Ôºü No! ËøôÁßçÂÅöÊ≥ïËøùËÉå‰∫ÜDRYÔºàDon‚Äôt Repeat YourselfÔºå‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºâÂéüÂàôÔºåËÄå‰∏î‰∏çÂà©‰∫éÂêéÊúüÁª¥Êä§ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊîπÂèòÊñπÊ≥ïÂÜÖÈÉ®ÈÅçÂéÜÊñπÂºèÊù•ÊèêÈ´òÊÄßËÉΩÔºåÊÑèÂë≥ÁùÄÊØè‰∏™filterByXxx()ÊñπÊ≥ïÈÉΩÈúÄË¶Å‰øÆÊîπÔºåÂ∑•‰ΩúÈáèÂ§™Â§ß„ÄÇ ‰∏ÄÁßçÂèØË°åÁöÑÂäûÊ≥ïÊòØÂØπËøáÊª§ÁöÑÊù°‰ª∂ÂÅöÊõ¥È´òÂ±ÇÁöÑÊäΩË±°ÔºåËøáÊª§ÁöÑÊù°‰ª∂Êó†ÈùûÂ∞±ÊòØÂõæ‰π¶ÁöÑÊüê‰∫õÂ±ûÊÄßÔºàÊØîÂ¶Ç‰ª∑Ê†º„ÄÅÂá∫ÁâàÁ§æ„ÄÅÂá∫ÁâàÊó•Êúü„ÄÅ‰ΩúËÄÖÁ≠âÔºâÔºåÂèØ‰ª•Â£∞Êòé‰∏Ä‰∏™Êé•Âè£Áî®‰∫éÂØπËøáÊª§Êù°‰ª∂Âª∫Ê®°Ôºö public interface BookPredicate { public boolean test(Book book); } BookPredicateÊé•Âè£Âè™Êúâ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïtest()ÔºåËØ•ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™BookÁ±ªÂûãÂèÇÊï∞ÔºåËøîÂõû‰∏Ä‰∏™booleanÂÄºÔºåÂèØ‰ª•Áî®ÂÆÉÊù•Ë°®Á§∫Âõæ‰π¶ÁöÑ‰∏çÂêåËøáÊª§Êù°‰ª∂„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨ÂØπ‰πãÂâçÁöÑËøáÊª§ÊñπÊ≥ïËøõË°åÈáçÊûÑÔºåÂ∞ÜfilterByXxx()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Êç¢Êàê‰∏äÈù¢ÂÆö‰πâÁöÑÊé•Âè£Ôºö public List&lt;Book> filter(List&lt;Book> books, BookPredicate bookPredicate) { List&lt;Book> result = new ArrayList&lt;>(); for (Book book : books) { if (bookPredicate.test(book)) { result.add(book); } } return result; } Â∞ÜËøáÊª§ÁöÑÊù°‰ª∂Êç¢ÊàêBookPredicateÁöÑÂÆûÁé∞Á±ªÔºåËøôÈáåÈááÁî®‰∫ÜÂÜÖÈÉ®Á±ªÔºö // Ê†πÊçÆ‰ΩúËÄÖËøáÊª§ final String author = \"Âº†‰∏â\"; List&lt;Book> result = filter(books, new BookPredicate() { @Override public boolean test(Book book) { return author.equals(book.getAuthor()); } }); // Ê†πÊçÆÂõæ‰π¶‰ª∑Ê†ºËøáÊª§ final double price = 100.00D; List&lt;Book> result = filter(books, new BookPredicate() { @Override public boolean test(Book book) { return price > book.getPrice(); } }); ÈáçÊûÑÂâçÂêéÊúâ‰ªÄ‰πàÂå∫Âà´ÔºüÊàë‰ª¨Â∞ÜÊñπÊ≥ï‰∏≠ÁöÑifÂà§Êñ≠Êù°‰ª∂Êç¢Êàê‰∫ÜBookPredicateÊé•Âè£ÂÆö‰πâÁöÑtest()ÊñπÊ≥ïÔºåÁî®‰∫éÂà§Êñ≠ÊòØÂê¶Êª°Ë∂≥ËøáÊª§Êù°‰ª∂ÔºåÂ∞ÜÂõæ‰π¶ËøáÊª§ÁöÑÈÄªËæë‰∫§Áªô‰∫ÜBookPredicateÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåËÄå‰∏çÊòØÂú®filter()ÊñπÊ≥ïÂÜÖÈÉ®ÂÆûÁé∞ËøáÊª§ÔºåËÄåBookPredicateÊé•Âè£ÂèàÊòØfilter()ÊñπÊ≥ïÁöÑÂèÇÊï∞„ÄÇ‰ª•‰∏äÁöÑÊ≠•È™§ÔºåÂ∞±ÊòØÂ∞ÜË°å‰∏∫ÂèÇÊï∞ÂåñÔºå‰πüÂ∞±ÊòØÂ∞ÜÂõæ‰π¶ËøáÊª§ÁöÑË°å‰∏∫ÔºàBookPredicateÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºâÂΩìÂÅöfilter()ÊñπÊ≥ïÁöÑÂèÇÊï∞„ÄÇÁé∞Âú®ÔºåÂèØ‰ª•Âà†ÊéâÊâÄÊúâfilterByXxx()ÁöÑÊñπÊ≥ïÔºåÂè™‰øùÁïôfilter()ÊñπÊ≥ïÔºåÂ∞±ÁÆóÂêéÊúüÊï∞ÊçÆËßÑÊ®°ÂæàÂ∫ûÂ§ßÔºåÈúÄË¶ÅÊîπÂèòÈõÜÂêàÁöÑÈÅçÂéÜÊñπÂºèÊù•ÊèêÈ´òÊÄßËÉΩÔºåÂè™ÈúÄË¶ÅÂú®filter()ÊñπÊ≥ïÂÜÖÈÉ®ÂÅöÂá∫Áõ∏Â∫îÁöÑ‰øÆÊîπÔºåËÄå‰∏çÁî®Âéª‰øÆÊîπÂÖ∂‰ªñ‰∏öÂä°‰ª£Á†Å„ÄÇ ‰∏çËøáÔºåBookPredicateÊé•Âè£Âè™ÊòØÈíàÂØπÂõæ‰π¶ÁöÑËøáÊª§ÔºåÂ¶ÇÊûúÈúÄË¶ÅÂØπÂÖ∂‰ªñÂØπË±°ÈõÜÂêàÊéíÂ∫èÔºàÂ¶ÇÔºöÁî®Êà∑ÔºâÔºåÂèàÂæóÈáçÊñ∞Áî≥Êòé‰∏Ä‰∏™Êé•Âè£„ÄÇÊúâ‰∏Ä‰∏™ÂäûÊ≥ïÂ∞±ÊòØÂèØ‰ª•Áî®JavaÁöÑÊ≥õÂûãÂØπÂÆÉÂÅöËøõ‰∏ÄÊ≠•ÁöÑÊäΩË±°Ôºö public interface Predicate&lt;T> { public boolean test(T t); } Áé∞Âú®‰Ω†ÂèØ‰ª•Êääfilter()ÊñπÊ≥ïÁî®Âú®‰ªª‰ΩïÂØπË±°ÁöÑËøáÊª§‰∏≠„ÄÇ LambdaË°®ËææÂºèËôΩÁÑ∂Êàë‰ª¨ÂØπfilter()ÊñπÊ≥ïËøõË°åÈáçÊûÑÔºåÂπ∂ÊäΩË±°‰∫ÜPredicateÊé•Âè£‰Ωú‰∏∫ËøáÊª§ÁöÑÊù°‰ª∂Ôºå‰ΩÜÂÆûÈôÖ‰∏äËøòÈúÄË¶ÅÁºñÂÜôÂæàÂ§öÂÜÖÈÉ®Á±ªÊù•ÂÆûÁé∞PredicateÊé•Âè£„ÄÇ‰ΩøÁî®ÂÜÖÈÉ®Á±ªÁöÑÊñπÂºèÂÆûÁé∞PredicateÊé•Âè£ÊúâÂæàÂ§öÁº∫ÁÇπÔºöÈ¶ñÂÖàÊòØ‰ª£Á†ÅÊòæÂæóËáÉËÇø‰∏çÂ†™ÔºåÂèØËØªÊÄßÂ∑ÆÔºõÂÖ∂Ê¨°ÔºåÂ¶ÇÊûúÊüê‰∏™Â±ÄÈÉ®ÂèòÈáèË¢´ÂÜÖÈÉ®Á±ª‰ΩøÁî®ÔºåËøô‰∏™ÂèòÈáèÂøÖÈ°ª‰ΩøÁî®finalÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞„ÄÇÂú®Java 8‰∏≠Ôºå‰ΩøÁî®LambdaË°®ËææÂºèÂèØ‰ª•ÂØπÂÜÖÈÉ®Á±ªËøõ‰∏ÄÊ≠•ÁÆÄÂåñÔºö // Ê†πÊçÆ‰ΩúËÄÖËøáÊª§ List&lt;Book> result = filter(books, book -> \"Âº†‰∏â\".equals(book.getAuthor())); // Ê†πÊçÆÂõæ‰π¶‰ª∑Ê†ºËøáÊª§ List&lt;Book> result = filter(books, book -> 100 > book.getPrice()); ‰ΩøÁî®Lambda‰ªÖ‰ªÖÁî®‰∏ÄË°å‰ª£Á†ÅÂ∞±ÂØπÂÜÖÈÉ®Á±ªËøõË°å‰∫ÜËΩ¨ÂåñÔºåËÄå‰∏î‰ª£Á†ÅÂèòÂæóÊõ¥Âä†Ê∏ÖÊô∞ÂèØËØª„ÄÇÂÖ∂‰∏≠book -&gt; &quot;Âº†‰∏â&quot;.equals(book.getAuthor())Âíåbook -&gt; 100 &gt; book.getPrice()Â∞±ÊòØÊàë‰ª¨Êé•‰∏ãÊù•Ë¶ÅÁ†îÁ©∂ÁöÑLambdaË°®ËææÂºè„ÄÇ LambdaË°®ËææÂºèÊòØ‰ªÄ‰πàLambdaË°®ËææÂºèÔºàlambda expressionÔºâÊòØ‰∏Ä‰∏™ÂåøÂêçÂáΩÊï∞ÔºåÁî±Êï∞Â≠¶‰∏≠ÁöÑŒªÊºîÁÆóËÄåÂæóÂêç„ÄÇÂú®Java 8‰∏≠ÂèØ‰ª•ÊääLambdaË°®ËææÂºèÁêÜËß£‰∏∫ÂåøÂêçÂáΩÊï∞ÔºåÂÆÉÊ≤°ÊúâÂêçÁß∞Ôºå‰ΩÜÊòØÊúâÂèÇÊï∞ÂàóË°®„ÄÅÂáΩÊï∞‰∏ª‰Ωì„ÄÅËøîÂõûÁ±ªÂûãÁ≠â„ÄÇ LambdaË°®ËææÂºèÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö (parameters) -> { statements; } ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®LambdaË°®ËææÂºèÔºüÂâçÈù¢‰Ω†‰πüÁúãÂà∞‰∫ÜÔºåÂú®Java‰∏≠‰ΩøÁî®ÂÜÖÈÉ®Á±ªÊòæÂæóÂçÅÂàÜÂÜóÈïøÔºåË¶ÅÁºñÂÜôÂæàÂ§öÊ†∑Êùø‰ª£Á†ÅÔºåLambdaË°®ËææÂºèÊ≠£ÊòØ‰∏∫‰∫ÜÁÆÄÂåñËøô‰∫õÊ≠•È™§Âá∫Áé∞ÁöÑÔºåÂÆÉ‰Ωø‰ª£Á†ÅÂèòÂæóÊ∏ÖÊô∞ÊòìÊáÇ„ÄÇ Â¶Ç‰Ωï‰ΩøÁî®LambdaË°®ËææÂºèLambdaË°®ËææÂºèÊòØ‰∏∫‰∫ÜÁÆÄÂåñÂÜÖÈÉ®Á±ªÁöÑÔºå‰Ω†ÂèØ‰ª•ÊääÂÆÉÂΩìÊàêÊòØÂÜÖÈÉ®Á±ªÁöÑ‰∏ÄÁßçÁÆÄÂÜôÊñπÂºèÔºåÂè™Ë¶ÅÊòØÊúâÂÜÖÈÉ®Á±ªÁöÑ‰ª£Á†ÅÂùóÔºåÈÉΩÂèØ‰ª•ËΩ¨ÂåñÊàêLambdaË°®ËææÂºèÔºö // ComparatorÊéíÂ∫è List&lt;Integer> list = Arrays.asList(3, 1, 4, 5, 2); list.sort(new Comparator&lt;Integer>() { @Override public int compare(Integer o1, Integer o2) { return o1.compareTo(o2); } }); // ‰ΩøÁî®LambdaË°®ËææÂºèÁÆÄÂåñ list.sort((o1, o2) -> o1.compareTo(o2)); // Runnable‰ª£Á†ÅÂùó Thread thread = new Thread(new Runnable() { @Override public void run() { System.out.println(\"Hello Man!\"); } }); // ‰ΩøÁî®LambdaË°®ËææÂºèÁÆÄÂåñ Thread thread = new Thread(() -> System.out.println(\"Hello Man!\")); ÂèØ‰ª•ÁúãÂá∫ÔºåÂè™Ë¶ÅÊòØÂÜÖÈÉ®Á±ªÁöÑ‰ª£Á†ÅÂùóÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®LambdaË°®ËææÂºèÁÆÄÂåñÔºåÂπ∂‰∏îÁÆÄÂåñÂêéÁöÑ‰ª£Á†ÅÊ∏ÖÊô∞ÊòìÊáÇ„ÄÇÁîöËá≥ÔºåComparatorÊéíÂ∫èÁöÑLambdaË°®ËææÂºèËøòÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÁÆÄÂåñÔºö list.sort(Integer::compareTo); ËøôÁßçÂÜôÊ≥ïË¢´Áß∞‰∏∫ ÊñπÊ≥ïÂºïÁî®ÔºåÊñπÊ≥ïÂºïÁî®ÊòØLambdaË°®ËææÂºèÁöÑÁÆÄ‰æøÂÜôÊ≥ï„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑLambdaË°®ËææÂºèÂè™ÊòØË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºåÊúÄÂ•Ω‰ΩøÁî®ÂêçÁß∞Ë∞ÉÁî®ÔºåËÄå‰∏çÊòØÊèèËø∞Â¶Ç‰ΩïË∞ÉÁî®ÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´ò‰ª£Á†ÅÁöÑÂèØËØªÊÄß„ÄÇ ÊñπÊ≥ïÂºïÁî®‰ΩøÁî®::ÂàÜÈöîÁ¨¶ÔºåÂàÜÈöîÁ¨¶ÁöÑÂâçÂçäÈÉ®ÂàÜË°®Á§∫ÂºïÁî®Á±ªÂûãÔºåÂêéÈù¢ÂçäÈÉ®ÂàÜË°®Á§∫ÂºïÁî®ÁöÑÊñπÊ≥ïÂêçÁß∞„ÄÇ‰æãÂ¶ÇÔºöInteger::compareToË°®Á§∫ÂºïÁî®Á±ªÂûã‰∏∫IntegerÔºåÂºïÁî®ÂêçÁß∞‰∏∫compareToÁöÑÊñπÊ≥ï„ÄÇ Á±ª‰ºº‰ΩøÁî®ÊñπÊ≥ïÂºïÁî®ÁöÑ‰æãÂ≠êËøòÊúâÊâìÂç∞ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†Âà∞ÊéßÂà∂Âè∞‰∏≠Ôºö list.forEach(System.out::println); ÂáΩÊï∞ÂºèÊé•Âè£Â¶ÇÊûú‰Ω†ÁöÑÂ•ΩÂ•áÂøÉ‰Ωø‰Ω†ÁøªÁúãRunnableÊé•Âè£Ê∫ê‰ª£Á†ÅÔºå‰Ω†‰ºöÂèëÁé∞ËØ•Êé•Âè£Ë¢´‰∏Ä‰∏™@FunctionalInterfaceÁöÑÊ≥®Ëß£‰øÆÈ•∞ÔºåËøôÊòØJava 8‰∏≠Ê∑ªÂä†ÁöÑÊñ∞Ê≥®Ëß£ÔºåÁî®‰∫éË°®Á§∫ ÂáΩÊï∞ÂºèÊé•Âè£„ÄÇ ÂáΩÊï∞ÂºèÊé•Âè£ÂèàÊòØ‰ªÄ‰πàÈ¨ºÔºüÂú®Java 8‰∏≠ÔºåÊääÈÇ£‰∫õ‰ªÖÊúâ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÁöÑÊé•Âè£Áß∞‰∏∫ÂáΩÊï∞ÂºèÊé•Âè£„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Êé•Âè£Ë¢´@FunctionalInterfaceÊ≥®Ëß£Ê†áÊ≥®ÔºåË°®Á§∫Ëøô‰∏™Êé•Âè£Ë¢´ËÆæËÆ°ÊàêÂáΩÊï∞ÂºèÊé•Âè£ÔºåÂè™ËÉΩÊúâ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÔºåÂ¶ÇÊûú‰Ω†Ê∑ªÂä†Â§ö‰∏™ÊäΩË±°ÊñπÊ≥ïÔºåÁºñËØëÊó∂‰ºöÊèêÁ§∫‚ÄúMultiple non-overriding abstract methods found in interface XXX‚Äù‰πãÁ±ªÁöÑÈîôËØØ„ÄÇ ÂáΩÊï∞ÂºèÊñπÊ≥ïÂèàËÉΩÂÅö‰ªÄ‰πàÔºüJava8ÂÖÅËÆ∏‰Ω†‰ª•LambdaË°®ËææÂºèÁöÑÊñπÂºè‰∏∫ÂáΩÊï∞ÂºèÊé•Âè£Êèê‰æõÂÆûÁé∞ÔºåÈÄö‰øóÁöÑËØ¥Ôºå‰Ω†ÂèØ‰ª•Â∞ÜÊï¥‰∏™LambdaË°®ËææÂºè‰Ωú‰∏∫Êé•Âè£ÁöÑÂÆûÁé∞Á±ª„ÄÇ Èô§‰∫ÜRunnable‰πãÂ§ñÔºåJava 8‰∏≠ÂÜÖÁΩÆ‰∫ÜËÆ∏Â§öÂáΩÊï∞ÂºèÊé•Âè£‰æõÂºÄÂèëËÄÖ‰ΩøÁî®ÔºåËøô‰∫õÊé•Âè£‰Ωç‰∫éjava.util.functionÂåÖ‰∏≠ÔºåÊàë‰ª¨‰πãÂâç‰ΩøÁî®ÁöÑPredicateÊé•Âè£ÔºåÂ∑≤ÁªèË¢´ÂåÖÂê´Âú®Ëøô‰∏™ÂåÖÂÜÖÔºå‰ªñ‰ª¨ÂàÜÂà´‰∏∫Predicate„ÄÅConsumerÂíåFunctionÔºåÁî±‰∫éÊàë‰ª¨Â∑≤ÁªèÂú®‰πãÂâçÁöÑÂõæ‰π¶ËøáÊª§ÁöÑ‰æãÂ≠ê‰∏≠‰ªãÁªç‰∫ÜPredicateÁöÑÁî®Ê≥ïÔºåÊâÄ‰ª•Êé•‰∏ãÊù•‰∏ªË¶Å‰ªãÁªçConsumerÂíåFunctionÁöÑÁî®Ê≥ï„ÄÇ Consumerjava.util.function.Consumer&lt;T&gt;ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂêçÂè´accept()ÁöÑÊäΩË±°ÊñπÊ≥ïÔºåÂÆÉÊé•ÂèóÊ≥õÂûãTÁöÑÂØπË±°ÔºåÊ≤°ÊúâËøîÂõûÔºàvoidÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅËÆøÈóÆÁ±ªÂûãTÁöÑÂØπË±°ÔºåÂπ∂ÂØπÂÖ∂ÊâßË°åÊüê‰∫õÊìç‰ΩúÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™Êé•Âè£„ÄÇÊØîÂ¶ÇÔºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉÊù•ÂàõÂª∫‰∏Ä‰∏™forEach()ÊñπÊ≥ïÔºåÊé•Âèó‰∏Ä‰∏™ÈõÜÂêàÔºåÂπ∂ÂØπÈõÜÂêà‰∏≠ÊØè‰∏™ÂÖÉÁ¥†ÊâßË°åÊìç‰ΩúÔºö @FunctionalInterface public interface Consumer&lt;T> { void accept(T t); } public static &lt;T> void forEach(List&lt;T> list, Consumer&lt;T> consumer) { for(T t: list){ consumer.accept(t); } } public static void main(String[] args) { List&lt;String> list = Arrays.asList(\"A\", \"B\", \"C\", \"D\"); forEach(list, str -> System.out.println(str)); // ‰πüÂèØ‰ª•ÂÜôÊàê forEach(list, System.out::println); } Functionjava.util.function.Function&lt;T, R&gt;Êé•Âè£ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Âè´‰Ωúapply()ÁöÑÊñπÊ≥ïÔºåÂÆÉÊé•Âèó‰∏Ä‰∏™Ê≥õÂûãTÁöÑÂØπË±°ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Ê≥õÂûãRÁöÑÂØπË±°„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™LambdaÔºåÂ∞ÜËæìÂÖ•ÂØπË±°ÁöÑ‰ø°ÊÅØÊò†Â∞ÑÂà∞ËæìÂá∫ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™Êé•Âè£„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÈúÄË¶ÅËÆ°ÁÆó‰∏Ä‰∏™Âõæ‰π¶ÈõÜÂêà‰∏≠ÊØèÊú¨‰π¶ÁöÑ‰ΩúËÄÖÂêçÁß∞ÊúâÂá†‰∏™Ê±âÂ≠óÔºàÂÅáËÆæËøô‰∫õ‰π¶ÁöÑ‰ΩúËÄÖÈÉΩÊòØ‰∏≠ÂõΩ‰∫∫ÔºâÔºö @FunctionalInterface public interface Function&lt;T, R> { R apply(T t); } public static &lt;T, R> List&lt;R> map(List&lt;T> list, Function&lt;T, R> f) { List&lt;R> result = new ArrayList&lt;>(); for(T s: list){ result.add(f.apply(s)); } return result; } public static void main(String[] args) { List&lt;Book> books = Arrays.asList( new Book(\"Âº†‰∏â\", 99.00D), new Book(\"ÊùéÂõõ\", 59.00D), new Book(\"ÁéãËÄÅ‰∫î\", 59.00D) ); List&lt;Integer> results = map(books, book -> book.getAuthor().length()); } Áé∞Âú®ÔºåÂ∫îËØ•ÂØπLambdaË°®ËææÂºèÊúâ‰∏Ä‰∏™ÂàùÊ≠•ÁöÑ‰∫ÜËß£‰∫ÜÔºåÂπ∂‰∏îÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®LambdaË°®ËææÂºèÊù•ÈáçÊûÑ‰Ω†ÁöÑ‰ª£Á†ÅÔºåÊèêÈ´ò‰ª£Á†ÅÂèØËØªÊÄßÔºõ‰ΩøÁî®Ë°å‰∏∫ÂèÇÊï∞ÂåñÊù•ËÆæËÆ°‰Ω†ÁöÑÁ®ãÂ∫èÔºåËÆ©Á®ãÂ∫èÊõ¥ÁÅµÊ¥ª„ÄÇ","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Java8 Êñ∞ÁâπÊÄß-ÊµÅÂ§ÑÁêÜ","slug":"java8-stream-api","date":"2019-02-13T02:32:16.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2019/02/13/java8-stream-api/","link":"","permalink":"http://iogogogo.github.io/2019/02/13/java8-stream-api/","excerpt":"","text":"Java 8ÁöÑÂè¶‰∏Ä‰∏™Êñ∞ÁâπÊÄß‚Äî‚ÄîStream API„ÄÇÊñ∞Â¢ûÁöÑStream API‰∏éInputStreamÂíåOutputStreamÊòØÂÆåÂÖ®‰∏çÂêåÁöÑÊ¶ÇÂøµÔºåStream APIÊòØÂØπJava‰∏≠ÈõÜÂêàÊìç‰ΩúÁöÑÂ¢ûÂº∫ÔºåÂèØ‰ª•Âà©Áî®ÂÆÉËøõË°åÂêÑÁßçËøáÊª§„ÄÅÊéíÂ∫è„ÄÅÂàÜÁªÑ„ÄÅËÅöÂêàÁ≠âÊìç‰Ωú„ÄÇStream APIÈÖçÂêàLambdaË°®ËææÂºèÂèØ‰ª•Âä†Â§ßÁöÑÊèêÈ´ò‰ª£Á†ÅÂèØËØªÊÄßÂíåÁºñÁ†ÅÊïàÁéáÔºåStream API‰πüÊîØÊåÅÂπ∂Ë°åÊìç‰ΩúÔºåÊàë‰ª¨‰∏çÁî®ÂÜçËä±Ë¥πÂæàÂ§öÁ≤æÂäõÊù•ÁºñÂÜôÂÆπÊòìÂá∫ÈîôÁöÑÂ§öÁ∫øÁ®ã‰ª£Á†Å‰∫ÜÔºåStream APIÂ∑≤ÁªèÊõøÊàë‰ª¨ÂÅöÂ•Ω‰∫ÜÔºåÂπ∂‰∏îÂÖÖÂàÜÂà©Áî®Â§öÊ†∏CPUÁöÑ‰ºòÂäø„ÄÇÂÄüÂä©Stream APIÂíåLambdaÔºåÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÁºñÂÜôÂá∫È´òÊÄßËÉΩÁöÑÂπ∂ÂèëÂ§ÑÁêÜÁ®ãÂ∫è„ÄÇ Stream APIÁÆÄ‰ªãStream APIÊòØJava 8‰∏≠Âä†ÂÖ•ÁöÑ‰∏ÄÂ•óÊñ∞ÁöÑAPIÔºå‰∏ªË¶ÅÁî®‰∫éÂ§ÑÁêÜÈõÜÂêàÊìç‰ΩúÔºå‰∏çËøáÂÆÉÁöÑÂ§ÑÁêÜÊñπÂºè‰∏é‰º†ÁªüÁöÑÊñπÂºè‰∏çÂêåÔºåÁß∞‰∏∫‚ÄúÊï∞ÊçÆÊµÅÂ§ÑÁêÜ‚Äù„ÄÇÊµÅÔºàStreamÔºâÁ±ª‰ºº‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑÊü•ËØ¢Êìç‰ΩúÔºåÊòØ‰∏ÄÁßçÂ£∞ÊòéÂºèÊìç‰Ωú„ÄÇÊØîÂ¶ÇË¶Å‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÊâÄÊúâÂπ¥ÈæÑÂ§ß‰∫é20Â≤ÅÁöÑÁî®Êà∑ÁöÑÂêçÁß∞ÔºåÂπ∂ÊåâÁÖßÁî®Êà∑ÁöÑÂàõÂª∫Êó∂Èó¥ËøõË°åÊéíÂ∫èÔºåÁî®‰∏ÄÊù°SQLËØ≠Âè•Â∞±ÂèØ‰ª•ÊêûÂÆöÔºå‰∏çËøá‰ΩøÁî®JavaÁ®ãÂ∫èÂÆûÁé∞Â∞±‰ºöÊòæÂæóÊúâ‰∫õÁπÅÁêêÔºåËøôÊó∂ÂÄôÂèØ‰ª•‰ΩøÁî®ÊµÅÔºö List&lt;String> userNames = users.stream() .filter(user -> user.getAge() > 20) .sorted(comparing(User::getCreationDate)) .map(User::getUserName) .collect(toList()); ÂèØ‰ª•ÊääÊµÅË∑üÈõÜÂêàÂÅö‰∏Ä‰∏™ÊØîËæÉ„ÄÇÂú®Java‰∏≠ÔºåÈõÜÂêàÊòØ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÊàñËÄÖËØ¥ÊòØ‰∏ÄÁßçÂÆπÂô®ÔºåÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆÔºåÊµÅ‰∏çÊòØÂÆπÂô®ÔºåÂÆÉ‰∏çÂÖ≥ÂøÉÊï∞ÊçÆÁöÑÂ≠òÊîæÔºåÂè™ÂÖ≥Ê≥®Â¶Ç‰ΩïÂ§ÑÁêÜ„ÄÇÂèØ‰ª•ÊääÊµÅÂΩìÂÅöÊòØJava‰∏≠ÁöÑIteratorÔºå‰∏çËøáÂÆÉÊØîIteratorÂº∫Â§ßÂ§ö‰∫Ü„ÄÇ ÊµÅ‰∏éÈõÜÂêàÂè¶‰∏Ä‰∏™Âå∫Âà´Âú®‰∫é‰ªñ‰ª¨ÁöÑÈÅçÂéÜÊñπÂºèÔºåÈÅçÂéÜÈõÜÂêàÈÄöÂ∏∏‰ΩøÁî®for-eachÊñπÂºèÔºåËøôÁßçÊñπÂºèÁß∞‰∏∫Â§ñÈÉ®Ëø≠‰ª£ÔºåËÄåÊµÅ‰ΩøÁî®ÂÜÖÈÉ®Ëø≠‰ª£ÊñπÂºèÔºå‰πüÂ∞±ÊòØËØ¥ÂÆÉÂ∏Æ‰Ω†ÊääËø≠‰ª£ÁöÑÂ∑•‰ΩúÂÅö‰∫ÜÔºå‰Ω†Âè™ÈúÄË¶ÅÁªôÂá∫‰∏Ä‰∏™ÂáΩÊï∞Êù•ÂëäËØâÂÆÉÊé•‰∏ãÊù•Ë¶ÅÂπ≤‰ªÄ‰πàÔºö // Â§ñÈÉ®Ëø≠‰ª£ List&lt;String> list = Arrays.asList(\"A\", \"B\", \"C\", \"D\"); for (String str : list) { System.out.println(str); } // ÂÜÖÈÉ®Ëø≠‰ª£ list.stream().forEach(System.out::println); Âú®Ëøô‰∏™Â§ßÊï∞ÊçÆÁöÑÊó∂‰ª£ÔºåÊï∞ÊçÆÂèòÂæóË∂äÊù•Ë∂äÂ§öÊ†∑ÂåñÔºåÂæàÂ§öÊó∂ÂÄôÊàë‰ª¨‰ºöÈù¢ÂØπÊµ∑ÈáèÊï∞ÊçÆÔºåÂπ∂ÂØπÂÖ∂ÂÅö‰∏Ä‰∫õÂ§çÊùÇÁöÑÊìç‰ΩúÔºàÊØîÂ¶ÇÁªüËÆ°ÔºåÂàÜÁªÑÔºâÔºå‰æùÁÖß‰º†ÁªüÁöÑÈÅçÂéÜÊñπÂºèÔºàfor-eachÔºâÔºåÊØèÊ¨°Âè™ËÉΩÂ§ÑÁêÜÈõÜÂêà‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂπ∂‰∏îÊòØÊåâÈ°∫Â∫èÂ§ÑÁêÜÔºåËøôÁßçÊñπÊ≥ïÊòØÊûÅÂÖ∂‰ΩéÊïàÁöÑ„ÄÇ‰Ω†‰πüËÆ∏‰ºöÊÉ≥Âà∞Âπ∂Ë°åÂ§ÑÁêÜÔºå‰ΩÜÊòØÁºñÂÜôÂ§öÁ∫øÁ®ã‰ª£Á†ÅÂπ∂ÈùûÊòì‰∫ãÔºåÂæàÂÆπÊòìÂá∫ÈîôÂπ∂‰∏îÁª¥Êä§Âõ∞Èöæ„ÄÇ‰∏çËøáÂú®Java 8‰πãÂêéÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Stream APIÊù•Ëß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢ò„ÄÇ Stream APIÂ∞ÜËø≠‰ª£Êìç‰ΩúÂ∞ÅË£ÖÂà∞‰∫ÜÂÜÖÈÉ®ÔºåÂÆÉ‰ºöËá™Âä®ÁöÑÈÄâÊã©ÊúÄ‰ºòÁöÑËø≠‰ª£ÊñπÂºèÔºåÂπ∂‰∏î‰ΩøÁî®Âπ∂Ë°åÊñπÂºèÂ§ÑÁêÜÊó∂ÔºåÂ∞ÜÈõÜÂêàÂàÜÊàêÂ§öÊÆµÔºåÊØè‰∏ÄÊÆµÂàÜÂà´‰ΩøÁî®‰∏çÂêåÁöÑÁ∫øÁ®ãÂ§ÑÁêÜÔºåÊúÄÂêéÂ∞ÜÂ§ÑÁêÜÁªìÊûúÂêàÂπ∂ËæìÂá∫„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊµÅÂè™ËÉΩÈÅçÂéÜ‰∏ÄÊ¨°ÔºåÈÅçÂéÜÁªìÊùüÂêéÔºåËøô‰∏™ÊµÅÂ∞±Ë¢´ÂÖ≥Èó≠Êéâ‰∫Ü„ÄÇÂ¶ÇÊûúË¶ÅÈáçÊñ∞ÈÅçÂéÜÔºåÂèØ‰ª•‰ªéÊï∞ÊçÆÊ∫êÔºàÈõÜÂêàÔºâ‰∏≠ÈáçÊñ∞Ëé∑Âèñ‰∏Ä‰∏™ÊµÅ„ÄÇÂ¶ÇÊûú‰Ω†ÂØπ‰∏Ä‰∏™ÊµÅÈÅçÂéÜ‰∏§Ê¨°ÔºåÂ∞±‰ºöÊäõÂá∫java.lang.IllegalStateExceptionÂºÇÂ∏∏Ôºö List&lt;String> list = Arrays.asList(\"A\", \"B\", \"C\", \"D\"); Stream&lt;String> stream = list.stream(); stream.forEach(System.out::println); stream.forEach(System.out::println); // ËøôÈáå‰ºöÊäõÂá∫java.lang.IllegalStateExceptionÂºÇÂ∏∏ÔºåÂõ†‰∏∫ÊµÅÂ∑≤ÁªèË¢´ÂÖ≥Èó≠ ÊµÅÈÄöÂ∏∏Áî±‰∏âÈÉ®ÂàÜÊûÑÊàêÔºö Êï∞ÊçÆÊ∫êÔºöÊï∞ÊçÆÊ∫ê‰∏ÄËà¨Áî®‰∫éÊµÅÁöÑËé∑ÂèñÔºåÊØîÂ¶ÇÊú¨ÊñáÂºÄÂ§¥ÈÇ£‰∏™ËøáÊª§Áî®Êà∑ÁöÑ‰æãÂ≠ê‰∏≠users.stream()ÊñπÊ≥ï„ÄÇ ‰∏≠Èó¥Â§ÑÁêÜÔºö‰∏≠Èó¥Â§ÑÁêÜÂåÖÊã¨ÂØπÊµÅ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏ÄÁ≥ªÂàóÂ§ÑÁêÜÔºåÂ¶ÇÔºöËøáÊª§Ôºàfilter()ÔºâÔºåÊò†Â∞ÑÔºàmap()ÔºâÔºåÊéíÂ∫èÔºàsorted()Ôºâ„ÄÇ ÁªàÁ´ØÂ§ÑÁêÜÔºöÁªàÁ´ØÂ§ÑÁêÜ‰ºöÁîüÊàêÁªìÊûúÔºåÁªìÊûúÂèØ‰ª•ÊòØ‰ªª‰Ωï‰∏çÊòØÊµÅÂÄºÔºåÂ¶ÇList&lt;String&gt;Ôºõ‰πüÂèØ‰ª•‰∏çËøîÂõûÁªìÊûúÔºåÂ¶Çstream.forEach(System.out::println)Â∞±ÊòØÂ∞ÜÁªìÊûúÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰∏≠ÔºåÂπ∂Ê≤°ÊúâËøîÂõû„ÄÇ ÂàõÂª∫ÊµÅÂàõÂª∫ÊµÅÁöÑÊñπÂºèÊúâÂæàÂ§öÔºåÂÖ∑‰ΩìÂèØ‰ª•ÂàíÂàÜ‰∏∫‰ª•‰∏ãÂá†ÁßçÔºö Áî±ÂÄºÂàõÂª∫ÊµÅ‰ΩøÁî®ÈùôÊÄÅÊñπÊ≥ïStream.of()ÂàõÂª∫ÊµÅÔºåËØ•ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™ÂèòÈïøÂèÇÊï∞Ôºö Stream&lt;Stream> stream = Stream.of(\"A\", \"B\", \"C\", \"D\"); ‰πüÂèØ‰ª•‰ΩøÁî®ÈùôÊÄÅÊñπÊ≥ïStream.empty()ÂàõÂª∫‰∏Ä‰∏™Á©∫ÁöÑÊµÅÔºö Stream&lt;Stream> stream = Stream.empty(); Áî±Êï∞ÁªÑÂàõÂª∫ÊµÅ‰ΩøÁî®ÈùôÊÄÅÊñπÊ≥ïArrays.stream()‰ªéÊï∞ÁªÑÂàõÂª∫‰∏Ä‰∏™ÊµÅÔºåËØ•ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™Êï∞ÁªÑÂèÇÊï∞Ôºö String[] strs = {\"A\", \"B\", \"C\", \"D\"}; Stream&lt;Stream> stream = Arrays.stream(strs); ÈÄöËøáÊñá‰ª∂ÁîüÊàêÊµÅ‰ΩøÁî®java.nio.file.FilesÁ±ª‰∏≠ÁöÑÂæàÂ§öÈùôÊÄÅÊñπÊ≥ïÈÉΩÂèØ‰ª•Ëé∑ÂèñÊµÅÔºåÊØîÂ¶ÇFiles.lines()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™java.nio.file.PathÂØπË±°ÔºåËøîÂõû‰∏Ä‰∏™Áî±Êñá‰ª∂Ë°åÊûÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤ÊµÅÔºö Stream&lt;String> stream = Files.lines(Paths.get(\"text.txt\"), Charset.defaultCharset()); ÈÄöËøáÂáΩÊï∞ÂàõÂª∫ÊµÅjava.util.stream.Stream‰∏≠Êúâ‰∏§‰∏™ÈùôÊÄÅÊñπÊ≥ïÁî®‰∫é‰ªéÂáΩÊï∞ÁîüÊàêÊµÅÔºå‰ªñ‰ª¨ÂàÜÂà´ÊòØStream.generate()ÂíåStream.iterate()Ôºö // iteartor Stream.iterate(0, n -> n + 2).limit(51).forEach(System.out::println); // generate Stream.generate(() -> \"Hello Man!\").limit(10).forEach(System.out::println); Á¨¨‰∏Ä‰∏™ÊñπÊ≥ï‰ºöÊâìÂç∞100‰ª•ÂÜÖÁöÑÊâÄÊúâÂÅ∂Êï∞ÔºåÁ¨¨‰∫å‰∏™ÊñπÊ≥ïÊâìÂç∞10‰∏™Hello Man!„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåËøô‰∏§‰∏™ÊñπÊ≥ïÁîüÊàêÁöÑÊµÅÈÉΩÊòØÊó†ÈôêÊµÅÔºåÊ≤°ÊúâÂõ∫ÂÆöÂ§ßÂ∞èÔºåÂèØ‰ª•Êó†Á©∑ÁöÑËÆ°ÁÆó‰∏ãÂéªÔºåÂú®‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠Êàë‰ª¨‰ΩøÁî®‰∫Ülimit()Êù•ÈÅøÂÖçÊâìÂç∞Êó†Á©∑‰∏™ÂÄº„ÄÇ ‰∏ÄËà¨Êù•ËØ¥Ôºåiterate()Áî®‰∫éÁîüÊàê‰∏ÄÁ≥ªÂàóÂÄºÔºåÊØîÂ¶ÇÁîüÊàê‰ª•ÂΩìÂâçÊó∂Èó¥ÂºÄÂßã‰πãÂêéÁöÑ10Â§©ÁöÑÊó•ÊúüÔºö Stream.iterate(LocalDate.now(), date -> date.plusDays(1)).limit(10).forEach(System.out::println); generate()ÊñπÊ≥ïÁî®‰∫éÁîüÊàê‰∏Ä‰∫õÈöèÊú∫Êï∞ÔºåÊØîÂ¶ÇÁîüÊàê10‰∏™UUIDÔºö Stream.generate(() -> UUID.randomUUID().toString()).limit(10).forEach(System.out::println); ‰ΩøÁî®ÊµÅStreamÊé•Âè£‰∏≠ÂåÖÂê´ËÆ∏Â§öÂØπÊµÅÊìç‰ΩúÁöÑÊñπÊ≥ïÔºåËøô‰∫õÊñπÊ≥ïÂàÜÂà´‰∏∫Ôºö filter()ÔºöÂØπÊµÅÁöÑÂÖÉÁ¥†ËøáÊª§ map()ÔºöÂ∞ÜÊµÅÁöÑÂÖÉÁ¥†Êò†Â∞ÑÊàêÂè¶‰∏Ä‰∏™Á±ªÂûã distinct()ÔºöÂéªÈô§ÊµÅ‰∏≠ÈáçÂ§çÁöÑÂÖÉÁ¥† sorted()ÔºöÂØπÊµÅÁöÑÂÖÉÁ¥†ÊéíÂ∫è forEach()ÔºöÂØπÊµÅ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÊâßË°åÊüê‰∏™Êìç‰Ωú peek()Ôºö‰∏éforEach()ÊñπÊ≥ïÊïàÊûúÁ±ª‰ººÔºå‰∏çÂêåÁöÑÊòØÔºåËØ•ÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊµÅÔºåËÄåforEach()Êó†ËøîÂõû limit()ÔºöÊà™ÂèñÊµÅ‰∏≠ÂâçÈù¢Âá†‰∏™ÂÖÉÁ¥† skip()ÔºöË∑≥ËøáÊµÅ‰∏≠ÂâçÈù¢Âá†‰∏™ÂÖÉÁ¥† toArray()ÔºöÂ∞ÜÊµÅËΩ¨Êç¢‰∏∫Êï∞ÁªÑ reduce()ÔºöÂØπÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†ÂΩíÁ∫¶Êìç‰ΩúÔºåÂ∞ÜÊØè‰∏™ÂÖÉÁ¥†ÂêàËµ∑Êù•ÂΩ¢Êàê‰∏Ä‰∏™Êñ∞ÁöÑÂÄº collect()ÔºöÂØπÊµÅÁöÑÊ±áÊÄªÊìç‰ΩúÔºåÊØîÂ¶ÇËæìÂá∫ÊàêListÈõÜÂêà anyMatch()ÔºöÂåπÈÖçÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÁ±ª‰ººÁöÑÊìç‰ΩúËøòÊúâallMatch()ÂíånoneMatch()ÊñπÊ≥ï findFirst()ÔºöÊü•ÊâæÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÁ±ª‰ººÁöÑËøòÊúâfindAny()ÊñπÊ≥ï max()ÔºöÊ±ÇÊúÄÂ§ßÂÄº min()ÔºöÊ±ÇÊúÄÂ∞èÂÄº count()ÔºöÊ±ÇÊÄªÊï∞ ‰∏ãÈù¢ÈÄê‰∏Ä‰ªãÁªçËøô‰∫õÊñπÊ≥ïÁöÑÁî®Ê≥ï„ÄÇ ËøáÊª§ÂíåÊéíÂ∫èStream.of(1, 8, 5, 2, 1, 0, 9, 2, 0, 4, 8) .filter(n -> n > 2) // ÂØπÂÖÉÁ¥†ËøáÊª§Ôºå‰øùÁïôÂ§ß‰∫é2ÁöÑÂÖÉÁ¥† .distinct() // ÂéªÈáçÔºåÁ±ª‰ºº‰∫éSQLËØ≠Âè•‰∏≠ÁöÑDISTINCT .skip(1) // Ë∑≥ËøáÂâçÈù¢1‰∏™ÂÖÉÁ¥† .limit(2) // ËøîÂõûÂºÄÂ§¥2‰∏™ÂÖÉÁ¥†ÔºåÁ±ª‰ºº‰∫éSQLËØ≠Âè•‰∏≠ÁöÑSELECT TOP .sorted() // ÂØπÁªìÊûúÊéíÂ∫è .forEach(System.out::println); Êü•ÊâæÂíåÂåπÈÖçStream‰∏≠Êèê‰æõÁöÑÊü•ÊâæÊñπÊ≥ïÊúâanyMatch()„ÄÅallMatch()„ÄÅnoneMatch()„ÄÅfindFirst()„ÄÅfindAny()ÔºåËøô‰∫õÊñπÊ≥ïË¢´Áî®Êù•Êü•ÊâæÊàñÂåπÈÖçÊüê‰∫õÂÖÉÁ¥†ÊòØÂê¶Á¨¶ÂêàÁªôÂÆöÁöÑÊù°‰ª∂Ôºö // Ê£ÄÊü•ÊµÅ‰∏≠ÁöÑ‰ªªÊÑèÂÖÉÁ¥†ÊòØÂê¶ÂåÖÂê´Â≠óÁ¨¶‰∏≤\"Java\" boolean hasMatch = Stream.of(\"Java\", \"C#\", \"PHP\", \"C++\", \"Python\") .anyMatch(s -> s.equals(\"Java\")); // Ê£ÄÊü•ÊµÅ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÊòØÂê¶ÈÉΩÂåÖÂê´Â≠óÁ¨¶‰∏≤\"#\" boolean hasAllMatch = Stream.of(\"Java\", \"C#\", \"PHP\", \"C++\", \"Python\") .allMatch(s -> s.contains(\"#\")); // Ê£ÄÊü•ÊµÅ‰∏≠ÁöÑ‰ªªÊÑèÂÖÉÁ¥†ÊòØÂê¶Ê≤°Êúâ‰ª•\"C\"ÂºÄÂ§¥ÁöÑÂ≠óÁ¨¶‰∏≤ boolean hasNoneMatch = Stream.of(\"Java\", \"C#\", \"PHP\", \"C++\", \"Python\") .noneMatch(s -> s.startsWith(\"C\")); // Êü•ÊâæÂÖÉÁ¥† Optional&lt;String> element = Stream.of(\"Java\", \"C#\", \"PHP\", \"C++\", \"Python\") .filter(s -> s.contains(\"C\")) // .findFirst() // Êü•ÊâæÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥† .findAny(); // Êü•Êâæ‰ªªÊÑèÂÖÉÁ¥† Ê≥®ÊÑèÊúÄÂêé‰∏ÄË°å‰ª£Á†ÅÁöÑËøîÂõûÁ±ªÂûãÔºåÊòØ‰∏Ä‰∏™Optional&lt;T&gt;Á±ªÔºàjava.util.OptionalÔºâÔºåÂÆÉ‰∏Ä‰∏™ÂÆπÂô®Á±ªÔºå‰ª£Ë°®‰∏Ä‰∏™ÂÄºÂ≠òÂú®Êàñ‰∏çÂ≠òÂú®„ÄÇ‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåfindAny()ÂèØËÉΩ‰ªÄ‰πàÂÖÉÁ¥†ÈÉΩÊ≤°ÊâæÂà∞„ÄÇJava 8ÁöÑÂ∫ìËÆæËÆ°‰∫∫ÂëòÂºïÂÖ•‰∫ÜOptional&lt;T&gt;ÔºåËøôÊ†∑Â∞±‰∏çÁî®ËøîÂõû‰ºóÊâÄÂë®Áü•ÂÆπÊòìÂá∫ÈóÆÈ¢òÁöÑnull‰∫Ü„ÄÇÊúâÂÖ≥Optional&lt;T&gt;Á±ªÁöÑËØ¶ÁªÜÁî®Ê≥ïÔºåÂ∞ÜÂú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠‰ªãÁªç„ÄÇ ÂÆûÈôÖ‰∏äÊµãËØïÁªìÊûúÂèëÁé∞ÔºåfindFirst()ÂíåfindAny()ËøîÂõûÁöÑÈÉΩÊòØÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÈÇ£‰πà‰∏§ËÄÖ‰πãÈó¥Âà∞Â∫ïÊúâ‰ªÄ‰πàÂå∫Âà´ÔºüÈÄöËøáÊü•ÁúãjavadocÊèèËø∞ÔºåÂ§ßËá¥ÊÑèÊÄùÊòØfindAny()ÊòØ‰∏∫‰∫ÜÊèêÈ´òÂπ∂Ë°åÊìç‰ΩúÊó∂ÁöÑÊÄßËÉΩÔºåÂ¶ÇÊûúÊ≤°ÊúâÁâπÂà´ÈúÄË¶ÅÔºåËøòÊòØÂª∫ËÆÆ‰ΩøÁî®findAny()ÊñπÊ≥ï„ÄÇ ÂΩíÁ∫¶ÂΩíÁ∫¶Êìç‰ΩúÂ∞±ÊòØÂ∞ÜÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†ËøõË°åÂêàÂπ∂ÔºåÂΩ¢Êàê‰∏Ä‰∏™Êñ∞ÁöÑÂÄºÔºåÂ∏∏ËßÅÁöÑÂΩíÁ∫¶Êìç‰ΩúÂåÖÊã¨Ê±ÇÂíåÔºåÊ±ÇÊúÄÂ§ßÂÄºÊàñÊúÄÂ∞èÂÄº„ÄÇÂΩíÁ∫¶Êìç‰Ωú‰∏ÄËà¨‰ΩøÁî®reduce()ÊñπÊ≥ïÔºå‰∏émap()ÊñπÊ≥ïÊê≠ÈÖç‰ΩøÁî®ÔºåÂèØ‰ª•Â§ÑÁêÜ‰∏Ä‰∫õÂæàÂ§çÊùÇÁöÑÂΩíÁ∫¶Êìç‰Ωú„ÄÇ // Ëé∑ÂèñÊµÅ List&lt;Book> books = Arrays.asList( new Book(\"JavaÁºñÁ®ãÊÄùÊÉ≥\", \"Bruce Eckel\", \"Êú∫Ê¢∞Â∑•‰∏öÂá∫ÁâàÁ§æ\", 108.00D), new Book(\"Java 8ÂÆûÊàò\", \"Mario Fusco\", \"‰∫∫Ê∞ëÈÇÆÁîµÂá∫ÁâàÁ§æ\", 79.00D), new Book(\"MongoDBÊùÉÂ®ÅÊåáÂçóÔºàÁ¨¨2ÁâàÔºâ\", \"Kristina Chodorow\", \"‰∫∫Ê∞ëÈÇÆÁîµÂá∫ÁâàÁ§æ\", 69.00D) ); // ËÆ°ÁÆóÊâÄÊúâÂõæ‰π¶ÁöÑÊÄª‰ª∑ Optional&lt;Double> totalPrice = books.stream() .map(Book::getPrice) .reduce((n, m) -> n + m); // ‰ª∑Ê†ºÊúÄÈ´òÁöÑÂõæ‰π¶ Optional&lt;Book> expensive = books.stream().max(Comparator.comparing(Book::getPrice)); // ‰ª∑Ê†ºÊúÄ‰ΩéÁöÑÂõæ‰π¶ Optional&lt;Book> cheapest = books.stream().min(Comparator.comparing(Book::getPrice)); // ËÆ°ÁÆóÊÄªÊï∞ long count = books.stream().count() Âú®ËÆ°ÁÆóÂõæ‰π¶ÊÄª‰ª∑ÁöÑÊó∂ÂÄôÈ¶ñÂÖà‰ΩøÁî®map()ÊñπÊ≥ïÂæóÂà∞ÊâÄÊúâÂõæ‰π¶‰ª∑Ê†ºÁöÑÊµÅÔºåÁÑ∂ÂêéÂÜç‰ΩøÁî®reduce()ÊñπÊ≥ïËøõË°åÂΩíÁ∫¶ËÆ°ÁÆó„ÄÇ‰∏émap()ÊñπÊ≥ïÁ±ª‰ººÁöÑËøòÊúâ‰∏Ä‰∏™flatMap()ÔºåflatMap()ÊñπÊ≥ïËÆ©‰Ω†Êää‰∏Ä‰∏™ÊµÅ‰∏≠ÁöÑÊØè‰∏™ÂÄºÈÉΩÊç¢ÊàêÂè¶‰∏Ä‰∏™ÊµÅÔºåÁÑ∂ÂêéÊääÊâÄÊúâÁöÑÊµÅËøûÊé•Ëµ∑Êù•Êàê‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÊµÅ„ÄÇÁúãÁúã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö List&lt;String[]> result = Stream.of(\"Hello Man\") .map(s -> s.split(\"\")) .collect(Collectors.toList()); ‰∏äÈù¢‰ª£Á†ÅËøîÂõûÁöÑÁªìÊûúÊòØ‰∏Ä‰∏™List&lt;String[]&gt;Á±ªÂûãÔºå‰πüÂ∞±ÊòØ[[&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;], [&quot;M&quot;, &quot;a&quot;, &quot;n&quot;]]ËøôÁßçÁªìÊûÑÔºåËÄåÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÂà∞[&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot;M&quot;, &quot;a&quot;, &quot;n&quot;]ËøôÁßçÁªìÊûÑÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶Å‰ΩøÁî®flatMap()ÊñπÊ≥ï‰∫ÜÔºö List&lt;String> result = Stream.of(\"Hello Man\") .map(s -> s.split(\"\")) .flatMap(Arrays::stream) .collect(Collectors.toList()); ‰ΩøÁî®flatMap()ÊñπÊ≥ïÁöÑÊïàÊûúÊòØÔºåÂêÑ‰∏™Êï∞ÁªÑÂπ∂‰∏çÊòØÂàÜÂà´Êò†Â∞ÑÊàê‰∏Ä‰∏™ÊµÅÔºåËÄåÊòØÊò†Â∞ÑÊàêÊµÅÁöÑÂÜÖÂÆπ„ÄÇÊâÄÊúâ‰ΩøÁî®map(Arrays::stream)Êó∂ÁîüÊàêÁöÑÂçï‰∏™ÊµÅÈÉΩË¢´ÂêàÂπ∂Ëµ∑Êù•Ôºå‰πüÂ∞±ÊòØÂØπÊµÅÊâÅÂπ≥ÂåñÊìç‰Ωú„ÄÇ Êï∞ÊçÆÊî∂ÈõÜÂâçÈù¢‰∏§ÈÉ®ÂàÜÂÜÖÂÆπÂàÜÂà´‰∏∫ÊµÅÂºèÊï∞ÊçÆÂ§ÑÁêÜÁöÑÂâç‰∏§‰∏™Ê≠•È™§Ôºö‰ªéÊï∞ÊçÆÊ∫êÂàõÂª∫ÊµÅ„ÄÅ‰ΩøÁî®ÊµÅËøõË°å‰∏≠Èó¥Â§ÑÁêÜ„ÄÇ‰∏ãÈù¢Êàë‰ª¨‰ªãÁªçÊµÅÂºèÊï∞ÊçÆÂ§ÑÁêÜÁöÑÊúÄÂêé‰∏Ä‰∏™Ê≠•È™§‚Äî‚ÄîÊï∞ÊçÆÊî∂ÈõÜ„ÄÇ Êï∞ÊçÆÊî∂ÈõÜÊòØÊµÅÂºèÊï∞ÊçÆÂ§ÑÁêÜÁöÑÁªàÁ´ØÂ§ÑÁêÜÔºå‰∏é‰∏≠Èó¥Â§ÑÁêÜ‰∏çÂêåÁöÑÊòØÔºåÁªàÁ´ØÂ§ÑÁêÜ‰ºöÊ∂àËÄóÊµÅÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÁªàÁ´ØÂ§ÑÁêÜ‰πãÂêéÔºåËøô‰∏™ÊµÅÂ∞±‰ºöË¢´ÂÖ≥Èó≠ÔºåÂ¶ÇÊûúÂÜçËøõË°å‰∏≠Èó¥Â§ÑÁêÜÔºåÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇÊï∞ÊçÆÊî∂ÈõÜ‰∏ªË¶Å‰ΩøÁî®collectÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ï‰πüÂ±û‰∫éÂΩíÁ∫¶Êìç‰ΩúÔºåÂÉèreduce()ÊñπÊ≥ïÈÇ£Ê†∑ÂèØ‰ª•Êé•Êî∂ÂêÑÁßçÂÅöÊ≥ï‰Ωú‰∏∫ÂèÇÊï∞ÔºåÂ∞ÜÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†Á¥ØÁßØÊàê‰∏Ä‰∏™Ê±áÊÄªÁªìÊûúÔºåÂÖ∑‰ΩìÁöÑÂÅöÊ≥ïÊòØÈÄöËøáÂÆö‰πâÊñ∞ÁöÑCollectorÊé•Âè£Êù•ÂÆö‰πâÁöÑ„ÄÇ Âú®ÂâçÈù¢ÈÉ®ÂàÜÁöÑ‰æãÂ≠ê‰∏≠‰ΩøÁî®Êî∂ÈõÜÂô®ÔºàCollectorÔºâÊòØÁî±java.util.stream.CollectorsÂ∑•ÂÖ∑Á±ª‰∏≠ÁöÑtoList()ÊñπÊ≥ïÊèê‰æõÔºåCollectorsÁ±ªÊèê‰æõ‰∫ÜËÆ∏Â§öÂ∏∏Áî®ÁöÑÊñπÊ≥ïÁî®‰∫éÂ§ÑÁêÜÊï∞ÊçÆÊî∂ÈõÜÔºåÂ∏∏ËßÅÁöÑÊúâÂΩíÁ∫¶„ÄÅÊ±áÊÄª„ÄÅÂàÜÁªÑÁ≠â„ÄÇ ÂΩíÁ∫¶ÂíåÊ±áÊÄªÊàë‰ª¨‰ΩøÁî®ÂâçÈù¢ÂΩíÁ∫¶Êìç‰Ωú‰∏≠ËÆ°ÁÆóÂõæ‰π¶ÊÄª‰ª∑ÔºåÊúÄÂ§ßÂÄºÔºåÊúÄÂ∞èÂÄºÔºåËæìÂÖ•ÊÄªÊï∞ÈÇ£‰∏™‰æãÂ≠êÊù•ÁúãÁúãÊî∂ÈõÜÂô®Â¶Ç‰ΩïËøõË°å‰∏äËø∞ÂΩíÁ∫¶Êìç‰ΩúÔºö // Ê±ÇÂíå long count = books.stream().collect(counting()); // ‰ª∑Ê†ºÊúÄÈ´òÁöÑÂõæ‰π¶ Optional&lt;Book> expensive = books.stream().collect(maxBy(comparing(Book::getPrice))); // ‰ª∑Ê†ºÊúÄ‰ΩéÁöÑÂõæ‰π¶ Optional&lt;Book> cheapest = books.stream().collect(minBy(comparing(Book::getPrice))); ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂÅáËÆæ‰Ω†Â∑≤Áªè‰ΩøÁî®ÈùôÊÄÅÂØºÂÖ•‰∫ÜCollectorsÂíåComparator‰∏§‰∏™Á±ªÔºåËøôÊ†∑‰Ω†Â∞±‰∏çÁî®ÂÜçÂéªÂÜôCollectors.counting()ÂíåComparator.comparing()ËøôÊ†∑ÁöÑ‰ª£Á†Å‰∫ÜÔºö import static java.util.stream.Collectors.*; import static java.util.Comparator.*; CollectorsÂ∑•ÂÖ∑Á±ª‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÁî®‰∫éÊ±áÊÄªÁöÑÊñπÊ≥ïÔºåÂåÖÊã¨summarizingInt()ÔºåsummarizingLong()ÂíåsummarizingDouble()ÔºåÁî±‰∫éÂõæ‰π¶ÁöÑ‰ª∑Ê†º‰∏∫DoubleÁ±ªÂûãÔºåÊâÄ‰ª•Êàë‰ª¨‰ΩøÁî®summarizingDouble()ÊñπÊ≥ïËøõË°åÊ±áÊÄª„ÄÇËØ•ÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™DoubleSummaryStatisticsÂØπË±°ÔºåÂåÖÂê´‰∏ÄÁ≥ªÂàóÂΩíÁ∫¶Êìç‰ΩúÁöÑÊñπÊ≥ïÔºåÂ¶ÇÔºöÊ±áÊÄª„ÄÅËÆ°ÁÆóÂπ≥ÂùáÊï∞„ÄÅÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄº„ÄÅËÆ°ÁÆóÊÄªÊï∞Ôºö DoubleSummaryStatistics dss = books.stream().collect(summarizingDouble(Book::getPrice)); double sum = dss.getSum(); // Ê±áÊÄª double average = dss.getAverage(); // Ê±ÇÂπ≥ÂùáÊï∞ long count = dss.getCount(); // ËÆ°ÁÆóÊÄªÊï∞ double max = dss.getMax(); // ÊúÄÂ§ßÂÄº double min = dss.getMin(); // ÊúÄÂ∞èÂÄº CollectorsÁ±ªËøòÂåÖÂê´‰∏Ä‰∏™joining()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÁî®‰∫éËøûÊé•Â≠óÁ¨¶‰∏≤Ôºö String str = Stream.of(\"A\", \"B\", \"C\", \"D\").collect(joining(\",\")); ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÁî®‰∫éÂ∞ÜÊµÅ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÈÄöËøáÈÄóÂè∑ËøûÊé•Êàê‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ ÂàÜÁªÑÂíåÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ÔºåÊµÅ‰πüÊèê‰æõ‰∫ÜÁ±ª‰ºº‰∫éÊï∞ÊçÆÂ∫ì‰∏≠GROUP BYÂàÜÁªÑÁöÑÁâπÊÄßÔºåÁî±Collectors.groupingBy()ÊñπÊ≥ïÊèê‰æõÔºö Map&lt;String, List&lt;Book>> booksGroup = books.stream().collect(groupingBy(Book::getPublisher)); ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊåâÁÖßÂá∫ÁâàÁ§æÂØπÂõæ‰π¶ËøõË°åÂàÜÁªÑÔºåÂàÜÁªÑÁöÑÁªìÊûúÊòØ‰∏Ä‰∏™MapÂØπË±°ÔºåMapÁöÑkeyÂÄºÊòØÂá∫ÁâàÁ§æÁöÑÂêçÁß∞ÔºåvalueÂÄºÊòØÊØè‰∏™Âá∫ÁâàÁ§æÂàÜÁªÑÂØπÂ∫îÁöÑÈõÜÂêà„ÄÇÂàÜÁªÑÊñπÊ≥ïgroupingBy()Êé•Êî∂‰∏Ä‰∏™FunctionÊé•Âè£‰Ωú‰∏∫ÂèÇÊï∞Ôºå‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êàë‰ª¨‰ΩøÁî®‰∫ÜÊñπÊ≥ïÂºïÁî®‰º†ÈÄí‰∫ÜÂá∫ÁâàÁ§æ‰Ωú‰∏∫ÂàÜÁªÑÁöÑ‰æùÊçÆÔºå‰ΩÜÂÆûÈôÖÊÉÖÂÜµÂèØËÉΩÊØîËøôÂ§çÊùÇÔºåÊØîÂ¶ÇÂ∞Ü‰ª∑Ê†ºÂú®0-50‰πãÈó¥ÁöÑ‰π¶Á±çÂàÜÊàê‰∏ÄÁªÑÔºå50-100‰πãÈó¥ÁöÑÂàÜÊàê‰∏ÄÁªÑÔºåË∂ÖËøá100ÁöÑÂàÜÊàê‰∏ÄÁªÑÔºåËøôÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®LambdaË°®ËææÂºèÊù•Ë°®Á§∫Ëøô‰∏™ÂàÜÁªÑÈÄªËæëÔºö Map&lt;String, List&lt;Book>> booksGroup = books .stream() .collect(groupingBy(book -> { if (book.getPrice() > 0 &amp;&amp; book.getPrice() &lt;= 50) { return \"A\"; } else if (book.getPrice() > 50 &amp;&amp; book.getPrice() &lt;=100) { return \"B\"; } else { return \"C\"; } })); groupingBy()ÊñπÊ≥ïËøòÊîØÊåÅÂ§öÁ∫ßÂàÜÁªÑÔºå‰ªñÊúâ‰∏Ä‰∏™ÈáçËΩΩÊñπÊ≥ïÔºåÈô§‰∫ÜÊé•Êî∂‰∏Ä‰∏™FunctionÁ±ªÂûãÁöÑÂèÇÊï∞Â§ñÔºåËøòÊé•Êî∂‰∏Ä‰∏™CollectorÁ±ªÂûãÁöÑÂèÇÊï∞Ôºö Map&lt;String, Map&lt;String, List&lt;Book>>> booksGroup = books.stream().collect( groupingBy(Book::getPublisher, groupingBy(book -> { if (book.getPrice() > 0 &amp;&amp; book.getPrice() &lt;= 50) { return \"A\"; } else if (book.getPrice() > 50 &amp;&amp; book.getPrice() &lt;=100) { return \"B\"; } else { return \"C\"; } })) ); ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂ∞Ü‰πãÂâç‰∏§‰∏™ÂàÜÁªÑÂêàÂπ∂Êàê‰∏Ä‰∏™ÔºåÂÆûÁé∞‰∫ÜÂ§öÁ∫ßÂàÜÁªÑÔºåÈ¶ñÂÖàÊåâÁÖßÂá∫ÁâàÁ§æËøõË°åÂàÜÁªÑÔºåÁÑ∂ÂêéÊåâÁÖß‰ª∑Ê†ºËøõË°åÂàÜÁªÑÔºåËøîÂõûÁ±ªÂûãÊòØ‰∏Ä‰∏™Map&lt;String, Map&lt;String, List&lt;Book&gt;&gt;&gt;„ÄÇgroupingBy()ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÂèØ‰ª•ÊòØ‰ªªÊÑèÁ±ªÂûãÔºåÂè™Ë¶ÅÊòØCollectorÊé•Âè£ÁöÑÂÆû‰æãÂ∞±ÂèØ‰ª•ÔºåÊØîÂ¶ÇÂÖàÂàÜÁªÑÔºåÂÜçÁªüËÆ°Êï∞ÈáèÔºö Map&lt;String, Long> countGroup = books.stream() .collect(groupingBy(Book::getPublisher, counting())); ËøòÂèØ‰ª•Âú®ËøõË°åÂàÜÁªÑÂêéËé∑ÂèñÊØèÁªÑ‰∏≠‰ª∑Ê†ºÊúÄÈ´òÁöÑÂõæ‰π¶Ôºö Map&lt;String, Book> expensiveGroup = books.stream() .collect(groupingBy(Book::getPublisher, collectingAndThen( maxBy(comparingDouble(Book::getPrice)), Optional::get ))); Âπ∂Ë°åÊï∞ÊçÆÂ§ÑÁêÜÂú®Java 7‰πãÂâçÔºåÂ§ÑÁêÜÂπ∂Ë°åÊï∞ÊçÆÈõÜÂêàÈùûÂ∏∏È∫ªÁÉ¶ÔºåÈ¶ñÂÖàÈúÄË¶ÅÂ∞Ü‰∏Ä‰∏™Â∫ûÂ§ßÊï∞ÊçÆÈõÜÂêàÂàÜÊàêÂá†‰∏™Â≠êÈõÜÂêàÔºõÁÑ∂ÂêéÈúÄË¶Å‰∏∫ÊØè‰∏Ä‰∏™Â≠êÈõÜÂêàÁºñÂÜôÂ§öÁ∫øÁ®ãÂ§ÑÁêÜÁ®ãÂ∫èÔºåËøòÈúÄË¶ÅÂØπ‰ªñ‰ª¨ÂÅöÁ∫øÁ®ãÂêåÊ≠•Êù•ÈÅøÂÖçËÆøÈóÆÂÖ±‰∫´ÂèòÈáèÂØºËá¥Â§ÑÁêÜÁªìÊûú‰∏çÂáÜÁ°ÆÔºõÊúÄÂêéÔºåÁ≠âÂæÖÊâÄÊúâÁ∫øÁ®ãÂ§ÑÁêÜÂÆåÊØïÂêéÂ∞ÜÂ§ÑÁêÜÁªìÊûúÂêàÂπ∂„ÄÇÂú®Java 7‰πãÂêéÊñ∞Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™fork/joinÁöÑÊ°ÜÊû∂ÔºåËÆ©Ëøô‰∏ÄÂàáÂèòÂæóÊõ¥Âä†ÁÆÄÂçï„ÄÇ Âπ∂Ë°åÊµÅÂπ∂Ë°åÊµÅ‰ΩøÁî®ÈõÜÂêàÁöÑparallelStream()ÊñπÊ≥ïÂèØ‰ª•Ëé∑Âèñ‰∏Ä‰∏™Âπ∂Ë°åÊµÅ„ÄÇJavaÂÜÖÈÉ®‰ºöÂ∞ÜÊµÅÁöÑÂÜÖÂÆπÂàÜÂâ≤ÊàêËã•Âπ≤‰∏™Â≠êÈÉ®ÂàÜÔºåÁÑ∂ÂêéÂ∞ÜÂÆÉ‰ª¨‰∫§ÁªôÂ§ö‰∏™Á∫øÁ®ãÂπ∂Ë°åÂ§ÑÁêÜÔºåËøôÊ†∑Â∞±Â∞ÜÂ∑•‰ΩúÁöÑË¥üÊãÖ‰∫§ÁªôÂ§öÊ†∏CPUÁöÑÂÖ∂‰ªñÂÜÖÊ†∏Â§ÑÁêÜ„ÄÇ Êàë‰ª¨ÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁ≤óÊö¥ÁöÑ‰æãÂ≠êÊºîÁ§∫Âπ∂Ë°åÊµÅÁöÑÂ§ÑÁêÜÊÄßËÉΩ„ÄÇÂÅáËÆæÊúâ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÊé•Âèó‰∏Ä‰∏™Êï∞Â≠ón‰Ωú‰∏∫ÂèÇÊï∞ÔºåËøîÂõû‰ªé1Âà∞nÁöÑÊâÄÊúâËá™ÁÑ∂Êï∞‰πãÂíåÔºö public static long sequentialSum(long n) { return Stream.iterate(1L, i -> i + 1) .limit(n) .reduce(0L, Long::sum); } ‰∏äÈù¢ÁöÑÊñπÊ≥ï‰πüÂèØ‰ª•ÈÄöËøá‰º†ÁªüÁöÑforÂæ™ÁéØÊñπÂºèÂÆûÁé∞Ôºö public static long iterativeSum(long n) { long result = 0; for (long i = 1L; i &lt;= n; i++) { result += i; } return result; } ÁºñÂÜôÊµãËØï‰ª£Á†ÅÔºö public static void main(String[] args) { long number = 10000000L; System.out.println(\"Sequential Sum: \" + sumPerformanceTest(StreamTest::sequentialSum, number) + \" ÊØ´Áßí\"); System.out.println(\"Iterative Sum: \" + sumPerformanceTest(StreamTest::iterativeSum, number) + \" ÊØ´Áßí\"); } public static long sumPerformanceTest(Function&lt;Long, Long> function, long number) { long maxValue = Long.MAX_VALUE; for (int i=0; i&lt;10; i++) { long start = System.nanoTime(); long sum = function.apply(n); long end = System.nanoTime(); System.out.println(\"Result: \" + sum); long time = ( end - start ) / 1000000; if (time &lt; maxValue) { maxValue = time; } } return maxValue; } ‰∏∫‰∫ÜÊñπ‰æøÊµãËØïÔºåÊàë‰ª¨ÁºñÂÜô‰∏Ä‰∏™sumPerformanceTest()ÊñπÊ≥ïÔºåÂèÇÊï∞numberË°®Á§∫ÁªôÂÆöÁöÑ‰∏Ä‰∏™Êï∞ÔºåÁî®‰∫éËÆ°ÁÆó‰ªé1Âà∞Ëøô‰∏™Êï∞ÁöÑÊâÄÊúâËá™ÁÑ∂Êï∞‰πãÂíå„ÄÇËØ•ÊñπÊ≥ïÂÜÖÈÉ®ÊâßË°å10Ê¨°ËøêÁÆóÔºåËøîÂõûÊó∂Èó¥ÊúÄÁü≠ÁöÑ‰∏ÄÊ¨°ËøêÁÆóÁªìÊûú„ÄÇ ËøêË°å‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÂèØ‰ª•Âú®ÊéßÂà∂Âè∞ÁúãÂà∞Â¶Ç‰∏ãÁªìÊûúÔºö Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Sequential Sum: 159 ÊØ´Áßí Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Iterative Sum: 5 ÊØ´Áßí ÂèØ‰ª•ÁúãÂá∫ÔºåÈááÁî®‰º†ÁªüÁöÑforÂæ™ÁéØÊõ¥Âø´ÔºåÂõ†‰∏∫ÂÆÉ‰∏çÁî®ÂÅö‰ªª‰ΩïËá™Âä®ÊãÜÁÆ±/Ë£ÖÁÆ±Êìç‰ΩúÔºåÊìç‰ΩúÁöÑÈÉΩÊòØÂü∫Êú¨Á±ªÂûã„ÄÇËøô‰∏™ÊµãËØïÁªìÊûúÂπ∂‰∏çÂÆ¢ËßÇÔºåÊèêÂçáÁöÑÊÄßËÉΩÂèñÂÜ≥‰∫éÊú∫Âô®ÁöÑÈÖçÁΩÆÔºå‰ª•‰∏äÊòØÊàëÂú®ÂÖ¨Âè∏ÁöÑÂè∞ÂºèÊú∫ÔºàÊú∫Âô®ÈÖçÁΩÆ‰∏∫Intel(R) Core i7-6700 CPU 3.40HZ; 8GB RAMÔºâ‰∏äËøêË°åÁöÑÁªìÊûú„ÄÇ Áé∞Âú®Êàë‰ª¨‰ΩøÁî®Âπ∂Ë°åÊµÅÊµãËØï‰∏Ä‰∏ãÔºö public static long parallelSum(long n) { return Stream.iterate(1L, i -> i + 1) .limit(n) .parallel() .reduce(0L, Long::sum); } public static void main(String[] args) { System.out.println(\"Parallel Sum: \" + sumPerformanceTest(StreamTest::parallelSum, number) + \" ÊØ´Áßí\"); } Âπ∂Ë°åÊµÅÊâßË°åÁªìÊûú‰∏∫Ôºö Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Parallel Sum: 570 ÊØ´Áßí Âπ∂Ë°åÁöÑÊâßË°åÊïàÁéáÊØîÈ°∫Â∫èÊâßË°åËøòË¶ÅÊÖ¢ÔºåËøô‰∏™ÁªìÊûúËÆ©‰∫∫Â§ßË∑åÁúºÈïú„ÄÇ‰∏ªË¶ÅÊúâ‰∏§‰∏™ÂéüÂõ†Ôºö iterate()ÊñπÊ≥ïÁîüÊàêÁöÑÂØπË±°ÊòØÂü∫Êú¨Á±ªÂûãÁöÑÂåÖË£ÖÁ±ªÔºà‰πüÂ∞±ÊòØjava.lang.LongÁ±ªÂûãÔºâÔºåÂøÖÈ°ªËøõË°åÊãÜÁÆ±Êìç‰ΩúÊâçËÉΩËøêÁÆó„ÄÇ iterate()ÊñπÊ≥ï‰∏çÈÄÇÂêàÁî®Âπ∂Ë°åÊµÅÂ§ÑÁêÜ„ÄÇ Á¨¨‰∏Ä‰∏™ÂéüÂõ†ÂÆπÊòìÁêÜËß£ÔºåËá™Âä®ÊãÜÁÆ±Êìç‰ΩúÁ°ÆÂÆûÈúÄË¶ÅËä±Ë¥π‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºåËøô‰ªéÂâç‰∏Ä‰∏™‰æãÂ≠êÂèØ‰ª•ÁúãÂá∫Êù•„ÄÇÁ¨¨‰∫å‰∏™ÂéüÂõ†‰∏≠iterate()ÊñπÊ≥ï‰∏çÈÄÇÂêàÁî®Âπ∂Ë°åÊµÅÂ§ÑÁêÜÔºå‰∏ªË¶ÅÂéüÂõ†ÊòØiterate()ÊñπÊ≥ïÂÜÖÈÉ®Êú∫Âà∂ÁöÑÈóÆÈ¢ò„ÄÇiterate()ÊñπÊ≥ïÊØèÊ¨°ÊâßË°åÈÉΩÈúÄË¶Å‰æùËµñÂâç‰∏ÄÊ¨°ÁöÑÁªìÊûúÔºåÊØîÂ¶ÇÊú¨Ê¨°ÊâßË°åÁöÑËæìÂÖ•ÂÄº‰∏∫10ÔºåËøô‰∏™ËæìÂÖ•ÂÄºÂøÖÈ°ªÊòØÂâç‰∏ÄÊ¨°ËøêÁÆóÁªìÊûúÁöÑËæìÂá∫ÔºåÂõ†Ê≠§iterate()ÊñπÊ≥ïÂæàÈöæ‰ΩøÁî®Âπ∂Ë°åÊµÅÂàÜÂâ≤Êàê‰∏çÂêåÂ∞èÂùóÂ§ÑÁêÜ„ÄÇÂÆûÈôÖ‰∏äÔºå‰∏äÈù¢ÁöÑÂπ∂Ë°åÊµÅÁ®ãÂ∫èËøòÂ¢ûÂä†‰∫ÜÈ°∫Â∫èÂ§ÑÁêÜÁöÑÈ¢ùÂ§ñÂºÄÈîÄÔºåÂõ†‰∏∫ÈúÄË¶ÅÊääÊØèÊ¨°Êìç‰ΩúÊâßË°åÁöÑÁªìÊûúÂàÜÂà´ÂàÜÈÖçÂà∞‰∏çÂêåÁöÑÁ∫øÁ®ã‰∏≠„ÄÇ ‰∏Ä‰∏™ÊúâÊïàÁöÑÂ§ÑÁêÜÊñπÂºèÊòØ‰ΩøÁî®LongStream.rangeClosed()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂº•Ë°•‰∫Ü‰∏äËø∞‰æãÂ≠êÁöÑ‰∏§‰∏™Áº∫ÁÇπÔºåÂÆÉÁîüÊàêÁöÑÊòØÂü∫Êú¨Á±ªÂûãËÄåÈùûÂåÖË£ÖÁ±ªÔºå‰∏çÁî®ÊãÜÁÆ±Êìç‰ΩúÂ∞±ÂèØ‰ª•ËøêÁÆóÔºåÂπ∂‰∏îÔºåÂÆÉÁîüÊàêÁöÑÊòØÁî±ËåÉÂõ¥ÁöÑÊï∞Â≠óÔºåÂæàÂÆπÊòìÊãÜÂàÜ„ÄÇÂ¶ÇÔºöÁîüÊàê1-20ËåÉÂõ¥ÁöÑÊï∞Â≠óÂèØ‰ª•ÊãÜÂàÜÊàê1-10, 11-20„ÄÇ public static long rangedSum(long n) { return LongStream.rangeClosed(1, n) .reduce(0L, Long::sum); } public static void main(String[] args) { System.out.println(\"Ranged Sum: \" + sumPerformanceTest(StreamTest::rangedSum, number) + \" ÊØ´Áßí\"); } ÊâßË°åÁªìÊûú‰∏∫Ôºö Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Ranged Sum: 8 ÊØ´Áßí Ëøô‰∏™ÁªìÊûúÊØîËµ∑sequentialSum()ÊñπÊ≥ïÊâßË°åÁöÑÁªìÊûúËøòË¶ÅÂø´ÔºåÊâÄ‰ª•ÈÄâÊã©ÂêàÈÄÇÁöÑÊï∞ÊçÆÁªìÊûÑÊúâÊó∂ÂÄôÊØîÂπ∂Ë°åÂåñÂ§ÑÁêÜÊõ¥ÈáçË¶Å„ÄÇÊàë‰ª¨ÂÜçÂ∞ÜrangeClosed()ÊñπÊ≥ïÁîüÊàêÁöÑÊµÅËΩ¨Âåñ‰∏∫Âπ∂Ë°åÊµÅÔºö public static long parallelRangedSum(long n) { return LongStream.rangeClosed(1, n) .parallel() .reduce(0L, Long::sum); } public static void main(String[] args) { System.out.println(\"Parallel Ranged Sum: \" + sumPerformanceTest(StreamTest::parallelRangedSum, number) + \" ÊØ´Áßí\"); } ÊâßË°åÁªìÊûú‰∏∫Ôºö Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Result: 200000010000000 Parallel Ranged Sum: 2 ÊØ´Áßí Êàë‰ª¨Áªà‰∫éÂæóÂà∞‰∫ÜÊÉ≥Ë¶ÅÁöÑÁªìÊûúÔºåÊâÄ‰ª•Âπ∂Ë°åÊìç‰ΩúÈúÄË¶ÅÈÄâÊã©ÂêàÈÄÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂª∫ËÆÆÂ§öÂÅöÊµãËØïÔºåÊâæÂà∞ÂêàÈÄÇÁöÑÂπ∂Ë°åÊñπÂºèÂÜçÊâßË°åÔºåÂê¶ÂàôÂæàÂÆπÊòìË∑≥Âà∞ÂùëÈáå„ÄÇ Ëé∑Âèñ‰∏Ä‰∏™ÂêàÈÄÇÁöÑIPÂú∞ÂùÄ/** * ÂêàÈÄÇÁöÑipÂú∞ÂùÄÂâçÁºÄ */ private static final List&lt;String> PREFIX_IP = Stream.of(\"192.168\", \"172.16\").collect(toList()); public static String getPreferIp() { try { Enumeration&lt;NetworkInterface> enumeration = NetworkInterface.getNetworkInterfaces(); List&lt;List&lt;String>> lists = Collections.list(enumeration) .stream() .map(x -> Collections.list(x.getInetAddresses()) .stream() .filter(InetAddress::isSiteLocalAddress) .map(InetAddress::getHostAddress) .filter(Objects::nonNull) .collect(Collectors.toList()) ).filter(x -> !x.isEmpty()) .collect(toList()); AtomicReference&lt;String> prefer = new AtomicReference&lt;>(); PREFIX_IP.forEach(x -> lists.forEach(i -> i.forEach(a -> { if (a.startsWith(x)) { prefer.set(a); } }))); String ip = prefer.get(); log.info(\"Ëé∑ÂèñÂèØÁî®ip‰∏∫Ôºö {}\", ip); return ip; } catch ( SocketException e) { e.printStackTrace(); return null; } }","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Java8 Êñ∞ÁâπÊÄß-Êó•Êúüapi","slug":"java8-localdatetime","date":"2019-02-13T02:32:01.000Z","updated":"2024-07-01T12:30:37.373Z","comments":true,"path":"2019/02/13/java8-localdatetime/","link":"","permalink":"http://iogogogo.github.io/2019/02/13/java8-localdatetime/","excerpt":"","text":"Java 8ÁöÑ‰∏Ä‰∏™Êñ∞Â¢ûÁöÑÈáçË¶ÅÁâπÊÄßÂ∞±ÊòØÂºïÂÖ•‰∫ÜÊñ∞ÁöÑÊó∂Èó¥ÂíåÊó•ÊúüAPIÔºåÂÆÉ‰ª¨Ë¢´ÂåÖÂê´Âú®java.timeÂåÖ‰∏≠„ÄÇÂÄüÂä©Êñ∞ÁöÑÊó∂Èó¥ÂíåÊó•ÊúüAPIÂèØ‰ª•‰ª•Êõ¥ÁÆÄÊ¥ÅÁöÑÊñπÊ≥ïÂ§ÑÁêÜÊó∂Èó¥ÂíåÊó•Êúü„ÄÇ Âú®‰ªãÁªçÊú¨ÁØáÊñáÁ´†ÂÜÖÂÆπ‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•ËÆ®ËÆ∫Java 8‰∏∫‰ªÄ‰πàË¶ÅÂºïÂÖ•Êñ∞ÁöÑÊó•ÊúüAPIÔºå‰∏é‰πãÂâçÁöÑÊó∂Èó¥ÂíåÊó•ÊúüÂ§ÑÁêÜÊñπÂºèÊúâ‰ªÄ‰πà‰∏çÂêåÔºü Âú®Java 8‰πãÂâçÔºåÊâÄÊúâÂÖ≥‰∫éÊó∂Èó¥ÂíåÊó•ÊúüÁöÑAPIÈÉΩÂ≠òÂú®ÂêÑÁßç‰ΩøÁî®ÊñπÈù¢ÁöÑÁº∫Èô∑Ôºå‰∏ªË¶ÅÊúâÔºö JavaÁöÑjava.util.DateÂíåjava.util.CalendarÁ±ªÊòìÁî®ÊÄßÂ∑ÆÔºå‰∏çÊîØÊåÅÊó∂Âå∫ÔºåËÄå‰∏î‰ªñ‰ª¨ÈÉΩ‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºõ Áî®‰∫éÊ†ºÂºèÂåñÊó•ÊúüÁöÑÁ±ªDateFormatË¢´ÊîæÂú®java.textÂåÖ‰∏≠ÔºåÂÆÉÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂÆû‰æãÂåñ‰∏Ä‰∏™SimpleDateFormatÂØπË±°Êù•Â§ÑÁêÜÊó•ÊúüÊ†ºÂºèÂåñÔºåÂπ∂‰∏îDateFormat‰πüÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûú‰Ω†Âú®Â§öÁ∫øÁ®ãÁ®ãÂ∫è‰∏≠Ë∞ÉÁî®Âêå‰∏Ä‰∏™DateFormatÂØπË±°Ôºå‰ºöÂæóÂà∞ÊÑèÊÉ≥‰∏çÂà∞ÁöÑÁªìÊûú„ÄÇ ÂØπÊó•ÊúüÁöÑËÆ°ÁÆóÊñπÂºèÁπÅÁêêÔºåËÄå‰∏îÂÆπÊòìÂá∫ÈîôÔºåÂõ†‰∏∫Êúà‰ªΩÊòØ‰ªé0ÂºÄÂßãÁöÑÔºå‰ªéCalendar‰∏≠Ëé∑ÂèñÁöÑÊúà‰ªΩÈúÄË¶ÅÂä†‰∏ÄÊâçËÉΩË°®Á§∫ÂΩìÂâçÊúà‰ªΩ„ÄÇ Áî±‰∫é‰ª•‰∏äËøô‰∫õÈóÆÈ¢òÔºåÂá∫Áé∞‰∫Ü‰∏Ä‰∫õ‰∏âÊñπÁöÑÊó•ÊúüÂ§ÑÁêÜÊ°ÜÊû∂Ôºå‰æãÂ¶ÇJoda-TimeÔºådate4jÁ≠âÂºÄÊ∫êÈ°πÁõÆ„ÄÇ‰ΩÜÊòØÔºåJavaÈúÄË¶Å‰∏ÄÂ•óÊ†áÂáÜÁöÑÁî®‰∫éÂ§ÑÁêÜÊó∂Èó¥ÂíåÊó•ÊúüÁöÑÊ°ÜÊû∂Ôºå‰∫éÊòØJava 8‰∏≠ÂºïÂÖ•‰∫ÜÊñ∞ÁöÑÊó•ÊúüAPI„ÄÇÊñ∞ÁöÑÊó•ÊúüAPIÊòØJSR-310ËßÑËåÉÁöÑÂÆûÁé∞ÔºåJoda-TimeÊ°ÜÊû∂ÁöÑ‰ΩúËÄÖÊ≠£ÊòØJSR-310ÁöÑËßÑËåÉÁöÑÂÄ°ÂØºËÄÖÔºåÊâÄ‰ª•ËÉΩ‰ªéJava 8ÁöÑÊó•ÊúüAPI‰∏≠ÁúãÂà∞ÂæàÂ§öJoda-TimeÁöÑÁâπÊÄß„ÄÇ Java 8Êó•Êúü/Êó∂Èó¥Á±ªJava 8ÁöÑÊó•ÊúüÂíåÊó∂Èó¥Á±ªÂåÖÂê´LocalDate„ÄÅLocalTime„ÄÅInstant„ÄÅDuration‰ª•ÂèäPeriodÔºåËøô‰∫õÁ±ªÈÉΩÂåÖÂê´Âú®java.timeÂåÖ‰∏≠Ôºå‰∏ãÈù¢Êàë‰ª¨ÁúãÁúãËøô‰∫õÁ±ªÁöÑÁî®Ê≥ï„ÄÇ LocalDateÂíåLocalTimeLocalDateÁ±ªË°®Á§∫‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊó•ÊúüÔºå‰ΩÜ‰∏çÂåÖÂê´ÂÖ∑‰ΩìÊó∂Èó¥Ôºå‰πü‰∏çÂåÖÂê´Êó∂Âå∫‰ø°ÊÅØ„ÄÇÂèØ‰ª•ÈÄöËøáLocalDateÁöÑÈùôÊÄÅÊñπÊ≥ïof()ÂàõÂª∫‰∏Ä‰∏™ÂÆû‰æãÔºåLocalDate‰πüÂåÖÂê´‰∏Ä‰∫õÊñπÊ≥ïÁî®Êù•Ëé∑ÂèñÂπ¥‰ªΩÔºåÊúà‰ªΩÔºåÂ§©ÔºåÊòüÊúüÂá†Á≠âÔºö LocalDate localDate = LocalDate.of(2017, 1, 4); // ÂàùÂßãÂåñ‰∏Ä‰∏™Êó•ÊúüÔºö2017-01-04 int year = localDate.getYear(); // Âπ¥‰ªΩÔºö2017 Month month = localDate.getMonth(); // Êúà‰ªΩÔºöJANUARY int dayOfMonth = localDate.getDayOfMonth(); // Êúà‰ªΩ‰∏≠ÁöÑÁ¨¨Âá†Â§©Ôºö4 DayOfWeek dayOfWeek = localDate.getDayOfWeek(); // ‰∏ÄÂë®ÁöÑÁ¨¨Âá†Â§©ÔºöWEDNESDAY int length = localDate.lengthOfMonth(); // Êúà‰ªΩÁöÑÂ§©Êï∞Ôºö31 boolean leapYear = localDate.isLeapYear(); // ÊòØÂê¶‰∏∫Èó∞Âπ¥Ôºöfalse ‰πüÂèØ‰ª•Ë∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïnow()Êù•Ëé∑ÂèñÂΩìÂâçÊó•ÊúüÔºö LocalDate now = LocalDate.now(); LocalTimeÂíåLocalDateÁ±ª‰ººÔºå‰ªñ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´Âú®‰∫éLocalDate‰∏çÂåÖÂê´ÂÖ∑‰ΩìÊó∂Èó¥ÔºåËÄåLocalTimeÂåÖÂê´ÂÖ∑‰ΩìÊó∂Èó¥Ôºå‰æãÂ¶ÇÔºö LocalTime localTime = LocalTime.of(17, 23, 52); // ÂàùÂßãÂåñ‰∏Ä‰∏™Êó∂Èó¥Ôºö17:23:52 int hour = localTime.getHour(); // Êó∂Ôºö17 int minute = localTime.getMinute(); // ÂàÜÔºö23 int second = localTime.getSecond(); // ÁßíÔºö52 LocalDateTimeLocalDateTimeÁ±ªÊòØLocalDateÂíåLocalTimeÁöÑÁªìÂêà‰ΩìÔºåÂèØ‰ª•ÈÄöËøáof()ÊñπÊ≥ïÁõ¥Êé•ÂàõÂª∫Ôºå‰πüÂèØ‰ª•Ë∞ÉÁî®LocalDateÁöÑatTime()ÊñπÊ≥ïÊàñLocalTimeÁöÑatDate()ÊñπÊ≥ïÂ∞ÜLocalDateÊàñLocalTimeÂêàÂπ∂Êàê‰∏Ä‰∏™LocalDateTimeÔºö LocalDateTime ldt1 = LocalDateTime.of(2017, Month.JANUARY, 4, 17, 23, 52); LocalDate localDate = LocalDate.of(2017, Month.JANUARY, 4); LocalTime localTime = LocalTime.of(17, 23, 52); LocalDateTime ldt2 = localDate.atTime(localTime); LocalDateTime‰πüÊèê‰æõÁî®‰∫éÂêëLocalDateÂíåLocalTimeÁöÑËΩ¨ÂåñÔºö LocalDate date = ldt1.toLocalDate(); LocalTime time = ldt1.toLocalTime(); InstantInstantÁî®‰∫éË°®Á§∫‰∏Ä‰∏™Êó∂Èó¥Êà≥ÔºåÂÆÉ‰∏éÊàë‰ª¨Â∏∏‰ΩøÁî®ÁöÑSystem.currentTimeMillis()Êúâ‰∫õÁ±ª‰ººÔºå‰∏çËøáInstantÂèØ‰ª•Á≤æÁ°ÆÂà∞Á∫≥ÁßíÔºàNano-SecondÔºâÔºåSystem.currentTimeMillis()ÊñπÊ≥ïÂè™Á≤æÁ°ÆÂà∞ÊØ´ÁßíÔºàMilli-SecondÔºâ„ÄÇÂ¶ÇÊûúÊü•ÁúãInstantÊ∫êÁ†ÅÔºåÂèëÁé∞ÂÆÉÁöÑÂÜÖÈÉ®‰ΩøÁî®‰∫Ü‰∏§‰∏™Â∏∏ÈáèÔºåsecondsË°®Á§∫‰ªé1970-01-01 00:00:00ÂºÄÂßãÂà∞Áé∞Âú®ÁöÑÁßíÊï∞ÔºånanosË°®Á§∫Á∫≥ÁßíÈÉ®ÂàÜÔºànanosÁöÑÂÄº‰∏ç‰ºöË∂ÖËøá999,999,999Ôºâ„ÄÇInstantÈô§‰∫Ü‰ΩøÁî®now()ÊñπÊ≥ïÂàõÂª∫Â§ñÔºåËøòÂèØ‰ª•ÈÄöËøáofEpochSecondÊñπÊ≥ïÂàõÂª∫Ôºö Instant instant = Instant.ofEpochSecond(120, 100000); ofEpochSecond()ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫ÁßíÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫Á∫≥ÁßíÔºå‰∏äÈù¢ÁöÑ‰ª£Á†ÅË°®Á§∫‰ªé1970-01-01 00:00:00ÂºÄÂßãÂêé‰∏§ÂàÜÈíüÁöÑ10‰∏áÁ∫≥ÁßíÁöÑÊó∂ÂàªÔºåÊéßÂà∂Âè∞‰∏äÁöÑËæìÂá∫‰∏∫Ôºö 1970-01-01T00:02:00.000100Z DurationDurationÁöÑÂÜÖÈÉ®ÂÆûÁé∞‰∏éInstantÁ±ª‰ººÔºå‰πüÊòØÂåÖÂê´‰∏§ÈÉ®ÂàÜÔºösecondsË°®Á§∫ÁßíÔºånanosË°®Á§∫Á∫≥Áßí„ÄÇ‰∏§ËÄÖÁöÑÂå∫Âà´ÊòØInstantÁî®‰∫éË°®Á§∫‰∏Ä‰∏™Êó∂Èó¥Êà≥ÔºàÊàñËÄÖËØ¥ÊòØ‰∏Ä‰∏™Êó∂Èó¥ÁÇπÔºâÔºåËÄåDurationË°®Á§∫‰∏Ä‰∏™Êó∂Èó¥ÊÆµÔºåÊâÄ‰ª•DurationÁ±ª‰∏≠‰∏çÂåÖÂê´now()ÈùôÊÄÅÊñπÊ≥ï„ÄÇÂèØ‰ª•ÈÄöËøáDuration.between()ÊñπÊ≥ïÂàõÂª∫DurationÂØπË±°Ôºö LocalDateTime from = LocalDateTime.of(2017, Month.JANUARY, 5, 10, 7, 0); // 2017-01-05 10:07:00 LocalDateTime to = LocalDateTime.of(2017, Month.FEBRUARY, 5, 10, 7, 0); // 2017-02-05 10:07:00 Duration duration = Duration.between(from, to); // Ë°®Á§∫‰ªé 2017-01-05 10:07:00 Âà∞ 2017-02-05 10:07:00 ËøôÊÆµÊó∂Èó¥ long days = duration.toDays(); // ËøôÊÆµÊó∂Èó¥ÁöÑÊÄªÂ§©Êï∞ long hours = duration.toHours(); // ËøôÊÆµÊó∂Èó¥ÁöÑÂ∞èÊó∂Êï∞ long minutes = duration.toMinutes(); // ËøôÊÆµÊó∂Èó¥ÁöÑÂàÜÈíüÊï∞ long seconds = duration.getSeconds(); // ËøôÊÆµÊó∂Èó¥ÁöÑÁßíÊï∞ long milliSeconds = duration.toMillis(); // ËøôÊÆµÊó∂Èó¥ÁöÑÊØ´ÁßíÊï∞ long nanoSeconds = duration.toNanos(); // ËøôÊÆµÊó∂Èó¥ÁöÑÁ∫≥ÁßíÊï∞ DurationÂØπË±°ËøòÂèØ‰ª•ÈÄöËøáof()ÊñπÊ≥ïÂàõÂª∫ÔºåËØ•ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™Êó∂Èó¥ÊÆµÈïøÂ∫¶ÔºåÂíå‰∏Ä‰∏™Êó∂Èó¥Âçï‰Ωç‰Ωú‰∏∫ÂèÇÊï∞Ôºö Duration duration1 = Duration.of(5, ChronoUnit.DAYS); // 5Â§© Duration duration2 = Duration.of(1000, ChronoUnit.MILLIS); // 1000ÊØ´Áßí PeriodPeriodÂú®Ê¶ÇÂøµ‰∏äÂíåDurationÁ±ª‰ººÔºåÂå∫Âà´Âú®‰∫éPeriodÊòØ‰ª•Âπ¥ÊúàÊó•Êù•Ë°°Èáè‰∏Ä‰∏™Êó∂Èó¥ÊÆµÔºåÊØîÂ¶Ç2Âπ¥3‰∏™Êúà6Â§©Ôºö Period period = Period.of(2, 3, 6); PeriodÂØπË±°‰πüÂèØ‰ª•ÈÄöËøábetween()ÊñπÊ≥ïÂàõÂª∫ÔºåÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÁî±‰∫éPeriodÊòØ‰ª•Âπ¥ÊúàÊó•Ë°°ÈáèÊó∂Èó¥ÊÆµÔºåÊâÄ‰ª•between()ÊñπÊ≥ïÂè™ËÉΩÊé•Êî∂LocalDateÁ±ªÂûãÁöÑÂèÇÊï∞Ôºö // 2017-01-05 Âà∞ 2017-02-05 ËøôÊÆµÊó∂Èó¥ Period period = Period.between( LocalDate.of(2017, 1, 5), LocalDate.of(2017, 2, 5)); Êó•ÊúüÁöÑÊìç‰ΩúÂíåÊ†ºÂºèÂåñÂ¢ûÂä†ÂíåÂáèÂ∞ëÊó•ÊúüJava 8‰∏≠ÁöÑÊó•Êúü/Êó∂Èó¥Á±ªÈÉΩÊòØ‰∏çÂèØÂèòÁöÑÔºåËøôÊòØ‰∏∫‰∫Ü‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇÂΩìÁÑ∂ÔºåÊñ∞ÁöÑÊó•Êúü/Êó∂Èó¥Á±ª‰πüÊèê‰æõ‰∫ÜÊñπÊ≥ïÁî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÂèØÂèòÁâàÊú¨ÔºåÊØîÂ¶ÇÂ¢ûÂä†‰∏ÄÂ§©ÊàñËÄÖÂáèÂ∞ë‰∏ÄÂ§©Ôºö LocalDate date = LocalDate.of(2017, 1, 5); // 2017-01-05 LocalDate date1 = date.withYear(2016); // ‰øÆÊîπ‰∏∫ 2016-01-05 LocalDate date2 = date.withMonth(2); // ‰øÆÊîπ‰∏∫ 2017-02-05 LocalDate date3 = date.withDayOfMonth(1); // ‰øÆÊîπ‰∏∫ 2017-01-01 LocalDate date4 = date.plusYears(1); // Â¢ûÂä†‰∏ÄÂπ¥ 2018-01-05 LocalDate date5 = date.minusMonths(2); // ÂáèÂ∞ë‰∏§‰∏™Êúà 2016-11-05 LocalDate date6 = date.plus(5, ChronoUnit.DAYS); // Â¢ûÂä†5Â§© 2017-01-10 ‰∏äÈù¢‰æãÂ≠ê‰∏≠ÂØπ‰∫éÊó•ÊúüÁöÑÊìç‰ΩúÊØîËæÉÁÆÄÂçïÔºå‰ΩÜÊòØÊúâ‰∫õÊó∂ÂÄôÊàë‰ª¨Ë¶ÅÈù¢‰∏¥Êõ¥Â§çÊùÇÁöÑÊó∂Èó¥Êìç‰ΩúÔºåÊØîÂ¶ÇÂ∞ÜÊó∂Èó¥Ë∞ÉÂà∞‰∏ã‰∏Ä‰∏™Â∑•‰ΩúÊó•ÔºåÊàñËÄÖÊòØ‰∏ã‰∏™ÊúàÁöÑÊúÄÂêé‰∏ÄÂ§©ÔºåËøôÊó∂ÂÄôÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®with()ÊñπÊ≥ïÁöÑÂè¶‰∏Ä‰∏™ÈáçËΩΩÊñπÊ≥ïÔºåÂÆÉÊé•Êî∂‰∏Ä‰∏™TemporalAdjusterÂèÇÊï∞ÔºåÂèØ‰ª•‰ΩøÊàë‰ª¨Êõ¥Âä†ÁÅµÊ¥ªÁöÑË∞ÉÊï¥Êó•ÊúüÔºö LocalDate date7 = date.with(nextOrSame(DayOfWeek.SUNDAY)); // ËøîÂõû‰∏ã‰∏Ä‰∏™Ë∑ùÁ¶ªÂΩìÂâçÊó∂Èó¥ÊúÄËøëÁöÑÊòüÊúüÊó• LocalDate date9 = date.with(lastInMonth(DayOfWeek.SATURDAY)); // ËøîÂõûÊú¨ÊúàÊúÄÂêé‰∏Ä‰∏™ÊòüÊúüÂÖ≠ Ë¶Å‰Ωø‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊ≠£Á°ÆÁºñËØëÔºå‰Ω†ÈúÄË¶Å‰ΩøÁî®ÈùôÊÄÅÂØºÂÖ•TemporalAdjustersÂØπË±°Ôºö import static java.time.temporal.TemporalAdjusters.*; TemporalAdjustersÁ±ª‰∏≠ÂåÖÂê´‰∫ÜÂæàÂ§öÈùôÊÄÅÊñπÊ≥ïÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Ôºå‰∏ãÈù¢ÁöÑË°®Ê†ºÂàóÂá∫‰∫Ü‰∏Ä‰∫õÊñπÊ≥ïÔºö ÊñπÊ≥ïÂêç ÊèèËø∞ dayOfWeekInMonth ËøîÂõûÂêå‰∏Ä‰∏™Êúà‰∏≠ÊØèÂë®ÁöÑÁ¨¨Âá†Â§© firstDayOfMonth ËøîÂõûÂΩìÊúàÁöÑÁ¨¨‰∏ÄÂ§© firstDayOfNextMonth ËøîÂõû‰∏ãÊúàÁöÑÁ¨¨‰∏ÄÂ§© firstDayOfNextYear ËøîÂõû‰∏ã‰∏ÄÂπ¥ÁöÑÁ¨¨‰∏ÄÂ§© firstDayOfYear ËøîÂõûÊú¨Âπ¥ÁöÑÁ¨¨‰∏ÄÂ§© firstInMonth ËøîÂõûÂêå‰∏Ä‰∏™Êúà‰∏≠Á¨¨‰∏Ä‰∏™ÊòüÊúüÂá† lastDayOfMonth ËøîÂõûÂΩìÊúàÁöÑÊúÄÂêé‰∏ÄÂ§© lastDayOfNextMonth ËøîÂõû‰∏ãÊúàÁöÑÊúÄÂêé‰∏ÄÂ§© lastDayOfNextYear ËøîÂõû‰∏ã‰∏ÄÂπ¥ÁöÑÊúÄÂêé‰∏ÄÂ§© lastDayOfYear ËøîÂõûÊú¨Âπ¥ÁöÑÊúÄÂêé‰∏ÄÂ§© lastInMonth ËøîÂõûÂêå‰∏Ä‰∏™Êúà‰∏≠ÊúÄÂêé‰∏Ä‰∏™ÊòüÊúüÂá† next / previous ËøîÂõûÂêé‰∏Ä‰∏™/Ââç‰∏Ä‰∏™ÁªôÂÆöÁöÑÊòüÊúüÂá† nextOrSame / previousOrSame ËøîÂõûÂêé‰∏Ä‰∏™/Ââç‰∏Ä‰∏™ÁªôÂÆöÁöÑÊòüÊúüÂá†ÔºåÂ¶ÇÊûúËøô‰∏™ÂÄºÊª°Ë∂≥Êù°‰ª∂ÔºåÁõ¥Êé•ËøîÂõû Â¶ÇÊûú‰∏äÈù¢Ë°®Ê†º‰∏≠ÂàóÂá∫ÁöÑÊñπÊ≥ï‰∏çËÉΩÊª°Ë∂≥‰Ω†ÁöÑÈúÄÊ±ÇÔºå‰Ω†ËøòÂèØ‰ª•ÂàõÂª∫Ëá™ÂÆö‰πâÁöÑTemporalAdjusterÊé•Âè£ÁöÑÂÆûÁé∞ÔºåTemporalAdjuster‰πüÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂºèÊé•Âè£ÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®LambdaË°®ËææÂºèÔºö @FunctionalInterface public interface TemporalAdjuster { Temporal adjustInto(Temporal temporal); } ÊØîÂ¶ÇÁªôÂÆö‰∏Ä‰∏™Êó•ÊúüÔºåËÆ°ÁÆóËØ•Êó•ÊúüÁöÑ‰∏ã‰∏Ä‰∏™Â∑•‰ΩúÊó•Ôºà‰∏çÂåÖÊã¨ÊòüÊúüÂÖ≠ÂíåÊòüÊúüÂ§©ÔºâÔºö LocalDate date = LocalDate.of(2017, 1, 5); date.with(temporal -> { // ÂΩìÂâçÊó•Êúü DayOfWeek dayOfWeek = DayOfWeek.of(temporal.get(ChronoField.DAY_OF_WEEK)); // Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÊØèÊ¨°Â¢ûÂä†‰∏ÄÂ§© int dayToAdd = 1; // Â¶ÇÊûúÊòØÊòüÊúü‰∫îÔºåÂ¢ûÂä†‰∏âÂ§© if (dayOfWeek == DayOfWeek.FRIDAY) { dayToAdd = 3; } // Â¶ÇÊûúÊòØÊòüÊúüÂÖ≠ÔºåÂ¢ûÂä†‰∏§Â§© if (dayOfWeek == DayOfWeek.SATURDAY) { dayToAdd = 2; } return temporal.plus(dayToAdd, ChronoUnit.DAYS); }); Ê†ºÂºèÂåñÊó•ÊúüÊñ∞ÁöÑÊó•ÊúüAPI‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™DateTimeFormatterÁ±ªÁî®‰∫éÂ§ÑÁêÜÊó•ÊúüÊ†ºÂºèÂåñÊìç‰ΩúÔºåÂÆÉË¢´ÂåÖÂê´Âú®java.time.formatÂåÖ‰∏≠ÔºåJava 8ÁöÑÊó•ÊúüÁ±ªÊúâ‰∏Ä‰∏™format()ÊñπÊ≥ïÁî®‰∫éÂ∞ÜÊó•ÊúüÊ†ºÂºèÂåñ‰∏∫Â≠óÁ¨¶‰∏≤ÔºåËØ•ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™DateTimeFormatterÁ±ªÂûãÂèÇÊï∞Ôºö LocalDateTime dateTime = LocalDateTime.now(); String strDate1 = dateTime.format(DateTimeFormatter.BASIC_ISO_DATE); // 20170105 String strDate2 = dateTime.format(DateTimeFormatter.ISO_LOCAL_DATE); // 2017-01-05 String strDate3 = dateTime.format(DateTimeFormatter.ISO_LOCAL_TIME); // 14:20:16.998 String strDate4 = dateTime.format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd\")); // 2017-01-05 String strDate5 = dateTime.format(DateTimeFormatter.ofPattern(\"‰ªäÂ§©ÊòØÔºöYYYYÂπ¥ MMMM DDÊó• E\", Locale.CHINESE)); // ‰ªäÂ§©ÊòØÔºö2017Âπ¥ ‰∏ÄÊúà 05Êó• ÊòüÊúüÂõõ ÂêåÊ†∑ÔºåÊó•ÊúüÁ±ª‰πüÊîØÊåÅÂ∞Ü‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ëß£ÊûêÊàê‰∏Ä‰∏™Êó•ÊúüÂØπË±°Ôºå‰æãÂ¶ÇÔºö String strDate6 = \"2017-01-05\"; String strDate7 = \"2017-01-05 12:30:05\"; LocalDate date = LocalDate.parse(strDate6, DateTimeFormatter.ofPattern(\"yyyy-MM-dd\")); LocalDateTime dateTime1 = LocalDateTime.parse(strDate7, DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\")); Êó∂Âå∫Java 8‰∏≠ÁöÑÊó∂Âå∫Êìç‰ΩúË¢´ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÁÆÄÂåñ‰∫ÜÔºåÊñ∞ÁöÑÊó∂Âå∫Á±ªjava.time.ZoneIdÊòØÂéüÊúâÁöÑjava.util.TimeZoneÁ±ªÁöÑÊõø‰ª£ÂìÅ„ÄÇZoneIdÂØπË±°ÂèØ‰ª•ÈÄöËøáZoneId.of()ÊñπÊ≥ïÂàõÂª∫Ôºå‰πüÂèØ‰ª•ÈÄöËøáZoneId.systemDefault()Ëé∑ÂèñÁ≥ªÁªüÈªòËÆ§Êó∂Âå∫Ôºö ZoneId shanghaiZoneId = ZoneId.of(\"Asia/Shanghai\"); ZoneId systemZoneId = ZoneId.systemDefault(); of()ÊñπÊ≥ïÊé•Êî∂‰∏Ä‰∏™‚ÄúÂå∫Âüü/ÂüéÂ∏Ç‚ÄùÁöÑÂ≠óÁ¨¶‰∏≤‰Ωú‰∏∫ÂèÇÊï∞Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøágetAvailableZoneIds()ÊñπÊ≥ïËé∑ÂèñÊâÄÊúâÂêàÊ≥ïÁöÑ‚ÄúÂå∫Âüü/ÂüéÂ∏Ç‚ÄùÂ≠óÁ¨¶‰∏≤Ôºö Set&lt;String> zoneIds = ZoneId.getAvailableZoneIds(); ÂØπ‰∫éËÄÅÁöÑÊó∂Âå∫Á±ªTimeZoneÔºåJava 8‰πüÊèê‰æõ‰∫ÜËΩ¨ÂåñÊñπÊ≥ïÔºö ZoneId oldToNewZoneId = TimeZone.getDefault().toZoneId(); Êúâ‰∫ÜZoneIdÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â∞Ü‰∏Ä‰∏™LocalDate„ÄÅLocalTimeÊàñLocalDateTimeÂØπË±°ËΩ¨Âåñ‰∏∫ZonedDateTimeÂØπË±°Ôºö LocalDateTime localDateTime = LocalDateTime.now(); ZonedDateTime zonedDateTime = ZonedDateTime.of(localDateTime, shanghaiZoneId); Â∞ÜzonedDateTimeÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰∏∫Ôºö 2017-01-05T15:26:56.147+08:00[Asia/Shanghai] ZonedDateTimeÂØπË±°Áî±‰∏§ÈÉ®ÂàÜÊûÑÊàêÔºåLocalDateTimeÂíåZoneIdÔºåÂÖ∂‰∏≠2017-01-05T15:26:56.147ÈÉ®ÂàÜ‰∏∫LocalDateTimeÔºå+08:00[Asia/Shanghai]ÈÉ®ÂàÜ‰∏∫ZoneId„ÄÇ Âè¶‰∏ÄÁßçË°®Á§∫Êó∂Âå∫ÁöÑÊñπÂºèÊòØ‰ΩøÁî®ZoneOffsetÔºåÂÆÉÊòØ‰ª•ÂΩìÂâçÊó∂Èó¥Âíå‰∏ñÁïåÊ†áÂáÜÊó∂Èó¥ÔºàUTCÔºâ/Ê†ºÊûóÂ®ÅÊ≤ªÊó∂Èó¥ÔºàGMTÔºâÁöÑÂÅèÂ∑ÆÊù•ËÆ°ÁÆóÔºå‰æãÂ¶ÇÔºö ZoneOffset zoneOffset = ZoneOffset.of(\"+09:00\"); LocalDateTime localDateTime = LocalDateTime.now(); OffsetDateTime offsetDateTime = OffsetDateTime.of(localDateTime, zoneOffset); ÂÖ∂‰ªñÂéÜÊ≥ïJava‰∏≠‰ΩøÁî®ÁöÑÂéÜÊ≥ïÊòØISO 8601Êó•ÂéÜÁ≥ªÁªüÔºåÂÆÉÊòØ‰∏ñÁïåÊ∞ëÁî®ÂéÜÊ≥ïÔºå‰πüÂ∞±ÊòØÊàë‰ª¨ÊâÄËØ¥ÁöÑÂÖ¨ÂéÜ„ÄÇÂπ≥Âπ¥Êúâ365Â§©ÔºåÈó∞Âπ¥ÊòØ366Â§©„ÄÇÈó∞Âπ¥ÁöÑÂÆö‰πâÊòØÔºöÈùû‰∏ñÁ∫™Âπ¥ÔºåËÉΩË¢´4Êï¥Èô§Ôºõ‰∏ñÁ∫™Âπ¥ËÉΩË¢´400Êï¥Èô§„ÄÇ‰∏∫‰∫ÜËÆ°ÁÆóÁöÑ‰∏ÄËá¥ÊÄßÔºåÂÖ¨ÂÖÉ1Âπ¥ÁöÑÂâç‰∏ÄÂπ¥Ë¢´ÂΩìÂÅöÂÖ¨ÂÖÉ0Âπ¥Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ Ê≠§Â§ñJava 8ËøòÊèê‰æõ‰∫Ü4Â•óÂÖ∂‰ªñÂéÜÊ≥ïÔºàÂæàÂ•áÊÄ™‰∏∫‰ªÄ‰πàÊ≤°ÊúâÊ±âÊóè‰∫∫‰ΩøÁî®ÁöÑÂÜúÂéÜÔºâÔºåÊØèÂ•óÂéÜÊ≥ïÈÉΩÂåÖÂê´‰∏Ä‰∏™Êó•ÊúüÁ±ªÔºåÂàÜÂà´ÊòØÔºö ThaiBuddhistDateÔºöÊ≥∞ÂõΩ‰ΩõÊïôÂéÜ MinguoDateÔºö‰∏≠ÂçéÊ∞ëÂõΩÂéÜ JapaneseDateÔºöÊó•Êú¨ÂéÜ HijrahDateÔºö‰ºäÊñØÂÖ∞ÂéÜ ÊØè‰∏™Êó•ÊúüÁ±ªÈÉΩÁªßÊâøChronoLocalDateÁ±ªÔºåÊâÄ‰ª•ÂèØ‰ª•Âú®‰∏çÁü•ÈÅìÂÖ∑‰ΩìÂéÜÊ≥ïÁöÑÊÉÖÂÜµ‰∏ã‰πüÂèØ‰ª•Êìç‰Ωú„ÄÇ‰∏çËøáËøô‰∫õÂéÜÊ≥ï‰∏ÄËà¨‰∏çÂ∏∏Áî®ÔºåÈô§ÈùûÊòØÊúâÊüê‰∫õÁâπÊÆäÈúÄÊ±ÇÊÉÖÂÜµ‰∏ãÊâç‰ºö‰ΩøÁî®„ÄÇ Ëøô‰∫õ‰∏çÂêåÁöÑÂéÜÊ≥ï‰πüÂèØ‰ª•Áî®‰∫éÂêëÂÖ¨ÂéÜËΩ¨Êç¢Ôºö LocalDate date = LocalDate.now(); JapaneseDate jpDate = JapaneseDate.from(date); Áî±‰∫éÂÆÉ‰ª¨ÈÉΩÁªßÊâøChronoLocalDateÁ±ªÔºåÊâÄ‰ª•Âú®‰∏çÁü•ÈÅìÂÖ∑‰ΩìÂéÜÊ≥ïÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÈÄöËøáChronoLocalDateÁ±ªÊìç‰ΩúÊó•ÊúüÔºö Chronology jpChronology = Chronology.ofLocale(Locale.JAPANESE); ChronoLocalDate jpChronoLocalDate = jpChronology.dateNow(); Êàë‰ª¨Âú®ÂºÄÂèëËøáÁ®ã‰∏≠Â∫îËØ•Â∞ΩÈáèÈÅøÂÖç‰ΩøÁî®ChronoLocalDateÔºåÂ∞ΩÈáèÁî®‰∏éÂéÜÊ≥ïÊó†ÂÖ≥ÁöÑÊñπÂºèÊìç‰ΩúÊó∂Èó¥ÔºåÂõ†‰∏∫‰∏çÂêåÁöÑÂéÜÊ≥ïËÆ°ÁÆóÊó•ÊúüÁöÑÊñπÂºè‰∏ç‰∏ÄÊ†∑ÔºåÊØîÂ¶ÇÂºÄÂèëËÄÖ‰ºöÂú®Á®ãÂ∫è‰∏≠ÂÅö‰∏Ä‰∫õÂÅáËÆæÔºåÂÅáËÆæ‰∏ÄÂπ¥‰∏≠Êúâ12‰∏™ÊúàÔºåÂ¶ÇÊûúÊòØ‰∏≠ÂõΩÂÜúÂéÜ‰∏≠ÂåÖÂê´‰∫ÜÈó∞ÊúàÔºå‰∏ÄÂπ¥ÊúâÂèØËÉΩÊòØ13‰∏™ÊúàÔºå‰ΩÜÂºÄÂèëËÄÖËÆ§‰∏∫ÊòØ12‰∏™ÊúàÔºåÂ§öÂá∫Êù•ÁöÑ‰∏Ä‰∏™ÊúàÂ±û‰∫éÊòéÂπ¥ÁöÑ„ÄÇÂÜçÊØîÂ¶ÇÂÅáËÆæÂπ¥‰ªΩÊòØÁ¥ØÂä†ÁöÑÔºåËøá‰∫Ü‰∏ÄÂπ¥Â∞±Âú®ÂéüÊù•ÁöÑÂπ¥‰ªΩ‰∏äÂä†‰∏ÄÔºå‰ΩÜÊó•Êú¨Â§©ÁöáÂú®Êç¢‰ª£‰πãÂêéÈúÄË¶ÅÈáçÊñ∞Á∫™Âπ¥ÔºåÊâÄ‰ª•Ëøá‰∫Ü‰∏ÄÂπ¥Âπ¥‰ªΩÂèØËÉΩ‰ºö‰ªé1ÂºÄÂßãËÆ°ÁÆó„ÄÇ Âú®ÂÆûÈôÖÂºÄÂèëËøáÁ®ã‰∏≠Âª∫ËÆÆ‰ΩøÁî®LocalDateÔºåÂåÖÊã¨Â≠òÂÇ®„ÄÅÊìç‰Ωú„ÄÅ‰∏öÂä°ËßÑÂàôÁöÑËß£ËØªÔºõÈô§ÈùûÈúÄË¶ÅÂ∞ÜÁ®ãÂ∫èÁöÑËæìÂÖ•ÊàñËÄÖËæìÂá∫Êú¨Âú∞ÂåñÔºåËøôÊó∂ÂèØ‰ª•‰ΩøÁî®ChronoLocalDateÁ±ª„ÄÇ Date‰∏éLocalDateTimeÁõ∏‰∫íËΩ¨Êç¢ Âú®Java 8‰∏≠Â∞ÜDateËΩ¨Êç¢‰∏∫LocalDateTime 1.‰ªéÊó•ÊúüËé∑ÂèñZonedDateTimeÂπ∂‰ΩøÁî®ÂÖ∂ÊñπÊ≥ïtoLocalDateTimeÔºàÔºâËé∑ÂèñLocalDateTime2.‰ΩøÁî®LocalDateTimeÁöÑInstantÔºàÔºâÂ∑•ÂéÇÊñπÊ≥ï /** * Date convert LocalDateTime */ @Test public void test() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); log.info(\"localDateTime:{}\", localDateTime); } /** * Date convert LocalDate */ @Test public void test1() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); LocalDate localDate = localDateTime.toLocalDate(); log.info(\"localDate:{}\", localDate); } /** * Date convert LocalTime */ @Test public void test2() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); LocalTime localTime = localDateTime.toLocalTime(); log.info(\"localTime:{}\", localTime); } // Êàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®LocalDateTimeÁöÑFactoryInputÔºàÔºâÊñπÊ≥ï‰ΩøÁî®Á≥ªÁªüÁöÑÈªòËÆ§Êó∂Âå∫„ÄÇ LocalDateTime localDateTime = LocalDateTime.ofInstant(date.toInstant(), zoneId); Âú®Java 8‰∏≠Â∞ÜLocalDateTimeËΩ¨Êç¢‰∏∫Date 1.‰ΩøÁî®atZoneÔºàÔºâÊñπÊ≥ïÂ∞ÜLocalDateTimeËΩ¨Êç¢‰∏∫ZonedDateTime2.Â∞ÜZonedDateTimeËΩ¨Êç¢‰∏∫InstantÔºåÂπ∂‰ªé‰∏≠Ëé∑ÂèñDate /** * LocalDateTime to Date */ @Test public void test3() { LocalDateTime localDateTime = LocalDateTime.now(); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDateTime.atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } /** * LocalDate to Date */ @Test public void test4() { LocalDate localDate = LocalDate.now(); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDate.atStartOfDay().atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } /** * LocalTime to Date */ @Test public void test5() { LocalTime localTime = LocalTime.now(); LocalDate localDate = LocalDate.now(); LocalDateTime localDateTime = LocalDateTime.of(localDate, localTime); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDateTime.atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } Â∏∏Áî®Êìç‰Ωúapipackage com.iogogogo; import lombok.extern.slf4j.Slf4j; import org.junit.Test; import java.time.*; import java.time.format.DateTimeFormatter; import java.util.Date; /** * Created by tao.zeng on 2019/2/12. */ @Slf4j public class Java8DatetimeTest { /** * Date convert LocalDateTime */ @Test public void test() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); log.info(\"localDateTime:{}\", localDateTime); } /** * Date convert LocalDate */ @Test public void test1() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); LocalDate localDate = localDateTime.toLocalDate(); log.info(\"localDate:{}\", localDate); } /** * Date convert LocalTime */ @Test public void test2() { java.util.Date date = new java.util.Date(); Instant instant = date.toInstant(); ZoneId zone = ZoneId.systemDefault(); LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone); LocalTime localTime = localDateTime.toLocalTime(); log.info(\"localTime:{}\", localTime); } /** * LocalDateTime to Date */ @Test public void test3() { LocalDateTime localDateTime = LocalDateTime.now(); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDateTime.atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } /** * LocalDate to Date */ @Test public void test4() { LocalDate localDate = LocalDate.now(); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDate.atStartOfDay().atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } /** * LocalTime to Date */ @Test public void test5() { LocalTime localTime = LocalTime.now(); LocalDate localDate = LocalDate.now(); LocalDateTime localDateTime = LocalDateTime.of(localDate, localTime); ZoneId zone = ZoneId.systemDefault(); Instant instant = localDateTime.atZone(zone).toInstant(); java.util.Date date = Date.from(instant); log.info(\"date:{}\", date); } @Test public void test6() { String s1 = LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"YYYY-mm-dd HH:mm:ss.SSS\")); LocalDate s2 = LocalDate.now(); LocalTime s3 = LocalTime.now(); log.info(\"s1:{}\", s1); log.info(\"s2:{}\", s2); log.info(\"s3:{}\", s3); } @Test public void test7() { long l1 = System.currentTimeMillis(); long l2 = LocalDateTime.now().atZone(ZoneId.systemDefault()).toInstant().toEpochMilli(); log.info(\"l1:{}\", l1); log.info(\"l2:{}\", l2); } }","categories":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"}]},{"title":"Jenkins ÂêéÂè∞ËøõÁ®ã","slug":"jenkins-background-process","date":"2019-02-13T01:58:53.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2019/02/13/jenkins-background-process/","link":"","permalink":"http://iogogogo.github.io/2019/02/13/jenkins-background-process/","excerpt":"","text":"ÈÖçÁΩÆ Jenkins Job ÁöÑÊó∂ÂÄôÔºåafter mvn package Áî®ÂëΩ‰ª§Ë°å nohup java -jar project-1.0-SNAPSHOT.jar &gt; /dev/null 2&gt;&amp;1 &amp;Ëµ∑‰∏Ä‰∏™ spring-boot È°πÁõÆÔºåÊ≠ªÊ¥ª‰∏çÁîüÊïà„ÄÇ ssh Âà∞ÊúçÂä°Âô®‰∏äÊü•‰∏çÂà∞ÂØπÂ∫îÁöÑËøõÁ®ãÔºåËÄåÁõ¥Êé•Âú®ÊúçÂä°Âô®‰∏äÊâßË°åÊòØÂÆåÂÖ® OK ÁöÑ„ÄÇ Google ‰∏ÄÁï™ÂêéÂæóÁü•ÔºåËøôÊòØ Jenkins ÁöÑÁâπÊÄß„ÄÇ To reliably kill processes spawned by a job during a build, Jenkins contains a bit of native code to list up such processes and kill them. This is tested on several platforms and architectures, but if you find a show-stopper problem because of this, you can disable this feature by setting a Java property named ‚Äúhudson.util.ProcessTree.disable‚Äù to the value ‚Äútrue‚Äù. This can be done as a parameter to the ‚Äújava‚Äù binary when starting Jenkins: `java -Dhudson.util.ProcessTree.disable=true -jar jenkins.war` The ProcessTreeKiller takes advantage of the fact that by default a new process gets a copy of the environment variables of its spawning/creating process. It sets a specific environment variable in the process executing the build job. Later, when the user requests to stop the build job‚Äôs process it gets a list of all processes running on the computer and their environment variables, and looks for the environment variable that it initially set for the build job‚Äôs process. ÂÖ∑‰ΩìÈìæÊé•ËØ∑ÁÇπÂáª ProcessTreeKiller„ÄÇ Â§ßÊ¶ÇÊÑèÊÄùÊòØ Jenkins ÊòØÂú®ÂêØÂä® Job ÁöÑÊó∂ÂÄô‰ºöÁªôÂ≠êËøõÁ®ãËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÔºåÂú®ÁªìÊùü Job ÁöÑÊó∂ÂÄô‰ºöÊ£ÄÊü•ËøõÁ®ãÁöÑÁéØÂ¢ÉÂèòÈáèÔºåÂ¶ÇÊûúÂåÖÂê´ Jenkins ÁîüÊàêÁöÑÔºåkill Êéâ„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºö ÂêØÂä® Jenkins ÁöÑÊó∂ÂÄôÂä†‰∏ä -Dhudson.util.ProcessTree.disable=trueÔºå‰πüÂ∞±ÊòØ java -Dhudson.util.ProcessTree.disable=true -jar jenkins.war Âú®ÂêéÂè∞ËøõÁ®ãÂâçÂä†‰∏ä BUILD_ID=dontKillMe, ‰πüÂ∞±ÊòØ BUILD_ID=dontKillMe nohup java -jar project-1.0-SNAPSHOT.jar &gt; /dev/null 2&gt;&amp;1 &amp; Èô§‰∫Ü‰∏äÈù¢‰∏§ÁßçÊñπÂºèÔºåÁΩë‰∏ä‰πüÊúâËØ¥ËÆ≤nohupÊç¢Êàê setsidÁöÑÊñπÂºèÔºåÂ¶ÇÊúâÈúÄË¶ÅÔºåÂèØËá™Ë°åÊµãËØïÈ™åËØÅ","categories":[{"name":"Jenkins","slug":"Jenkins","permalink":"http://iogogogo.github.io/categories/Jenkins/"}],"tags":[{"name":"Jenkins","slug":"Jenkins","permalink":"http://iogogogo.github.io/tags/Jenkins/"}]},{"title":"JavaÊãÜÂàÜshellÂëΩ‰ª§ÊàêÊï∞ÁªÑ","slug":"java-spilt-command","date":"2019-01-29T02:39:33.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2019/01/29/java-spilt-command/","link":"","permalink":"http://iogogogo.github.io/2019/01/29/java-spilt-command/","excerpt":"","text":"ÂëΩ‰ª§Ë°åÊãÜÂàÜÊàêstringÊï∞ÁªÑ ÂéüÂßãÂëΩ‰ª§Â¶Ç‰∏ã -p /path -d \"here's my description\" --verbose other args ÈúÄË¶ÅÁöÑÊãÜÂàÜÁªìÊûúÂ¶Ç‰∏ã Array[0] = -p Array[1] = /path Array[2] = -d Array[3] = here&#39;s my description Array[4] = --verbose Array[5] = other Array[6] = args stackoverflow‰∏äÁöÑÈóÆÈ¢ò‰ª•ÂèäËß£ÂÜ≥ÊñπÊ°à ‰æùËµñÁöÑant jar scala ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®scala.tools.cmdÊèê‰æõÁöÑapi Ëß£ÂÜ≥ÊñπÊ°à /** * [code borrowed from ant.jar] * Crack a command line. * @param toProcess the command line to process. * @return the command line broken into strings. * An empty or null toProcess parameter results in a zero sized array. */ public static String[] translateCommandline(String toProcess) { if (toProcess == null || toProcess.length() == 0) { //no command? no string return new String[0]; } // parse with a simple finite state machine final int normal = 0; final int inQuote = 1; final int inDoubleQuote = 2; int state = normal; final StringTokenizer tok = new StringTokenizer(toProcess, \"\\\"\\' \", true); final ArrayList&lt;String> result = new ArrayList&lt;String>(); final StringBuilder current = new StringBuilder(); boolean lastTokenHasBeenQuoted = false; while (tok.hasMoreTokens()) { String nextTok = tok.nextToken(); switch (state) { case inQuote: if (\"\\'\".equals(nextTok)) { lastTokenHasBeenQuoted = true; state = normal; } else { current.append(nextTok); } break; case inDoubleQuote: if (\"\\\"\".equals(nextTok)) { lastTokenHasBeenQuoted = true; state = normal; } else { current.append(nextTok); } break; default: if (\"\\'\".equals(nextTok)) { state = inQuote; } else if (\"\\\"\".equals(nextTok)) { state = inDoubleQuote; } else if (\" \".equals(nextTok)) { if (lastTokenHasBeenQuoted || current.length() != 0) { result.add(current.toString()); current.setLength(0); } } else { current.append(nextTok); } lastTokenHasBeenQuoted = false; break; } } if (lastTokenHasBeenQuoted || current.length() != 0) { result.add(current.toString()); } if (state == inQuote || state == inDoubleQuote) { throw new RuntimeException(\"unbalanced quotes in \" + toProcess); } return result.toArray(new String[result.size()]); }","categories":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"Spring mvcÊñá‰ª∂‰∏ä‰º†‰∏ãËΩΩ","slug":"spring-file-upload-download","date":"2019-01-29T02:38:07.000Z","updated":"2024-07-01T12:30:37.379Z","comments":true,"path":"2019/01/29/spring-file-upload-download/","link":"","permalink":"http://iogogogo.github.io/2019/01/29/spring-file-upload-download/","excerpt":"","text":"ÁÆÄ‰ªãÊñá‰ª∂‰∏ä‰º†ÊòØÈ°πÁõÆÂºÄÂèë‰∏≠ÊúÄÂ∏∏ËßÅÁöÑÂäüËÉΩ„ÄÇ‰∏∫‰∫ÜËÉΩ‰∏ä‰º†Êñá‰ª∂ÔºåÂøÖÈ°ªÂ∞ÜË°®ÂçïÁöÑmethodËÆæÁΩÆ‰∏∫POSTÔºåÂπ∂Â∞ÜenctypeËÆæÁΩÆ‰∏∫multipart/form-data„ÄÇÂè™ÊúâÂú®ËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊµèËßàÂô®Êâç‰ºöÊääÁî®Êà∑ÈÄâÊã©ÁöÑÊñá‰ª∂‰ª•‰∫åËøõÂà∂Êï∞ÊçÆÂèëÈÄÅÁªôÊúçÂä°Âô®„ÄÇ‰∏ÄÊó¶ËÆæÁΩÆ‰∫Üenctype‰∏∫multipart/form-dataÔºåÊµèËßàÂô®Âç≥‰ºöÈááÁî®‰∫åËøõÂà∂ÊµÅÁöÑÊñπÂºèÊù•Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆÔºåËÄåÂØπ‰∫éÊñá‰ª∂‰∏ä‰º†ÁöÑÂ§ÑÁêÜÂàôÊ∂âÂèäÂú®ÊúçÂä°Âô®Á´ØËß£ÊûêÂéüÂßãÁöÑHTTPÂìçÂ∫î„ÄÇÂú®2003Âπ¥ÔºåApache Software FoundationÂèëÂ∏É‰∫ÜÂºÄÊ∫êÁöÑCommons FileUploadÁªÑ‰ª∂ÔºåÂÖ∂ÂæàÂø´Êàê‰∏∫Servlet/JSPÁ®ãÂ∫èÂëò‰∏ä‰º†Êñá‰ª∂ÁöÑÊúÄ‰Ω≥ÈÄâÊã©„ÄÇServlet3.0ËßÑËåÉÂ∑≤ÁªèÊèê‰æõÊñπÊ≥ïÊù•Â§ÑÁêÜÊñá‰ª∂‰∏ä‰º†Ôºå‰ΩÜËøôÁßç‰∏ä‰º†ÈúÄË¶ÅÂú®Servlet‰∏≠ÂÆåÊàê„ÄÇËÄåSpring MVCÂàôÊèê‰æõ‰∫ÜÊõ¥ÁÆÄÂçïÁöÑÂ∞ÅË£Ö„ÄÇSpring MVC‰∏∫Êñá‰ª∂‰∏ä‰º†Êèê‰æõ‰∫ÜÁõ¥Êé•ÁöÑÊîØÊåÅÔºåËøôÁßçÊîØÊåÅÊòØÁî®Âç≥ÊèíÂç≥Áî®ÁöÑMultipartResolverÂÆûÁé∞ÁöÑ„ÄÇSpring MVC‰ΩøÁî®Apache Commons FileUploadÊäÄÊúØÂÆûÁé∞‰∫Ü‰∏Ä‰∏™MultipartResolverÂÆûÁé∞Á±ªÔºöCommonsMultipartResolver„ÄÇÂõ†Ê≠§ÔºåSpringMVCÁöÑÊñá‰ª∂‰∏ä‰º†ËøòÈúÄË¶Å‰æùËµñApache Commons FileUploadÁöÑÁªÑ‰ª∂„ÄÇ Ê†∏ÂøÉ‰ª£Á†Åpackage com.iogogogo.api; import org.slf4j.Logger; import org.slf4j.LoggerFactory; import org.springframework.boot.web.servlet.MultipartConfigFactory; import org.springframework.context.annotation.Bean; import org.springframework.core.io.InputStreamResource; import org.springframework.core.io.Resource; import org.springframework.http.HttpHeaders; import org.springframework.http.MediaType; import org.springframework.http.ResponseEntity; import org.springframework.util.Base64Utils; import org.springframework.util.FileCopyUtils; import org.springframework.util.unit.DataSize; import org.springframework.web.bind.annotation.*; import org.springframework.web.multipart.MultipartFile; import javax.servlet.MultipartConfigElement; import javax.servlet.ServletOutputStream; import javax.servlet.http.HttpServletResponse; import java.io.*; import java.nio.file.Files; import java.nio.file.Path; import java.nio.file.Paths; import java.util.*; /** * # Á¶ÅÁî® thymeleaf ÁºìÂ≠ò * spring.thymeleaf.cache=false * &lt;p> * # ÊòØÂê¶ÊîØÊåÅÊâπÈáè‰∏ä‰º† (ÈªòËÆ§ÂÄº true) * spring.servlet.multipart.enabled=true * &lt;p> * # ‰∏ä‰º†Êñá‰ª∂ÁöÑ‰∏¥Êó∂ÁõÆÂΩï Ôºà‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏çÁî®ÁâπÊÑè‰øÆÊîπÔºâ * spring.servlet.multipart.location= * &lt;p> * # ‰∏ä‰º†Êñá‰ª∂ÊúÄÂ§ß‰∏∫ 1M ÔºàÈªòËÆ§ÂÄº 1M Ê†πÊçÆËá™Ë∫´‰∏öÂä°Ëá™Ë°åÊéßÂà∂Âç≥ÂèØÔºâ * spring.servlet.multipart.max-file-size=1048576 * &lt;p> * # ‰∏ä‰º†ËØ∑Ê±ÇÊúÄÂ§ß‰∏∫ 10MÔºàÈªòËÆ§ÂÄº10M Ê†πÊçÆËá™Ë∫´‰∏öÂä°Ëá™Ë°åÊéßÂà∂Âç≥ÂèØÔºâ * spring.servlet.multipart.max-request-size=10485760 * &lt;p> * # Êñá‰ª∂Â§ßÂ∞èÈòàÂÄºÔºåÂΩìÂ§ß‰∫éËøô‰∏™ÈòàÂÄºÊó∂Â∞ÜÂÜôÂÖ•Âà∞Á£ÅÁõòÔºåÂê¶ÂàôÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÔºàÈªòËÆ§ÂÄº0 ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏çÁî®ÁâπÊÑè‰øÆÊîπÔºâ * spring.servlet.multipart.file-size-threshold=0 * &lt;p> * # Âà§Êñ≠ÊòØÂê¶Ë¶ÅÂª∂ËøüËß£ÊûêÊñá‰ª∂ÔºàÁõ∏ÂΩì‰∫éÊáíÂä†ËΩΩÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏çÁî®ÁâπÊÑè‰øÆÊîπÔºâ * spring.servlet.multipart.resolve-lazily=false * &lt;p> * Created by tao.zeng on 2018/12/6. * http://localhost:8080/api/file/download2stream * http://localhost:8080/api/file/download */ @RestController @RequestMapping(\"/api/file\") public class FileApi { private Logger logger = LoggerFactory.getLogger(FileApi.class); private final static String FILE_NAME = \"main.csv\"; private final static String FILE_CONTENT = \"key,value\"; private final static String FILE_PATH = System.getProperty(\"user.dir\") + File.separator + \"tmp\"; static { File file = new File(FILE_PATH); if (!file.exists()) { file.mkdirs(); } } /** * ÈÄöËøá OutputStream ÊØèÊ¨°ÂæÄÂÆ¢Êà∑Á´ØÂÜô buffer * * @param response */ @GetMapping(\"/download\") public void download(HttpServletResponse response) { InputStream inStream = new ByteArrayInputStream(FILE_CONTENT.getBytes()); // ËÆæÁΩÆÂº∫Âà∂‰∏ãËΩΩ‰∏çÊâìÂºÄ response.setContentType(\"application/force-download\"); // ËÆæÁΩÆcontent-type response.setHeader(HttpHeaders.CONTENT_TYPE, \"application/octet-stream\"); // ËÆæÁΩÆÊñá‰ª∂Âêç response.addHeader(HttpHeaders.CONTENT_DISPOSITION, \"attachment;fileName=\" + FILE_NAME); byte[] buffer = new byte[1024]; ServletOutputStream outStream = null; BufferedInputStream bufferStream = null; try { outStream = response.getOutputStream(); bufferStream = new BufferedInputStream(inStream); int len; while ((len = bufferStream.read(buffer)) != -1) { outStream.write(buffer, 0, len); } outStream.flush(); } catch (IOException e) { e.printStackTrace(); } finally { close(outStream, bufferStream); } } /** * ÊµÅÂºè‰∏ãËΩΩ * * @return */ @GetMapping(\"/download2stream\") public ResponseEntity&lt;Resource> download2stream() { InputStream inStream = null; try { inStream = new ByteArrayInputStream(FILE_CONTENT.getBytes()); Resource resource = new InputStreamResource(inStream); return ResponseEntity.ok() .contentType(MediaType.parseMediaType(\"application/octet-stream;charset=UTF-8\")) .header(HttpHeaders.CONTENT_DISPOSITION, \"attachment;fileName=\" + FILE_NAME) .body(resource); } catch (Exception e) { e.printStackTrace(); throw new RuntimeException(\"‰∏ãËΩΩÂºÇÂ∏∏:\" + e); } finally { close(inStream); } } /** * multipart/form-data * * @param file * @return */ @PostMapping(\"/upload\") public Map&lt;String, Object> upload(@RequestParam(\"file\") MultipartFile file) { // Ëé∑Âèñ resources ÁõÆÂΩï // String realPath = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getServletContext().getRealPath(\"\"); Map&lt;String, Object> result = new HashMap&lt;>(16); try { logger.info(\"[Êñá‰ª∂Á±ªÂûã] - [{}]\", file.getContentType()); logger.info(\"[Êñá‰ª∂ÂêçÁß∞] - [{}]\", file.getOriginalFilename()); logger.info(\"[Êñá‰ª∂Â§ßÂ∞è] - [{}]\", file.getSize()); byte[] bytes = file.getBytes(); String fileName = FILE_PATH + File.separator + file.getOriginalFilename(); Path path = Paths.get(fileName); Files.write(path, bytes); result.put(\"contentType\", file.getContentType()); result.put(\"fileName\", file.getOriginalFilename()); result.put(\"fileSize\", file.getSize()); } catch (IOException e) { e.printStackTrace(); } return result; } /** * Â§öÊñá‰ª∂‰∏ä‰º† * * @param files * @return */ @PostMapping(\"/multi-file-upload\") public List&lt;Map&lt;String, Object>> multiFileUpload(@RequestParam(\"file\") MultipartFile[] files) { if (files == null || files.length == 0) { return null; } List&lt;Map&lt;String, Object>> results = new ArrayList&lt;>(); Map&lt;String, Object> map; try { for (MultipartFile file : files) { map = new HashMap&lt;>(16); String fileName = FILE_PATH + File.separator + file.getOriginalFilename(); file.transferTo(new File(fileName)); map.put(\"contentType\", file.getContentType()); map.put(\"fileName\", file.getOriginalFilename()); map.put(\"fileSize\", file.getSize()); results.add(map); } } catch (IOException e) { e.printStackTrace(); } return results; } /** * Base64Êñá‰ª∂‰∏ä‰º† * &lt;p> * base64ÁºñÁ†ÅÔºö http://base64.xpcha.com/pic.html * * @param base64 * @return */ @PostMapping(\"/base64-upload\") public Map&lt;String, Object> uploadBase64(String base64) { Map&lt;String, Object> map = new HashMap&lt;>(16); // Èò≤Ê≠¢ÊúâÁöÑ‰º†‰∫Ü data:image/png;base64, ÊúâÁöÑÊ≤°‰º†ÁöÑÊÉÖÂÜµ String[] d = base64.split(\"base64,\"); final byte[] bytes = Base64Utils.decodeFromString(d.length > 1 ? d[1] : d[0]); // BASE64 ÊñπÂºèÁöÑ Ê†ºÂºèÂíåÂêçÂ≠óÈúÄË¶ÅËá™Â∑±ÊéßÂà∂ÔºàÂ¶Ç png ÂõæÁâáÁºñÁ†ÅÂêéÂâçÁºÄÂ∞±‰ºöÊòØ data:image/png;base64,Ôºâ File tempFile = new File(FILE_PATH + File.separator + UUID.randomUUID() + \".jpg\"); try { FileCopyUtils.copy(bytes, tempFile); map.put(\"fileSize\", tempFile.length()); map.put(\"fileName\", tempFile.getName()); map.put(\"parent\", tempFile.getParent()); } catch (IOException e) { e.printStackTrace(); } return map; } private void close(Closeable... closeables) { try { if (closeables != null) { for (Closeable io : closeables) { if (io != null) { io.close(); } } } } catch (IOException e) { logger.warn(\"io close exception {}\", e); } } @Bean public MultipartConfigElement multipartConfigElement() { MultipartConfigFactory factory = new MultipartConfigFactory(); // ÊúÄÂ§ßÊîØÊåÅÊñá‰ª∂Â§ßÂ∞è factory.setMaxFileSize(DataSize.ofMegabytes(10)); // ÊúÄÂ§ßÊîØÊåÅËØ∑Ê±ÇÂ§ßÂ∞è factory.setMaxRequestSize(DataSize.ofMegabytes(100)); // ÊîØÊåÅÊñá‰ª∂ÂÜôÂÖ•Á£ÅÁõò. // factory.setFileSizeThreshold(); // Sets the directory location where files will be stored. // factory.setLocation(\"‰∏ä‰º†Êñá‰ª∂ÁöÑ‰∏¥Êó∂ÁõÆÂΩï\"); return factory.createMultipartConfig(); } }","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"GitÂ∏∏Áî®ÂëΩ‰ª§","slug":"git-command","date":"2019-01-29T02:35:03.000Z","updated":"2024-07-01T12:30:37.371Z","comments":true,"path":"2019/01/29/git-command/","link":"","permalink":"http://iogogogo.github.io/2019/01/29/git-command/","excerpt":"","text":"GitÂ∏∏Áî®ÂëΩ‰ª§‰ΩøÁî®GitÁîüÊàêsshÂØÜÈí•:ssh-keygen -t rsa -C \"email@example.com\" ËÆæÁΩÆÂÖ®Â±ÄÁî®Êà∑ÂêçÂíåÈÇÆÁÆ±:git config --global user.name \"YourName\" git config --global user.email \"email@example.com\" ÂàùÂßãÂåñ‰ªìÂ∫ìgit init Ê∑ªÂä†Êñá‰ª∂Âà∞ÊöÇÂ≠òÂå∫git add #Ê∑ªÂä†ÊåáÂÆöÊñá‰ª∂Âà∞ÊöÇÂ≠òÂå∫ git add . #Ê∑ªÂä†Â∑•‰ΩúÂå∫ÊâÄÊúâÊñá‰ª∂Âà∞ÊöÇÂ≠òÂå∫ git add -i #‰∫§‰∫íÊñπÂºèÊ∑ªÂä†Êñá‰ª∂Âà∞ÊöÇÂ≠òÂå∫ git add -u #Â∞ÜÂ∑•‰ΩúÂå∫‰∏≠Â∑≤ÁªèÂèòÂä®ÁöÑÊñá‰ª∂Ê∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫ÔºåÂΩìÊñ∞Â¢ûÂä†ÁöÑÊñá‰ª∂‰∏ç‰ºöË¢´Ê∑ªÂä† Êèê‰∫§Êñá‰ª∂Âà∞‰ªìÂ∫ìgit commit -m \"ÊèèËø∞‰ø°ÊÅØ\" #Êèê‰∫§Êõ¥Êñ∞ git commit -am \"ÊèèËø∞‰ø°ÊÅØ\" #Â¶ÇÊûúÂ∑•‰ΩúÁõÆÂΩï‰∏≠‰ªÖÊòØÂ∑≤Ë∑üË∏™ÁöÑÊñá‰ª∂Ë¢´‰øÆÊîπÊàñË¢´Âà†Èô§Ôºå‰ΩøÁî®Ê≠§Êèê‰∫§ÂëΩ‰ª§ ÂàÜÊîØÁöÑÂàõÂª∫„ÄÅÂà†Èô§„ÄÅÂíåÂπ≥„ÄÅÂàáÊç¢„ÄÅÊü•Áúãgit branch #Êü•ÁúãGit‰ªìÂ∫ì‰∏≠Â∑≤ÊúâÁöÑÂàÜÊîØ git branch Êñ∞ÂàÜÊîØÂêç [ÂàÜÊîØËµ∑ÁÇπ] #ÂàõÂª∫ÂàÜÊîØÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàÜÊîØËµ∑ÁÇπÁöÑËØùÔºåÂàôÈªòËÆ§Âú®ÂΩìÂâçÂàÜÊîØÁöÑÊúÄÊñ∞Êèê‰∫§‰∏äÂàõÂª∫ÂàÜÊîØ git checkout ÂàÜÊîØÂêç #ÂàáÊç¢ÂàÜÊîØ git checkout -b Êñ∞ÂàÜÊîØÂêç #ÂàõÂª∫ÂêåÊó∂ÂàáÊç¢Âà∞Êñ∞ÂàÜÊîØ git merge Ë¶ÅË¢´ÂêàÂπ∂ÁöÑÂàÜÊîØÂêç #ÂêàÂπ∂ÂàÜÊîØ git branch -d Ë¶ÅÂà†Èô§ÁöÑÂàÜÊîØÂêç #Âà†Èô§ÊåáÂÆöÂàÜÊîØÔºàÂ¶ÇÊûúÂàÜÊîØÊ≤°ÊúâË¢´ÂêàÂπ∂ËøáÔºåËØ•ÂëΩ‰ª§‰ºöÊâßË°åÂ§±Ë¥•Ôºâ git branch -D Ë¶ÅÂà†Èô§ÁöÑÂàÜÊîØÂêç #Âà†Èô§ÊåáÂÆöÂàÜÊîØÔºå‰∏çÁÆ°ÊúâÊ≤°ÊúâË¢´ÂêàÂπ∂Ëøá gitk #Áî®ÂõæÂΩ¢ÁïåÈù¢Êü•ÁúãÂàÜÊîØÊèê‰∫§ÂéÜÂè≤ ÂêàÂπ∂ÂàÜÊîØËøáÁ®ã‰∏≠Â¶ÇÊûúÂèëÁîüÂÜ≤Á™ÅÂàôÈúÄË¶ÅËá™Â∑±ÊâãÂä®Ëß£ÂÜ≥ÂÜ≤Á™ÅÔºåÁÑ∂ÂêéÂÜçÊèê‰∫§„ÄÇÊúâÂÜ≤Á™ÅÊó∂ÔºåGit‰ºöÊòæÁ§∫Âì™‰∏™Êñá‰ª∂ÊúâÂÜ≤Á™ÅÔºåÂπ∂Âú®ÂÜ≤Á™ÅÁöÑÊñá‰ª∂‰∏≠Âä†‰∏äÁâπÊÆäÁöÑÊ†áËØÜÁ¨¶Âè∑ÔºåËß£ÂÜ≥ÂÆåÂÜ≤Á™ÅÂêéÔºåË¶ÅÊâãÂä®ÂéªÊéâËøô‰∫õË¢´Ê∑ªÂä†ÁöÑÊ†áËØÜÁ¨¶Âè∑„ÄÇÂ¶ÇÊûúÂÜ≤Á™ÅÊØîËæÉÂ§çÊùÇÁöÑËØùÔºåÊúÄÂ•Ω‰ΩøÁî®ÂÖ∂‰ªñÂ∑•ÂÖ∑Êù•ÂçèÂä©ÔºåÈÄöËøágit mergetoolÊù•ÂêØÂä®„ÄÇÂÜ≤Á™Å‰∏ÄËà¨ÊòØÂú®‰∏çÂêåÁöÑÂàÜÊîØ‰∏äÂØπÂêå‰∏ÄÊñá‰ª∂ÁöÑÂêå‰∏Ä‰ΩçÁΩÆÂÜÖÂÆπËøõË°å‰∫ÜÊîπÂä®ÔºåÂπ∂Â∑≤Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠ÔºåËøôÊ†∑Âú®ÂêàÂπ∂ÁöÑÊó∂ÂÄôÂ∞±‰ºöÂèëÁîüÂÜ≤Á™Å„ÄÇ Ê†áÁ≠æÁöÑÊ∑ªÂä†„ÄÅÂà†Èô§„ÄÅÊü•Áúãgit tag #Êü•ÁúãÊ†áÁ≠æ git tag Ê†áÁ≠æÂêç #ÂàõÂª∫ÁÆÄÂçïÁöÑÊ†áÁ≠æ git tag -a Ê†áÁ≠æÂêç -m 'ÈôÑÂä†‰ø°ÊÅØ' #ÂàõÂª∫ÈôÑÂä†‰ø°ÊÅØÁöÑÊ†áÁ≠æ git show Ê†áÁ≠æÂêç #ÈÄöËøáÊ†áÁ≠æÊü•Áúã‰ø°ÊÅØ git tag -d Ê†áÁ≠æÂêç #Âà†Èô§Ê†áÁ≠æ Ê†áÁ≠æÂèØ‰ª•Âú®ÈúÄË¶ÅÁöÑÂú∞ÊñπÔºå‰∏∫Êüê‰∏™Êèê‰∫§ÂØπË±°ÂàõÂª∫Âà´ÂêçÔºåËøôÊ†∑‰ª•ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÊ†áÁ≠æÊù•Êü•Áúã‰∏Ä‰∫õ‰ø°ÊÅØÔºåÂàõÂª∫ÂàÜÊîØÁ≠â„ÄÇ Êü•ÁúãÂ∑•‰ΩúÁõÆÂΩïÁä∂ÊÄÅgit status Âú®gitÂëΩ‰ª§ÊâßË°åÂêéÔºåË¶ÅÂÖªÊàêÈÄöËøágit statusÊü•ÁúãgitÁä∂ÊÄÅÁöÑ‰π†ÊÉØÔºå‰ª•‰æøÂèäÊó∂‰∫ÜËß£Êñá‰ª∂ÂèòÂåñÁöÑÊÉÖÂÜµ„ÄÇÈÄöËøágit statusÂèØ‰ª•Áü•ÈÅìÊñá‰ª∂ÁöÑÁä∂ÊÄÅÔºàÂ∑≤‰øÆÊîπÊú™ÊöÇÂ≠ò„ÄÅÂ∑≤Âà†Èô§„ÄÅÂ∑≤‰øÆÊîπÂπ∂Â∑≤ÊöÇÂ≠òÁ≠âÂæÖÊèê‰∫§„ÄÅÊú™Ë∑üË∏™Ôºâ„ÄÇ Êü•ÁúãÊèê‰∫§ÂéÜÂè≤git log git log -p #ÊòæÁ§∫ÊØèÊ¨°Êèê‰∫§Êñá‰ª∂ÂèòÂåñ ÈÄöËøágit logÂèØ‰ª•Êü•ÁúãÂΩìÂâçÂàÜÊîØÁöÑÊâÄÊúâÊèê‰∫§ÂéÜÂè≤ÔºåÁü•ÈÅìÊØèÊ¨°Êèê‰∫§ÁöÑcommitÂØπË±°ÁöÑID‰ª•ÂèäÊèê‰∫§Êó∂ÈôÑÂä†ÁöÑÊèèËø∞‰ø°ÊÅØÁ≠â„ÄÇË¶ÅÊòæÁ§∫Êõ¥Â§öÁöÑ‰ø°ÊÅØÔºåÈúÄË¶Å‰ΩøÁî®ÂÖ∂ÊîØÊåÅÁöÑÈÄâÈ°πÔºåÂ¶Çgit log -pÂèØ‰ª•Â∞ÜÊØèÊ¨°Êèê‰∫§ÁöÑÊñá‰ª∂ÂèòÂåñ‰πüÊòæÁ§∫Âá∫Êù•„ÄÇ Êü•ÁúãÊåáÂÆöÁöÑÊèê‰∫§ÂØπË±°git show commit_id #Êü•ÁúãÊåáÂÆöÁöÑÊüêÊ¨°Êèê‰∫§ÂÜÖÂÆπ git show --all #ÊòæÁ§∫ÊâÄÊúâÁöÑÊèê‰∫§ÂéÜÂè≤ÂÜÖÂÆπ git shortlog -s -n #ÊòæÁ§∫ÊÄªÁöÑÊèê‰∫§Ê¨°Êï∞ ÈÄöËøágit logÂèØ‰ª•ÊòæÁ§∫Êï¥‰∏™Êèê‰∫§ÂéÜÂè≤ÔºåËÄåÈÄöËøágit show commit-idÂàôÂèØ‰ª•Êü•ÁúãÊåáÂÆöÁöÑÊüêÊ¨°Êèê‰∫§ÂÜÖÂÆπÔºåÂΩìÁÑ∂git show -all‰πüÂèØ‰ª•ÊòæÁ§∫Âá∫Êèê‰∫§ÂéÜÂè≤ÔºåÂè¶Â§ñËøòÂèØ‰ª•Ê†ºÂºèÂåñÊòæÁ§∫ÂÜÖÂÆπ„ÄÇ Note : commit-idÂèØ‰ª•ÊòØcommitÂØπË±°ÂØπÂ∫îÁöÑIDÔºå‰πüÂèØ‰ª•ÊòØHEADÔºåÂàÜÊîØÂêçÔºåtagÁ≠â„ÄÇ Êü•ÁúãÂ∑•‰ΩúÂå∫„ÄÅÊöÇÂ≠òÂå∫„ÄÅ‰ªìÂ∫ì‰πãÈó¥ÁöÑÂ∑ÆÂºÇgit diff #ÊØîËæÉÂ∑•‰ΩúÂå∫‰∏éÊöÇÂ≠òÂå∫ÁöÑÂ∑ÆÂºÇ git diff HEAD #ÊØîËæÉÂ∑•‰ΩúÂå∫‰∏é‰ªìÂ∫ì‰∏≠ÊúÄËøë‰∏ÄÊ¨°ÁöÑÊèê‰∫§Èó¥ÁöÑÂ∑ÆÂºÇ git diff --cached #ÊØîËæÉÊöÇÂ≠òÂå∫‰∏é‰ªìÂ∫ì‰∏≠ÊúÄËøë‰∏ÄÊ¨°Êèê‰∫§ÁöÑÂ∑ÆÂºÇ git blame filename #ÂèØ‰ª•ÂàóÂá∫ËØ•Êñá‰ª∂ÊØèÊ¨°Ë¢´‰øÆÊîπÁöÑÊó∂Èó¥ÂíåÂÜÖÂÆπ„ÄÇ ÁâàÊú¨ÂõûÈÄÄ„ÄÅÊí§ÈîÄÊìç‰Ωúgit reflog #ÊòæÁ§∫Êèê‰∫§ÂéÜÂè≤ÁöÑÁÆÄ‰ªã git checkout -- filename #‰∏¢ÂºÉÂ∑•‰ΩúÂå∫ÁöÑ‰øÆÊîπ git reset --hard HEAD^ #ÂõûÈÄÄÂà∞‰∏ä‰∏Ä‰∏™ÁâàÊú¨ git reset --hard commit_id #ÂõûÈÄÄÂà∞ÊåáÂÆöÁâàÊú¨ git checkout -- filename #ÊÅ¢Â§çÂ∑•‰ΩúÂå∫Ë¢´Âà†Èô§ÁöÑÊåáÂÆöÊñá‰ª∂ÔºàÊñá‰ª∂‰πãÂâçË¢´Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠Ôºâ git checkout -f #ÊÅ¢Â§çÂ∑•‰ΩúÂå∫‰∏≠ÊâÄÊúâË¢´Âà†Èô§ÁöÑÊñá‰ª∂(Êñá‰ª∂‰πãÂâçË¢´Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠) git ls-files -d #ÂàóÂá∫Â∑•‰ΩúÂå∫Ë¢´Âà†Èô§ÁöÑÊñá‰ª∂ÔºàÊñá‰ª∂‰πãÂâçË¢´Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠Ôºâ ÊúâÊó∂ÂÄôÔºåÁî±‰∫éÊàë‰ª¨ÁöÑËØØÊìç‰ΩúÔºå‰∫ßÁîü‰∫Ü‰∏Ä‰∫õÈîôËØØÔºåÊàë‰ª¨ÂèëÁé∞ÂêéÂ∏åÊúõËÉΩÂ§üÂèäÊó∂Á∫†Ê≠£Ëøô‰∫õÂõ†‰∏∫ËØØÊìç‰ΩúËÄå‰∫ßÁîüÁöÑÁªìÊûúÔºåÂ∞ÜÂ∑•‰ΩúÁõÆÂΩïÊÅ¢Â§çÂà∞Êüê‰∏™Ê≠£Â∏∏Áä∂ÊÄÅ„ÄÇ Êí§ÈîÄ‰øÆÊîπÔºå‰ΩÜËøòÊ≤°ÊúâÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫Ôºö git checkout -- filename ‰øÆÊîπÁöÑÊñá‰ª∂‰ºöË¢´ÊÅ¢Â§çÂà∞‰∏äÊ¨°Êèê‰∫§Êó∂ÁöÑÁä∂ÊÄÅÔºå‰øÆÊîπÁöÑÂÜÖÂÆπ‰ºö‰∏¢Â§±„ÄÇ ÁâàÊú¨ÂõûÈÄÄÔºöÂÖàÈÄöËøágit reflogÊâæÂà∞Êüê‰∏™ÁâàÊú¨ÁöÑcommit_idÔºåÁÑ∂ÂêéÁî®git reset --hard commit_idÂ∞ÜÂ∑•‰ΩúÁõÆÂΩïÁöÑÊñá‰ª∂ÊÅ¢Â§çÂà∞ÊåáÂÆöÁöÑÁâàÊú¨„ÄÇ ÊÅ¢Â§çÂ∑•‰ΩúÂå∫‰∏≠Ë¢´Âà†Èô§ÁöÑÊñá‰ª∂ÔºàÊñá‰ª∂‰πãÂâçË¢´Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠ÔºâÔºögit checkout -- filename Êàñ git checkout -f Â§á‰ªΩÂ∑•‰ΩúÂå∫git stash #Â∞ÜÂ∑•‰ΩúÂå∫Êñá‰ª∂‰øùÂ≠òÂú®GitÂÜÖÈÉ®Ê†à‰∏≠ git stash list #ÂàóÂá∫GitÂÜÖÈÉ®Ê†à‰∏≠‰øùÂ≠òÁöÑÂ∑•‰ΩúÂå∫Êñá‰ª∂ÂàóË°® git stash apply stash_id #ÊÅ¢Â§çÂ∑•‰ΩúÂå∫Âà∞ÊåáÂÆöÁöÑÂÜÖÈÉ®Ê†àÁä∂ÊÄÅ git stash pop #ÊÅ¢Â§çÂ∑•‰ΩúÂå∫Âà∞‰∏ä‰∏Ä‰∏™ÂÜÖÈÉ®Ê†àÁä∂ÊÄÅ git stash clear #Ê∏ÖÁ©∫GitÂÜÖÈÉ®Ê†à Â¶ÇÊûúÊ≠£Âú®‰∏Ä‰∏™developÂàÜÊîØ‰∏äÊ≠£Âú®ÂºÄÂèëÊñ∞ÂäüËÉΩÔºå‰ΩÜËøôÊó∂masterÂàÜÊîØ(Á®≥ÂÆöÁâàÊú¨)Á™ÅÁÑ∂ÂèëÁé∞‰∫ÜbugÔºåÂπ∂ÈúÄË¶ÅÂèäÊó∂‰øÆÂ§çÔºåËÄådevelopÂàÜÊîØÊ≠§Êó∂ÁöÑÂ∑•‰ΩúËøòÊ≤°ÊúâÂÆåÊàêÔºå‰∏î‰∏çÂ∏åÊúõÂ∞Ü‰πãÂâçÁöÑÂ∑•‰ΩúÂ∞±ËøôÊ†∑Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏≠Êó∂ÔºåËøôÊó∂Â∞±ÂèØ‰ª•Áî®git stashÊù•ÊöÇÊó∂‰øùÂ≠òËøô‰∫õÁä∂ÊÄÅÂà∞GitÂÜÖÈÉ®Ê†à‰∏≠ÔºåÂπ∂Áî®ÂΩìÂâçÂàÜÊîØ‰∏ä‰∏ÄÊ¨°ÁöÑÊèê‰∫§ÂÜÖÂÆπÊù•ÊÅ¢Â§çÂ∑•‰ΩúÁõÆÂΩïÔºåÁÑ∂ÂêéÂàáÊç¢Âà∞masterÂàÜÊîØËøõË°åbug‰øÆÂ§çÂ∑•‰ΩúÔºåÁ≠â‰øÆÂ§çÂÆåÊØïÂπ∂Êèê‰∫§Âà∞‰ªìÂ∫ì‰∏äÂêéÔºåÂÜç‰ΩøÁî®git stash apply [stash@{0}]ÊàñËÄÖgit stash popÂ∞ÜÂ∑•‰ΩúÁõÆÂΩïÊÅ¢Â§çÂà∞‰πãÂâçÁöÑÁä∂ÊÄÅÔºåÁªßÁª≠‰πãÂâçÁöÑÂ∑•‰Ωú„ÄÇ ÂêåÊó∂‰πüÂèØ‰ª•Â§öÊ¨°‰ΩøÁî®git stashÂ∞ÜÊú™Êèê‰∫§ÁöÑ‰ª£Á†ÅÂéãÂÖ•Âà∞GitÊ†à‰∏≠Ôºå‰ΩÜÂΩìÂ§öÊ¨°‰ΩøÁî®git stashÂëΩ‰ª§ÂêéÔºåGitÊ†àÈáåÂ∞ÜÂÖÖÊª°‰∫ÜÊú™Êèê‰∫§ÁöÑ‰ª£Á†ÅÔºåËøôÊó∂ÂÄôÂà∞Â∫ïË¶ÅÁî®Âì™‰∏™ÁâàÊú¨Êù•ÊÅ¢Â§çÂ∑•‰ΩúÁõÆÂΩïÂë¢Ôºügit stash listÂëΩ‰ª§ÂèØ‰ª•Â∞ÜÂΩìÂâçÁöÑGitÊ†à‰ø°ÊÅØÊâìÂç∞Âá∫Êù•ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜÊâæÂà∞ÂØπÂ∫îÁöÑÁâàÊú¨Âè∑Ôºå‰æãÂ¶Ç‰ΩøÁî®git stash apply stash@{1}Â∞±ÂèØ‰ª•Áî®ÁâàÊú¨Âè∑‰∏∫stash@{1}ÁöÑÂÜÖÂÆπÊù•ÊÅ¢Â§çÂ∑•‰ΩúÁõÆÂΩï„ÄÇ ÂΩìGitÊ†à‰∏≠ÊâÄÊúâÁöÑÂÜÖÂÆπÈÉΩË¢´ÊÅ¢Â§çÂêéÔºåÂèØ‰ª•‰ΩøÁî®git stash clearÊù•Â∞ÜÊ†àÊ∏ÖÁ©∫„ÄÇ Â∞ÜÂΩìÂâçÂ∑•‰ΩúÂå∫ÁõÆÂΩïÊñá‰ª∂ÂéãÁº©ÂΩíÊ°£git archive --format=zip -o arch.zip HEAD git arch --format zip head>arch.zip ËøúÁ®ãÊìç‰Ωú GitÁõ∏ÊØîÂÖ∂‰ªñÁâàÊú¨ÊéßÂà∂ËΩØ‰ª∂ÁöÑ‰∏Ä‰∏™‰ºòÁÇπÂ∞±ÊòØÂ§ßÂ§öÊï∞ÁöÑÊìç‰ΩúÈÉΩÂèØ‰ª•Âú®Êú¨Âú∞ËøõË°åÔºåËÄå‰∏çÁî®ÁÆ°ËøúÁ®ãÁöÑ‰ªìÂ∫ìÔºåÂõ†‰∏∫Êìç‰ΩúÊòØÂú®Êú¨Âú∞Ôºå‰∏îÊìç‰ΩúÁöÑÊï∞ÊçÆ‰πüÊòØÂú®Êú¨Âú∞ÔºåÂä†‰∏äÊåáÈíàÁ≠âÂéüÂõ†ÔºåÊâÄ‰ª•ÊâßË°åÁöÑÈÄüÂ∫¶Â∞±‰ºöÊØîËæÉÂø´„ÄÇ Âú®Â§ö‰∫∫Âçè‰ΩúÁöÑÈ°πÁõÆ‰∏≠ÔºåÂ∞±ÈúÄË¶ÅÊ∂âÂèä‰∏éËøúÁ®ã‰ªìÂ∫ì‰∫§‰∫íÁöÑÈóÆÈ¢òÔºå‰∏ªË¶ÅÊòØÂ¶Ç‰Ωï‰ªéËøúÁ®ã‰ªìÂ∫ìÊäìÂèñÊúÄÊñ∞Êï∞ÊçÆÂêàÂπ∂Âà∞Ëá™Â∑±ÁöÑÊú¨Âú∞ÂàÜÊîØ‰∏äÔºåÂ∞ÜËá™Â∑±ÁöÑÊúÄÊñ∞ÊàêÊûúÂàÜ‰∫´ÁªôÂÖ∂‰ªñ‰∫∫ÊàñËÆ©Âà´‰∫∫ÂÆ°Êü•Á≠â „ÄÇ ËøúÁ®ã‰ªìÂ∫ìÁöÑÂÖãÈöÜ„ÄÅÊ∑ªÂä†„ÄÅÊü•Áúãgit remote #ÊòæÁ§∫Â∑≤Ê∑ªÂä†ÁöÑËøúÁ®ã‰ªìÂ∫ìÂêç git remote -v #ÊòæÁ§∫Â∑≤Ê∑ªÂä†ÁöÑËøúÁ®ã‰ªìÂ∫ìÂêçÂíåÂú∞ÂùÄ git remote add ËøúÁ®ã‰ªìÂ∫ìÂêç ËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄ #Âú®Êú¨Âú∞Ê∑ªÂä†ËøúÁ®ã‰ªìÂ∫ì git remote rm ËøúÁ®ã‰ªìÂ∫ìÂêç #Âà†Èô§Êú¨Âú∞Ê∑ªÂä†ÁöÑËøúÁ®ã‰ªìÂ∫ìÂêç git remote rename ÂéüÂêç Êñ∞Âêç #ÈáçÂëΩÂêçËøúÁ®ã‰ªìÂ∫ìÂêç git clone ËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄ [ÂÖãÈöÜÂà∞ÊåáÂÆöÁöÑÊñá‰ª∂Â§π] #ÂÖãÈöÜËøúÁ®ã‰ªìÂ∫ìÂà∞Êú¨Âú∞ git clone -b [branch-name] ËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄ [ÂÖãÈöÜÂà∞ÊåáÂÆöÁöÑÊñá‰ª∂Â§π] #ÂÖãÈöÜËøúÁ®ã‰ªìÂ∫ìÂà∞Êú¨Âú∞ -b git fetch ËøúÁ®ã‰ªìÂ∫ìÂêç #‰ªéËøúÁ®ã‰ªìÂ∫ìÊäìÂèñÊúÄÊñ∞Êï∞ÊçÆÂà∞Êú¨Âú∞‰ΩÜ‰∏ç‰∏éÊú¨Âú∞ÂàÜÊîØËøõË°åÂêàÂπ∂ git pull ËøúÁ®ã‰ªìÂ∫ìÂêç Êú¨Âú∞Ë¶ÅÂêàÂπ∂ÁöÑÂàÜÊîØÂêç #‰ªéËøúÁ®ã‰ªìÂ∫ìÊäìÂèñÊúÄÊñ∞Êï∞ÊçÆÂπ∂Ëá™Âä®‰∏éÊú¨Âú∞ÂàÜÊîØËøõË°åÂêàÂπ∂ git push ËøúÁ®ã‰ªìÂ∫ìÂêç Êú¨Âú∞ÂàÜÊîØÂêç #Â∞ÜÊú¨Âú∞‰ªìÂ∫ìÊé®ÈÄÅÂà∞ËøúÁ®ã‰ªìÂ∫ì‰∏≠ git remote show ËøúÁ®ã‰ªìÂ∫ìÂêç #Êü•ÁúãËøúÁ®ã‰ªìÂ∫ì‰ø°ÊÅØ git remote show #Êü•ÁúãÊâÄÊúâËøúÁ®ã‰ªìÂ∫ì git push ËøúÁ®ã‰ªìÂ∫ìÂêç Ê†áÁ≠æÂêç #Â∞ÜÊ†áÁ≠æÊé®ÈÄÅÂà∞ËøúÁ®ã‰ªìÂ∫ìÔºàGitÈªòËÆ§‰∏çÊé®ÈÄÅÊ†áÁ≠æÔºâ ÂçèÂêåÊµÅÁ®ã ForkËøúÁ®ãÈ°πÁõÆ ÊääForkÁöÑÈ°πÁõÆcloneÂà∞Êú¨Âú∞ ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÔºåÂ∞ÜÂà´‰∫∫ÁöÑÂ∫ìÊ∑ªÂä†‰∏∫ËøúÁ´ØÂ∫ì git remote add ËøúÁ´Ø‰ªìÂ∫ìÂêç ËøúÁ´ØÁöÑÂàÜÊîØ ËøêË°å‰ª•‰∏ãÂëΩ‰ª§ÔºåÊãâÂéªÂêàÂπ∂Âà∞Êú¨Âú∞ git pull ËøúÁ´Ø‰ªìÂ∫ìÂêç ËøúÁ´ØÂàÜÊîØÂêç ÁºñËæëÂÜÖÂÆπ commit‰πãÂêépushÂà∞Ëá™Â∑±ÁöÑÂ∫ì ÁôªÂΩïGithubÔºåÂú®‰Ω†ÁöÑÈ¶ñÈ°µÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™pull requestÊåâÈíÆÔºåÁÇπÂáªÂÆÉÔºåÂ°´ÂÜô‰∏Ä‰∫õËØ¥Êòé‰ø°ÊÅØÔºåÊèê‰∫§Âç≥ÂèØ„ÄÇ Âú®Êú¨Âú∞ÁºñËæëÂÜÖÂÆπÂâçÂøÖÈ°ªÊâßË°åpullÊìç‰ΩúÂêåÊ≠•Âà´‰∫∫ÁöÑËøúÁ´ØÂ∫ìÔºàËøôÊ†∑ÈÅøÂÖçÂÜ≤Á™ÅÔºâ ÂÆûÁî®ÊäÄÂ∑ß ÂΩìÊâãÂ§¥Â∑•‰ΩúÊ≤°ÊúâÂÆåÊàêÊó∂ÔºåÂÖàÊääÂ∑•‰ΩúÁé∞Âú∫git stash‰∏Ä‰∏ãÔºåÁÑ∂ÂêéÂéª‰øÆÂ§çbugÔºå‰øÆÂ§çÂêéÔºåÂÜç‰ΩøÁî®git stash popÔºåÂõûÂà∞Â∑•‰ΩúÁé∞Âú∫. Â§ö‰∫∫Âçè‰ΩúÊäÄÂ∑ß Êü•ÁúãËøúÁ®ãÂ∫ì‰ø°ÊÅØÔºå‰ΩøÁî®git remote -vÔºõÊú¨Âú∞Êñ∞Âª∫ÁöÑÂàÜÊîØÂ¶ÇÊûú‰∏çÊé®ÈÄÅÂà∞ËøúÁ®ãÔºåÂØπÂÖ∂‰ªñ‰∫∫Â∞±ÊòØ‰∏çÂèØËßÅÁöÑÔºõ‰ªéÊú¨Âú∞Êé®ÈÄÅÂàÜÊîØÔºå‰ΩøÁî®git push ËøúÁ®ã‰ªìÂ∫ìÂêç ÂàÜÊîØÂêçÔºåÂ¶ÇÊûúÊé®ÈÄÅÂ§±Ë¥•ÔºåÂÖàÁî®git pullÊäìÂèñËøúÁ®ãÁöÑÊñ∞Êèê‰∫§ÔºõÂú®Êú¨Âú∞ÂàõÂª∫ÂíåËøúÁ®ãÂàÜÊîØÂØπÂ∫îÁöÑÂàÜÊîØÔºå‰ΩøÁî®git checkout -b branch-name origin/branch-nameÔºåÊú¨Âú∞ÂíåËøúÁ®ãÂàÜÊîØÁöÑÂêçÁß∞ÊúÄÂ•Ω‰∏ÄËá¥ÔºõÂª∫Á´ãÊú¨Âú∞ÂàÜÊîØÂíåËøúÁ®ãÂàÜÊîØÁöÑÂÖ≥ËÅîÔºå‰ΩøÁî®git branch --set-upstream branch-name origin/branch-nameÔºõ‰ªéËøúÁ®ãÊäìÂèñÂàÜÊîØÔºå‰ΩøÁî®git pullÔºåÂ¶ÇÊûúÊúâÂÜ≤Á™ÅÔºåË¶ÅÂÖàÂ§ÑÁêÜÂÜ≤Á™Å„ÄÇ","categories":[{"name":"Â∑•ÂÖ∑‰ΩøÁî®","slug":"Â∑•ÂÖ∑‰ΩøÁî®","permalink":"http://iogogogo.github.io/categories/Â∑•ÂÖ∑‰ΩøÁî®/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/tags/Git/"}]},{"title":"Spring Boot ÁªìÂêà Quartz ËÆæÁΩÆÂÆöÊó∂‰ªªÂä°","slug":"spring-quartz-scheduled","date":"2019-01-29T02:29:13.000Z","updated":"2024-07-01T12:30:37.380Z","comments":true,"path":"2019/01/29/spring-quartz-scheduled/","link":"","permalink":"http://iogogogo.github.io/2019/01/29/spring-quartz-scheduled/","excerpt":"","text":"Spring Boot ÂéüÁîü @Scheduled‰ªªÂä°ÈÖçÁΩÆ@Slf4j @Component public class ScheduledTask { @Scheduled(fixedRate = 5000) // Ë°®Á§∫ÊØèÈöî5000msÔºåSpring scheduling‰ºöË∞ÉÁî®‰∏ÄÊ¨°ËØ•ÊñπÊ≥ïÔºå‰∏çËÆ∫ËØ•ÊñπÊ≥ïÁöÑÊâßË°åÊó∂Èó¥ÊòØÂ§öÂ∞ë public void reportCurrentTime() throws InterruptedException { log.info(new Date()); } @Scheduled(fixedDelay = 5000) // Ë°®Á§∫ÂΩìÊñπÊ≥ïÊâßË°åÂÆåÊØï5000msÂêéÔºåSpring scheduling‰ºöÂÜçÊ¨°Ë∞ÉÁî®ËØ•ÊñπÊ≥ï public void reportCurrentTimeAfterSleep() throws InterruptedException { log.info(new Date()); } @Scheduled(cron = \"0 0 1 * * *\") // Êèê‰æõ‰∫Ü‰∏ÄÁßçÈÄöÁî®ÁöÑÂÆöÊó∂‰ªªÂä°Ë°®ËææÂºèÔºåËøôÈáåË°®Á§∫ÊØèÈöî5ÁßíÊâßË°å‰∏ÄÊ¨°ÔºåÊõ¥Âä†ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÂèØ‰ª•ÂèÇËÄÉcronË°®ËææÂºè„ÄÇ public void reportCurrentTimeCron() throws InterruptedException { log.info(new Date()); } } ÂêØÂä®@SpringBootApplication @EnableScheduling // ÂëäËØâSpringÂàõÂª∫‰∏Ä‰∏™task executorÔºåÂ¶ÇÊûúÊàë‰ª¨Ê≤°ÊúâËøô‰∏™Ê†áÊ≥®ÔºåÊâÄÊúâ@ScheduledÊ†áÊ≥®ÈÉΩ‰∏ç‰ºöÊâßË°å public class App { public static void main(String[] args) { SpringApplication.run(App.class, args); } } Spring Boot ÁªìÂêà Quartz ÂÆûÁé∞Âä®ÊÄÅËÆæÁΩÆÂÆöÊó∂‰ªªÂä° ÈúÄË¶Åspring bootÁâàÊú¨Â§ß‰∫é2.x http://www.quartz-scheduler.org/ Ê∑ªÂä†‰æùËµñÈÖçÁΩÆ// implementation 'org.quartz-scheduler:quartz:2.3.0' // implementation 'org.quartz-scheduler:quartz-jobs:2.3.0' implementation 'org.springframework.boot:spring-boot-starter-quartz' ÈÖçÁΩÆ quartzJobFactory Âíå scheduler ÂØπË±°package com.iogogogo.quartz.configure; import org.quartz.Scheduler; import org.quartz.spi.TriggerFiredBundle; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.beans.factory.config.AutowireCapableBeanFactory; import org.springframework.context.ApplicationContextAware; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.scheduling.quartz.SchedulerFactoryBean; import org.springframework.scheduling.quartz.SpringBeanJobFactory; import org.springframework.stereotype.Component; /** * Created by tao.zeng on 2019/1/29. */ @Configuration public class QuartzConfiguration { /** * Ëß£ÂÜ≥Job‰∏≠Ê≥®ÂÖ•Spring Bean‰∏∫nullÁöÑÈóÆÈ¢ò */ @Component(\"quartzJobFactory\") class QuartzJobFactory extends SpringBeanJobFactory implements ApplicationContextAware { // Ëøô‰∏™ÂØπË±°Spring‰ºöÂ∏ÆÊàë‰ª¨Ëá™Âä®Ê≥®ÂÖ•ËøõÊù•,‰πüÂ±û‰∫éSpringÊäÄÊúØËåÉÁï¥. @Autowired private AutowireCapableBeanFactory capableBeanFactory; @Override protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception { // Ë∞ÉÁî®Áà∂Á±ªÁöÑÊñπÊ≥ï final Object jobInstance = super.createJobInstance(bundle); // ËøõË°åÊ≥®ÂÖ•,ËøôÂ±û‰∫éSpringÁöÑÊäÄÊúØ,‰∏çÊ∏ÖÊ•öÁöÑÂèØ‰ª•Êü•ÁúãSpringÁöÑAPI. capableBeanFactory.autowireBean(jobInstance); return jobInstance; } } /** * Ê≥®ÂÖ•schedulerÂà∞springÔºåÂú®‰∏ãÈù¢quartzManege‰ºöÁî®Âà∞ * * @return * @throws Exception */ @Bean(name = \"scheduler\") public Scheduler scheduler(SchedulerFactoryBean schedulerFactoryBean) throws Exception { // schedulerFactoryBean.setJobFactory(quartzJobFactory); // ËØ•ÊñπÊ≥ï‰ºöÂÜçÊ¨°ÂàùÂßãÂåñ quartz ËøôÈáåÁöÑÂàùÂßãÂåñ‰ªªÂä°‰∫§ÁªôspringÂÆπÂô®Âç≥ÂèØ // schedulerFactoryBean.afterPropertiesSet(); Scheduler scheduler = schedulerFactoryBean.getScheduler(); scheduler.start(); return scheduler; } } Êñ∞Âª∫‰∏Ä‰∏™beanÂØπË±°ÔºåÁî®Êù•‰øùÂ≠òÂü∫Êú¨ÁöÑjob‰ø°ÊÅØpackage com.iogogogo.quartz.bean; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; /** * Created by tao.zeng on 2019/1/18. */ @Data @NoArgsConstructor @AllArgsConstructor public class QuartzJob { public static final Integer STATUS_RUNNING = 1; public static final Integer STATUS_NOT_RUNNING = 0; public static final Integer CONCURRENT_IS = 1; public static final Integer CONCURRENT_NOT = 0; private String jobId; /** * cron Ë°®ËææÂºè */ private String cronExpression; /** * ‰ªªÂä°Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂêç */ private String methodName; /** * ‰ªªÂä°ÊòØÂê¶ÊúâÁä∂ÊÄÅ */ private Integer isConcurrent; /** * ÊèèËø∞ */ private String description; /** * ‰ªªÂä°ÊâßË°åÊó∂Ë∞ÉÁî®Âì™‰∏™Á±ªÁöÑÊñπÊ≥ï ÂåÖÂêç+Á±ªÂêçÔºåÂÆåÂÖ®ÈôêÂÆöÂêç */ private String beanName; /** * Ëß¶ÂèëÂô®ÂêçÁß∞ */ private String triggerName; /** * ‰ªªÂä°Áä∂ÊÄÅ */ private Integer jobStatus; /** * ‰ªªÂä°Âêç */ private String jobName; } Êñ∞Âª∫‰∏Ä‰∏™Áªü‰∏ÄÁöÑQuartzManagerÔºåÁî®Êù•Áªü‰∏ÄÁÆ°ÁêÜjobpackage com.iogogogo.quartz.configure; import com.iogogogo.quartz.bean.QuartzJob; import lombok.extern.slf4j.Slf4j; import org.quartz.*; import org.springframework.stereotype.Component; import javax.annotation.Resource; import static org.quartz.JobBuilder.newJob; import static org.quartz.TriggerBuilder.newTrigger; /** * Created by tao.zeng on 2019/1/18. */ @Slf4j @Component public class QuartzManager { @Resource(name = \"scheduler\") private Scheduler scheduler; public void addJob(QuartzJob job) throws SchedulerException, ClassNotFoundException, IllegalAccessException, InstantiationException { // ÈÄöËøáÁ±ªÂêçËé∑ÂèñÂÆû‰ΩìÁ±ªÔºåÂç≥Ë¶ÅÊâßË°åÁöÑÂÆöÊó∂‰ªªÂä°ÁöÑÁ±ª Class&lt;?> clazz = Class.forName(job.getBeanName()); Job jobEntity = (Job) clazz.newInstance(); // ÈÄöËøáÂÆû‰ΩìÁ±ªÂíå‰ªªÂä°ÂêçÂàõÂª∫ JobDetail JobDetail jobDetail = newJob(jobEntity.getClass()) .withIdentity(job.getJobName()).build(); // ÈÄöËøáËß¶ÂèëÂô®ÂêçÂíåcron Ë°®ËææÂºèÂàõÂª∫ Trigger Trigger cronTrigger = newTrigger() .withIdentity(job.getTriggerName()) .startNow() .withSchedule(CronScheduleBuilder.cronSchedule(job.getCronExpression())) .build(); // ÊâßË°åÂÆöÊó∂‰ªªÂä° scheduler.scheduleJob(jobDetail, cronTrigger); } /** * Êõ¥Êñ∞job cronË°®ËææÂºè * * @param quartzJob * @throws SchedulerException */ public void updateJobCron(QuartzJob quartzJob) throws SchedulerException { TriggerKey triggerKey = TriggerKey.triggerKey(quartzJob.getJobName()); CronTrigger trigger = (CronTrigger) scheduler.getTrigger(triggerKey); CronScheduleBuilder scheduleBuilder = CronScheduleBuilder.cronSchedule(quartzJob.getCronExpression()); trigger = trigger.getTriggerBuilder().withIdentity(triggerKey).withSchedule(scheduleBuilder).build(); scheduler.rescheduleJob(triggerKey, trigger); } /** * Âà†Èô§‰∏Ä‰∏™job * * @param quartzJob * @throws SchedulerException */ public void deleteJob(QuartzJob quartzJob) throws SchedulerException { JobKey jobKey = JobKey.jobKey(quartzJob.getJobName()); scheduler.deleteJob(jobKey); } /** * ÊÅ¢Â§ç‰∏Ä‰∏™job * * @param quartzJob * @throws SchedulerException */ public void resumeJob(QuartzJob quartzJob) throws SchedulerException { JobKey jobKey = JobKey.jobKey(quartzJob.getJobName()); scheduler.resumeJob(jobKey); } /** * Á´ãÂç≥ÊâßË°åjob * * @param quartzJob * @throws SchedulerException */ public void runAJobNow(QuartzJob quartzJob) throws SchedulerException { JobKey jobKey = JobKey.jobKey(quartzJob.getJobName()); scheduler.triggerJob(jobKey); } /** * ÊöÇÂÅú‰∏Ä‰∏™job * * @param quartzJob * @throws SchedulerException */ public void pauseJob(QuartzJob quartzJob) throws SchedulerException { JobKey jobKey = JobKey.jobKey(quartzJob.getJobName()); scheduler.pauseJob(jobKey); } } Êñ∞Âª∫job‰ªªÂä°ÔºåÂÆûÁé∞org.quartz.JobÊé•Âè£package com.iogogogo.quartz.schedule; import lombok.extern.slf4j.Slf4j; import org.quartz.JobExecutionContext; import org.springframework.scheduling.quartz.QuartzJobBean; import org.springframework.stereotype.Component; import java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.Locale; /** * Created by tao.zeng on 2019/1/29. */ @Slf4j @Component public class ScheduleTask extends QuartzJobBean { @Override protected void executeInternal(JobExecutionContext context) { log.info(\"execute task:{}\", LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\", Locale.CHINA))); } } ÂêØÂä®Á±ªÈÖçÁΩÆpackage com.iogogogo.quartz; import com.iogogogo.quartz.bean.QuartzJob; import com.iogogogo.quartz.configure.QuartzManager; import org.quartz.SchedulerException; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; /** * Created by tao.zeng on 2019/1/18. */ @SpringBootApplication public class QuartzSchedulerApplication implements CommandLineRunner { @Autowired private QuartzManager quartzManager; public static void main(String... args) { SpringApplication.run(QuartzSchedulerApplication.class, args); } @Override public void run(String... args) { try { String scheduleTask = \"com.iogogogo.quartz.schedule.ScheduleTask\"; QuartzJob job = new QuartzJob(scheduleTask, \"*/1 * * * * ?\", scheduleTask, 1, scheduleTask, scheduleTask, scheduleTask, QuartzJob.STATUS_NOT_RUNNING, scheduleTask); quartzManager.addJob(job); } catch (SchedulerException | ClassNotFoundException | IllegalAccessException | InstantiationException e) { e.printStackTrace(); } } }","categories":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"}]},{"title":"Windows‰∏ãÂÆâË£ÖMySQL-5.7.17Ëß£ÂéãÁâà","slug":"windows-install-mysql-5-7-17","date":"2018-08-10T09:59:42.000Z","updated":"2024-07-01T12:30:37.381Z","comments":true,"path":"2018/08/10/windows-install-mysql-5-7-17/","link":"","permalink":"http://iogogogo.github.io/2018/08/10/windows-install-mysql-5-7-17/","excerpt":"","text":"‰∏ãËΩΩMySQL Community ServerÂú∞ÂùÄÔºöhttp://dev.mysql.com/downloads/mysql/ ÈÄâÊã©Windows (x86, 64-bit), ZIP ArchiveËøõË°å‰∏ãËΩΩ„ÄÇ Áé∞Âú®ÊúÄÊñ∞ÁâàÊú¨ÊòØ5.7.19ÔºåÁ¨îËÄÖËøôÈáåÊòØ5.7.17 ÈÖçÁΩÆmysql ÁéØÂ¢ÉÂèòÈáèÊàëËøôÈáåÂ∞Ü‰∏ãËΩΩÂ•ΩÁöÑmysql-5.7.17 Ëß£ÂéãÂà∞ C:\\Program Files\\mysql-5.7.17-winx64 ÈÖçÁΩÆ MYSQL_HOME ‚Äî&gt; C:\\Program Files\\mysql-5.7.17-winx64 Path ÁéØÂ¢ÉÂèòÈáè‰∏≠Âä†ÂÖ• %MYSQL_HOME%/bin; Ê≥®ÊÑèÂ¶ÇÊûúpathÊúÄÂêé‰∏Ä‰∏™Ê≤°Êúâ; ËÆ∞ÂæóËá™Â∑±ÊâãÂä®Ê∑ªÂä†; ‰øÆÊîπmysql ÈÖçÁΩÆÊñá‰ª∂Â§çÂà∂Ëß£ÂéãÁõÆÂΩï‰∏ãÁöÑ my-default.ini Êñá‰ª∂Â∞ÜÂêçÁß∞‰øÆÊîπ‰∏∫ my.ini ‰øÆÊîπÊñá‰ª∂ÂÜÖÂÆπ ÊâìÂºÄ my.ini ‰øÆÊîπÊñá‰ª∂ÂÜÖÂÆπ basedir = C:\\Program Files\\mysql-5.7.17-winx64 datadir = C:\\Program Files\\mysql-5.7.17-winx64\\data port = 3306 Ê≥®ÊÑèÔºöÂéªÊéâÊ∫êÊñá‰ª∂‰∏äËø∞‰∏âË°åÂâçÈù¢ÁöÑ# Ê≥®ÂÜåwindowsÁ≥ªÁªüÊúçÂä°‰ª•ÁÆ°ÁêÜÂëòÊùÉÈôêÊâìÂºÄcmd ÊâßË°å mysqld install MySQL ‚Äìdefaults-file=‚ÄùC:\\Program Files\\mysql-5.7.17-winx64\\my.ini‚Äù Ê≥®ÂÜåË°®‰∏≠Êü•ÁúãImagePathÁöÑÂÄº ÊàëÁöÑ‰∏∫ ‚ÄúC:\\Program Files\\mysql-5.7.17-winx64\\bin\\mysqld‚Äù ‚Äìdefaults-file=‚ÄùC:\\Program Files\\mysql-5.7.17-winx64\\my.ini‚Äù MySQL ÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜmysqldÔºåÂ∞±‰∏ç‰øÆÊîπ‰∫Ü„ÄÇ Ê≥®ÂÜåË°®‰ΩçÁΩÆ‰∏∫Ôºö \\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\MySQL ÊâßË°åmysqld ‚ÄìinitializeËøõË°åÂàùÂßãÂåñÔºàÁîüÊàêdataÁõÆÂΩïÊâßË°å mysqld ‚Äìinitialize ÂêØÂä® MySQL ÊúçÂä°ÊâßË°å net start mysql ÁôªÂΩïmysql ‰øÆÊîπ root Ë¥¶Êà∑ÈªòËÆ§ÂØÜÁ†ÅÈªòËÆ§ÂØÜÁ†Å‰øùÂ≠òÂú®ÁîüÊàêdataÁõÆÂΩï‰∏ãÈù¢ÁöÑ .err Êñá‰ª∂‰∏≠ ËÆ∞‰∫ãÊú¨ÊâìÂºÄ‰ª•ÂêéÊü•ÊâæÂàùÂßãÂåñÂØÜÁ†Å A temporary password is generated for root@localhost: [ÂØÜÁ†Å] ÊàëÁöÑ‰∏∫ ÊâßË°å mysql ‚Äìuroot ‚Äìp Â§çÂà∂ÂàöÂàö‰∏äÈù¢ÁöÑÂàùÂßãÂåñÂØÜÁ†ÅÂÆåÊàêÁôªÂΩï ‰øÆÊîπÈªòËÆ§ÂØÜÁ†Å ÊâßË°å SET PASSWORD = PASSWORD(‚Äò‚Äô); ÊàëËøôÈáåÂ∞ÜÂØÜÁ†ÅËÆæÁΩÆ‰∏∫Á©∫ ÊâßË°åÂÆåÊàê‰ª•ÂêéÈÄÄÂá∫mysql Â∞±ÂèØ‰ª•‰ΩøÁî®Êñ∞ÂØÜÁ†ÅËøõË°åÁôªÂΩï‰∫Ü ‰øÆÊîπmysql ÈªòËÆ§ÁºñÁ†ÅÊâßË°å show variables like ‚Äòcharacter_set_%‚Äô; Êü•Áúã mysql ÁºñÁ†Å Êü•ÁúãmysqlÈªòËÆ§ÁºñÁ†ÅÂ≠óÁ¨¶ ‰øÆÊîπ my.ini Êñá‰ª∂ ‰øÆÊîπÈÖçÁΩÆmysqlÁºñÁ†Å ÈáçÂêØmysql ÈáçÂêØmysqlÂπ∂‰∏îÈáçÊñ∞ÁôªÂΩï ÊâßË°å show variables like ‚Äòcharacter_set_%‚Äô; Êü•Áúã mysql ÁºñÁ†Å Êü•Áúã‰øÆÊîπ‰ª•ÂêéÁöÑÁºñÁ†ÅÂ≠óÁ¨¶ utf8 Ê≥®ÊÑèÔºö ÁΩë‰∏äÂæàÂ§öËµÑÊ∫êÈÉΩÊòØÂú®[mysqld]‰∏ãÊ∑ªÂä† default-character-set=utf8 Â¶ÇÊûúËøôÊ†∑Êîπ‰ºöÂØºËá¥5.7ÁâàÊú¨mysqlÊó†Ê≥ïÊâìÂºÄ ÊâÄ‰ª•Ë¶ÅÊîπ‰∏∫ character-set-server=utf8 ÊîπÂÆåÂêéÔºåË¶ÅÂà†Èô§Êï∞ÊçÆÂ∫ì‰∏≠ÊâÄÊúâÊï∞ÊçÆÔºåÊâçËÉΩ‰ΩøÁî®„ÄÇ","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"}]},{"title":"mac‰ΩøÁî®parallelsÂÆâË£ÖÈÖçÁΩÆcentos7","slug":"mac-install-parallel-centos7","date":"2018-08-10T09:54:40.000Z","updated":"2024-07-01T12:30:37.375Z","comments":true,"path":"2018/08/10/mac-install-parallel-centos7/","link":"","permalink":"http://iogogogo.github.io/2018/08/10/mac-install-parallel-centos7/","excerpt":"","text":"ÂÆâË£Öparallelshttps://www.jianshu.com/p/76f38e6c0792 ÈÖçÁΩÆ ssh ÁôªÂΩï Êü•ÁúãÂÆø‰∏ªÊú∫ipÂíåÁΩëÂÖ≥ ‰øÆÊîπÁΩëÂç°ÈÖçÁΩÆÊñá‰ª∂ ÈÖçÁΩÆÂ§ñÁΩëdns ‰øùÂ≠òÈáçÂêØÁΩëÁªú ssh ËøûÊé• ÈÖçÁΩÆ Êü•ÁúãÂÆø‰∏ªÊú∫IPÂíåÁΩëÂÖ≥ifconfig ‰øÆÊîπÁΩëÂç°ÈÖçÁΩÆÊñá‰ª∂ÂíåNDS vi /etc/sysconfig/network-scripts/ifcfg-eth0 BOOTPROTO=static # ÁΩëÂç°Ëé∑ÂèñIPÁöÑÊñπÂºè(ÈªòËÆ§‰∏∫dchp,ËÆæÁΩÆ‰∏∫ÈùôÊÄÅËé∑Âèñ„ÄÇ IPADDR=192.168.1.254 # Èô§ÊúÄÂêéÈÉ®ÂàÜÂÖ∂‰ªñ‰∏éÂÆø‰∏ªÊú∫ÁöÑÁΩëÂÖ≥‰∏ÄËá¥ GATEWAY=192.168.1.1 # ‰∏éÂÆø‰∏ªÊú∫‰øùÊåÅ‰∏ÄËá¥ NETMASK=255.255.255.0 ONBOOT=yes DNS1=192.168.1.1 DNS2=8.8.8.8 ‰øùÂ≠òÈáçÂêØÁΩëÁªúservice network restart ssh ËøûÊé• ÈÖçÁΩÆssh root@192.168.1.254 ÂºÄÊîæÁ´ØÂè£ Ê∞∏‰πÖÁöÑÂºÄÊîæÈúÄË¶ÅÁöÑÁ´ØÂè£ # Ê∑ªÂä†ÂºÄÊîæÁ´ØÂè£ sudo firewall-cmd --zone=public --add-port=3000/tcp --permanent # ÂÖ≥Èó≠ÂºÄÊîæÁ´ØÂè£ sudo firewall-cmd --zone=public --remove-port=80/tcp --permanent # ÈáçÊñ∞Âä†ËΩΩ sudo firewall-cmd --reload ‰πãÂêéÊ£ÄÊü•Êñ∞ÁöÑÈò≤ÁÅ´Â¢ôËßÑÂàô firewall-cmd --list-all ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô//‰∏¥Êó∂ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô,ÈáçÂêØÂêé‰ºöÈáçÊñ∞Ëá™Âä®ÊâìÂºÄ systemctl restart firewalld //Ê£ÄÊü•Èò≤ÁÅ´Â¢ôÁä∂ÊÄÅ firewall-cmd --state firewall-cmd --list-all //Disable firewall systemctl disable firewalld systemctl stop firewalld systemctl status firewalld //Enable firewall systemctl enable firewalld systemctl start firewalld systemctl status firewalld","categories":[{"name":"MacBook","slug":"MacBook","permalink":"http://iogogogo.github.io/categories/MacBook/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"http://iogogogo.github.io/tags/Mac/"}]},{"title":"kafkaÂ∏∏Áî®Êìç‰ΩúÁ¨îËÆ∞","slug":"kafka-note","date":"2018-07-30T03:36:44.000Z","updated":"2024-07-01T12:30:37.374Z","comments":true,"path":"2018/07/30/kafka-note/","link":"","permalink":"http://iogogogo.github.io/2018/07/30/kafka-note/","excerpt":"","text":"‰∏ãËΩΩÂú∞ÂùÄhttp://kafka.apache.org/downloads ÂÆâË£ÖÊ≠•È™§ Ëß£Âéã‰∏ãËΩΩÊñá‰ª∂Âà∞ÊåáÂÆöÁõÆÂΩïÔºåÊØîÂ¶Ç /usr/local tar -zxvf /usr/local/kafka_2.12-1.0.0.tgz ÂÅúÊ≠¢zookeeper‰∏ékafkacd /usr/local ./bin/zookeeper-server-stop.sh ./bin/kafka-server-stop.sh ÂêØÂä® zookeepercd /usr/local ./bin/zookeeper-server-start.sh -daemon ./config/zookeeper.properties -daemon Ë°®Á§∫ÂêéÂè∞ËøêË°å ÂêØÂä®kafkacd /usr/local ./bin/kafka-server-start.sh -daemon ./config/server.properties Êü•Áúãkafka‰∏ézookeeperÊòØÂê¶ËøêË°ånetstat -ntpul | grep 2181 netstat -ntpul | grep 9092 ÂàõÂª∫ topic./bin/kafka-topics.sh --create --zookeeper 192.168.1.200:2181 --replication-factor 1 --partitions 1 --topic TOPIC_001 Âà†Èô§topic http://blog.csdn.net/fengzheku/article/details/50585972 ./bin/kafka-topics.sh --delete --zookeeper 192.168.1.200:2181 --topic TOPIC_001 Êü•ÁúãÂ∑≤ÁªèÂ≠òÂú®ÁöÑtopic./bin/kafka-topics.sh --list --zookeeper localhost:2181 Êü•ÁúãtopicÁöÑËØ¶ÁªÜ‰ø°ÊÅØ./bin/kafka-topics.sh --describe --zookeeper 192.168.1.200:2181 --topic TOPIC_001 Áîü‰∫ßÊ∂àÊÅØ./bin/kafka-console-producer.sh --broker-list 192.168.1.200:9092 --topic TOPIC_001 Ê∂àË¥πÊ∂àÊÅØ./bin/kafka-console-consumer.sh --bootstrap-server 192.168.1.200:9092 --topic TOPIC_001 --from-beginning Ëß£ÂÜ≥kafkaÊó†Ê≥ïÊî∂ÂèëÊ∂àÊÅØ org.apache.kafka.common.errors.TimeoutException https://www.jianshu.com/p/2db7abddb9e6 vim /usr/local/kafka/config/server.properties Âä†ÂÖ•‰ª•‰∏ãÈÖçÁΩÆÁÑ∂ÂêéÈáçÂêØzookeeper‰∏ékafka advertised.host.name=192.168.1.200 advertised.port=9092","categories":[{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/categories/Kafka/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"http://iogogogo.github.io/tags/kafka/"}]},{"title":"‰ΩøÁî®docker-composeÊûÑÂª∫kafkaÈõÜÁæ§","slug":"docker-compose-zk-kafka","date":"2018-07-28T04:41:40.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2018/07/28/docker-compose-zk-kafka/","link":"","permalink":"http://iogogogo.github.io/2018/07/28/docker-compose-zk-kafka/","excerpt":"","text":"&emsp;&emsp;‰∏äÁØáËØ¥Âà∞‰∫Üdocker-composeÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÂëΩ‰ª§ÔºåËøôÊ¨°‰ΩøÁî®docker-composeÊûÑÂª∫kafkaÈõÜÁæ§„ÄÇÂú®ËØ¥kafka‰πãÂâçÔºåÂÖàÁÆÄÂçï‰∫ÜËß£‰∏Ä‰∏ãkafkaÊòØ‰ªÄ‰πà‰∏úË•ø„ÄÇ KafkaÂàõÂª∫ËÉåÊôØKafkaÊòØ‰∏Ä‰∏™Ê∂àÊÅØÁ≥ªÁªüÔºåÂéüÊú¨ÂºÄÂèëËá™LinkedInÔºåÁî®‰ΩúLinkedInÁöÑÊ¥ªÂä®ÊµÅÔºàActivity StreamÔºâÂíåËøêËê•Êï∞ÊçÆÂ§ÑÁêÜÁÆ°ÈÅìÔºàPipelineÔºâÁöÑÂü∫Á°Ä„ÄÇÁé∞Âú®ÂÆÉÂ∑≤Ë¢´Â§öÂÆ∂‰∏çÂêåÁ±ªÂûãÁöÑÂÖ¨Âè∏‰Ωú‰∏∫Â§öÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆÁÆ°ÈÅìÂíåÊ∂àÊÅØÁ≥ªÁªü‰ΩøÁî®„ÄÇ Ê¥ªÂä®ÊµÅÊï∞ÊçÆÊòØÂá†‰πéÊâÄÊúâÁ´ôÁÇπÂú®ÂØπÂÖ∂ÁΩëÁ´ô‰ΩøÁî®ÊÉÖÂÜµÂÅöÊä•Ë°®Êó∂ÈÉΩË¶ÅÁî®Âà∞ÁöÑÊï∞ÊçÆ‰∏≠ÊúÄÂ∏∏ËßÑÁöÑÈÉ®ÂàÜ„ÄÇÊ¥ªÂä®Êï∞ÊçÆÂåÖÊã¨È°µÈù¢ËÆøÈóÆÈáèÔºàPage ViewÔºâ„ÄÅË¢´Êü•ÁúãÂÜÖÂÆπÊñπÈù¢ÁöÑ‰ø°ÊÅØ‰ª•ÂèäÊêúÁ¥¢ÊÉÖÂÜµÁ≠âÂÜÖÂÆπ„ÄÇËøôÁßçÊï∞ÊçÆÈÄöÂ∏∏ÁöÑÂ§ÑÁêÜÊñπÂºèÊòØÂÖàÊääÂêÑÁßçÊ¥ªÂä®‰ª•Êó•ÂøóÁöÑÂΩ¢ÂºèÂÜôÂÖ•ÊüêÁßçÊñá‰ª∂ÔºåÁÑ∂ÂêéÂë®ÊúüÊÄßÂú∞ÂØπËøô‰∫õÊñá‰ª∂ËøõË°åÁªüËÆ°ÂàÜÊûê„ÄÇËøêËê•Êï∞ÊçÆÊåáÁöÑÊòØÊúçÂä°Âô®ÁöÑÊÄßËÉΩÊï∞ÊçÆÔºàCPU„ÄÅIO‰ΩøÁî®Áéá„ÄÅËØ∑Ê±ÇÊó∂Èó¥„ÄÅÊúçÂä°Êó•ÂøóÁ≠âÁ≠âÊï∞ÊçÆ)„ÄÇËøêËê•Êï∞ÊçÆÁöÑÁªüËÆ°ÊñπÊ≥ïÁßçÁ±ªÁπÅÂ§ö„ÄÇ ËøëÂπ¥Êù•ÔºåÊ¥ªÂä®ÂíåËøêËê•Êï∞ÊçÆÂ§ÑÁêÜÂ∑≤ÁªèÊàê‰∏∫‰∫ÜÁΩëÁ´ôËΩØ‰ª∂‰∫ßÂìÅÁâπÊÄß‰∏≠‰∏Ä‰∏™Ëá≥ÂÖ≥ÈáçË¶ÅÁöÑÁªÑÊàêÈÉ®ÂàÜÔºåËøôÂ∞±ÈúÄË¶Å‰∏ÄÂ•óÁ®çÂæÆÊõ¥Âä†Â§çÊùÇÁöÑÂü∫Á°ÄËÆæÊñΩÂØπÂÖ∂Êèê‰æõÊîØÊåÅ„ÄÇ KafkaÁÆÄ‰ªãKafkaÊòØ‰∏ÄÁßçÂàÜÂ∏ÉÂºèÁöÑÔºåÂü∫‰∫éÂèëÂ∏É/ËÆ¢ÈòÖÁöÑÊ∂àÊÅØÁ≥ªÁªü„ÄÇ‰∏ªË¶ÅËÆæËÆ°ÁõÆÊ†áÂ¶Ç‰∏ãÔºö ‰ª•Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)ÁöÑÊñπÂºèÊèê‰æõÊ∂àÊÅØÊåÅ‰πÖÂåñËÉΩÂäõÔºåÂç≥‰ΩøÂØπTBÁ∫ß‰ª•‰∏äÊï∞ÊçÆ‰πüËÉΩ‰øùËØÅÂ∏∏Êï∞Êó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑËÆøÈóÆÊÄßËÉΩ„ÄÇ È´òÂêûÂêêÁéá„ÄÇÂç≥‰ΩøÂú®ÈùûÂ∏∏Âªâ‰ª∑ÁöÑÂïÜÁî®Êú∫Âô®‰∏ä‰πüËÉΩÂÅöÂà∞ÂçïÊú∫ÊîØÊåÅÊØèÁßí100KÊù°‰ª•‰∏äÊ∂àÊÅØÁöÑ‰º†Ëæì„ÄÇ ÊîØÊåÅKafka ServerÈó¥ÁöÑÊ∂àÊÅØÂàÜÂå∫ÔºåÂèäÂàÜÂ∏ÉÂºèÊ∂àË¥πÔºåÂêåÊó∂‰øùËØÅÊØè‰∏™PartitionÂÜÖÁöÑÊ∂àÊÅØÈ°∫Â∫è‰º†Ëæì„ÄÇ ÂêåÊó∂ÊîØÊåÅÁ¶ªÁ∫øÊï∞ÊçÆÂ§ÑÁêÜÂíåÂÆûÊó∂Êï∞ÊçÆÂ§ÑÁêÜ„ÄÇ Scale outÔºöÊîØÊåÅÂú®Á∫øÊ∞¥Âπ≥Êâ©Â±ï„ÄÇ ‰∏∫‰Ωï‰ΩøÁî®Ê∂àÊÅØÁ≥ªÁªü Ëß£ËÄ¶ Âú®È°πÁõÆÂêØÂä®‰πãÂàùÊù•È¢ÑÊµãÂ∞ÜÊù•È°πÁõÆ‰ºöÁ¢∞Âà∞‰ªÄ‰πàÈúÄÊ±ÇÔºåÊòØÊûÅÂÖ∂Âõ∞ÈöæÁöÑ„ÄÇÊ∂àÊÅØÁ≥ªÁªüÂú®Â§ÑÁêÜËøáÁ®ã‰∏≠Èó¥ÊèíÂÖ•‰∫Ü‰∏Ä‰∏™ÈöêÂê´ÁöÑ„ÄÅÂü∫‰∫éÊï∞ÊçÆÁöÑÊé•Âè£Â±ÇÔºå‰∏§ËæπÁöÑÂ§ÑÁêÜËøáÁ®ãÈÉΩË¶ÅÂÆûÁé∞Ëøô‰∏ÄÊé•Âè£„ÄÇËøôÂÖÅËÆ∏‰Ω†Áã¨Á´ãÁöÑÊâ©Â±ïÊàñ‰øÆÊîπ‰∏§ËæπÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÂè™Ë¶ÅÁ°Æ‰øùÂÆÉ‰ª¨ÈÅµÂÆàÂêåÊ†∑ÁöÑÊé•Âè£Á∫¶Êùü„ÄÇ ÂÜó‰Ωô Êúâ‰∫õÊÉÖÂÜµ‰∏ãÔºåÂ§ÑÁêÜÊï∞ÊçÆÁöÑËøáÁ®ã‰ºöÂ§±Ë¥•„ÄÇÈô§ÈùûÊï∞ÊçÆË¢´ÊåÅ‰πÖÂåñÔºåÂê¶ÂàôÂ∞ÜÈÄ†Êàê‰∏¢Â§±„ÄÇÊ∂àÊÅØÈòüÂàóÊääÊï∞ÊçÆËøõË°åÊåÅ‰πÖÂåñÁõ¥Âà∞ÂÆÉ‰ª¨Â∑≤ÁªèË¢´ÂÆåÂÖ®Â§ÑÁêÜÔºåÈÄöËøáËøô‰∏ÄÊñπÂºèËßÑÈÅø‰∫ÜÊï∞ÊçÆ‰∏¢Â§±È£éÈô©„ÄÇËÆ∏Â§öÊ∂àÊÅØÈòüÂàóÊâÄÈááÁî®ÁöÑ‚ÄùÊèíÂÖ•-Ëé∑Âèñ-Âà†Èô§‚ÄùËåÉÂºè‰∏≠ÔºåÂú®Êää‰∏Ä‰∏™Ê∂àÊÅØ‰ªéÈòüÂàó‰∏≠Âà†Èô§‰πãÂâçÔºåÈúÄË¶Å‰Ω†ÁöÑÂ§ÑÁêÜÁ≥ªÁªüÊòéÁ°ÆÁöÑÊåáÂá∫ËØ•Ê∂àÊÅØÂ∑≤ÁªèË¢´Â§ÑÁêÜÂÆåÊØïÔºå‰ªéËÄåÁ°Æ‰øù‰Ω†ÁöÑÊï∞ÊçÆË¢´ÂÆâÂÖ®ÁöÑ‰øùÂ≠òÁõ¥Âà∞‰Ω†‰ΩøÁî®ÂÆåÊØï„ÄÇ Êâ©Â±ïÊÄß Âõ†‰∏∫Ê∂àÊÅØÈòüÂàóËß£ËÄ¶‰∫Ü‰Ω†ÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÊâÄ‰ª•Â¢ûÂ§ßÊ∂àÊÅØÂÖ•ÈòüÂíåÂ§ÑÁêÜÁöÑÈ¢ëÁéáÊòØÂæàÂÆπÊòìÁöÑÔºåÂè™Ë¶ÅÂè¶Â§ñÂ¢ûÂä†Â§ÑÁêÜËøáÁ®ãÂç≥ÂèØ„ÄÇ‰∏çÈúÄË¶ÅÊîπÂèò‰ª£Á†Å„ÄÅ‰∏çÈúÄË¶ÅË∞ÉËäÇÂèÇÊï∞„ÄÇÊâ©Â±ïÂ∞±ÂÉèË∞ÉÂ§ßÁîµÂäõÊåâÈíÆ‰∏ÄÊ†∑ÁÆÄÂçï„ÄÇ ÁÅµÊ¥ªÊÄß &amp; Â≥∞ÂÄºÂ§ÑÁêÜËÉΩÂäõ Âú®ËÆøÈóÆÈáèÂâßÂ¢ûÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∫îÁî®‰ªçÁÑ∂ÈúÄË¶ÅÁªßÁª≠ÂèëÊå•‰ΩúÁî®Ôºå‰ΩÜÊòØËøôÊ†∑ÁöÑÁ™ÅÂèëÊµÅÈáèÂπ∂‰∏çÂ∏∏ËßÅÔºõÂ¶ÇÊûú‰∏∫‰ª•ËÉΩÂ§ÑÁêÜËøôÁ±ªÂ≥∞ÂÄºËÆøÈóÆ‰∏∫Ê†áÂáÜÊù•ÊäïÂÖ•ËµÑÊ∫êÈöèÊó∂ÂæÖÂëΩÊó†ÁñëÊòØÂ∑®Â§ßÁöÑÊµ™Ë¥π„ÄÇ‰ΩøÁî®Ê∂àÊÅØÈòüÂàóËÉΩÂ§ü‰ΩøÂÖ≥ÈîÆÁªÑ‰ª∂È°∂‰ΩèÁ™ÅÂèëÁöÑËÆøÈóÆÂéãÂäõÔºåËÄå‰∏ç‰ºöÂõ†‰∏∫Á™ÅÂèëÁöÑË∂ÖË¥üËç∑ÁöÑËØ∑Ê±ÇËÄåÂÆåÂÖ®Â¥©Ê∫É„ÄÇ ÂèØÊÅ¢Â§çÊÄß Á≥ªÁªüÁöÑ‰∏ÄÈÉ®ÂàÜÁªÑ‰ª∂Â§±ÊïàÊó∂Ôºå‰∏ç‰ºöÂΩ±ÂìçÂà∞Êï¥‰∏™Á≥ªÁªü„ÄÇÊ∂àÊÅØÈòüÂàóÈôç‰Ωé‰∫ÜËøõÁ®ãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶ÔºåÊâÄ‰ª•Âç≥‰Ωø‰∏Ä‰∏™Â§ÑÁêÜÊ∂àÊÅØÁöÑËøõÁ®ãÊåÇÊéâÔºåÂä†ÂÖ•ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ‰ªçÁÑ∂ÂèØ‰ª•Âú®Á≥ªÁªüÊÅ¢Â§çÂêéË¢´Â§ÑÁêÜ„ÄÇ È°∫Â∫è‰øùËØÅ Âú®Â§ßÂ§ö‰ΩøÁî®Âú∫ÊôØ‰∏ãÔºåÊï∞ÊçÆÂ§ÑÁêÜÁöÑÈ°∫Â∫èÈÉΩÂæàÈáçË¶Å„ÄÇÂ§ßÈÉ®ÂàÜÊ∂àÊÅØÈòüÂàóÊú¨Êù•Â∞±ÊòØÊéíÂ∫èÁöÑÔºåÂπ∂‰∏îËÉΩ‰øùËØÅÊï∞ÊçÆ‰ºöÊåâÁÖßÁâπÂÆöÁöÑÈ°∫Â∫èÊù•Â§ÑÁêÜ„ÄÇKafka‰øùËØÅ‰∏Ä‰∏™PartitionÂÜÖÁöÑÊ∂àÊÅØÁöÑÊúâÂ∫èÊÄß„ÄÇ ÁºìÂÜ≤ Âú®‰ªª‰ΩïÈáçË¶ÅÁöÑÁ≥ªÁªü‰∏≠ÔºåÈÉΩ‰ºöÊúâÈúÄË¶Å‰∏çÂêåÁöÑÂ§ÑÁêÜÊó∂Èó¥ÁöÑÂÖÉÁ¥†„ÄÇ‰æãÂ¶ÇÔºåÂä†ËΩΩ‰∏ÄÂº†ÂõæÁâáÊØîÂ∫îÁî®ËøáÊª§Âô®Ëä±Ë¥πÊõ¥Â∞ëÁöÑÊó∂Èó¥„ÄÇÊ∂àÊÅØÈòüÂàóÈÄöËøá‰∏Ä‰∏™ÁºìÂÜ≤Â±ÇÊù•Â∏ÆÂä©‰ªªÂä°ÊúÄÈ´òÊïàÁéáÁöÑÊâßË°å‚Äî‚Äî‚ÄîÂÜôÂÖ•ÈòüÂàóÁöÑÂ§ÑÁêÜ‰ºöÂ∞ΩÂèØËÉΩÁöÑÂø´ÈÄü„ÄÇËØ•ÁºìÂÜ≤ÊúâÂä©‰∫éÊéßÂà∂Âíå‰ºòÂåñÊï∞ÊçÆÊµÅÁªèËøáÁ≥ªÁªüÁöÑÈÄüÂ∫¶„ÄÇ ÂºÇÊ≠•ÈÄö‰ø° ÂæàÂ§öÊó∂ÂÄôÔºåÁî®Êà∑‰∏çÊÉ≥‰πü‰∏çÈúÄË¶ÅÁ´ãÂç≥Â§ÑÁêÜÊ∂àÊÅØ„ÄÇÊ∂àÊÅØÈòüÂàóÊèê‰æõ‰∫ÜÂºÇÊ≠•Â§ÑÁêÜÊú∫Âà∂ÔºåÂÖÅËÆ∏Áî®Êà∑Êää‰∏Ä‰∏™Ê∂àÊÅØÊîæÂÖ•ÈòüÂàóÔºå‰ΩÜÂπ∂‰∏çÁ´ãÂç≥Â§ÑÁêÜÂÆÉ„ÄÇÊÉ≥ÂêëÈòüÂàó‰∏≠ÊîæÂÖ•Â§öÂ∞ëÊ∂àÊÅØÂ∞±ÊîæÂ§öÂ∞ëÔºåÁÑ∂ÂêéÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂÜçÂéªÂ§ÑÁêÜÂÆÉ‰ª¨„ÄÇ Â∏∏Áî®Message QueueÂØπÊØî RabbitMQ RabbitMQÊòØ‰ΩøÁî®ErlangÁºñÂÜôÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÊ∂àÊÅØÈòüÂàóÔºåÊú¨Ë∫´ÊîØÊåÅÂæàÂ§öÁöÑÂçèËÆÆÔºöAMQPÔºåXMPP, SMTP, STOMPÔºå‰πüÊ≠£Âõ†Â¶ÇÊ≠§ÔºåÂÆÉÈùûÂ∏∏ÈáçÈáèÁ∫ßÔºåÊõ¥ÈÄÇÂêà‰∫é‰ºÅ‰∏öÁ∫ßÁöÑÂºÄÂèë„ÄÇÂêåÊó∂ÂÆûÁé∞‰∫ÜBrokerÊûÑÊû∂ÔºåËøôÊÑèÂë≥ÁùÄÊ∂àÊÅØÂú®ÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÊó∂ÂÖàÂú®‰∏≠ÂøÉÈòüÂàóÊéíÈòü„ÄÇÂØπË∑ØÁî±ÔºåË¥üËΩΩÂùáË°°ÊàñËÄÖÊï∞ÊçÆÊåÅ‰πÖÂåñÈÉΩÊúâÂæàÂ•ΩÁöÑÊîØÊåÅ„ÄÇ Redis RedisÊòØ‰∏Ä‰∏™Âü∫‰∫éKey-ValueÂØπÁöÑNoSQLÊï∞ÊçÆÂ∫ìÔºåÂºÄÂèëÁª¥Êä§ÂæàÊ¥ªË∑É„ÄÇËôΩÁÑ∂ÂÆÉÊòØ‰∏Ä‰∏™Key-ValueÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®Á≥ªÁªüÔºå‰ΩÜÂÆÉÊú¨Ë∫´ÊîØÊåÅMQÂäüËÉΩÔºåÊâÄ‰ª•ÂÆåÂÖ®ÂèØ‰ª•ÂΩìÂÅö‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑÈòüÂàóÊúçÂä°Êù•‰ΩøÁî®„ÄÇÂØπ‰∫éRabbitMQÂíåRedisÁöÑÂÖ•ÈòüÂíåÂá∫ÈòüÊìç‰ΩúÔºåÂêÑÊâßË°å100‰∏áÊ¨°ÔºåÊØè10‰∏áÊ¨°ËÆ∞ÂΩï‰∏ÄÊ¨°ÊâßË°åÊó∂Èó¥„ÄÇÊµãËØïÊï∞ÊçÆÂàÜ‰∏∫128Bytes„ÄÅ512Bytes„ÄÅ1KÂíå10KÂõõ‰∏™‰∏çÂêåÂ§ßÂ∞èÁöÑÊï∞ÊçÆ„ÄÇÂÆûÈ™åË°®ÊòéÔºöÂÖ•ÈòüÊó∂ÔºåÂΩìÊï∞ÊçÆÊØîËæÉÂ∞èÊó∂RedisÁöÑÊÄßËÉΩË¶ÅÈ´ò‰∫éRabbitMQÔºåËÄåÂ¶ÇÊûúÊï∞ÊçÆÂ§ßÂ∞èË∂ÖËøá‰∫Ü10KÔºåRedisÂàôÊÖ¢ÁöÑÊó†Ê≥ïÂøçÂèóÔºõÂá∫ÈòüÊó∂ÔºåÊó†ËÆ∫Êï∞ÊçÆÂ§ßÂ∞èÔºåRedisÈÉΩË°®Áé∞Âá∫ÈùûÂ∏∏Â•ΩÁöÑÊÄßËÉΩÔºåËÄåRabbitMQÁöÑÂá∫ÈòüÊÄßËÉΩÂàôËøú‰Ωé‰∫éRedis„ÄÇ ZeroMQ ZeroMQÂè∑Áß∞ÊúÄÂø´ÁöÑÊ∂àÊÅØÈòüÂàóÁ≥ªÁªüÔºåÂ∞§ÂÖ∂ÈíàÂØπÂ§ßÂêûÂêêÈáèÁöÑÈúÄÊ±ÇÂú∫ÊôØ„ÄÇZeroMQËÉΩÂ§üÂÆûÁé∞RabbitMQ‰∏çÊìÖÈïøÁöÑÈ´òÁ∫ß/Â§çÊùÇÁöÑÈòüÂàóÔºå‰ΩÜÊòØÂºÄÂèë‰∫∫ÂëòÈúÄË¶ÅËá™Â∑±ÁªÑÂêàÂ§öÁßçÊäÄÊúØÊ°ÜÊû∂ÔºåÊäÄÊúØ‰∏äÁöÑÂ§çÊùÇÂ∫¶ÊòØÂØπËøôMQËÉΩÂ§üÂ∫îÁî®ÊàêÂäüÁöÑÊåëÊàò„ÄÇZeroMQÂÖ∑Êúâ‰∏Ä‰∏™Áã¨ÁâπÁöÑÈùû‰∏≠Èó¥‰ª∂ÁöÑÊ®°ÂºèÔºå‰Ω†‰∏çÈúÄË¶ÅÂÆâË£ÖÂíåËøêË°å‰∏Ä‰∏™Ê∂àÊÅØÊúçÂä°Âô®Êàñ‰∏≠Èó¥‰ª∂ÔºåÂõ†‰∏∫‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÂ∞ÜÊâÆÊºîËøô‰∏™ÊúçÂä°Âô®ËßíËâ≤„ÄÇ‰Ω†Âè™ÈúÄË¶ÅÁÆÄÂçïÁöÑÂºïÁî®ZeroMQÁ®ãÂ∫èÂ∫ìÔºåÂèØ‰ª•‰ΩøÁî®NuGetÂÆâË£ÖÔºåÁÑ∂Âêé‰Ω†Â∞±ÂèØ‰ª•ÊÑâÂø´ÁöÑÂú®Â∫îÁî®Á®ãÂ∫è‰πãÈó¥ÂèëÈÄÅÊ∂àÊÅØ‰∫Ü„ÄÇ‰ΩÜÊòØZeroMQ‰ªÖÊèê‰æõÈùûÊåÅ‰πÖÊÄßÁöÑÈòüÂàóÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûúÂÆïÊú∫ÔºåÊï∞ÊçÆÂ∞Ü‰ºö‰∏¢Â§±„ÄÇÂÖ∂‰∏≠ÔºåTwitterÁöÑStorm 0.9.0‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÈªòËÆ§‰ΩøÁî®ZeroMQ‰Ωú‰∏∫Êï∞ÊçÆÊµÅÁöÑ‰º†ËæìÔºàStorm‰ªé0.9ÁâàÊú¨ÂºÄÂßãÂêåÊó∂ÊîØÊåÅZeroMQÂíåNetty‰Ωú‰∏∫‰º†ËæìÊ®°ÂùóÔºâ„ÄÇ ActiveMQ ActiveMQÊòØApache‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÈ°πÁõÆ„ÄÇ Á±ª‰ºº‰∫éZeroMQÔºåÂÆÉËÉΩÂ§ü‰ª•‰ª£ÁêÜ‰∫∫ÂíåÁÇπÂØπÁÇπÁöÑÊäÄÊúØÂÆûÁé∞ÈòüÂàó„ÄÇÂêåÊó∂Á±ª‰ºº‰∫éRabbitMQÔºåÂÆÉÂ∞ëÈáè‰ª£Á†ÅÂ∞±ÂèØ‰ª•È´òÊïàÂú∞ÂÆûÁé∞È´òÁ∫ßÂ∫îÁî®Âú∫ÊôØ„ÄÇ Kafka/Jafka KafkaÊòØApache‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÈ°πÁõÆÔºåÊòØ‰∏Ä‰∏™È´òÊÄßËÉΩË∑®ËØ≠Ë®ÄÂàÜÂ∏ÉÂºèÂèëÂ∏É/ËÆ¢ÈòÖÊ∂àÊÅØÈòüÂàóÁ≥ªÁªüÔºåËÄåJafkaÊòØÂú®Kafka‰πã‰∏äÂ≠µÂåñËÄåÊù•ÁöÑÔºåÂç≥KafkaÁöÑ‰∏Ä‰∏™ÂçáÁ∫ßÁâà„ÄÇÂÖ∑Êúâ‰ª•‰∏ãÁâπÊÄßÔºöÂø´ÈÄüÊåÅ‰πÖÂåñÔºåÂèØ‰ª•Âú®O(1)ÁöÑÁ≥ªÁªüÂºÄÈîÄ‰∏ãËøõË°åÊ∂àÊÅØÊåÅ‰πÖÂåñÔºõÈ´òÂêûÂêêÔºåÂú®‰∏ÄÂè∞ÊôÆÈÄöÁöÑÊúçÂä°Âô®‰∏äÊó¢ÂèØ‰ª•ËææÂà∞10W/sÁöÑÂêûÂêêÈÄüÁéáÔºõÂÆåÂÖ®ÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºåBroker„ÄÅProducer„ÄÅConsumerÈÉΩÂéüÁîüËá™Âä®ÊîØÊåÅÂàÜÂ∏ÉÂºèÔºåËá™Âä®ÂÆûÁé∞Ë¥üËΩΩÂùáË°°ÔºõÊîØÊåÅHadoopÊï∞ÊçÆÂπ∂Ë°åÂä†ËΩΩÔºåÂØπ‰∫éÂÉèHadoopÁöÑ‰∏ÄÊ†∑ÁöÑÊó•ÂøóÊï∞ÊçÆÂíåÁ¶ªÁ∫øÂàÜÊûêÁ≥ªÁªüÔºå‰ΩÜÂèàË¶ÅÊ±ÇÂÆûÊó∂Â§ÑÁêÜÁöÑÈôêÂà∂ÔºåËøôÊòØ‰∏Ä‰∏™ÂèØË°åÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇKafkaÈÄöËøáHadoopÁöÑÂπ∂Ë°åÂä†ËΩΩÊú∫Âà∂Áªü‰∏Ä‰∫ÜÂú®Á∫øÂíåÁ¶ªÁ∫øÁöÑÊ∂àÊÅØÂ§ÑÁêÜ„ÄÇApache KafkaÁõ∏ÂØπ‰∫éActiveMQÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËΩªÈáèÁ∫ßÁöÑÊ∂àÊÅØÁ≥ªÁªüÔºåÈô§‰∫ÜÊÄßËÉΩÈùûÂ∏∏Â•Ω‰πãÂ§ñÔºåËøòÊòØ‰∏Ä‰∏™Â∑•‰ΩúËâØÂ•ΩÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªü„ÄÇ ÊûÑÂª∫zookeeper„ÄÅkakfaÈõÜÁæ§&emsp;&emsp;È¶ñÂÖàkafka‰æùËµñ‰∫ézookeeperÔºåÊâÄ‰ª•Âú®ÊûÑÂª∫kafkaÈõÜÁæ§‰πãÂâçÊàë‰ª¨ÂÖàÊù•ÊûÑÂª∫zookeeperÈõÜÁæ§ÔºåzookeeperÁöÑÈõÜÁæ§ÊûÑÂª∫ÊñπÂºèÂæàÁÆÄÂçïÔºådockerÂÆòÁΩëÈÉΩÊúâÁªôÂá∫docker-composeÊñá‰ª∂„ÄÇzookeeperÊúâÂÆòÊñπÈïúÂÉèÔºåkakfaÊöÇÊó∂ËøòÊ≤°ÊúâÔºåÊâÄ‰ª•Êàë‰ª¨ÈÄâÊã©‰∫Ü‰∏Ä‰∏™github‰∏äÁõÆÂâçstarÊúÄÈ´òÁöÑÈïúÂÉèkafka-docker„ÄÇ ÁºñÂÜôzookeeperÁöÑdocker-composeÊñá‰ª∂version: '3.1' services: zoo1: image: zookeeper restart: always hostname: zoo1 ports: - 2181:2181 volumes: - \"~/share/docker/compose-data/zookeeper/zoo1/data:/data\" - \"~/share/docker/compose-data/zookeeper/zoo1/datalog:/datalog\" - \"~/share/docker/compose-data/zookeeper/zoo1/conf:/conf\" environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=0.0.0.0:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 zoo2: image: zookeeper restart: always hostname: zoo2 ports: - 2182:2181 volumes: - \"~/share/docker/compose-data/zookeeper/zoo2/data:/data\" - \"~/share/docker/compose-data/zookeeper/zoo2/datalog:/datalog\" - \"~/share/docker/compose-data/zookeeper/zoo2/conf:/conf\" environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=0.0.0.0:2888:3888 server.3=zoo3:2888:3888 zoo3: image: zookeeper restart: always hostname: zoo3 ports: - 2183:2181 volumes: - \"~/share/docker/compose-data/zookeeper/zoo3/data:/data\" - \"~/share/docker/compose-data/zookeeper/zoo3/datalog:/datalog\" - \"~/share/docker/compose-data/zookeeper/zoo3/conf:/conf\" environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=0.0.0.0:2888:3888 &emsp;&emsp;‰øùÂ≠òÊñá‰ª∂Âêç‰∏∫„Äêdocker-compose.yml„Äë,Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Êï¥‰∏™composeÊñá‰ª∂‰∏≠‰∏ÄÂÖ±ËøêË°å‰∫Ü‰∏â‰∏™zookeeperÂÆû‰æãÔºå‰∏∫‰ªÄ‰πàÊòØ‰∏â‰∏™ÔºüÂõ†‰∏∫zookeeperÂÜÖÈÉ®ÁöÑÈÄâ‰∏æÊú∫Âà∂ÔºåÂú®ÈõÜÁæ§‰∏≠ÊúâÂÖ∂‰ªñËäÇÁÇπÊåÇÊéâÁöÑËØùÔºåËá≥Â∞ë‰øùËØÅn+1‰∏™ËäÇÁÇπÁî®Êù•ÈÄâ‰∏æleaderÔºåÊâÄ‰ª•ÈõÜÁæ§Ëá≥Â∞ë‰∏â‰∏™ËäÇÁÇπ„ÄÇ &emsp;&emsp;Áé∞Âú®Êù•ËØ¥ËØ¥composeÊñá‰ª∂‰∏≠ÁöÑÂèÇÊï∞Âê´‰πâÔºö version: ‚Äò3.1‚Äô Ë°®Á§∫‰ΩøÁî®Á¨¨‰∏â‰ª£composeËØ≠Ê≥ï services Ë°®Á§∫‰∏Ä‰∏™ÂÆû‰æãÊúçÂä° zoo1„ÄÅzoo2„ÄÅzoo3ÊòØÊàëËá™Â∑±ÁªôÂÆû‰æãÊúçÂä°Ëµ∑ÁöÑÂêçÂ≠ó image Ë°®Á§∫ÈúÄË¶Å‰ΩøÁî®ÁöÑdockerÈïúÂÉèÔºåËøôÈáå‰ΩøÁî®ÁöÑÂÆòÊñπÈïúÂÉèÔºåÂπ∂‰∏îÊ≤°ÊúâÊåáÂÆötarget restart: always Ë°®Á§∫ÊåÇÊéâ‰ºö‰∏ÄÁõ¥ÈáçÂêØ ports ÂØºÂá∫ÁöÑÁ´ØÂè£Âè∑ÔºåÂõ†‰∏∫ÊàëËøôÊòØÂú®‰∏ÄÂè∞Êú∫Âô®ÔºåÊâÄ‰ª•ÂàÜÂà´‰ΩøÁî®‰∫Ü2181Ôºå2182Ôºå2183‰∏â‰∏™Á´ØÂè£ volumes Êï∞ÊçÆÂç∑ÁõÆÂΩï environment ÁéØÂ¢ÉÂèÇÊï∞ÔºåËøôÈáåÈù¢ZOO_MY_IDË°®Á§∫ÈõÜÁæ§‰∏≠ÁöÑzkÁºñÂè∑Ôºå‰∏çÂèØÈáçÂ§çÔºåZOO_SERVERSË°®Á§∫ÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑzkÊúçÂä°ÂÆû‰æã ÁºñÂÜôkakfaÁöÑdocker-composeÊñá‰ª∂kakfaÁöÑcomposeÊñá‰ª∂ÂíåzookeeperÊúâ‰∫õÂ∞èÂå∫Âà´Ôºå‰∏ªË¶Å‰ΩìÁé∞Âú®ËøêË°åÊñπÂºè‰∏äÈù¢Âπ∂‰∏îÊàë‰ª¨Áé∞Âú®ÈúÄË¶ÅÂàõÂª∫‰∏â‰∏™docker-composeÊñá‰ª∂ÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØport‰∏ç‰∏ÄÊ†∑„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØenvironmentÂèÇÊï∞‰∏≠ÁöÑIPÂú∞ÂùÄ‰∏çË¶Å‰ΩøÁî®localhostÊàñËÄÖ127.0.0.1ÔºåËøôÈáåÈúÄË¶Å‰ΩøÁî®IPÂú∞ÂùÄ docker-compose-9092.yml version: '3.1' services: kafka: image: wurstmeister/kafka restart: always hostname: kafka ports: - 9092:9092 volumes: - \"~/share/docker/compose-data/kafka/kafka-9092/docker.sock:/var/run/docker.sock\" - \"~/share/docker/compose-data/kafka/kafka-9092:/kafka\" environment: KAFKA_VERSION: 1.1.0 KAFKA_ADVERTISED_HOST_NAME: 192.168.1.6 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ZOOKEEPER_CONNECT: 192.168.1.6:2181,192.168.1.6:2182,192.168.1.6:2183 docker-compose-9093.yml version: '3.1' services: kafka: image: wurstmeister/kafka restart: always hostname: kafka ports: - 9093:9092 volumes: - \"~/share/docker/compose-data/kafka/kafka-9093/docker.sock:/var/run/docker.sock\" - \"~/share/docker/compose-data/kafka/kafka-9093:/kafka\" environment: KAFKA_VERSION: 1.1.0 KAFKA_ADVERTISED_HOST_NAME: 192.168.1.6 KAFKA_ADVERTISED_PORT: 9093 KAFKA_ZOOKEEPER_CONNECT: 192.168.1.6:2181,192.168.1.6:2182,192.168.1.6:2183 docker-compose-9094.yml version: '3.1' services: kafka: image: wurstmeister/kafka restart: always hostname: kafka ports: - 9094:9092 volumes: - \"~/share/docker/compose-data/kafka/kafka-9094/docker.sock:/var/run/docker.sock\" - \"~/share/docker/compose-data/kafka/kafka-9094:/kafka\" environment: KAFKA_VERSION: 1.1.0 KAFKA_ADVERTISED_HOST_NAME: 192.168.1.6 KAFKA_ADVERTISED_PORT: 9094 KAFKA_ZOOKEEPER_CONNECT: 192.168.1.6:2181,192.168.1.6:2182,192.168.1.6:2183 ËøêË°åzk‰∏ékakfaÈõÜÁæ§&emsp;&emsp;Âà∞ËøôÈáåÔºåÊàë‰ª¨Â∑≤ÁªèÊää‰∏§‰∏™ÁªÑ‰ª∂ÁöÑdocker-composeÊñá‰ª∂ÂÜôÂ•Ω‰∫ÜÔºåÁé∞Âú®Êàë‰ª¨Êù•ËøêË°åÈõÜÁæ§„ÄÇ ËøêË°åzookeeperÈõÜÁæ§Âú®zookeeperÁöÑdocker-composeÊñá‰ª∂Â§π‰∏ãÈù¢ÊâìÂºÄÁªàÁ´ØÔºåËøêË°ådocker-compose upÔºåËøôÈáå‰πüÂèØ‰ª•‰ΩøÁî®docker-compose up -d ÂêéÂè∞ËøêË°å ‚ûú zk-kafka docker-compose up Creating network \"zk-kafka_default\" with the default driver Pulling zoo1 (zookeeper:)... latest: Pulling from library/zookeeper Digest: sha256:a043534003831de15268779b582d407d37291bf7d22292ec7dce242c57a5a2be Status: Downloaded newer image for zookeeper:latest Creating zk-kafka_zoo3_1 ... done Creating zk-kafka_zoo2_1 ... done Creating zk-kafka_zoo1_1 ... done Attaching to zk-kafka_zoo1_1, zk-kafka_zoo3_1, zk-kafka_zoo2_1 zoo1_1 | ZooKeeper JMX enabled by default zoo3_1 | ZooKeeper JMX enabled by default zoo1_1 | Using config: /conf/zoo.cfg zoo3_1 | Using config: /conf/zoo.cfg zoo2_1 | ZooKeeper JMX enabled by default zoo2_1 | Using config: /conf/zoo.cfg zoo1_1 | log4j:WARN No appenders could be found for logger (org.apache.zookeeper.server.quorum.QuorumPeerConfig). zoo1_1 | log4j:WARN Please initialize the log4j system properly. zoo1_1 | log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. zoo3_1 | log4j:WARN No appenders could be found for logger (org.apache.zookeeper.server.quorum.QuorumPeerConfig). zoo3_1 | log4j:WARN Please initialize the log4j system properly. zoo3_1 | log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. zoo2_1 | log4j:WARN No appenders could be found for logger (org.apache.zookeeper.server.quorum.QuorumPeerConfig). zoo2_1 | log4j:WARN Please initialize the log4j system properly. zoo2_1 | log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. Êü•ÁúãzookeeperÁöÑËøêË°åÊÉÖÂÜµÊñ∞ÂºÄÁªàÁ´ØÔºåÊâßË°ådocker psÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨Â∑≤ÁªèÊúâ‰∏â‰∏™zookeeperÂÆû‰æãÂ∑≤ÁªèËøêË°åËµ∑Êù•‰∫Ü ‚ûú ~ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 7278fca16a38 zookeeper \"/docker-entrypoint.‚Ä¶\" 24 seconds ago Up 27 seconds 2888/tcp, 0.0.0.0:2181->2181/tcp, 3888/tcp zk-kafka_zoo1_1 bc396f78a9d4 zookeeper \"/docker-entrypoint.‚Ä¶\" 24 seconds ago Up 27 seconds 2888/tcp, 3888/tcp, 0.0.0.0:2183->2181/tcp zk-kafka_zoo3_1 dd9b8be8eebe zookeeper \"/docker-entrypoint.‚Ä¶\" 24 seconds ago Up 26 seconds 2888/tcp, 3888/tcp, 0.0.0.0:2182->2181/tcp zk-kafka_zoo2_1 ËøêË°åkakfaÂú®kakfaÁöÑdocker-compose-909*.ymlÊñá‰ª∂Â§π‰∏ãÈù¢ÂàÜÂ∏ÉÊâßË°å‰∏ãÈù¢‰∏â‰∏™ÂëΩ‰ª§ # ÈõÜÁæ§ÂêØÂä®ÊñπÂºè docker-compose -f docker-compose-9092.yml up -d docker-compose -f docker-compose-9093.yml scale kafka=2 docker-compose -f docker-compose-9094.yml scale kafka=3 Êü•ÁúãkafkaÁöÑËøêË°åÊÉÖÂÜµdocker ps ÂèØ‰ª•ÁúãÂà∞Áé∞Âú®Â∑≤ÁªèÊúâ‰∏â‰∏™zookeeperÂÆû‰æãÂíå‰∏â‰∏™kafkaÂÆû‰æã ‚ûú ~ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 31e7e8ad1fc5 wurstmeister/kafka \"start-kafka.sh\" 29 seconds ago Up 37 seconds 0.0.0.0:9094->9092/tcp zk-kafka_kafka_3 d9c1fa25f46e wurstmeister/kafka \"start-kafka.sh\" 35 seconds ago Up 43 seconds 0.0.0.0:9093->9092/tcp zk-kafka_kafka_2 caf6b21ba709 wurstmeister/kafka \"start-kafka.sh\" 44 seconds ago Up 52 seconds 0.0.0.0:9092->9092/tcp zk-kafka_kafka_1 7278fca16a38 zookeeper \"/docker-entrypoint.‚Ä¶\" 37 minutes ago Up About a minute 2888/tcp, 0.0.0.0:2181->2181/tcp, 3888/tcp zk-kafka_zoo1_1 bc396f78a9d4 zookeeper \"/docker-entrypoint.‚Ä¶\" 37 minutes ago Up About a minute 2888/tcp, 3888/tcp, 0.0.0.0:2183->2181/tcp zk-kafka_zoo3_1 dd9b8be8eebe zookeeper \"/docker-entrypoint.‚Ä¶\" 37 minutes ago Up About a minute 2888/tcp, 3888/tcp, 0.0.0.0:2182->2181/tcp zk-kafka_zoo2_1 ‰ΩøÁî®kafkaÈõÜÁæ§ËøõË°åÊ∂àÊÅØÁîü‰∫ß‰∏éÊ∂àË¥πËøõÂÖ•kafkaÂÆπÂô®docker exec -it [container-name] /bin/bashÔºåËøôÈáå‰ΩøÁî®ÁöÑÊòØÂÆπÂô®ÁöÑÂêçÁß∞ÔºåÂõ†‰∏∫Êúâ‰∏â‰∏™kafkaÈõÜÁæ§ÔºåÈÄöËøádocker psÂèØ‰ª•ÁúãÂà∞ÂàÜÂà´ÊòØÔºàzk-kafka_kafka_1Ôºåzk-kafka_kafka_2Ôºåzk-kafka_kafka_3ÔºâÊâÄ‰ª•Èöè‰æø‰∏Ä‰∏™ÈÉΩÂèØ‰ª• # ËøõÂÖ•kafkaÂÆπÂô® docker exec -it zk-kafka_kafka_1 /bin/bash # ËøõÂÖ•ÂÆâË£ÖÁõÆÂΩï cd /opt/kafka/ # Êü•ÁúãtopicÂàóË°® ./bin/kafka-topics.sh --list --zookeeper 192.168.1.6:2181 # ÂàõÂª∫ topic ./bin/kafka-topics.sh --create --zookeeper 192.168.1.6:2181 --replication-factor 1 --partitions 1 --topic test # Áîü‰∫ßÊ∂àÊÅØ ./bin/kafka-console-producer.sh --broker-list 192.168.1.6:9092 --topic test # Ê∂àË¥πÊ∂àÊÅØ ./bin/kafka-console-consumer.sh --bootstrap-server 192.168.1.6:9092 --topic test --from-beginning Êü•ÁúãtopicÂàóË°®‚ûú ~ docker exec -it zk-kafka_kafka_1 /bin/bash bash-4.4# cd /opt/kafka bash-4.4# pwd /opt/kafka bash-4.4# ./bin/kafka-topics.sh --list --zookeeper 192.168.1.6:2181 bash-4.4# ÂàõÂª∫topic‚ûú ~ docker exec -it zk-kafka_kafka_1 /bin/bash bash-4.4# cd /opt/kafka bash-4.4# pwd /opt/kafka bash-4.4# ./bin/kafka-topics.sh --list --zookeeper 192.168.1.6:2181 ion-factor 1 --partitions 1 --topic test --zookeeper 192.168.1.6:2181 --replicati Created topic \"test\". bash-4.4# Ê∂àÊÅØÁöÑÁîü‰∫ß‰∏éÊ∂àË¥πÊâìÂºÄ‰∏§‰∏™ÁªàÁ´ØËøõÂÖ•ÂÆπÂô®Ôºå‰∏Ä‰∏™‰Ωú‰∏∫Áîü‰∫ßËÄÖÁîü‰∫ßÊ∂àÊÅØÔºå‰∏Ä‰∏™‰Ωú‰∏∫Ê∂àË¥πËÄÖÊ∂àË¥πÊ∂àÊÅØ Áîü‰∫ßËÄÖ‰ΩøÁî®zk-kafka_kafka_1ÂÆπÂô®Ôºåzk‰ΩøÁî®9092Á´ØÂè£ ‚ûú zk-kafka docker exec -it zk-kafka_kafka_1 /bin/bash bash-4.4# cd /opt/kafka bash-4.4# ./bin/kafka-console-producer.sh --broker-list 192.168.1.6:9092 --topic test >123 >ÊµãËØïÊï∞ÊçÆ >test data >ÈòøÁâõ > Ê∂àË¥πËÄÖzk-kafka_kafka_2Ôºåzk‰ΩøÁî®9093Á´ØÂè£ ‚ûú ~ docker exec -it zk-kafka_kafka_2 /bin/bash bash-4.4# cd /opt/kafka bash-4.4# ./bin/kafka-console-consumer.sh --bootstrap-server 192.168.1.6:9093 --topic test --from-beginning 123 ÊµãËØïÊï∞ÊçÆ test data ÈòøÁâõ Ê∂àË¥πËÄÖzk-kafka_kafka_3Ôºåzk‰ΩøÁî®9094Á´ØÂè£ ‚ûú ~ docker exec -it zk-kafka_kafka_3 /bin/bash bash-4.4# cd /opt/kafka bash-4.4# ./bin/kafka-console-consumer.sh --bootstrap-server 192.168.1.6:9094 --topic test --from-beginning 123 ÊµãËØïÊï∞ÊçÆ test data ÈòøÁâõ Ëá≥Ê≠§ÔºåzookeeperÂíåkakfaÈõÜÁæ§Êê≠Âª∫Âà∞Ê≠§ÁªìÊùü Â∞èÁªì‰∏≠Èó¥Ë∏©‰∫ÜÂæàÂ§öÂùëÔºåÁΩë‰∏äÂèÇËÄÉ‰∫ÜÂæàÂ§öÊïôÁ®ãÔºåÈáçÁÇπËøòÊòØÈúÄË¶ÅËá™Â∑±Âä®ÊâãÊäòËÖæ ÂèÇËÄÉdocker‰ªéÂÖ•Èó®Âà∞ÂÆûË∑µ kakfa-docker DockerÈÉ®ÁΩ≤KafkaÈõÜÁæ§ zookeeper-docker","categories":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/tags/docker/"}]},{"title":"docker-compose-Âü∫Á°Ä","slug":"docker-compose-start","date":"2018-07-11T13:32:06.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2018/07/11/docker-compose-start/","link":"","permalink":"http://iogogogo.github.io/2018/07/11/docker-compose-start/","excerpt":"","text":"docker-compose‰ªãÁªçDocker-Compose ÊòØ Docker ÁöÑ‰∏ÄÁßçÁºñÊéíÊúçÂä°ÔºåÊòØ‰∏Ä‰∏™Áî®‰∫éÂú® Docker ‰∏äÂÆö‰πâÂπ∂ËøêË°åÂ§çÊùÇÂ∫îÁî®ÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•ËÆ©Áî®Êà∑Âú®ÈõÜÁæ§‰∏≠ÈÉ®ÁΩ≤ÂàÜÂ∏ÉÂºèÂ∫îÁî®„ÄÇ Compose ‰∏≠Êúâ‰∏§‰∏™ÈáçË¶ÅÁöÑÊ¶ÇÂøµÔºö ÊúçÂä° (service) Ôºö‰∏Ä‰∏™Â∫îÁî®ÁöÑÂÆπÂô®ÔºåÂÆûÈôÖ‰∏äÂèØ‰ª•ÂåÖÊã¨Ëã•Âπ≤ËøêË°åÁõ∏ÂêåÈïúÂÉèÁöÑÂÆπÂô®ÂÆû‰æã„ÄÇ È°πÁõÆ (project) ÔºöÁî±‰∏ÄÁªÑÂÖ≥ËÅîÁöÑÂ∫îÁî®ÂÆπÂô®ÁªÑÊàêÁöÑ‰∏Ä‰∏™ÂÆåÊï¥‰∏öÂä°ÂçïÂÖÉÔºåÂú® docker-compose.yml Êñá‰ª∂‰∏≠ÂÆö‰πâ„ÄÇ ‰∏Ä‰∏™È°πÁõÆÂèØ‰ª•Áî±Â§ö‰∏™ÊúçÂä°ÔºàÂÆπÂô®ÔºâÂÖ≥ËÅîËÄåÊàêÔºåCompose Èù¢ÂêëÈ°πÁõÆËøõË°åÁÆ°ÁêÜÔºåÈÄöËøáÂ≠êÂëΩ‰ª§ÂØπÈ°πÁõÆ‰∏≠ÁöÑ‰∏ÄÁªÑÂÆπÂô®ËøõË°å‰æøÊç∑Âú∞ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ„ÄÇ Compose È°πÁõÆÁî± Python ÁºñÂÜôÔºåÂÆûÁé∞‰∏äË∞ÉÁî®‰∫Ü Docker ÊúçÂä°Êèê‰æõÁöÑ API Êù•ÂØπÂÆπÂô®ËøõË°åÁÆ°ÁêÜ„ÄÇÂõ†Ê≠§ÔºåÂè™Ë¶ÅÊâÄÊìç‰ΩúÁöÑÂπ≥Âè∞ÊîØÊåÅ Docker APIÔºåÂ∞±ÂèØ‰ª•Âú®ÂÖ∂‰∏äÂà©Áî® Compose Êù•ËøõË°åÁºñÊéíÁÆ°ÁêÜ„ÄÇ docker-composeÂÆâË£Ödocker-compose ÊòØ Docker ÁöÑÁã¨Á´ã‰∫ßÂìÅÔºåÂõ†Ê≠§ÈúÄË¶ÅÂÆâË£Ö Docker ‰πãÂêéÂú®ÂçïÁã¨ÂÆâË£Ö Docker Compose „ÄÇ Ë¶ÅÂÆâË£ÖÂÖ∂‰ªñÁâàÊú¨ÁöÑ ComposeÔºåËØ∑ÊõøÊç¢ v2.2.2„ÄÇ #‰∏ãËΩΩ sudo curl -L \"https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose #Ëµã‰∫à‰∫åËøõÂà∂Êñá‰ª∂ÊâßË°åÊùÉÈôê chmod +x /usr/local/bin/docker-compose # ÂàõÂª∫ËΩØÈìæ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose # ÊòæÁ§∫docker-composeÁâàÊú¨ docker-compose version docker-composeË°•ÂÖ®Â∑•ÂÖ∑ÂÆâË£Ö #ÂÆâË£Ö yum install bash-completion #‰∏ãËΩΩdocker-composeËÑöÊú¨ curl -L https://raw.githubusercontent.com/docker/compose/$(docker-compose version --short)/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose docker-composeÂ∏∏Áî®ÂëΩ‰ª§ #Êü•ÁúãÂ∏ÆÂä© docker-compose -h # -f ÊåáÂÆö‰ΩøÁî®ÁöÑ Compose Ê®°ÊùøÊñá‰ª∂ÔºåÈªòËÆ§‰∏∫ docker-compose.ymlÔºåÂèØ‰ª•Â§öÊ¨°ÊåáÂÆö„ÄÇ docker-compose -f docker-compose.yml up -d #ÂêØÂä®ÊâÄÊúâÂÆπÂô®Ôºå-d Â∞Ü‰ºöÂú®ÂêéÂè∞ÂêØÂä®Âπ∂ËøêË°åÊâÄÊúâÁöÑÂÆπÂô® docker-compose up -d #ÂÅúÁî®ÁßªÈô§ÊâÄÊúâÂÆπÂô®‰ª•ÂèäÁΩëÁªúÁõ∏ÂÖ≥ docker-compose down #Êü•ÁúãÊúçÂä°ÂÆπÂô®ÁöÑËæìÂá∫ docker-compose logs #ÂàóÂá∫È°πÁõÆ‰∏≠ÁõÆÂâçÁöÑÊâÄÊúâÂÆπÂô® docker-compose ps #ÊûÑÂª∫ÔºàÈáçÊñ∞ÊûÑÂª∫ÔºâÈ°πÁõÆ‰∏≠ÁöÑÊúçÂä°ÂÆπÂô®„ÄÇÊúçÂä°ÂÆπÂô®‰∏ÄÊó¶ÊûÑÂª∫ÂêéÔºåÂ∞Ü‰ºöÂ∏¶‰∏ä‰∏Ä‰∏™Ê†áËÆ∞ÂêçÔºå‰æãÂ¶ÇÂØπ‰∫é web È°πÁõÆ‰∏≠ÁöÑ‰∏Ä‰∏™ db ÂÆπÂô®ÔºåÂèØËÉΩÊòØ web_db„ÄÇÂèØ‰ª•ÈöèÊó∂Âú®È°πÁõÆÁõÆÂΩï‰∏ãËøêË°å docker-compose build Êù•ÈáçÊñ∞ÊûÑÂª∫ÊúçÂä° docker-compose build #ÊãâÂèñÊúçÂä°‰æùËµñÁöÑÈïúÂÉè docker-compose pull #ÈáçÂêØÈ°πÁõÆ‰∏≠ÁöÑÊúçÂä° docker-compose restart #Âà†Èô§ÊâÄÊúâÔºàÂÅúÊ≠¢Áä∂ÊÄÅÁöÑÔºâÊúçÂä°ÂÆπÂô®„ÄÇÊé®ËçêÂÖàÊâßË°å docker-compose stop ÂëΩ‰ª§Êù•ÂÅúÊ≠¢ÂÆπÂô®„ÄÇ docker-compose rm #Âú®ÊåáÂÆöÊúçÂä°‰∏äÊâßË°å‰∏Ä‰∏™ÂëΩ‰ª§„ÄÇ docker-compose run ubuntu ping docker.com #ËÆæÁΩÆÊåáÂÆöÊúçÂä°ËøêË°åÁöÑÂÆπÂô®‰∏™Êï∞„ÄÇÈÄöËøá service=num ÁöÑÂèÇÊï∞Êù•ËÆæÁΩÆÊï∞Èáè docker-compose scale web=3 db=2 #ÂêØÂä®Â∑≤ÁªèÂ≠òÂú®ÁöÑÊúçÂä°ÂÆπÂô®„ÄÇ docker-compose start #ÂÅúÊ≠¢Â∑≤ÁªèÂ§Ñ‰∫éËøêË°åÁä∂ÊÄÅÁöÑÂÆπÂô®Ôºå‰ΩÜ‰∏çÂà†Èô§ÂÆÉ„ÄÇÈÄöËøá docker-compose start ÂèØ‰ª•ÂÜçÊ¨°ÂêØÂä®Ëøô‰∫õÂÆπÂô®„ÄÇ docker-compose stop Êú¨ÁØáÂÖ®ÊòØÂü∫Êú¨ÁöÑÂÆâË£ÖÂíåÂëΩ‰ª§Ôºå‰∏ãÁØáÈÄöËøádockerÂíådocker-composeÊûÑÂª∫‰∏Ä‰∫õÂ∏∏Áî®ÁöÑËΩØ‰ª∂ËøêË°åÁéØÂ¢É ÂèÇËÄÉDocker(Âõõ)ÔºöDocker ‰∏âÂâëÂÆ¢‰πã Docker Compose","categories":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/tags/docker/"}]},{"title":"docke-ÂÆâË£Ö","slug":"docker-start","date":"2018-07-10T14:31:39.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2018/07/10/docker-start/","link":"","permalink":"http://iogogogo.github.io/2018/07/10/docker-start/","excerpt":"","text":"dockerÂÆâË£ÖÂª∫ËÆÆÂú®linuxÁéØÂ¢É‰∏ãÂÆâË£ÖDockerÔºåwindowÁéØÂ¢ÉÊê≠Âª∫ÊØîËæÉÂ§çÊùÇ‰∏îÂÆπÊòìÂá∫ÈîôÔºå‰ΩøÁî®Centos7+yumÊù•ÂÆâË£ÖDockerÁéØÂ¢ÉÂæàÊñπ‰æø„ÄÇ # Âç∏ËΩΩÊóßÁâàÊú¨docker sudo yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-selinux \\ docker-engine-selinux \\ docker-engine # ÂÆâË£Öyum-utils sudo yum install -y yum-utils \\ device-mapper-persistent-data \\ lvm2 # ÈÖçÁΩÆdocker-ce.repo sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo # ÂÆâË£Ödocker-ce sudo yum install docker-ce # ÂêØÂä®docker sudo systemctl start docker # DockerÂÆàÊä§ËøõÁ®ãËá™ÂêØÂä® sudo systemctl enable docker.service # ÊòæÁ§∫dockerÁâàÊú¨ docker --version ËÆæÁΩÆ‰∏≠ÂõΩÈïúÂÉèÂä†ÈÄüÂô®# ÁºñËæëdaemon.jsonÊñá‰ª∂ vim /etc/docker/daemon.json # Ê∑ªÂä†Âä†ÈÄüÂÜÖÂÆπ { \"registry-mirrors\": [\"https://registry.docker-cn.com\"], \"live-restore\": true } dockerÂ∏∏Áî®ÂëΩ‰ª§ ÊãâÂèñÈïúÂÉè docker pull [image_name] # Ëé∑ÂèñredisÈïúÂÉè docker pull redis Using default tag: latest latest: Pulling from library/redis 683abbb4ea60: Pull complete 259238e792d8: Pull complete 78399601c709: Pull complete f397da474601: Pull complete c57de4edc390: Pull complete b2ea05c9d9a1: Pull complete Digest: sha256:5534b92530acc653f0721ebfa14f31bc718f68bf9070cbba25bb00bc7aacfabb Status: Downloaded newer image for redis:latest Êü•ÁúãÊâÄÊúâÈïúÂÉèdocker images # Êü•ÁúãÊâÄÊúâÈïúÂÉè docker images REPOSITORY TAG IMAGE ID CREATED SIZE jenkins latest e2541428ed0d 7 days ago 696MB redis latest 71a81cb279e3 13 days ago 83.4MB zookeeper latest 397be0d8fa45 3 weeks ago 146MB Âà†Èô§ÈïúÂÉè docker rmi redis ÊàñËÄÖ docker rmi 71a81cb279e3 Êü•ÁúãÊâÄÊúâËøêË°åÁöÑÂÆπÂô®docker ps docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES eb5abaa4710a mysql:5.7.20 \"docker-entrypoint.s‚Ä¶\" 6 weeks ago Up 6 minutes 0.0.0.0:10100->3306/tcp mysql # ËøôÈáåÂèØ‰ª•Ê∑ªÂä† -a ÂèÇÊï∞ÔºåÊü•ÁúãÊâÄÊúâÂÆπÂô®ÔºåÂåÖÊã¨Ê≤°ÊúâËøêË°åÁöÑ Êü•ÁúãÂÆπÂô®ËøêË°åÊó•Âøó docker logs -f ‚Äìtail 20 [container_name] # -f Ë°®Á§∫Ë∑üË∏™Êó•ÂøóËæìÂá∫ --tail Ë°®Á§∫ÊåÅÁª≠ËæìÂá∫ 20Ë°®Á§∫Á¨¨‰∏ÄÊ¨°Êü•ÁúãÁöÑË°åÊï∞ ÊúÄÂêéÊòØÂÆπÂô®ÂêçÁß∞ docker logs -f --tail 20 [container_name] 2018-07-10T14:49:21.476230Z 0 [Warning] CA certificate ca.pem is self signed. 2018-07-10T14:49:21.481000Z 0 [Note] InnoDB: Buffer pool(s) load completed at 180710 ËøõÂÖ•ËøêË°åÁöÑÂÆπÂô®docker exec -it [container_name] bash ÂΩìÁÑ∂ËøõÂÖ•ÂÆπÂô®ÁöÑÊñπÂºèÂæàÂ§öÔºå‰ΩÜÊòØÂÆòÊñπÊé®ËçêÊ≠§ÊñπÂºèÔºåÂÖ∂‰ªñÊñπÂºèÊÑüÂÖ¥Ë∂£ÂèØ‰ª•ÂèÇËÄÉÊ≠§ÊñáÁ´†Ôºö nsenterËøõÂÖ•ÂêéÂè∞ËøêË°åÁöÑDockerÂÆπÂô® # ËøõÂÖ•ÂÆπÂô® docker exec -it redis bash # ÈÄÄÂá∫ÂÆπÂô® exit Âà†Èô§ÊâÄÊúâÂÅúÊ≠¢ÁöÑÂÆπÂô® docker rm $(docker ps -a -q) Âà†Èô§ÂÆπÂô® docker rm container_name/container_id ÂêØÂä®„ÄÅÂÅúÊ≠¢„ÄÅÈáçÂêØÂÆπÂô® docker start container_name/container_id docker stop container_name/container_id docker restart container_name/container_id dockerÂÆâË£ÖÂ∏∏ËßÅÈóÆÈ¢òÂêØÂä®Êä•Èîô Job for docker.service failed. See &#39;systemctl status docker.service&#39; and &#39;journalctl -xn&#39; for details. Ëß£ÂÜ≥ÊñπÊ°à1: # Êü•ÁúãSELinuxÁä∂ÊÄÅÔºö /usr/sbin/sestatus -v ##Â¶ÇÊûúSELinux statusÂèÇÊï∞‰∏∫enabledÂç≥‰∏∫ÂºÄÂêØÁä∂ÊÄÅ SELinux status: enabled getenforce ##‰πüÂèØ‰ª•Áî®Ëøô‰∏™ÂëΩ‰ª§Ê£ÄÊü• # ÂÖ≥Èó≠SELinuxÔºö 1„ÄÅ‰∏¥Êó∂ÂÖ≥Èó≠Ôºà‰∏çÁî®ÈáçÂêØÊú∫Âô®ÔºâÔºö setenforce 0 ##ËÆæÁΩÆSELinux Êàê‰∏∫permissiveÊ®°Âºè ##setenforce 1 ËÆæÁΩÆSELinux Êàê‰∏∫enforcingÊ®°Âºè 2„ÄÅ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÈúÄË¶ÅÈáçÂêØÊú∫Âô®Ôºö ‰øÆÊîπ/etc/selinux/config Êñá‰ª∂ Â∞ÜSELINUX=enforcingÊîπ‰∏∫SELINUX=disabled ÈáçÂêØÊú∫Âô®Âç≥ÂèØ Ëß£ÂÜ≥ÊñπÊ°à2: # ÂçáÁ∫ßyumÔºåÈáçÊñ∞ÂÆâË£Ödocker yum update # Âç∏ËΩΩdocker sudo yum -y remove docker-ce sudo rm -rf /var/lib/docker # ÈáçÊñ∞ÂÆâË£Ö ÂèÇËÄÉÈìæÊé•dockerÂÆòÁΩë ÂÖ≥Èó≠SELinux","categories":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/tags/docker/"}]},{"title":"eclipse ‰ΩøÁî® maven ÊûÑÂª∫webÈ°πÁõÆ","slug":"eclipse-mvn-build-web-project","date":"2017-09-28T15:13:53.000Z","updated":"2024-07-01T12:30:37.370Z","comments":true,"path":"2017/09/28/eclipse-mvn-build-web-project/","link":"","permalink":"http://iogogogo.github.io/2017/09/28/eclipse-mvn-build-web-project/","excerpt":"","text":"ÁéØÂ¢ÉÂáÜÂ§á apache-maven-3.3.9 apache-tomcat-8.5.20 eclipse-jee-neon-3 jdk1.8.0_131 MavenÂü∫Êú¨ÈÖçÁΩÆ ‰øÆÊîπ setting.xml Êñá‰ª∂apache-tomcat-8.5.20/conf/settings.xml 1.‰ªìÂ∫ìÊú¨Âú∞Â≠òÂÇ®‰ΩçÁΩÆ 2.ÈÖçÁΩÆÈòøÈáå‰∫ëÂõΩÂÜÖÁöÑ‰∏≠Â§Æ‰ªìÂ∫ìÔºåÊèêÂçá‰∏ãËΩΩÈÄüÂ∫¶ mirrors ËäÇÁÇπÂÜÖ` alimaven central aliyun maven http://maven.aliyun.com/nexus/content/repositories/central/ &lt;mirror&gt; &lt;id&gt;repo1&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;repo2&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;http://repo2.maven.org/maven2/&lt;/url&gt; &lt;/mirror&gt; ![ÈòøÈáå‰∫ëmavenÈïúÂÉè](http://upload-images.jianshu.io/upload_images/7779890-fdbaf1e3853ed100.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) &gt; 3.ÈÖçÁΩÆÁºñËØëÊó∂ÁöÑjdkÁâàÊú¨ÔºåÂèØ‰ª•Âú®ËøôÈáåÈÖçÁΩÆÂÖ®Â±ÄÔºå‰πüÂèØ‰ª•Ê†πÊçÆÈ°πÁõÆÈÖçÁΩÆ profiles ËäÇÁÇπÂÜÖ jdk1.8 true 1.8 &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; ` eclipse ÈõÜÊàêmavenÊèí‰ª∂ Êñ∞Âª∫mavenÈ°πÁõÆ Â∞ÜÈ°πÁõÆËΩ¨Êç¢Êàêmaven web È°πÁõÆÂè≥ÈîÆÊâìÂºÄÈ°πÁõÆËÆæÁΩÆ ‰ΩÜÊòØÁé∞Âú®Ëøô‰∏™‰∏çÊòØ‰∏Ä‰∏™Ê†áÂáÜÁöÑwebÈ°πÁõÆÔºåÁªßÁª≠‰øÆÊîπÈ°πÁõÆÁªìÊûÑÔºåÂ∞ÜWebContentÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂Êã∑Ë¥ùÂà∞main/webappÁõÆÂΩï‰∏ãÈù¢ÔºåÂà†Èô§WebContentÁõÆÂΩïÔºåÁªìÊûÑÂ¶Ç‰∏ã ÈÖçÁΩÆËøêË°åËØ•È°πÁõÆ Âú®webappÂè≥ÈîÆÊñ∞Âª∫‰∏Ä‰∏™html Êñá‰ª∂ 2.ÈÖçÁΩÆ tomcat 3.ËøêË°å eclipse ÈõÜÊàê maven ÊûÑÂª∫ web È°πÁõÆÂÆåÊàê ÊúÄÂêéÊé®Ëçê‰∏ÄÁØáÊñáÁ´†ÔºöÂú® idea ‰∏≠Â¶Ç‰Ωï‰ΩøÁî® maven ÊûÑÂª∫È°πÁõÆhttps://yq.aliyun.com/articles/111053","categories":[{"name":"Â∑•ÂÖ∑‰ΩøÁî®","slug":"Â∑•ÂÖ∑‰ΩøÁî®","permalink":"http://iogogogo.github.io/categories/Â∑•ÂÖ∑‰ΩøÁî®/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"}]},{"title":"ÈòøÁâõ","slug":"index","date":"2017-09-05T13:26:39.000Z","updated":"2024-07-01T12:30:37.372Z","comments":true,"path":"2017/09/05/index/","link":"","permalink":"http://iogogogo.github.io/2017/09/05/index/","excerpt":"","text":"ËÆ∞ÂΩïÂ∑•‰Ωú‰∏≠ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÂíåÁ¨îËÆ∞„ÄÇ","categories":[],"tags":[{"name":"ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞","slug":"ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞","permalink":"http://iogogogo.github.io/tags/ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞/"}]}],"categories":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/categories/Git/"},{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/categories/ÂçöÂÆ¢ÈÄâÂûã/"},{"name":"zsh","slug":"zsh","permalink":"http://iogogogo.github.io/categories/zsh/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/categories/Spring-Boot/"},{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/categories/MySQL/"},{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/categories/Java/"},{"name":"Maven","slug":"Maven","permalink":"http://iogogogo.github.io/categories/Maven/"},{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/categories/Kafka/"},{"name":"Spring","slug":"Kafka/Spring","permalink":"http://iogogogo.github.io/categories/Kafka/Spring/"},{"name":"Hadoop","slug":"Hadoop","permalink":"http://iogogogo.github.io/categories/Hadoop/"},{"name":"Redis","slug":"Redis","permalink":"http://iogogogo.github.io/categories/Redis/"},{"name":"Guava","slug":"Guava","permalink":"http://iogogogo.github.io/categories/Guava/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://iogogogo.github.io/categories/MyBatis/"},{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/categories/Gson/"},{"name":"Ê≠£ÂàôË°®ËææÂºè","slug":"Ê≠£ÂàôË°®ËææÂºè","permalink":"http://iogogogo.github.io/categories/Ê≠£ÂàôË°®ËææÂºè/"},{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/categories/Vertica/"},{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/categories/maven/"},{"name":"Â∑•ÂÖ∑‰ΩøÁî®","slug":"Â∑•ÂÖ∑‰ΩøÁî®","permalink":"http://iogogogo.github.io/categories/Â∑•ÂÖ∑‰ΩøÁî®/"},{"name":"Spring","slug":"Spring","permalink":"http://iogogogo.github.io/categories/Spring/"},{"name":"tools","slug":"tools","permalink":"http://iogogogo.github.io/categories/tools/"},{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/categories/Java8/"},{"name":"Swagger","slug":"Swagger","permalink":"http://iogogogo.github.io/categories/Swagger/"},{"name":"PMPÂÆûÊàò","slug":"PMPÂÆûÊàò","permalink":"http://iogogogo.github.io/categories/PMPÂÆûÊàò/"},{"name":"WebÂºÄÂèë","slug":"WebÂºÄÂèë","permalink":"http://iogogogo.github.io/categories/WebÂºÄÂèë/"},{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/categories/Spring-Cloud/"},{"name":"MacBook","slug":"MacBook","permalink":"http://iogogogo.github.io/categories/MacBook/"},{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://iogogogo.github.io/categories/elasticsearch/"},{"name":"Jenkins","slug":"Jenkins","permalink":"http://iogogogo.github.io/categories/Jenkins/"},{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/categories/docker/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://iogogogo.github.io/tags/Git/"},{"name":"ÂçöÂÆ¢ÈÄâÂûã","slug":"ÂçöÂÆ¢ÈÄâÂûã","permalink":"http://iogogogo.github.io/tags/ÂçöÂÆ¢ÈÄâÂûã/"},{"name":"zsh","slug":"zsh","permalink":"http://iogogogo.github.io/tags/zsh/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://iogogogo.github.io/tags/Spring-Boot/"},{"name":"MySQL","slug":"MySQL","permalink":"http://iogogogo.github.io/tags/MySQL/"},{"name":"Java","slug":"Java","permalink":"http://iogogogo.github.io/tags/Java/"},{"name":"hexo","slug":"hexo","permalink":"http://iogogogo.github.io/tags/hexo/"},{"name":"cron","slug":"cron","permalink":"http://iogogogo.github.io/tags/cron/"},{"name":"logstash","slug":"logstash","permalink":"http://iogogogo.github.io/tags/logstash/"},{"name":"Logstash","slug":"Logstash","permalink":"http://iogogogo.github.io/tags/Logstash/"},{"name":"Maven","slug":"Maven","permalink":"http://iogogogo.github.io/tags/Maven/"},{"name":"Kafka","slug":"Kafka","permalink":"http://iogogogo.github.io/tags/Kafka/"},{"name":"Hadoop","slug":"Hadoop","permalink":"http://iogogogo.github.io/tags/Hadoop/"},{"name":"Redis","slug":"Redis","permalink":"http://iogogogo.github.io/tags/Redis/"},{"name":"Guava","slug":"Guava","permalink":"http://iogogogo.github.io/tags/Guava/"},{"name":"map","slug":"map","permalink":"http://iogogogo.github.io/tags/map/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://iogogogo.github.io/tags/MyBatis/"},{"name":"Gson","slug":"Gson","permalink":"http://iogogogo.github.io/tags/Gson/"},{"name":"Java8","slug":"Java8","permalink":"http://iogogogo.github.io/tags/Java8/"},{"name":"Nginx","slug":"Nginx","permalink":"http://iogogogo.github.io/tags/Nginx/"},{"name":"Vertica","slug":"Vertica","permalink":"http://iogogogo.github.io/tags/Vertica/"},{"name":"maven","slug":"maven","permalink":"http://iogogogo.github.io/tags/maven/"},{"name":"IDEA","slug":"IDEA","permalink":"http://iogogogo.github.io/tags/IDEA/"},{"name":"spring","slug":"spring","permalink":"http://iogogogo.github.io/tags/spring/"},{"name":"transaction","slug":"transaction","permalink":"http://iogogogo.github.io/tags/transaction/"},{"name":"AspectJ","slug":"AspectJ","permalink":"http://iogogogo.github.io/tags/AspectJ/"},{"name":"Aop","slug":"Aop","permalink":"http://iogogogo.github.io/tags/Aop/"},{"name":"linux","slug":"linux","permalink":"http://iogogogo.github.io/tags/linux/"},{"name":"Swagger","slug":"Swagger","permalink":"http://iogogogo.github.io/tags/Swagger/"},{"name":"PMP","slug":"PMP","permalink":"http://iogogogo.github.io/tags/PMP/"},{"name":"FTP","slug":"FTP","permalink":"http://iogogogo.github.io/tags/FTP/"},{"name":"Vue","slug":"Vue","permalink":"http://iogogogo.github.io/tags/Vue/"},{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"http://iogogogo.github.io/tags/Spring-Cloud/"},{"name":"Mac","slug":"Mac","permalink":"http://iogogogo.github.io/tags/Mac/"},{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://iogogogo.github.io/tags/elasticsearch/"},{"name":"Jenkins","slug":"Jenkins","permalink":"http://iogogogo.github.io/tags/Jenkins/"},{"name":"kafka","slug":"kafka","permalink":"http://iogogogo.github.io/tags/kafka/"},{"name":"docker","slug":"docker","permalink":"http://iogogogo.github.io/tags/docker/"},{"name":"ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞","slug":"ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞","permalink":"http://iogogogo.github.io/tags/ÊúâÂøÉÊÄé‰πà‰ºöÂÅö‰∏çÂà∞/"}]}